var _Ice$Class;function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var c,a=e[Symbol.iterator]();!(i=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(i){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(i);if(r){var n=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof2(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty2(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MultiStreamsMixer(r,o){var e;e="undefined"!=typeof global?global:null,"undefined"==typeof RecordRTC&&e&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),void 0!==global.console.log&&void 0!==global.console.error||(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(e.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},e.HTMLVideoElement=function(){}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}),void 0===n&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=global),o=o||"multi-streams-mixer";var c=[],a=!1,s=document.createElement("canvas"),l=s.getContext("2d");s.style.opacity=0,s.style.position="absolute",s.style.zIndex=-1,s.style.top="-1000em",s.style.left="-1000em",s.className=o,(document.body||document.documentElement).appendChild(s),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var d=this,t=window.AudioContext;void 0===t&&("undefined"!=typeof webkitAudioContext&&(t=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(t=mozAudioContext));var n=window.URL;void 0===n&&"undefined"!=typeof webkitURL&&(n=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=window.MediaStream;void 0===u&&"undefined"!=typeof webkitMediaStream&&(u=webkitMediaStream),void 0!==u&&void 0===u.prototype.stop&&(u.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})});var i={};function f(){if(!a){var e=c.length,t=!1,n=[];if(c.forEach(function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:n.push(e)}),t)s.width=t.stream.width,s.height=t.stream.height;else if(n.length){s.width=1<e?2*n[0].width:n[0].width;var i=1;3!==e&&4!==e||(i=2),5!==e&&6!==e||(i=3),7!==e&&8!==e||(i=4),9!==e&&10!==e||(i=5),s.height=n[0].height*i}else s.width=d.width||360,s.height=d.height||240;t&&t instanceof HTMLVideoElement&&h(t),n.forEach(function(e,t){h(e,t)}),setTimeout(f,d.frameInterval)}}function h(e,t){if(!a){var n=0,i=0,r=e.width,o=e.height;1===t&&(n=e.width),2===t&&(i=e.height),3===t&&(n=e.width,i=e.height),4===t&&(i=2*e.height),5===t&&(n=e.width,i=2*e.height),6===t&&(i=3*e.height),7===t&&(n=e.width,i=3*e.height),void 0!==e.stream.left&&(n=e.stream.left),void 0!==e.stream.top&&(i=e.stream.top),void 0!==e.stream.width&&(r=e.stream.width),void 0!==e.stream.height&&(o=e.stream.height),l.drawImage(e,n,i,r,o),"function"==typeof e.stream.onRender&&e.stream.onRender(l,n,i,r,o,t)}}function p(){i.AudioContextConstructor||(i.AudioContextConstructor=new i.AudioContext),d.audioContext=i.AudioContextConstructor,d.audioSources=[],!0===d.useGainNode&&(d.gainNode=d.audioContext.createGain(),d.gainNode.connect(d.audioContext.destination),d.gainNode.gain.value=0);var n=0;if(r.forEach(function(e){if(e.getTracks().filter(function(e){return"audio"===e.kind}).length){n++;var t=d.audioContext.createMediaStreamSource(e);!0===d.useGainNode&&t.connect(d.gainNode),d.audioSources.push(t)}}),n)return d.audioDestination=d.audioContext.createMediaStreamDestination(),d.audioSources.forEach(function(e){e.connect(d.audioDestination)}),d.audioDestination.stream}function _(e){var t,n,i=document.createElement("video");return t=e,"srcObject"in(n=i)?n.srcObject=t:"mozSrcObject"in n?n.mozSrcObject=t:n.srcObject=t,i.className=o,i.muted=!0,i.volume=0,i.width=e.width||d.width||360,i.height=e.height||d.height||240,i.play(),i}function C(e){c=[],(e=e||r).forEach(function(e){if(e.getTracks().filter(function(e){return"video"===e.kind}).length){var t=_(e);t.stream=e,c.push(t)}})}void 0!==t?i.AudioContext=t:"undefined"!=typeof webkitAudioContext&&(i.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){f()},this.appendStreams=function(e){if(!e)throw"First parameter is required.";e instanceof Array||(e=[e]),e.forEach(function(e){var t=new u;if(e.getTracks().filter(function(e){return"video"===e.kind}).length){var n=_(e);n.stream=e,c.push(n),t.addTrack(e.getTracks().filter(function(e){return"video"===e.kind})[0])}if(e.getTracks().filter(function(e){return"audio"===e.kind}).length){var i=d.audioContext.createMediaStreamSource(e);d.audioDestination=d.audioContext.createMediaStreamDestination(),i.connect(d.audioDestination),t.addTrack(d.audioDestination.stream.getTracks().filter(function(e){return"audio"===e.kind})[0])}r.push(t)})},this.releaseStreams=function(){c=[],a=!0,d.gainNode&&(d.gainNode.disconnect(),d.gainNode=null),d.audioSources.length&&(d.audioSources.forEach(function(e){e.disconnect()}),d.audioSources=[]),d.audioDestination&&(d.audioDestination.disconnect(),d.audioDestination=null),d.audioContext&&d.audioContext.close(),d.audioContext=null,l.clearRect(0,0,s.width,s.height),s.stream&&(s.stream.stop(),s.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),C(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){a=!1;var t=function(){var e;C(),"captureStream"in s?e=s.captureStream():"mozCaptureStream"in s?e=s.mozCaptureStream():d.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new u;return e.getTracks().filter(function(e){return"video"===e.kind}).forEach(function(e){t.addTrack(e)}),s.stream=t}(),e=p();return e&&e.getTracks().filter(function(e){return"audio"===e.kind}).forEach(function(e){t.addTrack(e)}),r.forEach(function(e){e.fullcanvas&&!0}),t},this.getMixedAudioStream=p}(function(){var oc,cc="Expected a function",ac="__lodash_hash_undefined__",sc="__lodash_placeholder__",lc=128,dc=9007199254740991,uc=NaN,fc=4294967295,hc=[["ary",lc],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],pc="[object Arguments]",_c="[object Array]",Cc="[object Boolean]",gc="[object Date]",Rc="[object Error]",mc="[object Function]",Ic="[object GeneratorFunction]",yc="[object Map]",vc="[object Number]",Sc="[object Object]",Ec="[object Promise]",bc="[object RegExp]",wc="[object Set]",Tc="[object String]",Oc="[object Symbol]",Pc="[object WeakMap]",Mc="[object ArrayBuffer]",Dc="[object DataView]",xc="[object Float32Array]",Ac="[object Float64Array]",Nc="[object Int8Array]",Vc="[object Int16Array]",kc="[object Int32Array]",Lc="[object Uint8Array]",Uc="[object Uint8ClampedArray]",Fc="[object Uint16Array]",jc="[object Uint32Array]",Bc=/\b__p \+= '';/g,Hc=/\b(__p \+=) '' \+/g,qc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Kc=/&(?:amp|lt|gt|quot|#39);/g,Wc=/[&<>"']/g,Gc=RegExp(Kc.source),zc=RegExp(Wc.source),Qc=/<%-([\s\S]+?)%>/g,Xc=/<%([\s\S]+?)%>/g,Jc=/<%=([\s\S]+?)%>/g,Yc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zc=/^\w*$/,$c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ea=/[\\^$.*+?()[\]{}|]/g,ta=RegExp(ea.source),na=/^\s+/,n=/\s/,ia=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ra=/\{\n\/\* \[wrapped with (.+)\] \*/,oa=/,? & /,ca=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,aa=/[()=,{}\[\]\/\s]/,sa=/\\(\\)?/g,la=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,da=/\w*$/,ua=/^[-+]0x[0-9a-f]+$/i,fa=/^0b[01]+$/i,ha=/^\[object .+?Constructor\]$/,pa=/^0o[0-7]+$/i,_a=/^(?:0|[1-9]\d*)$/,Ca=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ga=/($^)/,Ra=/['\n\r\u2028\u2029\\]/g,e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",i="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",c="\\ufe0e\\ufe0f",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",s="['’]",l="["+e+"]",d="["+a+"]",u="["+t+"]",f="\\d+",h="["+i+"]",p="["+r+"]",_="[^"+e+a+f+i+r+o+"]",C="\\ud83c[\\udffb-\\udfff]",g="[^"+e+"]",R="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",I="["+o+"]",y="\\u200d",v="(?:"+p+"|"+_+")",S="(?:"+I+"|"+_+")",E="(?:['’](?:d|ll|m|re|s|t|ve))?",b="(?:['’](?:D|LL|M|RE|S|T|VE))?",w="(?:"+u+"|"+C+")"+"?",T="["+c+"]?",O=T+w+("(?:"+y+"(?:"+[g,R,m].join("|")+")"+T+w+")*"),P="(?:"+[h,R,m].join("|")+")"+O,M="(?:"+[g+u+"?",u,R,m,l].join("|")+")",ma=RegExp(s,"g"),Ia=RegExp(u,"g"),D=RegExp(C+"(?="+C+")|"+M+O,"g"),ya=RegExp([I+"?"+p+"+"+E+"(?="+[d,I,"$"].join("|")+")",S+"+"+b+"(?="+[d,I+v,"$"].join("|")+")",I+"?"+v+"+"+E,I+"+"+b,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",f,P].join("|"),"g"),x=RegExp("["+y+e+t+c+"]"),va=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ea=-1,ba={};ba[xc]=ba[Ac]=ba[Nc]=ba[Vc]=ba[kc]=ba[Lc]=ba[Uc]=ba[Fc]=ba[jc]=!0,ba[pc]=ba[_c]=ba[Mc]=ba[Cc]=ba[Dc]=ba[gc]=ba[Rc]=ba[mc]=ba[yc]=ba[vc]=ba[Sc]=ba[bc]=ba[wc]=ba[Tc]=ba[Pc]=!1;var wa={};wa[pc]=wa[_c]=wa[Mc]=wa[Dc]=wa[Cc]=wa[gc]=wa[xc]=wa[Ac]=wa[Nc]=wa[Vc]=wa[kc]=wa[yc]=wa[vc]=wa[Sc]=wa[bc]=wa[wc]=wa[Tc]=wa[Oc]=wa[Lc]=wa[Uc]=wa[Fc]=wa[jc]=!0,wa[Rc]=wa[mc]=wa[Pc]=!1;var A={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ta=parseFloat,Oa=parseInt,N="object"==("undefined"==typeof global?"undefined":_typeof2(global))&&global&&global.Object===Object&&global,V="object"==("undefined"==typeof self?"undefined":_typeof2(self))&&self&&self.Object===Object&&self,Pa=N||V||Function("return this")(),k="object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&exports&&!exports.nodeType&&exports,L=k&&"object"==("undefined"==typeof module?"undefined":_typeof2(module))&&module&&!module.nodeType&&module,Ma=L&&L.exports===k,U=Ma&&N.process,F=function(){try{var e=L&&L.require&&L.require("util").types;return e||U&&U.binding&&U.binding("util")}catch(e){}}(),Da=F&&F.isArrayBuffer,xa=F&&F.isDate,Aa=F&&F.isMap,Na=F&&F.isRegExp,Va=F&&F.isSet,ka=F&&F.isTypedArray;function La(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ua(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var c=e[r];t(i,c,n(c),e)}return i}function Fa(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function ja(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ba(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function Ha(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var c=e[n];t(c,n,e)&&(o[r++]=c)}return o}function qa(e,t){return!!(null==e?0:e.length)&&-1<Za(e,t,0)}function Ka(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function Wa(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function Ga(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function za(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function Qa(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function Xa(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var j=ns("length");function Ja(e,i,t){var r;return t(e,function(e,t,n){if(i(e,t,n))return r=t,!1}),r}function Ya(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function Za(e,t,n){return t==t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):Ya(e,es,n)}function $a(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function es(e){return e!=e}function ts(e,t){var n=null==e?0:e.length;return n?rs(e,t)/n:uc}function ns(t){return function(e){return null==e?oc:e[t]}}function B(t){return function(e){return null==t?oc:t[e]}}function is(e,i,r,o,t){return t(e,function(e,t,n){r=o?(o=!1,e):i(r,e,t,n)}),r}function rs(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);o!==oc&&(n=n===oc?o:n+o)}return n}function os(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function cs(e){return e?e.slice(0,vs(e)+1).replace(na,""):e}function as(t){return function(e){return t(e)}}function ss(t,e){return Wa(e,function(e){return t[e]})}function ls(e,t){return e.has(t)}function ds(e,t){for(var n=-1,i=e.length;++n<i&&-1<Za(t,e[n],0););return n}function us(e,t){for(var n=e.length;n--&&-1<Za(t,e[n],0););return n}var fs=B({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),hs=B({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ps(e){return"\\"+A[e]}function _s(e){return x.test(e)}function Cs(e){var n=-1,i=Array(e.size);return e.forEach(function(e,t){i[++n]=[t,e]}),i}function gs(t,n){return function(e){return t(n(e))}}function Rs(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var c=e[n];c!==t&&c!==sc||(e[n]=sc,o[r++]=n)}return o}function ms(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Is(e){return _s(e)?function(e){var t=D.lastIndex=0;for(;D.test(e);)++t;return t}(e):j(e)}function ys(e){return _s(e)?e.match(D)||[]:e.split("")}function vs(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}var Ss=B({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Es=function e(t){var n,b=(t=null==t?Pa:Es.defaults(Pa.Object(),t,Es.pick(Pa,Sa))).Array,i=t.Date,C=t.Error,g=t.Function,r=t.Math,y=t.Object,R=t.RegExp,d=t.String,m=t.TypeError,o=b.prototype,c=g.prototype,u=y.prototype,a=t["__core-js_shared__"],s=c.toString,v=u.hasOwnProperty,l=0,f=(n=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",h=u.toString,p=s.call(y),_=Pa._,I=R("^"+s.call(v).replace(ea,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=Ma?t.Buffer:oc,E=t.Symbol,w=t.Uint8Array,T=S?S.allocUnsafe:oc,O=gs(y.getPrototypeOf,y),P=y.create,M=u.propertyIsEnumerable,D=o.splice,x=E?E.isConcatSpreadable:oc,A=E?E.iterator:oc,N=E?E.toStringTag:oc,V=function(){try{var e=qn(y,"defineProperty");return e({},"",{}),e}catch(e){}}(),k=t.clearTimeout!==Pa.clearTimeout&&t.clearTimeout,L=i&&i.now!==Pa.Date.now&&i.now,U=t.setTimeout!==Pa.setTimeout&&t.setTimeout,F=r.ceil,j=r.floor,B=y.getOwnPropertySymbols,H=S?S.isBuffer:oc,q=t.isFinite,K=o.join,W=gs(y.keys,y),G=r.max,z=r.min,Q=i.now,X=t.parseInt,J=r.random,Y=o.reverse,Z=qn(t,"DataView"),$=qn(t,"Map"),ee=qn(t,"Promise"),te=qn(t,"Set"),ne=qn(t,"WeakMap"),ie=qn(y,"create"),re=ne&&new ne,oe={},ce=gi(Z),ae=gi($),se=gi(ee),le=gi(te),de=gi(ne),ue=E?E.prototype:oc,fe=ue?ue.valueOf:oc,he=ue?ue.toString:oc;function pe(e){if(Nr(e)&&!Sr(e)&&!(e instanceof me)){if(e instanceof Re)return e;if(v.call(e,"__wrapped__"))return Ri(e)}return new Re(e)}var _e=function(e){if(!Ar(e))return{};if(P)return P(e);Ce.prototype=e;var t=new Ce;return Ce.prototype=oc,t};function Ce(){}function ge(){}function Re(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=oc}function me(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fc,this.__views__=[]}function Ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ve;++t<n;)this.add(e[t])}function Ee(e){var t=this.__data__=new ye(e);this.size=t.size}function be(e,t){var n=Sr(e),i=!n&&vr(e),r=!n&&!i&&Tr(e),o=!n&&!i&&!r&&Hr(e),c=n||i||r||o,a=c?os(e.length,d):[],s=a.length;for(var l in e)!t&&!v.call(e,l)||c&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Jn(l,s))||a.push(l);return a}function we(e){var t=e.length;return t?e[St(0,t-1)]:oc}function Te(e,t){return fi(on(e),ke(t,0,e.length))}function Oe(e){return fi(on(e))}function Pe(e,t,n){(n===oc||mr(e[t],n))&&(n!==oc||t in e)||Ne(e,t,n)}function Me(e,t,n){var i=e[t];v.call(e,t)&&mr(i,n)&&(n!==oc||t in e)||Ne(e,t,n)}function De(e,t){for(var n=e.length;n--;)if(mr(e[n][0],t))return n;return-1}function xe(e,i,r,o){return Be(e,function(e,t,n){i(o,e,r(e),n)}),o}function Ae(e,t){return e&&cn(t,uo(t),e)}function Ne(e,t,n){"__proto__"==t&&V?V(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ve(e,t){for(var n=-1,i=t.length,r=b(i),o=null==e;++n<i;)r[n]=o?oc:oo(e,t[n]);return r}function ke(e,t,n){return e==e&&(n!==oc&&(e=e<=n?e:n),t!==oc&&(e=t<=e?e:t)),e}function Le(n,i,r,e,t,o){var c,a=1&i,s=2&i,l=4&i;if(r&&(c=t?r(n,e,t,o):r(n)),c!==oc)return c;if(!Ar(n))return n;var d,u,f,h,p,_,C=Sr(n);if(C){if(c=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&v.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(n),!a)return on(n,c)}else{var g=Gn(n),R=g==mc||g==Ic;if(Tr(n))return Zt(n,a);if(g==Sc||g==pc||R&&!t){if(c=s||R?{}:Qn(n),!a)return s?(_=f=n,h=(p=c)&&cn(_,fo(_),p),cn(f,Wn(f),h)):(u=Ae(c,d=n),cn(d,Kn(d),u))}else{if(!wa[g])return t?n:{};c=function(e,t,n){var i=e.constructor;switch(t){case Mc:return $t(e);case Cc:case gc:return new i(+e);case Dc:return function(e,t){var n=t?$t(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case xc:case Ac:case Nc:case Vc:case kc:case Lc:case Uc:case Fc:case jc:return en(e,n);case yc:return new i;case vc:case Tc:return new i(e);case bc:return function(e){var t=new e.constructor(e.source,da.exec(e));return t.lastIndex=e.lastIndex,t}(e);case wc:return new i;case Oc:return function(e){return fe?y(fe.call(e)):{}}(e)}}(n,g,a)}}var m=(o=o||new Ee).get(n);if(m)return m;o.set(n,c),Fr(n)?n.forEach(function(e){c.add(Le(e,i,r,e,n,o))}):Vr(n)&&n.forEach(function(e,t){c.set(t,Le(e,i,r,t,n,o))});var I=C?oc:(l?s?kn:Vn:s?fo:uo)(n);return Fa(I||n,function(e,t){I&&(e=n[t=e]),Me(c,t,Le(e,i,r,t,n,o))}),c}function Ue(e,t,n){var i=n.length;if(null==e)return!i;for(e=y(e);i--;){var r=n[i],o=t[r],c=e[r];if(c===oc&&!(r in e)||!o(c))return!1}return!0}function Fe(e,t,n){if("function"!=typeof e)throw new m(cc);return si(function(){e.apply(oc,n)},t)}function je(e,t,n,i){var r=-1,o=qa,c=!0,a=e.length,s=[],l=t.length;if(!a)return s;n&&(t=Wa(t,as(n))),i?(o=Ka,c=!1):200<=t.length&&(o=ls,c=!1,t=new Se(t));e:for(;++r<a;){var d=e[r],u=null==n?d:n(d);if(d=i||0!==d?d:0,c&&u==u){for(var f=l;f--;)if(t[f]===u)continue e;s.push(d)}else o(t,u,i)||s.push(d)}return s}pe.templateSettings={escape:Qc,evaluate:Xc,interpolate:Jc,variable:"",imports:{_:pe}},(pe.prototype=ge.prototype).constructor=pe,(Re.prototype=_e(ge.prototype)).constructor=Re,(me.prototype=_e(ge.prototype)).constructor=me,Ie.prototype.clear=function(){this.__data__=ie?ie(null):{},this.size=0},Ie.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ie.prototype.get=function(e){var t=this.__data__;if(ie){var n=t[e];return n===ac?oc:n}return v.call(t,e)?t[e]:oc},Ie.prototype.has=function(e){var t=this.__data__;return ie?t[e]!==oc:v.call(t,e)},Ie.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ie&&t===oc?ac:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=De(t,e);return!(n<0)&&(n==t.length-1?t.pop():D.call(t,n,1),--this.size,!0)},ye.prototype.get=function(e){var t=this.__data__,n=De(t,e);return n<0?oc:t[n][1]},ye.prototype.has=function(e){return-1<De(this.__data__,e)},ye.prototype.set=function(e,t){var n=this.__data__,i=De(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new Ie,map:new($||ye),string:new Ie}},ve.prototype.delete=function(e){var t=Bn(this,e).delete(e);return this.size-=t?1:0,t},ve.prototype.get=function(e){return Bn(this,e).get(e)},ve.prototype.has=function(e){return Bn(this,e).has(e)},ve.prototype.set=function(e,t){var n=Bn(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Se.prototype.add=Se.prototype.push=function(e){return this.__data__.set(e,ac),this},Se.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new ye,this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ye){var i=n.__data__;if(!$||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new ve(i)}return n.set(e,t),this.size=n.size,this};var Be=ln(Xe),He=ln(Je,!0);function qe(e,i){var r=!0;return Be(e,function(e,t,n){return r=!!i(e,t,n)}),r}function Ke(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],c=t(o);if(null!=c&&(a===oc?c==c&&!Br(c):n(c,a)))var a=c,s=o}return s}function We(e,i){var r=[];return Be(e,function(e,t,n){i(e,t,n)&&r.push(e)}),r}function Ge(e,t,n,i,r){var o=-1,c=e.length;for(n=n||Xn,r=r||[];++o<c;){var a=e[o];0<t&&n(a)?1<t?Ge(a,t-1,n,i,r):Ga(r,a):i||(r[r.length]=a)}return r}var ze=dn(),Qe=dn(!0);function Xe(e,t){return e&&ze(e,t,uo)}function Je(e,t){return e&&Qe(e,t,uo)}function Ye(t,e){return Ha(e,function(e){return Mr(t[e])})}function Ze(e,t){for(var n=0,i=(t=Qt(t,e)).length;null!=e&&n<i;)e=e[Ci(t[n++])];return n&&n==i?e:oc}function $e(e,t,n){var i=t(e);return Sr(e)?i:Ga(i,n(e))}function et(e){return null==e?e===oc?"[object Undefined]":"[object Null]":N&&N in y(e)?function(e){var t=v.call(e,N),n=e[N];try{e[N]=oc;var i=!0}catch(e){}var r=h.call(e);i&&(t?e[N]=n:delete e[N]);return r}(e):(t=e,h.call(t));var t}function tt(e,t){return t<e}function nt(e,t){return null!=e&&v.call(e,t)}function it(e,t){return null!=e&&t in y(e)}function rt(e,t,n){for(var i=n?Ka:qa,r=e[0].length,o=e.length,c=o,a=b(o),s=1/0,l=[];c--;){var d=e[c];c&&t&&(d=Wa(d,as(t))),s=z(d.length,s),a[c]=!n&&(t||120<=r&&120<=d.length)?new Se(c&&d):oc}d=e[0];var u=-1,f=a[0];e:for(;++u<r&&l.length<s;){var h=d[u],p=t?t(h):h;if(h=n||0!==h?h:0,!(f?ls(f,p):i(l,p,n))){for(c=o;--c;){var _=a[c];if(!(_?ls(_,p):i(e[c],p,n)))continue e}f&&f.push(p),l.push(h)}}return l}function ot(e,t,n){var i=null==(e=oi(e,t=Qt(t,e)))?e:e[Ci(Pi(t))];return null==i?oc:La(i,e,n)}function ct(e){return Nr(e)&&et(e)==pc}function at(e,t,n,i,r){return e===t||(null==e||null==t||!Nr(e)&&!Nr(t)?e!=e&&t!=t:function(e,t,n,i,r,o){var c=Sr(e),a=Sr(t),s=c?_c:Gn(e),l=a?_c:Gn(t),d=(s=s==pc?Sc:s)==Sc,u=(l=l==pc?Sc:l)==Sc,f=s==l;if(f&&Tr(e)){if(!Tr(t))return!1;d=!(c=!0)}if(f&&!d)return o=o||new Ee,c||Hr(e)?An(e,t,n,i,r,o):function(e,t,n,i,r,o,c){switch(n){case Dc:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mc:return!(e.byteLength!=t.byteLength||!o(new w(e),new w(t)));case Cc:case gc:case vc:return mr(+e,+t);case Rc:return e.name==t.name&&e.message==t.message;case bc:case Tc:return e==t+"";case yc:var a=Cs;case wc:var s=1&i;if(a=a||ms,e.size!=t.size&&!s)return!1;var l=c.get(e);if(l)return l==t;i|=2,c.set(e,t);var d=An(a(e),a(t),i,r,o,c);return c.delete(e),d;case Oc:if(fe)return fe.call(e)==fe.call(t)}return!1}(e,t,s,n,i,r,o);if(!(1&n)){var h=d&&v.call(e,"__wrapped__"),p=u&&v.call(t,"__wrapped__");if(h||p){var _=h?e.value():e,C=p?t.value():t;return o=o||new Ee,r(_,C,n,i,o)}}return f&&(o=o||new Ee,function(e,t,n,i,r,o){var c=1&n,a=Vn(e),s=a.length,l=Vn(t).length;if(s!=l&&!c)return!1;var d=s;for(;d--;){var u=a[d];if(!(c?u in t:v.call(t,u)))return!1}var f=o.get(e),h=o.get(t);if(f&&h)return f==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);var _=c;for(;++d<s;){u=a[d];var C=e[u],g=t[u];if(i)var R=c?i(g,C,u,t,e,o):i(C,g,u,e,t,o);if(!(R===oc?C===g||r(C,g,n,i,o):R)){p=!1;break}_=_||"constructor"==u}if(p&&!_){var m=e.constructor,I=t.constructor;m!=I&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof I&&I instanceof I)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,i,r,o))}(e,t,n,i,at,r))}function st(e,t,n,i){var r=n.length,o=r,c=!i;if(null==e)return!o;for(e=y(e);r--;){var a=n[r];if(c&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<o;){var s=(a=n[r])[0],l=e[s],d=a[1];if(c&&a[2]){if(l===oc&&!(s in e))return!1}else{var u=new Ee;if(i)var f=i(l,d,s,e,t,u);if(!(f===oc?at(d,l,3,i,u):f))return!1}}return!0}function lt(e){return!(!Ar(e)||(t=e,f&&f in t))&&(Mr(e)?I:ha).test(gi(e));var t}function dt(e){return"function"==typeof e?e:null==e?Lo:"object"==_typeof2(e)?Sr(e)?Ct(e[0],e[1]):_t(e):Go(e)}function ut(e){if(!ti(e))return W(e);var t=[];for(var n in y(e))v.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ft(e){if(!Ar(e))return function(e){var t=[];if(null!=e)for(var n in y(e))t.push(n);return t}(e);var t=ti(e),n=[];for(var i in e)("constructor"!=i||!t&&v.call(e,i))&&n.push(i);return n}function ht(e,t){return e<t}function pt(e,i){var r=-1,o=br(e)?b(e.length):[];return Be(e,function(e,t,n){o[++r]=i(e,t,n)}),o}function _t(t){var n=Hn(t);return 1==n.length&&n[0][2]?ii(n[0][0],n[0][1]):function(e){return e===t||st(e,t,n)}}function Ct(n,i){return Zn(n)&&ni(i)?ii(Ci(n),i):function(e){var t=oo(e,n);return t===oc&&t===i?co(e,n):at(i,t,3)}}function gt(i,r,o,c,a){i!==r&&ze(r,function(e,t){if(a=a||new Ee,Ar(e))!function(e,t,n,i,r,o,c){var a=ci(e,n),s=ci(t,n),l=c.get(s);if(l)return Pe(e,n,l);var d=o?o(a,s,n+"",e,t,c):oc,u=d===oc;if(u){var f=Sr(s),h=!f&&Tr(s),p=!f&&!h&&Hr(s);d=s,f||h||p?d=Sr(a)?a:wr(a)?on(a):h?Zt(s,!(u=!1)):p?en(s,!(u=!1)):[]:Lr(s)||vr(s)?vr(d=a)?d=Jr(a):Ar(a)&&!Mr(a)||(d=Qn(s)):u=!1}u&&(c.set(s,d),r(d,s,i,o,c),c.delete(s));Pe(e,n,d)}(i,r,t,o,gt,c,a);else{var n=c?c(ci(i,t),e,t+"",i,r,a):oc;n===oc&&(n=e),Pe(i,t,n)}},fo)}function Rt(e,t){var n=e.length;if(n)return Jn(t+=t<0?n:0,n)?e[t]:oc}function mt(e,i,n){i=i.length?Wa(i,function(t){return Sr(t)?function(e){return Ze(e,1===t.length?t[0]:t)}:t}):[Lo];var r=-1;return i=Wa(i,as(jn())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(pt(e,function(t,e,n){return{criteria:Wa(i,function(e){return e(t)}),index:++r,value:t}}),function(e,t){return function(e,t,n){var i=-1,r=e.criteria,o=t.criteria,c=r.length,a=n.length;for(;++i<c;){var s=tn(r[i],o[i]);if(s){if(a<=i)return s;var l=n[i];return s*("desc"==l?-1:1)}}return e.index-t.index}(e,t,n)})}function It(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var c=t[i],a=Ze(e,c);n(a,c)&&Ot(o,Qt(c,e),a)}return o}function yt(e,t,n,i){var r=i?$a:Za,o=-1,c=t.length,a=e;for(e===t&&(t=on(t)),n&&(a=Wa(e,as(n)));++o<c;)for(var s=0,l=t[o],d=n?n(l):l;-1<(s=r(a,d,s,i));)a!==e&&D.call(a,s,1),D.call(e,s,1);return e}function vt(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;Jn(r)?D.call(e,r,1):jt(e,r)}}return e}function St(e,t){return e+j(J()*(t-e+1))}function Et(e,t){var n="";if(!e||t<1||dc<t)return n;for(;t%2&&(n+=e),(t=j(t/2))&&(e+=e),t;);return n}function bt(e,t){return li(ri(e,t,Lo),e+"")}function wt(e){return we(Io(e))}function Tt(e,t){var n=Io(e);return fi(n,ke(t,0,n.length))}function Ot(e,t,n,i){if(!Ar(e))return e;for(var r=-1,o=(t=Qt(t,e)).length,c=o-1,a=e;null!=a&&++r<o;){var s=Ci(t[r]),l=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(r!=c){var d=a[s];(l=i?i(d,s,a):oc)===oc&&(l=Ar(d)?d:Jn(t[r+1])?[]:{})}Me(a,s,l),a=a[s]}return e}var Pt=re?function(e,t){return re.set(e,t),e}:Lo,Mt=V?function(e,t){return V(e,"toString",{configurable:!0,enumerable:!1,value:No(t),writable:!0})}:Lo;function Dt(e){return fi(Io(e))}function xt(e,t,n){var i=-1,r=e.length;t<0&&(t=r<-t?0:r+t),(n=r<n?r:n)<0&&(n+=r),r=n<t?0:n-t>>>0,t>>>=0;for(var o=b(r);++i<r;)o[i]=e[i+t];return o}function At(e,i){var r;return Be(e,function(e,t,n){return!(r=i(e,t,n))}),!!r}function Nt(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var o=i+r>>>1,c=e[o];null!==c&&!Br(c)&&(n?c<=t:c<t)?i=1+o:r=o}return r}return Vt(e,t,Lo,n)}function Vt(e,t,n,i){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var c=(t=n(t))!=t,a=null===t,s=Br(t),l=t===oc;r<o;){var d=j((r+o)/2),u=n(e[d]),f=u!==oc,h=null===u,p=u==u,_=Br(u);if(c)var C=i||p;else C=l?p&&(i||f):a?p&&f&&(i||!h):s?p&&f&&!h&&(i||!_):!h&&!_&&(i?u<=t:u<t);C?r=d+1:o=d}return z(o,4294967294)}function kt(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var c=e[n],a=t?t(c):c;if(!n||!mr(a,s)){var s=a;o[r++]=0===c?0:c}}return o}function Lt(e){return"number"==typeof e?e:Br(e)?uc:+e}function Ut(e){if("string"==typeof e)return e;if(Sr(e))return Wa(e,Ut)+"";if(Br(e))return he?he.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ft(e,t,n){var i=-1,r=qa,o=e.length,c=!0,a=[],s=a;if(n)c=!1,r=Ka;else if(200<=o){var l=t?null:Tn(e);if(l)return ms(l);c=!1,r=ls,s=new Se}else s=t?[]:a;e:for(;++i<o;){var d=e[i],u=t?t(d):d;if(d=n||0!==d?d:0,c&&u==u){for(var f=s.length;f--;)if(s[f]===u)continue e;t&&s.push(u),a.push(d)}else r(s,u,n)||(s!==a&&s.push(u),a.push(d))}return a}function jt(e,t){return null==(e=oi(e,t=Qt(t,e)))||delete e[Ci(Pi(t))]}function Bt(e,t,n,i){return Ot(e,t,n(Ze(e,t)),i)}function Ht(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?xt(e,i?0:o,i?o+1:r):xt(e,i?o+1:0,i?r:o)}function qt(e,t){var n=e;return n instanceof me&&(n=n.value()),za(t,function(e,t){return t.func.apply(t.thisArg,Ga([e],t.args))},n)}function Kt(e,t,n){var i=e.length;if(i<2)return i?Ft(e[0]):[];for(var r=-1,o=b(i);++r<i;)for(var c=e[r],a=-1;++a<i;)a!=r&&(o[r]=je(o[r]||c,e[a],t,n));return Ft(Ge(o,1),t,n)}function Wt(e,t,n){for(var i=-1,r=e.length,o=t.length,c={};++i<r;){var a=i<o?t[i]:oc;n(c,e[i],a)}return c}function Gt(e){return wr(e)?e:[]}function zt(e){return"function"==typeof e?e:Lo}function Qt(e,t){return Sr(e)?e:Zn(e,t)?[e]:_i(Yr(e))}var Xt=bt;function Jt(e,t,n){var i=e.length;return n=n===oc?i:n,!t&&i<=n?e:xt(e,t,n)}var Yt=k||function(e){return Pa.clearTimeout(e)};function Zt(e,t){if(t)return e.slice();var n=e.length,i=T?T(n):new e.constructor(n);return e.copy(i),i}function $t(e){var t=new e.constructor(e.byteLength);return new w(t).set(new w(e)),t}function en(e,t){var n=t?$t(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function tn(e,t){if(e!==t){var n=e!==oc,i=null===e,r=e==e,o=Br(e),c=t!==oc,a=null===t,s=t==t,l=Br(t);if(!a&&!l&&!o&&t<e||o&&c&&s&&!a&&!l||i&&c&&s||!n&&s||!r)return 1;if(!i&&!o&&!l&&e<t||l&&n&&r&&!i&&!o||a&&n&&r||!c&&r||!s)return-1}return 0}function nn(e,t,n,i){for(var r=-1,o=e.length,c=n.length,a=-1,s=t.length,l=G(o-c,0),d=b(s+l),u=!i;++a<s;)d[a]=t[a];for(;++r<c;)(u||r<o)&&(d[n[r]]=e[r]);for(;l--;)d[a++]=e[r++];return d}function rn(e,t,n,i){for(var r=-1,o=e.length,c=-1,a=n.length,s=-1,l=t.length,d=G(o-a,0),u=b(d+l),f=!i;++r<d;)u[r]=e[r];for(var h=r;++s<l;)u[h+s]=t[s];for(;++c<a;)(f||r<o)&&(u[h+n[c]]=e[r++]);return u}function on(e,t){var n=-1,i=e.length;for(t=t||b(i);++n<i;)t[n]=e[n];return t}function cn(e,t,n,i){var r=!n;n=n||{};for(var o=-1,c=t.length;++o<c;){var a=t[o],s=i?i(n[a],e[a],a,n,e):oc;s===oc&&(s=e[a]),r?Ne(n,a,s):Me(n,a,s)}return n}function an(r,o){return function(e,t){var n=Sr(e)?Ua:xe,i=o?o():{};return n(e,r,jn(t,2),i)}}function sn(a){return bt(function(e,t){var n=-1,i=t.length,r=1<i?t[i-1]:oc,o=2<i?t[2]:oc;for(r=3<a.length&&"function"==typeof r?(i--,r):oc,o&&Yn(t[0],t[1],o)&&(r=i<3?oc:r,i=1),e=y(e);++n<i;){var c=t[n];c&&a(e,c,n,r)}return e})}function ln(o,c){return function(e,t){if(null==e)return e;if(!br(e))return o(e,t);for(var n=e.length,i=c?n:-1,r=y(e);(c?i--:++i<n)&&!1!==t(r[i],i,r););return e}}function dn(s){return function(e,t,n){for(var i=-1,r=y(e),o=n(e),c=o.length;c--;){var a=o[s?c:++i];if(!1===t(r[a],a,r))break}return e}}function un(r){return function(e){var t=_s(e=Yr(e))?ys(e):oc,n=t?t[0]:e.charAt(0),i=t?Jt(t,1).join(""):e.slice(1);return n[r]()+i}}function fn(t){return function(e){return za(Do(So(e).replace(ma,"")),t,"")}}function hn(i){return function(){var e=arguments;switch(e.length){case 0:return new i;case 1:return new i(e[0]);case 2:return new i(e[0],e[1]);case 3:return new i(e[0],e[1],e[2]);case 4:return new i(e[0],e[1],e[2],e[3]);case 5:return new i(e[0],e[1],e[2],e[3],e[4]);case 6:return new i(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new i(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=_e(i.prototype),n=i.apply(t,e);return Ar(n)?n:t}}function pn(c,a,s){var l=hn(c);return function e(){for(var t=arguments.length,n=b(t),i=t,r=Fn(e);i--;)n[i]=arguments[i];var o=t<3&&n[0]!==r&&n[t-1]!==r?[]:Rs(n,r);return(t-=o.length)<s?bn(c,a,gn,e.placeholder,oc,n,o,oc,oc,s-t):La(this&&this!==Pa&&this instanceof e?l:c,this,n)}}function _n(c){return function(e,t,n){var i=y(e);if(!br(e)){var r=jn(t,3);e=uo(e),t=function(e){return r(i[e],e,i)}}var o=c(e,t,n);return-1<o?i[r?e[o]:o]:oc}}function Cn(s){return Nn(function(r){var o=r.length,e=o,t=Re.prototype.thru;for(s&&r.reverse();e--;){var n=r[e];if("function"!=typeof n)throw new m(cc);if(t&&!c&&"wrapper"==Un(n))var c=new Re([],!0)}for(e=c?e:o;++e<o;){var i=Un(n=r[e]),a="wrapper"==i?Ln(n):oc;c=a&&$n(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?c[Un(a[0])].apply(c,a[3]):1==n.length&&$n(n)?c[i]():c.thru(n)}return function(){var e=arguments,t=e[0];if(c&&1==e.length&&Sr(t))return c.plant(t).value();for(var n=0,i=o?r[n].apply(this,e):t;++n<o;)i=r[n].call(this,i);return i}})}function gn(l,d,u,f,h,p,_,C,g,R){var m=d&lc,I=1&d,y=2&d,v=24&d,S=512&d,E=y?oc:hn(l);return function e(){for(var t=arguments.length,n=b(t),i=t;i--;)n[i]=arguments[i];if(v)var r=Fn(e),o=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}(n,r);if(f&&(n=nn(n,f,h,v)),p&&(n=rn(n,p,_,v)),t-=o,v&&t<R){var c=Rs(n,r);return bn(l,d,gn,e.placeholder,u,n,c,C,g,R-t)}var a=I?u:this,s=y?a[l]:l;return t=n.length,C?n=function(e,t){for(var n=e.length,i=z(t.length,n),r=on(e);i--;){var o=t[i];e[i]=Jn(o,n)?r[o]:oc}return e}(n,C):S&&1<t&&n.reverse(),m&&g<t&&(n.length=g),this&&this!==Pa&&this instanceof e&&(s=E||hn(s)),s.apply(a,n)}}function Rn(c,a){return function(e,t){return n=e,i=c,r=a(t),o={},Xe(n,function(e,t,n){i(o,r(e),t,n)}),o;var n,i,r,o}}function mn(i,r){return function(e,t){var n;if(e===oc&&t===oc)return r;if(e!==oc&&(n=e),t!==oc){if(n===oc)return t;t="string"==typeof e||"string"==typeof t?(e=Ut(e),Ut(t)):(e=Lt(e),Lt(t)),n=i(e,t)}return n}}function In(i){return Nn(function(e){return e=Wa(e,as(jn())),bt(function(t){var n=this;return i(e,function(e){return La(e,n,t)})})})}function yn(e,t){var n=(t=t===oc?" ":Ut(t)).length;if(n<2)return n?Et(t,e):t;var i=Et(t,F(e/Is(t)));return _s(t)?Jt(ys(i),0,e).join(""):i.slice(0,e)}function vn(a,e,s,l){var d=1&e,u=hn(a);return function e(){for(var t=-1,n=arguments.length,i=-1,r=l.length,o=b(r+n),c=this&&this!==Pa&&this instanceof e?u:a;++i<r;)o[i]=l[i];for(;n--;)o[i++]=arguments[++t];return La(c,d?s:this,o)}}function Sn(i){return function(e,t,n){return n&&"number"!=typeof n&&Yn(e,t,n)&&(t=n=oc),e=Gr(e),t===oc?(t=e,e=0):t=Gr(t),function(e,t,n,i){for(var r=-1,o=G(F((t-e)/(n||1)),0),c=b(o);o--;)c[i?o:++r]=e,e+=n;return c}(e,t,n=n===oc?e<t?1:-1:Gr(n),i)}}function En(n){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=Xr(e),t=Xr(t)),n(e,t)}}function bn(e,t,n,i,r,o,c,a,s,l){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var u=[e,t,r,d?o:oc,d?c:oc,d?oc:o,d?oc:c,a,s,l],f=n.apply(oc,u);return $n(e)&&ai(f,u),f.placeholder=i,di(f,e,t)}function wn(e){var i=r[e];return function(e,t){if(e=Xr(e),(t=null==t?0:z(zr(t),292))&&q(e)){var n=(Yr(e)+"e").split("e");return+((n=(Yr(i(n[0]+"e"+(+n[1]+t)))+"e").split("e"))[0]+"e"+(n[1]-t))}return i(e)}}var Tn=te&&1/ms(new te([,-0]))[1]==1/0?function(e){return new te(e)}:Ho;function On(c){return function(e){var t,n,i,r,o=Gn(e);return o==yc?Cs(e):o==wc?(t=e,n=-1,i=Array(t.size),t.forEach(function(e){i[++n]=[e,e]}),i):Wa(c(r=e),function(e){return[e,r[e]]})}}function Pn(e,t,n,i,r,o,c,a){var s=2&t;if(!s&&"function"!=typeof e)throw new m(cc);var l=i?i.length:0;if(l||(t&=-97,i=r=oc),c=c===oc?c:G(zr(c),0),a=a===oc?a:zr(a),l-=r?r.length:0,64&t){var d=i,u=r;i=r=oc}var f,h,p,_,C=s?oc:Ln(e),g=[e,t,n,i,r,d,u,o,c,a];if(C&&function(e,t){var n=e[1],i=t[1],r=n|i,o=r<131,c=i==lc&&8==n||i==lc&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!o&&!c)return;1&i&&(e[2]=t[2],r|=1&n?0:4);var a=t[3];if(a){var s=e[3];e[3]=s?nn(s,a,t[4]):a,e[4]=s?Rs(e[3],sc):t[4]}(a=t[5])&&(s=e[5],e[5]=s?rn(s,a,t[6]):a,e[6]=s?Rs(e[5],sc):t[6]);(a=t[7])&&(e[7]=a);i&lc&&(e[8]=null==e[8]?t[8]:z(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(g,C),e=g[0],t=g[1],n=g[2],i=g[3],r=g[4],!(a=g[9]=g[9]===oc?s?0:e.length:G(g[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)R=8==t||16==t?pn(e,t,a):32!=t&&33!=t||r.length?gn.apply(oc,g):vn(e,t,n,i);else var R=(h=n,p=1&t,_=hn(f=e),function e(){return(this&&this!==Pa&&this instanceof e?_:f).apply(p?h:this,arguments)});return di((C?Pt:ai)(R,g),e,t)}function Mn(e,t,n,i){return e===oc||mr(e,u[n])&&!v.call(i,n)?t:e}function Dn(e,t,n,i,r,o){return Ar(e)&&Ar(t)&&(o.set(t,e),gt(e,t,oc,Dn,o),o.delete(t)),e}function xn(e){return Lr(e)?oc:e}function An(e,t,n,i,r,o){var c=1&n,a=e.length,s=t.length;if(a!=s&&!(c&&a<s))return!1;var l=o.get(e),d=o.get(t);if(l&&d)return l==t&&d==e;var u=-1,f=!0,h=2&n?new Se:oc;for(o.set(e,t),o.set(t,e);++u<a;){var p=e[u],_=t[u];if(i)var C=c?i(_,p,u,t,e,o):i(p,_,u,e,t,o);if(C!==oc){if(C)continue;f=!1;break}if(h){if(!Xa(t,function(e,t){if(!ls(h,t)&&(p===e||r(p,e,n,i,o)))return h.push(t)})){f=!1;break}}else if(p!==_&&!r(p,_,n,i,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Nn(e){return li(ri(e,oc,Ei),e+"")}function Vn(e){return $e(e,uo,Kn)}function kn(e){return $e(e,fo,Wn)}var Ln=re?function(e){return re.get(e)}:Ho;function Un(e){for(var t=e.name+"",n=oe[t],i=v.call(oe,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function Fn(e){return(v.call(pe,"placeholder")?pe:e).placeholder}function jn(){var e=pe.iteratee||Uo;return e=e===Uo?dt:e,arguments.length?e(arguments[0],arguments[1]):e}function Bn(e,t){var n,i,r=e.__data__;return("string"==(i=_typeof2(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Hn(e){for(var t=uo(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,ni(r)]}return t}function qn(e,t){var n,i,r=(i=t,null==(n=e)?oc:n[i]);return lt(r)?r:oc}var Kn=B?function(t){return null==t?[]:(t=y(t),Ha(B(t),function(e){return M.call(t,e)}))}:Xo,Wn=B?function(e){for(var t=[];e;)Ga(t,Kn(e)),e=O(e);return t}:Xo,Gn=et;function zn(e,t,n){for(var i=-1,r=(t=Qt(t,e)).length,o=!1;++i<r;){var c=Ci(t[i]);if(!(o=null!=e&&n(e,c)))break;e=e[c]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&xr(r)&&Jn(c,r)&&(Sr(e)||vr(e))}function Qn(e){return"function"!=typeof e.constructor||ti(e)?{}:_e(O(e))}function Xn(e){return Sr(e)||vr(e)||!!(x&&e&&e[x])}function Jn(e,t){var n=_typeof2(e);return!!(t=null==t?dc:t)&&("number"==n||"symbol"!=n&&_a.test(e))&&-1<e&&e%1==0&&e<t}function Yn(e,t,n){if(!Ar(n))return!1;var i=_typeof2(t);return!!("number"==i?br(n)&&Jn(t,n.length):"string"==i&&t in n)&&mr(n[t],e)}function Zn(e,t){if(Sr(e))return!1;var n=_typeof2(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Br(e))||(Zc.test(e)||!Yc.test(e)||null!=t&&e in y(t))}function $n(e){var t=Un(e),n=pe[t];if("function"!=typeof n||!(t in me.prototype))return!1;if(e===n)return!0;var i=Ln(n);return!!i&&e===i[0]}(Z&&Gn(new Z(new ArrayBuffer(1)))!=Dc||$&&Gn(new $)!=yc||ee&&Gn(ee.resolve())!=Ec||te&&Gn(new te)!=wc||ne&&Gn(new ne)!=Pc)&&(Gn=function(e){var t=et(e),n=t==Sc?e.constructor:oc,i=n?gi(n):"";if(i)switch(i){case ce:return Dc;case ae:return yc;case se:return Ec;case le:return wc;case de:return Pc}return t});var ei=a?Mr:Jo;function ti(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||u)}function ni(e){return e==e&&!Ar(e)}function ii(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==oc||t in y(e)))}}function ri(o,c,a){return c=G(c===oc?o.length-1:c,0),function(){for(var e=arguments,t=-1,n=G(e.length-c,0),i=b(n);++t<n;)i[t]=e[c+t];t=-1;for(var r=b(c+1);++t<c;)r[t]=e[t];return r[c]=a(i),La(o,this,r)}}function oi(e,t){return t.length<2?e:Ze(e,xt(t,0,-1))}function ci(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ai=ui(Pt),si=U||function(e,t){return Pa.setTimeout(e,t)},li=ui(Mt);function di(e,t,n){var i,r,o,c=t+"";return li(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(1<n?"& ":"")+t[i],t=t.join(2<n?", ":" "),e.replace(ia,"{\n/* [wrapped with "+t+"] */\n")}(c,(o=c.match(ra),i=o?o[1].split(oa):[],r=n,Fa(hc,function(e){var t="_."+e[0];r&e[1]&&!qa(i,t)&&i.push(t)}),i.sort())))}function ui(n){var i=0,r=0;return function(){var e=Q(),t=16-(e-r);if(r=e,0<t){if(800<=++i)return arguments[0]}else i=0;return n.apply(oc,arguments)}}function fi(e,t){var n=-1,i=e.length,r=i-1;for(t=t===oc?i:t;++n<t;){var o=St(n,r),c=e[o];e[o]=e[n],e[n]=c}return e.length=t,e}var hi,pi,_i=(pi=(hi=hr(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace($c,function(e,t,n,i){r.push(n?i.replace(sa,"$1"):t||e)}),r},function(e){return 500===pi.size&&pi.clear(),e})).cache,hi);function Ci(e){if("string"==typeof e||Br(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function gi(e){if(null!=e){try{return s.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ri(e){if(e instanceof me)return e.clone();var t=new Re(e.__wrapped__,e.__chain__);return t.__actions__=on(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var mi=bt(function(e,t){return wr(e)?je(e,Ge(t,1,wr,!0)):[]}),Ii=bt(function(e,t){var n=Pi(t);return wr(n)&&(n=oc),wr(e)?je(e,Ge(t,1,wr,!0),jn(n,2)):[]}),yi=bt(function(e,t){var n=Pi(t);return wr(n)&&(n=oc),wr(e)?je(e,Ge(t,1,wr,!0),oc,n):[]});function vi(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:zr(n);return r<0&&(r=G(i+r,0)),Ya(e,jn(t,3),r)}function Si(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==oc&&(r=zr(n),r=n<0?G(i+r,0):z(r,i-1)),Ya(e,jn(t,3),r,!0)}function Ei(e){return(null==e?0:e.length)?Ge(e,1):[]}function bi(e){return e&&e.length?e[0]:oc}var wi=bt(function(e){var t=Wa(e,Gt);return t.length&&t[0]===e[0]?rt(t):[]}),Ti=bt(function(e){var t=Pi(e),n=Wa(e,Gt);return t===Pi(n)?t=oc:n.pop(),n.length&&n[0]===e[0]?rt(n,jn(t,2)):[]}),Oi=bt(function(e){var t=Pi(e),n=Wa(e,Gt);return(t="function"==typeof t?t:oc)&&n.pop(),n.length&&n[0]===e[0]?rt(n,oc,t):[]});function Pi(e){var t=null==e?0:e.length;return t?e[t-1]:oc}var Mi=bt(Di);function Di(e,t){return e&&e.length&&t&&t.length?yt(e,t):e}var xi=Nn(function(e,t){var n=null==e?0:e.length,i=Ve(e,t);return vt(e,Wa(t,function(e){return Jn(e,n)?+e:e}).sort(tn)),i});function Ai(e){return null==e?e:Y.call(e)}var Ni=bt(function(e){return Ft(Ge(e,1,wr,!0))}),Vi=bt(function(e){var t=Pi(e);return wr(t)&&(t=oc),Ft(Ge(e,1,wr,!0),jn(t,2))}),ki=bt(function(e){var t=Pi(e);return t="function"==typeof t?t:oc,Ft(Ge(e,1,wr,!0),oc,t)});function Li(t){if(!t||!t.length)return[];var n=0;return t=Ha(t,function(e){if(wr(e))return n=G(e.length,n),!0}),os(n,function(e){return Wa(t,ns(e))})}function Ui(e,t){if(!e||!e.length)return[];var n=Li(e);return null==t?n:Wa(n,function(e){return La(t,oc,e)})}var Fi=bt(function(e,t){return wr(e)?je(e,t):[]}),ji=bt(function(e){return Kt(Ha(e,wr))}),Bi=bt(function(e){var t=Pi(e);return wr(t)&&(t=oc),Kt(Ha(e,wr),jn(t,2))}),Hi=bt(function(e){var t=Pi(e);return t="function"==typeof t?t:oc,Kt(Ha(e,wr),oc,t)}),qi=bt(Li);var Ki=bt(function(e){var t=e.length,n=1<t?e[t-1]:oc;return n="function"==typeof n?(e.pop(),n):oc,Ui(e,n)});function Wi(e){var t=pe(e);return t.__chain__=!0,t}function Gi(e,t){return t(e)}var zi=Nn(function(t){function e(e){return Ve(e,t)}var n=t.length,i=n?t[0]:0,r=this.__wrapped__;return!(1<n||this.__actions__.length)&&r instanceof me&&Jn(i)?((r=r.slice(i,+i+(n?1:0))).__actions__.push({func:Gi,args:[e],thisArg:oc}),new Re(r,this.__chain__).thru(function(e){return n&&!e.length&&e.push(oc),e})):this.thru(e)});var Qi=an(function(e,t,n){v.call(e,n)?++e[n]:Ne(e,n,1)});var Xi=_n(vi),Ji=_n(Si);function Yi(e,t){return(Sr(e)?Fa:Be)(e,jn(t,3))}function Zi(e,t){return(Sr(e)?ja:He)(e,jn(t,3))}var $i=an(function(e,t,n){v.call(e,n)?e[n].push(t):Ne(e,n,[t])});var er=bt(function(e,t,n){var i=-1,r="function"==typeof t,o=br(e)?b(e.length):[];return Be(e,function(e){o[++i]=r?La(t,e,n):ot(e,t,n)}),o}),tr=an(function(e,t,n){Ne(e,n,t)});function nr(e,t){return(Sr(e)?Wa:pt)(e,jn(t,3))}var ir=an(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var rr=bt(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&Yn(e,t[0],t[1])?t=[]:2<n&&Yn(t[0],t[1],t[2])&&(t=[t[0]]),mt(e,Ge(t,1),[])}),or=L||function(){return Pa.Date.now()};function cr(e,t,n){return t=n?oc:t,t=e&&null==t?e.length:t,Pn(e,lc,oc,oc,oc,oc,t)}function ar(e,t){var n;if("function"!=typeof t)throw new m(cc);return e=zr(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=oc),n}}var sr=bt(function(e,t,n){var i=1;if(n.length){var r=Rs(n,Fn(sr));i|=32}return Pn(e,i,t,n,r)}),lr=bt(function(e,t,n){var i=3;if(n.length){var r=Rs(n,Fn(lr));i|=32}return Pn(t,i,e,n,r)});function dr(i,r,e){var o,c,a,s,l,d,u=0,f=!1,h=!1,t=!0;if("function"!=typeof i)throw new m(cc);function p(e){var t=o,n=c;return o=c=oc,u=e,s=i.apply(n,t)}function _(e){var t=e-d;return d===oc||r<=t||t<0||h&&a<=e-u}function C(){var e,t,n=or();if(_(n))return g(n);l=si(C,(t=r-((e=n)-d),h?z(t,a-(e-u)):t))}function g(e){return l=oc,t&&o?p(e):(o=c=oc,s)}function n(){var e,t=or(),n=_(t);if(o=arguments,c=this,d=t,n){if(l===oc)return u=e=d,l=si(C,r),f?p(e):s;if(h)return Yt(l),l=si(C,r),p(d)}return l===oc&&(l=si(C,r)),s}return r=Xr(r)||0,Ar(e)&&(f=!!e.leading,a=(h="maxWait"in e)?G(Xr(e.maxWait)||0,r):a,t="trailing"in e?!!e.trailing:t),n.cancel=function(){l!==oc&&Yt(l),u=0,o=d=c=l=oc},n.flush=function(){return l===oc?s:g(or())},n}var ur=bt(function(e,t){return Fe(e,1,t)}),fr=bt(function(e,t,n){return Fe(e,Xr(t)||0,n)});function hr(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new m(cc);function c(){var e=arguments,t=o?o.apply(this,e):e[0],n=c.cache;if(n.has(t))return n.get(t);var i=r.apply(this,e);return c.cache=n.set(t,i)||n,i}return c.cache=new(hr.Cache||ve),c}function pr(t){if("function"!=typeof t)throw new m(cc);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}hr.Cache=ve;var _r=Xt(function(i,r){var o=(r=1==r.length&&Sr(r[0])?Wa(r[0],as(jn())):Wa(Ge(r,1),as(jn()))).length;return bt(function(e){for(var t=-1,n=z(e.length,o);++t<n;)e[t]=r[t].call(this,e[t]);return La(i,this,e)})}),Cr=bt(function(e,t){var n=Rs(t,Fn(Cr));return Pn(e,32,oc,t,n)}),gr=bt(function(e,t){var n=Rs(t,Fn(gr));return Pn(e,64,oc,t,n)}),Rr=Nn(function(e,t){return Pn(e,256,oc,oc,oc,t)});function mr(e,t){return e===t||e!=e&&t!=t}var Ir=En(tt),yr=En(function(e,t){return t<=e}),vr=ct(function(){return arguments}())?ct:function(e){return Nr(e)&&v.call(e,"callee")&&!M.call(e,"callee")},Sr=b.isArray,Er=Da?as(Da):function(e){return Nr(e)&&et(e)==Mc};function br(e){return null!=e&&xr(e.length)&&!Mr(e)}function wr(e){return Nr(e)&&br(e)}var Tr=H||Jo,Or=xa?as(xa):function(e){return Nr(e)&&et(e)==gc};function Pr(e){if(!Nr(e))return!1;var t=et(e);return t==Rc||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Lr(e)}function Mr(e){if(!Ar(e))return!1;var t=et(e);return t==mc||t==Ic||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Dr(e){return"number"==typeof e&&e==zr(e)}function xr(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=dc}function Ar(e){var t=_typeof2(e);return null!=e&&("object"==t||"function"==t)}function Nr(e){return null!=e&&"object"==_typeof2(e)}var Vr=Aa?as(Aa):function(e){return Nr(e)&&Gn(e)==yc};function kr(e){return"number"==typeof e||Nr(e)&&et(e)==vc}function Lr(e){if(!Nr(e)||et(e)!=Sc)return!1;var t=O(e);if(null===t)return!0;var n=v.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==p}var Ur=Na?as(Na):function(e){return Nr(e)&&et(e)==bc};var Fr=Va?as(Va):function(e){return Nr(e)&&Gn(e)==wc};function jr(e){return"string"==typeof e||!Sr(e)&&Nr(e)&&et(e)==Tc}function Br(e){return"symbol"==_typeof2(e)||Nr(e)&&et(e)==Oc}var Hr=ka?as(ka):function(e){return Nr(e)&&xr(e.length)&&!!ba[et(e)]};var qr=En(ht),Kr=En(function(e,t){return e<=t});function Wr(e){if(!e)return[];if(br(e))return jr(e)?ys(e):on(e);if(A&&e[A])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[A]());var t=Gn(e);return(t==yc?Cs:t==wc?ms:Io)(e)}function Gr(e){return e?(e=Xr(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0}function zr(e){var t=Gr(e),n=t%1;return t==t?n?t-n:t:0}function Qr(e){return e?ke(zr(e),0,fc):0}function Xr(e){if("number"==typeof e)return e;if(Br(e))return uc;if(Ar(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ar(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=cs(e);var n=fa.test(e);return n||pa.test(e)?Oa(e.slice(2),n?2:8):ua.test(e)?uc:+e}function Jr(e){return cn(e,fo(e))}function Yr(e){return null==e?"":Ut(e)}var Zr=sn(function(e,t){if(ti(t)||br(t))cn(t,uo(t),e);else for(var n in t)v.call(t,n)&&Me(e,n,t[n])}),$r=sn(function(e,t){cn(t,fo(t),e)}),eo=sn(function(e,t,n,i){cn(t,fo(t),e,i)}),to=sn(function(e,t,n,i){cn(t,uo(t),e,i)}),no=Nn(Ve);var io=bt(function(e,t){e=y(e);var n=-1,i=t.length,r=2<i?t[2]:oc;for(r&&Yn(t[0],t[1],r)&&(i=1);++n<i;)for(var o=t[n],c=fo(o),a=-1,s=c.length;++a<s;){var l=c[a],d=e[l];(d===oc||mr(d,u[l])&&!v.call(e,l))&&(e[l]=o[l])}return e}),ro=bt(function(e){return e.push(oc,Dn),La(po,oc,e)});function oo(e,t,n){var i=null==e?oc:Ze(e,t);return i===oc?n:i}function co(e,t){return null!=e&&zn(e,t,it)}var ao=Rn(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=h.call(t)),e[t]=n},No(Lo)),so=Rn(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=h.call(t)),v.call(e,t)?e[t].push(n):e[t]=[n]},jn),lo=bt(ot);function uo(e){return br(e)?be(e):ut(e)}function fo(e){return br(e)?be(e,!0):ft(e)}var ho=sn(function(e,t,n){gt(e,t,n)}),po=sn(function(e,t,n,i){gt(e,t,n,i)}),_o=Nn(function(t,e){var n={};if(null==t)return n;var i=!1;e=Wa(e,function(e){return e=Qt(e,t),i=i||1<e.length,e}),cn(t,kn(t),n),i&&(n=Le(n,7,xn));for(var r=e.length;r--;)jt(n,e[r]);return n});var Co=Nn(function(e,t){return null==e?{}:It(n=e,t,function(e,t){return co(n,t)});var n});function go(e,n){if(null==e)return{};var t=Wa(kn(e),function(e){return[e]});return n=jn(n),It(e,t,function(e,t){return n(e,t[0])})}var Ro=On(uo),mo=On(fo);function Io(e){return null==e?[]:ss(e,uo(e))}var yo=fn(function(e,t,n){return t=t.toLowerCase(),e+(n?vo(t):t)});function vo(e){return Mo(Yr(e).toLowerCase())}function So(e){return(e=Yr(e))&&e.replace(Ca,fs).replace(Ia,"")}var Eo=fn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),bo=fn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),wo=un("toLowerCase");var To=fn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var Oo=fn(function(e,t,n){return e+(n?" ":"")+Mo(t)});var Po=fn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Mo=un("toUpperCase");function Do(e,t,n){return e=Yr(e),(t=n?oc:t)===oc?(i=e,va.test(i)?e.match(ya)||[]:e.match(ca)||[]):e.match(t)||[];var i}var xo=bt(function(e,t){try{return La(e,oc,t)}catch(e){return Pr(e)?e:new C(e)}}),Ao=Nn(function(t,e){return Fa(e,function(e){e=Ci(e),Ne(t,e,sr(t[e],t))}),t});function No(e){return function(){return e}}var Vo=Cn(),ko=Cn(!0);function Lo(e){return e}function Uo(e){return dt("function"==typeof e?e:Le(e,1))}var Fo=bt(function(t,n){return function(e){return ot(e,t,n)}}),jo=bt(function(t,n){return function(e){return ot(t,e,n)}});function Bo(i,t,e){var n=uo(t),r=Ye(t,n);null!=e||Ar(t)&&(r.length||!n.length)||(e=t,t=i,i=this,r=Ye(t,uo(t)));var o=!(Ar(e)&&"chain"in e&&!e.chain),c=Mr(i);return Fa(r,function(e){var n=t[e];i[e]=n,c&&(i.prototype[e]=function(){var e=this.__chain__;if(o||e){var t=i(this.__wrapped__);return(t.__actions__=on(this.__actions__)).push({func:n,args:arguments,thisArg:i}),t.__chain__=e,t}return n.apply(i,Ga([this.value()],arguments))})}),i}function Ho(){}var qo=In(Wa),Ko=In(Ba),Wo=In(Xa);function Go(e){return Zn(e)?ns(Ci(e)):(t=e,function(e){return Ze(e,t)});var t}var zo=Sn(),Qo=Sn(!0);function Xo(){return[]}function Jo(){return!1}var Yo=mn(function(e,t){return e+t},0),Zo=wn("ceil"),$o=mn(function(e,t){return e/t},1),ec=wn("floor");var tc,nc=mn(function(e,t){return e*t},1),ic=wn("round"),rc=mn(function(e,t){return e-t},0);return pe.after=function(e,t){if("function"!=typeof t)throw new m(cc);return e=zr(e),function(){if(--e<1)return t.apply(this,arguments)}},pe.ary=cr,pe.assign=Zr,pe.assignIn=$r,pe.assignInWith=eo,pe.assignWith=to,pe.at=no,pe.before=ar,pe.bind=sr,pe.bindAll=Ao,pe.bindKey=lr,pe.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Sr(e)?e:[e]},pe.chain=Wi,pe.chunk=function(e,t,n){t=(n?Yn(e,t,n):t===oc)?1:G(zr(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var r=0,o=0,c=b(F(i/t));r<i;)c[o++]=xt(e,r,r+=t);return c},pe.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},pe.concat=function(){var e=arguments.length;if(!e)return[];for(var t=b(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Ga(Sr(n)?on(n):[n],Ge(t,1))},pe.cond=function(i){var r=null==i?0:i.length,t=jn();return i=r?Wa(i,function(e){if("function"!=typeof e[1])throw new m(cc);return[t(e[0]),e[1]]}):[],bt(function(e){for(var t=-1;++t<r;){var n=i[t];if(La(n[0],this,e))return La(n[1],this,e)}})},pe.conforms=function(e){return t=Le(e,1),n=uo(t),function(e){return Ue(e,t,n)};var t,n},pe.constant=No,pe.countBy=Qi,pe.create=function(e,t){var n=_e(e);return null==t?n:Ae(n,t)},pe.curry=function e(t,n,i){var r=Pn(t,8,oc,oc,oc,oc,oc,n=i?oc:n);return r.placeholder=e.placeholder,r},pe.curryRight=function e(t,n,i){var r=Pn(t,16,oc,oc,oc,oc,oc,n=i?oc:n);return r.placeholder=e.placeholder,r},pe.debounce=dr,pe.defaults=io,pe.defaultsDeep=ro,pe.defer=ur,pe.delay=fr,pe.difference=mi,pe.differenceBy=Ii,pe.differenceWith=yi,pe.drop=function(e,t,n){var i=null==e?0:e.length;return i?xt(e,(t=n||t===oc?1:zr(t))<0?0:t,i):[]},pe.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?xt(e,0,(t=i-(t=n||t===oc?1:zr(t)))<0?0:t):[]},pe.dropRightWhile=function(e,t){return e&&e.length?Ht(e,jn(t,3),!0,!0):[]},pe.dropWhile=function(e,t){return e&&e.length?Ht(e,jn(t,3),!0):[]},pe.fill=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Yn(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=zr(n))<0&&(n=r<-n?0:r+n),(i=i===oc||r<i?r:zr(i))<0&&(i+=r),i=i<n?0:Qr(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},pe.filter=function(e,t){return(Sr(e)?Ha:We)(e,jn(t,3))},pe.flatMap=function(e,t){return Ge(nr(e,t),1)},pe.flatMapDeep=function(e,t){return Ge(nr(e,t),1/0)},pe.flatMapDepth=function(e,t,n){return n=n===oc?1:zr(n),Ge(nr(e,t),n)},pe.flatten=Ei,pe.flattenDeep=function(e){return(null==e?0:e.length)?Ge(e,1/0):[]},pe.flattenDepth=function(e,t){return(null==e?0:e.length)?Ge(e,t=t===oc?1:zr(t)):[]},pe.flip=function(e){return Pn(e,512)},pe.flow=Vo,pe.flowRight=ko,pe.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},pe.functions=function(e){return null==e?[]:Ye(e,uo(e))},pe.functionsIn=function(e){return null==e?[]:Ye(e,fo(e))},pe.groupBy=$i,pe.initial=function(e){return(null==e?0:e.length)?xt(e,0,-1):[]},pe.intersection=wi,pe.intersectionBy=Ti,pe.intersectionWith=Oi,pe.invert=ao,pe.invertBy=so,pe.invokeMap=er,pe.iteratee=Uo,pe.keyBy=tr,pe.keys=uo,pe.keysIn=fo,pe.map=nr,pe.mapKeys=function(e,i){var r={};return i=jn(i,3),Xe(e,function(e,t,n){Ne(r,i(e,t,n),e)}),r},pe.mapValues=function(e,i){var r={};return i=jn(i,3),Xe(e,function(e,t,n){Ne(r,t,i(e,t,n))}),r},pe.matches=function(e){return _t(Le(e,1))},pe.matchesProperty=function(e,t){return Ct(e,Le(t,1))},pe.memoize=hr,pe.merge=ho,pe.mergeWith=po,pe.method=Fo,pe.methodOf=jo,pe.mixin=Bo,pe.negate=pr,pe.nthArg=function(t){return t=zr(t),bt(function(e){return Rt(e,t)})},pe.omit=_o,pe.omitBy=function(e,t){return go(e,pr(jn(t)))},pe.once=function(e){return ar(2,e)},pe.orderBy=function(e,t,n,i){return null==e?[]:(Sr(t)||(t=null==t?[]:[t]),Sr(n=i?oc:n)||(n=null==n?[]:[n]),mt(e,t,n))},pe.over=qo,pe.overArgs=_r,pe.overEvery=Ko,pe.overSome=Wo,pe.partial=Cr,pe.partialRight=gr,pe.partition=ir,pe.pick=Co,pe.pickBy=go,pe.property=Go,pe.propertyOf=function(t){return function(e){return null==t?oc:Ze(t,e)}},pe.pull=Mi,pe.pullAll=Di,pe.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?yt(e,t,jn(n,2)):e},pe.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?yt(e,t,oc,n):e},pe.pullAt=xi,pe.range=zo,pe.rangeRight=Qo,pe.rearg=Rr,pe.reject=function(e,t){return(Sr(e)?Ha:We)(e,pr(jn(t,3)))},pe.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=jn(t,3);++i<o;){var c=e[i];t(c,i,e)&&(n.push(c),r.push(i))}return vt(e,r),n},pe.rest=function(e,t){if("function"!=typeof e)throw new m(cc);return bt(e,t=t===oc?t:zr(t))},pe.reverse=Ai,pe.sampleSize=function(e,t,n){return t=(n?Yn(e,t,n):t===oc)?1:zr(t),(Sr(e)?Te:Tt)(e,t)},pe.set=function(e,t,n){return null==e?e:Ot(e,t,n)},pe.setWith=function(e,t,n,i){return i="function"==typeof i?i:oc,null==e?e:Ot(e,t,n,i)},pe.shuffle=function(e){return(Sr(e)?Oe:Dt)(e)},pe.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n=n&&"number"!=typeof n&&Yn(e,t,n)?(t=0,i):(t=null==t?0:zr(t),n===oc?i:zr(n)),xt(e,t,n)):[]},pe.sortBy=rr,pe.sortedUniq=function(e){return e&&e.length?kt(e):[]},pe.sortedUniqBy=function(e,t){return e&&e.length?kt(e,jn(t,2)):[]},pe.split=function(e,t,n){return n&&"number"!=typeof n&&Yn(e,t,n)&&(t=n=oc),(n=n===oc?fc:n>>>0)?(e=Yr(e))&&("string"==typeof t||null!=t&&!Ur(t))&&!(t=Ut(t))&&_s(e)?Jt(ys(e),0,n):e.split(t,n):[]},pe.spread=function(i,r){if("function"!=typeof i)throw new m(cc);return r=null==r?0:G(zr(r),0),bt(function(e){var t=e[r],n=Jt(e,0,r);return t&&Ga(n,t),La(i,this,n)})},pe.tail=function(e){var t=null==e?0:e.length;return t?xt(e,1,t):[]},pe.take=function(e,t,n){return e&&e.length?xt(e,0,(t=n||t===oc?1:zr(t))<0?0:t):[]},pe.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?xt(e,(t=i-(t=n||t===oc?1:zr(t)))<0?0:t,i):[]},pe.takeRightWhile=function(e,t){return e&&e.length?Ht(e,jn(t,3),!1,!0):[]},pe.takeWhile=function(e,t){return e&&e.length?Ht(e,jn(t,3)):[]},pe.tap=function(e,t){return t(e),e},pe.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new m(cc);return Ar(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),dr(e,t,{leading:i,maxWait:t,trailing:r})},pe.thru=Gi,pe.toArray=Wr,pe.toPairs=Ro,pe.toPairsIn=mo,pe.toPath=function(e){return Sr(e)?Wa(e,Ci):Br(e)?[e]:on(_i(Yr(e)))},pe.toPlainObject=Jr,pe.transform=function(e,i,r){var t=Sr(e),n=t||Tr(e)||Hr(e);if(i=jn(i,4),null==r){var o=e&&e.constructor;r=n?t?new o:[]:Ar(e)&&Mr(o)?_e(O(e)):{}}return(n?Fa:Xe)(e,function(e,t,n){return i(r,e,t,n)}),r},pe.unary=function(e){return cr(e,1)},pe.union=Ni,pe.unionBy=Vi,pe.unionWith=ki,pe.uniq=function(e){return e&&e.length?Ft(e):[]},pe.uniqBy=function(e,t){return e&&e.length?Ft(e,jn(t,2)):[]},pe.uniqWith=function(e,t){return t="function"==typeof t?t:oc,e&&e.length?Ft(e,oc,t):[]},pe.unset=function(e,t){return null==e||jt(e,t)},pe.unzip=Li,pe.unzipWith=Ui,pe.update=function(e,t,n){return null==e?e:Bt(e,t,zt(n))},pe.updateWith=function(e,t,n,i){return i="function"==typeof i?i:oc,null==e?e:Bt(e,t,zt(n),i)},pe.values=Io,pe.valuesIn=function(e){return null==e?[]:ss(e,fo(e))},pe.without=Fi,pe.words=Do,pe.wrap=function(e,t){return Cr(zt(t),e)},pe.xor=ji,pe.xorBy=Bi,pe.xorWith=Hi,pe.zip=qi,pe.zipObject=function(e,t){return Wt(e||[],t||[],Me)},pe.zipObjectDeep=function(e,t){return Wt(e||[],t||[],Ot)},pe.zipWith=Ki,pe.entries=Ro,pe.entriesIn=mo,pe.extend=$r,pe.extendWith=eo,Bo(pe,pe),pe.add=Yo,pe.attempt=xo,pe.camelCase=yo,pe.capitalize=vo,pe.ceil=Zo,pe.clamp=function(e,t,n){return n===oc&&(n=t,t=oc),n!==oc&&(n=(n=Xr(n))==n?n:0),t!==oc&&(t=(t=Xr(t))==t?t:0),ke(Xr(e),t,n)},pe.clone=function(e){return Le(e,4)},pe.cloneDeep=function(e){return Le(e,5)},pe.cloneDeepWith=function(e,t){return Le(e,5,t="function"==typeof t?t:oc)},pe.cloneWith=function(e,t){return Le(e,4,t="function"==typeof t?t:oc)},pe.conformsTo=function(e,t){return null==t||Ue(e,t,uo(t))},pe.deburr=So,pe.defaultTo=function(e,t){return null==e||e!=e?t:e},pe.divide=$o,pe.endsWith=function(e,t,n){e=Yr(e),t=Ut(t);var i=e.length,r=n=n===oc?i:ke(zr(n),0,i);return 0<=(n-=t.length)&&e.slice(n,r)==t},pe.eq=mr,pe.escape=function(e){return(e=Yr(e))&&zc.test(e)?e.replace(Wc,hs):e},pe.escapeRegExp=function(e){return(e=Yr(e))&&ta.test(e)?e.replace(ea,"\\$&"):e},pe.every=function(e,t,n){var i=Sr(e)?Ba:qe;return n&&Yn(e,t,n)&&(t=oc),i(e,jn(t,3))},pe.find=Xi,pe.findIndex=vi,pe.findKey=function(e,t){return Ja(e,jn(t,3),Xe)},pe.findLast=Ji,pe.findLastIndex=Si,pe.findLastKey=function(e,t){return Ja(e,jn(t,3),Je)},pe.floor=ec,pe.forEach=Yi,pe.forEachRight=Zi,pe.forIn=function(e,t){return null==e?e:ze(e,jn(t,3),fo)},pe.forInRight=function(e,t){return null==e?e:Qe(e,jn(t,3),fo)},pe.forOwn=function(e,t){return e&&Xe(e,jn(t,3))},pe.forOwnRight=function(e,t){return e&&Je(e,jn(t,3))},pe.get=oo,pe.gt=Ir,pe.gte=yr,pe.has=function(e,t){return null!=e&&zn(e,t,nt)},pe.hasIn=co,pe.head=bi,pe.identity=Lo,pe.includes=function(e,t,n,i){e=br(e)?e:Io(e),n=n&&!i?zr(n):0;var r=e.length;return n<0&&(n=G(r+n,0)),jr(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<Za(e,t,n)},pe.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:zr(n);return r<0&&(r=G(i+r,0)),Za(e,t,r)},pe.inRange=function(e,t,n){return t=Gr(t),n===oc?(n=t,t=0):n=Gr(n),e=Xr(e),(i=e)>=z(r=t,o=n)&&i<G(r,o);var i,r,o},pe.invoke=lo,pe.isArguments=vr,pe.isArray=Sr,pe.isArrayBuffer=Er,pe.isArrayLike=br,pe.isArrayLikeObject=wr,pe.isBoolean=function(e){return!0===e||!1===e||Nr(e)&&et(e)==Cc},pe.isBuffer=Tr,pe.isDate=Or,pe.isElement=function(e){return Nr(e)&&1===e.nodeType&&!Lr(e)},pe.isEmpty=function(e){if(null==e)return!0;if(br(e)&&(Sr(e)||"string"==typeof e||"function"==typeof e.splice||Tr(e)||Hr(e)||vr(e)))return!e.length;var t=Gn(e);if(t==yc||t==wc)return!e.size;if(ti(e))return!ut(e).length;for(var n in e)if(v.call(e,n))return!1;return!0},pe.isEqual=function(e,t){return at(e,t)},pe.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:oc)?n(e,t):oc;return i===oc?at(e,t,oc,n):!!i},pe.isError=Pr,pe.isFinite=function(e){return"number"==typeof e&&q(e)},pe.isFunction=Mr,pe.isInteger=Dr,pe.isLength=xr,pe.isMap=Vr,pe.isMatch=function(e,t){return e===t||st(e,t,Hn(t))},pe.isMatchWith=function(e,t,n){return n="function"==typeof n?n:oc,st(e,t,Hn(t),n)},pe.isNaN=function(e){return kr(e)&&e!=+e},pe.isNative=function(e){if(ei(e))throw new C("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return lt(e)},pe.isNil=function(e){return null==e},pe.isNull=function(e){return null===e},pe.isNumber=kr,pe.isObject=Ar,pe.isObjectLike=Nr,pe.isPlainObject=Lr,pe.isRegExp=Ur,pe.isSafeInteger=function(e){return Dr(e)&&-dc<=e&&e<=dc},pe.isSet=Fr,pe.isString=jr,pe.isSymbol=Br,pe.isTypedArray=Hr,pe.isUndefined=function(e){return e===oc},pe.isWeakMap=function(e){return Nr(e)&&Gn(e)==Pc},pe.isWeakSet=function(e){return Nr(e)&&"[object WeakSet]"==et(e)},pe.join=function(e,t){return null==e?"":K.call(e,t)},pe.kebabCase=Eo,pe.last=Pi,pe.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return n!==oc&&(r=(r=zr(n))<0?G(i+r,0):z(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):Ya(e,es,r,!0)},pe.lowerCase=bo,pe.lowerFirst=wo,pe.lt=qr,pe.lte=Kr,pe.max=function(e){return e&&e.length?Ke(e,Lo,tt):oc},pe.maxBy=function(e,t){return e&&e.length?Ke(e,jn(t,2),tt):oc},pe.mean=function(e){return ts(e,Lo)},pe.meanBy=function(e,t){return ts(e,jn(t,2))},pe.min=function(e){return e&&e.length?Ke(e,Lo,ht):oc},pe.minBy=function(e,t){return e&&e.length?Ke(e,jn(t,2),ht):oc},pe.stubArray=Xo,pe.stubFalse=Jo,pe.stubObject=function(){return{}},pe.stubString=function(){return""},pe.stubTrue=function(){return!0},pe.multiply=nc,pe.nth=function(e,t){return e&&e.length?Rt(e,zr(t)):oc},pe.noConflict=function(){return Pa._===this&&(Pa._=_),this},pe.noop=Ho,pe.now=or,pe.pad=function(e,t,n){e=Yr(e);var i=(t=zr(t))?Is(e):0;if(!t||t<=i)return e;var r=(t-i)/2;return yn(j(r),n)+e+yn(F(r),n)},pe.padEnd=function(e,t,n){e=Yr(e);var i=(t=zr(t))?Is(e):0;return t&&i<t?e+yn(t-i,n):e},pe.padStart=function(e,t,n){e=Yr(e);var i=(t=zr(t))?Is(e):0;return t&&i<t?yn(t-i,n)+e:e},pe.parseInt=function(e,t,n){return t=n||null==t?0:t&&+t,X(Yr(e).replace(na,""),t||0)},pe.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Yn(e,t,n)&&(t=n=oc),n===oc&&("boolean"==typeof t?(n=t,t=oc):"boolean"==typeof e&&(n=e,e=oc)),e===oc&&t===oc?(e=0,t=1):(e=Gr(e),t===oc?(t=e,e=0):t=Gr(t)),t<e){var i=e;e=t,t=i}if(n||e%1||t%1){var r=J();return z(e+r*(t-e+Ta("1e-"+((r+"").length-1))),t)}return St(e,t)},pe.reduce=function(e,t,n){var i=Sr(e)?za:is,r=arguments.length<3;return i(e,jn(t,4),n,r,Be)},pe.reduceRight=function(e,t,n){var i=Sr(e)?Qa:is,r=arguments.length<3;return i(e,jn(t,4),n,r,He)},pe.repeat=function(e,t,n){return t=(n?Yn(e,t,n):t===oc)?1:zr(t),Et(Yr(e),t)},pe.replace=function(){var e=arguments,t=Yr(e[0]);return e.length<3?t:t.replace(e[1],e[2])},pe.result=function(e,t,n){var i=-1,r=(t=Qt(t,e)).length;for(r||(r=1,e=oc);++i<r;){var o=null==e?oc:e[Ci(t[i])];o===oc&&(i=r,o=n),e=Mr(o)?o.call(e):o}return e},pe.round=ic,pe.runInContext=e,pe.sample=function(e){return(Sr(e)?we:wt)(e)},pe.size=function(e){if(null==e)return 0;if(br(e))return jr(e)?Is(e):e.length;var t=Gn(e);return t==yc||t==wc?e.size:ut(e).length},pe.snakeCase=To,pe.some=function(e,t,n){var i=Sr(e)?Xa:At;return n&&Yn(e,t,n)&&(t=oc),i(e,jn(t,3))},pe.sortedIndex=function(e,t){return Nt(e,t)},pe.sortedIndexBy=function(e,t,n){return Vt(e,t,jn(n,2))},pe.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Nt(e,t);if(i<n&&mr(e[i],t))return i}return-1},pe.sortedLastIndex=function(e,t){return Nt(e,t,!0)},pe.sortedLastIndexBy=function(e,t,n){return Vt(e,t,jn(n,2),!0)},pe.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Nt(e,t,!0)-1;if(mr(e[n],t))return n}return-1},pe.startCase=Oo,pe.startsWith=function(e,t,n){return e=Yr(e),n=null==n?0:ke(zr(n),0,e.length),t=Ut(t),e.slice(n,n+t.length)==t},pe.subtract=rc,pe.sum=function(e){return e&&e.length?rs(e,Lo):0},pe.sumBy=function(e,t){return e&&e.length?rs(e,jn(t,2)):0},pe.template=function(c,e,t){var n=pe.templateSettings;t&&Yn(c,e,t)&&(e=oc),c=Yr(c),e=eo({},e,n,Mn);var a,s,i=eo({},e.imports,n.imports,Mn),r=uo(i),o=ss(i,r),l=0,d=e.interpolate||ga,u="__p += '",f=R((e.escape||ga).source+"|"+d.source+"|"+(d===Jc?la:ga).source+"|"+(e.evaluate||ga).source+"|$","g"),h="//# sourceURL="+(v.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ea+"]")+"\n";c.replace(f,function(e,t,n,i,r,o){return n=n||i,u+=c.slice(l,o).replace(Ra,ps),t&&(a=!0,u+="' +\n__e("+t+") +\n'"),r&&(s=!0,u+="';\n"+r+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=o+e.length,e}),u+="';\n";var p=v.call(e,"variable")&&e.variable;if(p){if(aa.test(p))throw new C("Invalid `variable` option passed into `_.template`")}else u="with (obj) {\n"+u+"\n}\n";u=(s?u.replace(Bc,""):u).replace(Hc,"$1").replace(qc,"$1;"),u="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var _=xo(function(){return g(r,h+"return "+u).apply(oc,o)});if(_.source=u,Pr(_))throw _;return _},pe.times=function(e,t){if((e=zr(e))<1||dc<e)return[];var n=fc,i=z(e,fc);t=jn(t),e-=fc;for(var r=os(i,t);++n<e;)t(n);return r},pe.toFinite=Gr,pe.toInteger=zr,pe.toLength=Qr,pe.toLower=function(e){return Yr(e).toLowerCase()},pe.toNumber=Xr,pe.toSafeInteger=function(e){return e?ke(zr(e),-dc,dc):0===e?e:0},pe.toString=Yr,pe.toUpper=function(e){return Yr(e).toUpperCase()},pe.trim=function(e,t,n){if((e=Yr(e))&&(n||t===oc))return cs(e);if(!e||!(t=Ut(t)))return e;var i=ys(e),r=ys(t);return Jt(i,ds(i,r),us(i,r)+1).join("")},pe.trimEnd=function(e,t,n){if((e=Yr(e))&&(n||t===oc))return e.slice(0,vs(e)+1);if(!e||!(t=Ut(t)))return e;var i=ys(e);return Jt(i,0,us(i,ys(t))+1).join("")},pe.trimStart=function(e,t,n){if((e=Yr(e))&&(n||t===oc))return e.replace(na,"");if(!e||!(t=Ut(t)))return e;var i=ys(e);return Jt(i,ds(i,ys(t))).join("")},pe.truncate=function(e,t){var n=30,i="...";if(Ar(t)){var r="separator"in t?t.separator:r;n="length"in t?zr(t.length):n,i="omission"in t?Ut(t.omission):i}var o=(e=Yr(e)).length;if(_s(e)){var c=ys(e);o=c.length}if(o<=n)return e;var a=n-Is(i);if(a<1)return i;var s=c?Jt(c,0,a).join(""):e.slice(0,a);if(r===oc)return s+i;if(c&&(a+=s.length-a),Ur(r)){if(e.slice(a).search(r)){var l,d=s;for(r.global||(r=R(r.source,Yr(da.exec(r))+"g")),r.lastIndex=0;l=r.exec(d);)var u=l.index;s=s.slice(0,u===oc?a:u)}}else if(e.indexOf(Ut(r),a)!=a){var f=s.lastIndexOf(r);-1<f&&(s=s.slice(0,f))}return s+i},pe.unescape=function(e){return(e=Yr(e))&&Gc.test(e)?e.replace(Kc,Ss):e},pe.uniqueId=function(e){var t=++l;return Yr(e)+t},pe.upperCase=Po,pe.upperFirst=Mo,pe.each=Yi,pe.eachRight=Zi,pe.first=bi,Bo(pe,(tc={},Xe(pe,function(e,t){v.call(pe.prototype,t)||(tc[t]=e)}),tc),{chain:!1}),pe.VERSION="4.17.21",Fa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){pe[e].placeholder=pe}),Fa(["drop","take"],function(n,i){me.prototype[n]=function(e){e=e===oc?1:G(zr(e),0);var t=this.__filtered__&&!i?new me(this):this.clone();return t.__filtered__?t.__takeCount__=z(e,t.__takeCount__):t.__views__.push({size:z(e,fc),type:n+(t.__dir__<0?"Right":"")}),t},me.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),Fa(["filter","map","takeWhile"],function(e,t){var n=t+1,i=1==n||3==n;me.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:jn(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),Fa(["head","last"],function(e,t){var n="take"+(t?"Right":"");me.prototype[e]=function(){return this[n](1).value()[0]}}),Fa(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");me.prototype[e]=function(){return this.__filtered__?new me(this):this[n](1)}}),me.prototype.compact=function(){return this.filter(Lo)},me.prototype.find=function(e){return this.filter(e).head()},me.prototype.findLast=function(e){return this.reverse().find(e)},me.prototype.invokeMap=bt(function(t,n){return"function"==typeof t?new me(this):this.map(function(e){return ot(e,t,n)})}),me.prototype.reject=function(e){return this.filter(pr(jn(e)))},me.prototype.slice=function(e,t){e=zr(e);var n=this;return n.__filtered__&&(0<e||t<0)?new me(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==oc&&(n=(t=zr(t))<0?n.dropRight(-t):n.take(t-e)),n)},me.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},me.prototype.toArray=function(){return this.take(fc)},Xe(me.prototype,function(u,e){var f=/^(?:filter|find|map|reject)|While$/.test(e),h=/^(?:head|last)$/.test(e),p=pe[h?"take"+("last"==e?"Right":""):e],_=h||/^find/.test(e);p&&(pe.prototype[e]=function(){function e(e){var t=p.apply(pe,Ga([e],n));return h&&c?t[0]:t}var t=this.__wrapped__,n=h?[1]:arguments,i=t instanceof me,r=n[0],o=i||Sr(t);o&&f&&"function"==typeof r&&1!=r.length&&(i=o=!1);var c=this.__chain__,a=!!this.__actions__.length,s=_&&!c,l=i&&!a;if(_||!o)return s&&l?u.apply(this,n):(d=this.thru(e),s?h?d.value()[0]:d.value():d);t=l?t:new me(this);var d=u.apply(t,n);return d.__actions__.push({func:Gi,args:[e],thisArg:oc}),new Re(d,c)})}),Fa(["pop","push","shift","sort","splice","unshift"],function(e){var n=o[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);pe.prototype[e]=function(){var t=arguments;if(!r||this.__chain__)return this[i](function(e){return n.apply(Sr(e)?e:[],t)});var e=this.value();return n.apply(Sr(e)?e:[],t)}}),Xe(me.prototype,function(e,t){var n=pe[t];if(n){var i=n.name+"";v.call(oe,i)||(oe[i]=[]),oe[i].push({name:t,func:n})}}),oe[gn(oc,2).name]=[{name:"wrapper",func:oc}],me.prototype.clone=function(){var e=new me(this.__wrapped__);return e.__actions__=on(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=on(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=on(this.__views__),e},me.prototype.reverse=function(){if(this.__filtered__){var e=new me(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},me.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Sr(e),i=t<0,r=n?e.length:0,o=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var o=n[i],c=o.size;switch(o.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=z(t,e+c);break;case"takeRight":e=G(e,t-c)}}return{start:e,end:t}}(0,r,this.__views__),c=o.start,a=o.end,s=a-c,l=i?a:c-1,d=this.__iteratees__,u=d.length,f=0,h=z(s,this.__takeCount__);if(!n||!i&&r==s&&h==s)return qt(e,this.__actions__);var p=[];e:for(;s--&&f<h;){for(var _=-1,C=e[l+=t];++_<u;){var g=d[_],R=g.iteratee,m=g.type,I=R(C);if(2==m)C=I;else if(!I){if(1==m)continue e;break e}}p[f++]=C}return p},pe.prototype.at=zi,pe.prototype.chain=function(){return Wi(this)},pe.prototype.commit=function(){return new Re(this.value(),this.__chain__)},pe.prototype.next=function(){this.__values__===oc&&(this.__values__=Wr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?oc:this.__values__[this.__index__++]}},pe.prototype.plant=function(e){for(var t,n=this;n instanceof ge;){var i=Ri(n);i.__index__=0,i.__values__=oc,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},pe.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof me){var t=e;return this.__actions__.length&&(t=new me(this)),(t=t.reverse()).__actions__.push({func:Gi,args:[Ai],thisArg:oc}),new Re(t,this.__chain__)}return this.thru(Ai)},pe.prototype.toJSON=pe.prototype.valueOf=pe.prototype.value=function(){return qt(this.__wrapped__,this.__actions__)},pe.prototype.first=pe.prototype.head,A&&(pe.prototype[A]=function(){return this}),pe}();"function"==typeof define&&"object"==_typeof2(define.amd)&&define.amd?(Pa._=Es,define(function(){return Es})):L?((L.exports=Es)._=Es,k._=Es):Pa._=Es}).call(this),function(e){var t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"Uint8ArrToChar",value:function(e){var t,n,i,r,o,c;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],c=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&c)<<0)}return t}},{key:"charToUint8Arr",value:function(e){for(var t,n=[],i=0;i<e.length;i++)if((t=e.charCodeAt(i))<128)n.push(t);else if(t<2048)n.push(192|t>>6&31),n.push(128|t>>0&63);else{if(!(t<65536))throw"不是UCS-2字符集";n.push(224|t>>12&15),n.push(128|t>>6&63),n.push(128|t>>0&63)}return new Uint8Array(n)}},{key:"splitCutArr",value:function(e,t){for(var n=0,i=[];n<e.length;)i.push(e.slice(n,n+=t));return i}},{key:"getFileType",value:function(e){return/\.([^\.]+)$/.exec(e)[1].toLocaleLowerCase()}},{key:"findMemberInfo",value:function(t,e){var n=CRVideo.allMemberInfo.find(function(e){return e.userId==t});if(n)return n[e]}}]),e}();e.CRUtils=new t}(window),"undefined"==typeof RecordRTC&&("undefined"!=typeof module&&(module.exports=MultiStreamsMixer),"function"==typeof define&&define.amd&&define("MultiStreamsMixer",[],function(){return MultiStreamsMixer})),function(){"use strict";function re(e){throw e}var oe=void 0,ce=!0,o=this;function c(e,t){var n,i=e.split("."),r=o;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||t===oe?r=r[n]?r[n]:r[n]={}:r[n]=t}var ae="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function se(e,t){this.index="number"==typeof t?t:0,this.i=0,this.buffer=e instanceof(ae?Uint8Array:Array)?e:new(ae?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&re(Error("invalid index")),this.buffer.length<=this.index&&this.f()}se.prototype.f=function(){var e,t=this.buffer,n=t.length,i=new(ae?Uint8Array:Array)(n<<1);if(ae)i.set(t);else for(e=0;e<n;++e)i[e]=t[e];return this.buffer=i},se.prototype.d=function(e,t,n){var i,r=this.buffer,o=this.index,c=this.i,a=r[o];if(n&&1<t&&(e=8<t?(s[255&e]<<24|s[e>>>8&255]<<16|s[e>>>16&255]<<8|s[e>>>24&255])>>32-t:s[e]>>8-t),t+c<8)a=a<<t|e,c+=t;else for(i=0;i<t;++i)a=a<<1|e>>t-i-1&1,8==++c&&(c=0,r[o++]=s[a],a=0,o===r.length&&(r=this.f()));r[o]=a,this.buffer=r,this.i=c,this.index=o},se.prototype.finish=function(){var e=this.buffer,t=this.index;return 0<this.i&&(e[t]<<=8-this.i,e[t]=s[e[t]],t++),ae?e.subarray(0,t):(e.length=t,e)};var e,t=new(ae?Uint8Array:Array)(256);for(e=0;e<256;++e){for(var n=r=e,i=7,r=r>>>1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=(n<<i&255)>>>0}var s=t;function d(e){this.buffer=new(ae?Uint16Array:Array)(2*e),this.length=0}function v(e){var t,n,i,r,o,c,a,s,l,d,u=e.length,f=0,h=Number.POSITIVE_INFINITY;for(s=0;s<u;++s)e[s]>f&&(f=e[s]),e[s]<h&&(h=e[s]);for(t=1<<f,n=new(ae?Uint32Array:Array)(t),i=1,r=0,o=2;i<=f;){for(s=0;s<u;++s)if(e[s]===i){for(a=r,l=c=0;l<i;++l)c=c<<1|1&a,a>>=1;for(d=i<<16|s,l=c;l<t;l+=o)n[l]=d;++r}++i,r<<=1,o<<=1}return[n,f,h]}function a(e,t){this.h=le,this.w=0,this.input=ae&&e instanceof Array?new Uint8Array(e):e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=ae&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(ae?Uint8Array:Array)(32768))}d.prototype.getParent=function(e){return 2*((e-2)/4|0)},d.prototype.push=function(e,t){var n,i,r,o=this.buffer;for(n=this.length,o[this.length++]=t,o[this.length++]=e;0<n&&(i=this.getParent(n),o[n]>o[i]);)r=o[n],o[n]=o[i],o[i]=r,r=o[n+1],o[n+1]=o[i+1],o[i+1]=r,n=i;return this.length},d.prototype.pop=function(){var e,t,n,i,r,o=this.buffer;for(t=o[0],e=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],r=0;!((i=2*r+2)>=this.length)&&(i+2<this.length&&o[i+2]>o[i]&&(i+=2),o[i]>o[r]);)n=o[r],o[r]=o[i],o[i]=n,n=o[r+1],o[r+1]=o[i+1],o[i+1]=n,r=i;return{index:e,value:t,length:this.length}};var l,le=2,u={NONE:0,r:1,k:le,N:3},de=[];for(l=0;l<288;l++)switch(ce){case l<=143:de.push([l+48,8]);break;case l<=255:de.push([l-144+400,9]);break;case l<=279:de.push([l-256+0,7]);break;case l<=287:de.push([l-280+192,8]);break;default:re("invalid literal: "+l)}function f(e,t){this.length=e,this.G=t}a.prototype.j=function(){var e,t,n,i,r=this.input;switch(this.h){case 0:for(n=0,i=r.length;n<i;){var o,c,a,s=t=ae?r.subarray(n,n+65535):r.slice(n,n+65535),l=(n+=t.length)===i,d=oe,u=oe,f=this.a,h=this.b;if(ae){for(f=new Uint8Array(this.a.buffer);f.length<=h+s.length+5;)f=new Uint8Array(f.length<<1);f.set(this.a)}if(o=l?1:0,f[h++]=0|o,a=65536+~(c=s.length)&65535,f[h++]=255&c,f[h++]=c>>>8&255,f[h++]=255&a,f[h++]=a>>>8&255,ae)f.set(s,h),h+=s.length,f=f.subarray(0,h);else{for(d=0,u=s.length;d<u;++d)f[h++]=s[d];f.length=h}this.b=h,this.a=f}break;case 1:var p=new se(ae?new Uint8Array(this.a.buffer):this.a,this.b);p.d(1,1,ce),p.d(1,2,ce);var _,C,g,R=ue(this,r);for(_=0,C=R.length;_<C;_++)if(g=R[_],se.prototype.d.apply(p,de[g]),256<g)p.d(R[++_],R[++_],ce),p.d(R[++_],5),p.d(R[++_],R[++_],ce);else if(256===g)break;this.a=p.finish(),this.b=this.a.length;break;case le:var m,I,y,v,S,E,b,w,T,O,P,M,D,x,A,N=new se(ae?new Uint8Array(this.a.buffer):this.a,this.b),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=Array(19);for(m=le,N.d(1,1,ce),N.d(m,2,ce),I=ue(this,r),b=he(E=fe(this.L,15)),T=he(w=fe(this.K,7)),y=286;257<y&&0===E[y-1];y--);for(v=30;1<v&&0===w[v-1];v--);var L,U,F,j,B,H,q=y,K=v,W=new(ae?Uint32Array:Array)(q+K),G=new(ae?Uint32Array:Array)(316),z=new(ae?Uint8Array:Array)(19);for(L=U=0;L<q;L++)W[U++]=E[L];for(L=0;L<K;L++)W[U++]=w[L];if(!ae)for(L=0,j=z.length;L<j;++L)z[L]=0;for(L=B=0,j=W.length;L<j;L+=U){for(U=1;L+U<j&&W[L+U]===W[L];++U);if(F=U,0===W[L])if(F<3)for(;0<F--;)z[G[B++]=0]++;else for(;0<F;)F-3<(H=F<138?F:138)&&H<F&&(H=F-3),H<=10?(G[B++]=17,G[B++]=H-3,z[17]++):(G[B++]=18,G[B++]=H-11,z[18]++),F-=H;else if(G[B++]=W[L],z[W[L]]++,--F<3)for(;0<F--;)G[B++]=W[L],z[W[L]]++;else for(;0<F;)F-3<(H=F<6?F:6)&&H<F&&(H=F-3),G[B++]=16,G[B++]=H-3,z[16]++,F-=H}for(e=ae?G.subarray(0,B):G.slice(0,B),O=fe(z,7),x=0;x<19;x++)k[x]=O[V[x]];for(S=19;4<S&&0===k[S-1];S--);for(P=he(O),N.d(y-257,5,ce),N.d(v-1,5,ce),N.d(S-4,4,ce),x=0;x<S;x++)N.d(k[x],3,ce);for(x=0,A=e.length;x<A;x++)if(M=e[x],N.d(P[M],O[M],ce),16<=M){switch(x++,M){case 16:D=2;break;case 17:D=3;break;case 18:D=7;break;default:re("invalid code: "+M)}N.d(e[x],D,ce)}var Q,X,J,Y,Z,$,ee,te,ne=[b,E],ie=[T,w];for(Z=ne[0],$=ne[1],ee=ie[0],te=ie[1],Q=0,X=I.length;Q<X;++Q)if(J=I[Q],N.d(Z[J],$[J],ce),256<J)N.d(I[++Q],I[++Q],ce),Y=I[++Q],N.d(ee[Y],te[Y],ce),N.d(I[++Q],I[++Q],ce);else if(256===J)break;this.a=N.finish(),this.b=this.a.length;break;default:re("invalid compression type")}return this.a};var h=function(){function e(e){switch(ce){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:re("invalid length: "+e)}}var t,n,i=[];for(t=3;t<=258;t++)n=e(t),i[t]=n[2]<<24|n[1]<<16|n[0];return i}(),m=ae?new Uint32Array(h):h;function ue(e,t){function n(e,t){var n,i,r,o,c=e.G,a=[],s=0;switch(n=m[e.length],a[s++]=65535&n,a[s++]=n>>16&255,a[s++]=n>>24,ce){case 1===c:i=[0,c-1,0];break;case 2===c:i=[1,c-2,0];break;case 3===c:i=[2,c-3,0];break;case 4===c:i=[3,c-4,0];break;case c<=6:i=[4,c-5,1];break;case c<=8:i=[5,c-7,1];break;case c<=12:i=[6,c-9,2];break;case c<=16:i=[7,c-13,2];break;case c<=24:i=[8,c-17,3];break;case c<=32:i=[9,c-25,3];break;case c<=48:i=[10,c-33,4];break;case c<=64:i=[11,c-49,4];break;case c<=96:i=[12,c-65,5];break;case c<=128:i=[13,c-97,5];break;case c<=192:i=[14,c-129,6];break;case c<=256:i=[15,c-193,6];break;case c<=384:i=[16,c-257,7];break;case c<=512:i=[17,c-385,7];break;case c<=768:i=[18,c-513,8];break;case c<=1024:i=[19,c-769,8];break;case c<=1536:i=[20,c-1025,9];break;case c<=2048:i=[21,c-1537,9];break;case c<=3072:i=[22,c-2049,10];break;case c<=4096:i=[23,c-3073,10];break;case c<=6144:i=[24,c-4097,11];break;case c<=8192:i=[25,c-6145,11];break;case c<=12288:i=[26,c-8193,12];break;case c<=16384:i=[27,c-12289,12];break;case c<=24576:i=[28,c-16385,13];break;case c<=32768:i=[29,c-24577,13];break;default:re("invalid distance")}for(n=i,a[s++]=n[0],a[s++]=n[1],a[s++]=n[2],r=0,o=a.length;r<o;++r)h[p++]=a[r];C[a[0]]++,g[a[3]]++,_=e.length+t-1,d=null}var i,r,o,c,a,s,l,d,u,f={},h=ae?new Uint16Array(2*t.length):[],p=0,_=0,C=new(ae?Uint32Array:Array)(286),g=new(ae?Uint32Array:Array)(30),R=e.w;if(!ae){for(o=0;o<=285;)C[o++]=0;for(o=0;o<=29;)g[o++]=0}for(C[256]=1,i=0,r=t.length;i<r;++i){for(o=a=0,c=3;o<c&&i+o!==r;++o)a=a<<8|t[i+o];if(f[a]===oe&&(f[a]=[]),s=f[a],!(0<_--)){for(;0<s.length&&32768<i-s[0];)s.shift();if(r<=i+3){for(d&&n(d,-1),o=0,c=r-i;o<c;++o)u=t[i+o],h[p++]=u,++C[u];break}0<s.length?(l=I(t,i,s),d?d.length<l.length?(u=t[i-1],h[p++]=u,++C[u],n(l,0)):n(d,-1):l.length<R?d=l:n(l,0)):d?n(d,-1):(u=t[i],h[p++]=u,++C[u])}s.push(i)}return h[p++]=256,C[256]++,e.L=C,e.K=g,ae?h.subarray(0,p):h}function I(e,t,n){var i,r,o,c,a,s,l=0,d=e.length;c=0,s=n.length;e:for(;c<s;c++){if(i=n[s-c-1],(o=3)<l){for(a=l;3<a;a--)if(e[i+a-1]!==e[t+a-1])continue e;o=l}for(;o<258&&t+o<d&&e[i+o]===e[t+o];)++o;if(l<o&&(r=i,l=o),258===o)break}return new f(l,t-r)}function fe(e,t){var n,i,r,o,c,a=e.length,s=new d(572),l=new(ae?Uint8Array:Array)(a);if(!ae)for(o=0;o<a;o++)l[o]=0;for(o=0;o<a;++o)0<e[o]&&s.push(o,e[o]);if(n=Array(s.length/2),i=new(ae?Uint32Array:Array)(s.length/2),1===n.length)return l[s.pop().index]=1,l;for(o=0,c=s.length/2;o<c;++o)n[o]=s.pop(),i[o]=n[o].value;for(r=function(e,n,t){function i(e){var t=h[e][p[e]];t===n?(i(e+1),i(e+1)):--u[t],++p[e]}var r,o,c,a,s,l=new(ae?Uint16Array:Array)(t),d=new(ae?Uint8Array:Array)(t),u=new(ae?Uint8Array:Array)(n),f=Array(t),h=Array(t),p=Array(t),_=(1<<t)-n,C=1<<t-1;for(l[t-1]=n,o=0;o<t;++o)_<C?d[o]=0:(d[o]=1,_-=C),_<<=1,l[t-2-o]=(l[t-1-o]/2|0)+n;for(l[0]=d[0],f[0]=Array(l[0]),h[0]=Array(l[0]),o=1;o<t;++o)l[o]>2*l[o-1]+d[o]&&(l[o]=2*l[o-1]+d[o]),f[o]=Array(l[o]),h[o]=Array(l[o]);for(r=0;r<n;++r)u[r]=t;for(c=0;c<l[t-1];++c)f[t-1][c]=e[c],h[t-1][c]=c;for(r=0;r<t;++r)p[r]=0;for(1===d[t-1]&&(--u[0],++p[t-1]),o=t-2;0<=o;--o){for(a=r=0,s=p[o+1],c=0;c<l[o];c++)(a=f[o+1][s]+f[o+1][s+1])>e[r]?(f[o][c]=a,h[o][c]=n,s+=2):(f[o][c]=e[r],h[o][c]=r,++r);p[o]=0,1===d[o]&&i(o)}return u}(i,i.length,t),o=0,c=n.length;o<c;++o)l[n[o].index]=r[o];return l}function he(e){var t,n,i,r,o=new(ae?Uint16Array:Array)(e.length),c=[],a=[],s=0;for(t=0,n=e.length;t<n;t++)c[e[t]]=1+(0|c[e[t]]);for(t=1,n=16;t<=n;t++)a[t]=s,s+=0|c[t],s<<=1;for(t=0,n=e.length;t<n;t++)for(s=a[e[t]],a[e[t]]+=1,i=o[t]=0,r=e[t];i<r;i++)o[t]=o[t]<<1|1&s,s>>>=1;return o}function p(e,t){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=ae?new Uint8Array(e):e,this.s=!1,this.n=E,this.B=!1,(t||(t={},0))&&(t.index&&(this.c=t.index),t.bufferSize&&(this.m=t.bufferSize),t.bufferType&&(this.n=t.bufferType),t.resize&&(this.B=t.resize)),this.n){case S:this.b=32768,this.a=new(ae?Uint8Array:Array)(32768+this.m+258);break;case E:this.b=0,this.a=new(ae?Uint8Array:Array)(this.m),this.f=this.J,this.t=this.H,this.o=this.I;break;default:re(Error("invalid inflate mode"))}}var S=0,E=1,_=S,C=E;p.prototype.p=function(){for(;!this.s;){var e=j(this,3);switch(1&e&&(this.s=ce),e>>>=1){case 0:var t=this.input,n=this.c,i=this.a,r=this.b,o=t.length,c=oe,a=i.length,s=oe;switch(this.e=this.g=0,o<=n+1&&re(Error("invalid uncompressed block header: LEN")),c=t[n++]|t[n++]<<8,o<=n+1&&re(Error("invalid uncompressed block header: NLEN")),c===~(t[n++]|t[n++]<<8)&&re(Error("invalid uncompressed block header: length verify")),n+c>t.length&&re(Error("input buffer is broken")),this.n){case S:for(;r+c>i.length;){if(c-=s=a-r,ae)i.set(t.subarray(n,n+s),r),r+=s,n+=s;else for(;s--;)i[r++]=t[n++];this.b=r,i=this.f(),r=this.b}break;case E:for(;r+c>i.length;)i=this.f({v:2});break;default:re(Error("invalid inflate mode"))}if(ae)i.set(t.subarray(n,n+c),r),r+=c,n+=c;else for(;c--;)i[r++]=t[n++];this.c=n,this.b=r,this.a=i;break;case 1:this.o(L,F);break;case 2:var l,d,u,f,h=j(this,5)+257,p=j(this,5)+1,_=j(this,4)+4,C=new(ae?Uint8Array:Array)(b.length),g=oe,R=oe,m=oe,I=oe,y=oe;for(y=0;y<_;++y)C[b[y]]=j(this,3);if(!ae)for(y=_,_=C.length;y<_;++y)C[b[y]]=0;for(l=v(C),g=new(ae?Uint8Array:Array)(h+p),y=0,f=h+p;y<f;)switch(R=B(this,l)){case 16:for(I=3+j(this,2);I--;)g[y++]=m;break;case 17:for(I=3+j(this,3);I--;)g[y++]=0;m=0;break;case 18:for(I=11+j(this,7);I--;)g[y++]=0;m=0;break;default:m=g[y++]=R}d=v(ae?g.subarray(0,h):g.slice(0,h)),u=v(ae?g.subarray(h):g.slice(h)),this.o(d,u);break;default:re(Error("unknown BTYPE: "+e))}}return this.t()};var g,R,y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],b=ae?new Uint16Array(y):y,w=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],T=ae?new Uint16Array(w):w,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],P=ae?new Uint8Array(O):O,M=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],D=ae?new Uint16Array(M):M,x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=ae?new Uint8Array(x):x,N=new(ae?Uint8Array:Array)(288);for(g=0,R=N.length;g<R;++g)N[g]=g<=143?8:g<=255?9:g<=279?7:8;var V,k,L=v(N),U=new(ae?Uint8Array:Array)(30);for(V=0,k=U.length;V<k;++V)U[V]=5;var F=v(U);function j(e,t){for(var n,i=e.g,r=e.e,o=e.input,c=e.c,a=o.length;r<t;)a<=c&&re(Error("input buffer is broken")),i|=o[c++]<<r,r+=8;return n=i&(1<<t)-1,e.g=i>>>t,e.e=r-t,e.c=c,n}function B(e,t){for(var n,i,r=e.g,o=e.e,c=e.input,a=e.c,s=c.length,l=t[0],d=t[1];o<d&&!(s<=a);)r|=c[a++]<<o,o+=8;return o<(i=(n=l[r&(1<<d)-1])>>>16)&&re(Error("invalid code length: "+i)),e.g=r>>i,e.e=o-i,e.c=a,65535&n}function H(e){if("string"==typeof e){var t,n,i=e.split("");for(t=0,n=i.length;t<n;t++)i[t]=(255&i[t].charCodeAt(0))>>>0;e=i}for(var r,o=1,c=0,a=e.length,s=0;0<a;){for(a-=r=1024<a?1024:a;c+=o+=e[s++],--r;);o%=65521,c%=65521}return(c<<16|o)>>>0}function q(e,t){var n,i;switch(this.input=e,this.c=0,(t||(t={},0))&&(t.index&&(this.c=t.index),t.verify&&(this.M=t.verify)),n=e[this.c++],i=e[this.c++],15&n){case K:this.method=K;break;default:re(Error("unsupported compression method"))}0!=((n<<8)+i)%31&&re(Error("invalid fcheck flag:"+((n<<8)+i)%31)),32&i&&re(Error("fdict flag is not supported")),this.A=new p(e,{index:this.c,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}p.prototype.o=function(e,t){var n=this.a,i=this.b;this.u=e;for(var r,o,c,a,s=n.length-258;256!==(r=B(this,e));)if(r<256)s<=i&&(this.b=i,n=this.f(),i=this.b),n[i++]=r;else for(a=T[o=r-257],0<P[o]&&(a+=j(this,P[o])),r=B(this,t),c=D[r],0<A[r]&&(c+=j(this,A[r])),s<=i&&(this.b=i,n=this.f(),i=this.b);a--;)n[i]=n[i++-c];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},p.prototype.I=function(e,t){var n=this.a,i=this.b;this.u=e;for(var r,o,c,a,s=n.length;256!==(r=B(this,e));)if(r<256)s<=i&&(s=(n=this.f()).length),n[i++]=r;else for(a=T[o=r-257],0<P[o]&&(a+=j(this,P[o])),r=B(this,t),c=D[r],0<A[r]&&(c+=j(this,A[r])),s<i+a&&(s=(n=this.f()).length);a--;)n[i]=n[i++-c];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},p.prototype.f=function(){var e,t,n=new(ae?Uint8Array:Array)(this.b-32768),i=this.b-32768,r=this.a;if(ae)n.set(r.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=r[e+32768];if(this.l.push(n),this.q+=n.length,ae)r.set(r.subarray(i,32768+i));else for(e=0;e<32768;++e)r[e]=r[i+e];return this.b=32768,r},p.prototype.J=function(e){var t,n,i,r=this.input.length/this.c+1|0,o=this.input,c=this.a;return e&&("number"==typeof e.v&&(r=e.v),"number"==typeof e.F&&(r+=e.F)),n=r<2?(i=(o.length-this.c)/this.u[2]/2*258|0)<c.length?c.length+i:c.length<<1:c.length*r,ae?(t=new Uint8Array(n)).set(c):t=c,this.a=t},p.prototype.t=function(){var e,t,n,i,r,o=0,c=this.a,a=this.l,s=new(ae?Uint8Array:Array)(this.q+(this.b-32768));if(0===a.length)return ae?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,n=a.length;t<n;++t)for(i=0,r=(e=a[t]).length;i<r;++i)s[o++]=e[i];for(t=32768,n=this.b;t<n;++t)s[o++]=c[t];return this.l=[],this.buffer=s},p.prototype.H=function(){var e,t=this.b;return ae?this.B?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},q.prototype.p=function(){var e,t=this.input;return e=this.A.p(),this.c=this.A.c,this.M&&((t[this.c++]<<24|t[this.c++]<<16|t[this.c++]<<8|t[this.c++])>>>0!==H(e)&&re(Error("invalid adler-32 checksum"))),e};var K=8;function W(e,t){this.input=e,this.a=new(ae?Uint8Array:Array)(32768),this.h=G.k;var n,i={};for(n in(t||(t={},0))&&"number"==typeof t.compressionType&&(this.h=t.compressionType),t)i[n]=t[n];i.outputBuffer=this.a,this.z=new a(this.input,i)}var G=u;function z(e,t){var n,i,r,o;if(Object.keys)n=Object.keys(t);else for(i in n=[],r=0,t)n[r++]=i;for(r=0,o=n.length;r<o;++r)c(e+"."+(i=n[r]),t[i])}W.prototype.j=function(){var e,t,n,i,r,o,c,a=0;switch(c=this.a,e=K){case K:t=Math.LOG2E*Math.log(32768)-8;break;default:re(Error("invalid compression method"))}switch(n=t<<4|e,c[a++]=n,e){case K:switch(this.h){case G.NONE:r=0;break;case G.r:r=1;break;case G.k:r=2;break;default:re(Error("unsupported compression type"))}break;default:re(Error("invalid compression method"))}return i=r<<6|0,c[a++]=i|31-(256*n+i)%31,o=H(this.input),this.z.b=a,a=(c=this.z.j()).length,ae&&((c=new Uint8Array(c.buffer)).length<=a+4&&(this.a=new Uint8Array(c.length+4),this.a.set(c),c=this.a),c=c.subarray(0,a+4)),c[a++]=o>>24&255,c[a++]=o>>16&255,c[a++]=o>>8&255,c[a++]=255&o,c},c("Zlib.Inflate",q),c("Zlib.Inflate.prototype.decompress",q.prototype.p),z("Zlib.Inflate.BufferType",{ADAPTIVE:C,BLOCK:_}),c("Zlib.Deflate",W),c("Zlib.Deflate.compress",function(e,t){return new W(e,t).j()}),c("Zlib.Deflate.prototype.compress",W.prototype.j),z("Zlib.Deflate.CompressionType",{NONE:G.NONE,FIXED:G.r,DYNAMIC:G.k})}.call(this),function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).adapter=e()}}(function(){return function o(c,a,s){function l(t,e){if(!a[t]){if(!c[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[t]={exports:{}};c[t][0].call(r.exports,function(e){return l(c[t][1][e]||e)},r,r.exports,o,c,a,s)}return a[t].exports}for(var d="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,n){"use strict";var i=(0,e("./adapter_factory.js").adapterFactory)({window:window});t.exports=i},{"./adapter_factory.js":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).window,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=o.log,i=o.detectBrowser(e),r={browserDetails:i,commonShim:d,extractVersion:o.extractVersion,disableLog:o.disableLog,disableWarnings:o.disableWarnings};switch(i.browser){case"chrome":if(!c||!c.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;n("adapter.js shimming chrome."),(r.browserShim=c).shimGetUserMedia(e),c.shimMediaStream(e),c.shimPeerConnection(e),c.shimOnTrack(e),c.shimAddTrackRemoveTrack(e),c.shimGetSendersWithDtmf(e),c.shimGetStats(e),c.shimSenderReceiverGetStats(e),c.fixNegotiationNeeded(e),d.shimRTCIceCandidate(e),d.shimConnectionState(e),d.shimMaxMessageSize(e),d.shimSendThrowTypeError(e),d.removeAllowExtmapMixed(e);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),(r.browserShim=s).shimGetUserMedia(e),s.shimPeerConnection(e),s.shimOnTrack(e),s.shimRemoveStream(e),s.shimSenderGetStats(e),s.shimReceiverGetStats(e),s.shimRTCDataChannel(e),s.shimAddTransceiver(e),s.shimCreateOffer(e),s.shimCreateAnswer(e),d.shimRTCIceCandidate(e),d.shimConnectionState(e),d.shimMaxMessageSize(e),d.shimSendThrowTypeError(e);break;case"edge":if(!a||!a.shimPeerConnection||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),r;n("adapter.js shimming edge."),(r.browserShim=a).shimGetUserMedia(e),a.shimGetDisplayMedia(e),a.shimPeerConnection(e),a.shimReplaceTrack(e),d.shimMaxMessageSize(e),d.shimSendThrowTypeError(e);break;case"safari":if(!l||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),(r.browserShim=l).shimRTCIceServerUrls(e),l.shimCreateOfferLegacy(e),l.shimCallbacksAPI(e),l.shimLocalStreamsAPI(e),l.shimRemoteStreamsAPI(e),l.shimTrackEventTransceiver(e),l.shimGetUserMedia(e),d.shimRTCIceCandidate(e),d.shimMaxMessageSize(e),d.shimSendThrowTypeError(e),d.removeAllowExtmapMixed(e);break;default:n("Unsupported browser!")}return r};var o=i(e("./utils")),c=i(e("./chrome/chrome_shim")),a=i(e("./edge/edge_shim")),s=i(e("./firefox/firefox_shim")),l=i(e("./safari/safari_shim")),d=i(e("./common_shim"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var a="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),n.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},n.shimOnTrack=function(o){if("object"!==(void 0===o?"undefined":a(o))||!o.RTCPeerConnection||"ontrack"in o.RTCPeerConnection.prototype)s.wrapPeerConnectionEvent(o,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(o.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var e=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(i){i.stream.addEventListener("addtrack",function(t){var e=void 0;e=o.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===t.track.id}):{track:t.track};var n=new Event("track");n.track=t.track,n.receiver=e,n.transceiver={receiver:e},n.streams=[i.stream],r.dispatchEvent(n)}),i.stream.getTracks().forEach(function(t){var e=void 0;e=o.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===t.id}):{track:t};var n=new Event("track");n.track=t,n.receiver=e,n.transceiver={receiver:e},n.streams=[i.stream],r.dispatchEvent(n)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}},n.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":a(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var i=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,t){var n=r.apply(this,arguments);return n||(n=i(this,e),this._senders.push(n)),n};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){t._senders.push(i(t,e))})};var t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var n=this;this._senders=this._senders||[],t.apply(this,[e]),e.getTracks().forEach(function(t){var e=n._senders.find(function(e){return e.track===t});e&&n._senders.splice(n._senders.indexOf(e),1)})}}else if("object"===(void 0===e?"undefined":a(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var c=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=c.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},n.shimGetStats=function(e){if(!e.RTCPeerConnection)return;var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var n=this,e=Array.prototype.slice.call(arguments),t=e[0],i=e[1],r=e[2];if(0<arguments.length&&"function"==typeof t)return a.apply(this,arguments);if(0===a.length&&(0===arguments.length||"function"!=typeof t))return a.apply(this,[]);function o(e){var i={};return e.result().forEach(function(t){var n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){n[e]=t.stat(e)}),i[n.id]=n}),i}function c(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))}if(2<=arguments.length){return a.apply(this,[function(e){i(c(o(e)))},t])}return new Promise(function(t,e){a.apply(n,[function(e){t(c(o(e)))},e])}).then(i,r)}},n.shimSenderReceiverGetStats=function(o){if(!("object"===(void 0===o?"undefined":a(o))&&o.RTCPeerConnection&&o.RTCRtpSender&&o.RTCRtpReceiver))return;if(!("getStats"in o.RTCRtpSender.prototype)){var n=o.RTCPeerConnection.prototype.getSenders;n&&(o.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e});var t=o.RTCPeerConnection.prototype.addTrack;t&&(o.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),o.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return s.filterStats(e,t.track,!0)})}}if(!("getStats"in o.RTCRtpReceiver.prototype)){var i=o.RTCPeerConnection.prototype.getReceivers;i&&(o.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=i.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),s.wrapPeerConnectionEvent(o,"track",function(e){return e.receiver._pc=e.srcElement,e}),o.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return s.filterStats(e,t.track,!1)})}}if(!("getStats"in o.RTCRtpSender.prototype&&"getStats"in o.RTCRtpReceiver.prototype))return;var c=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(e){if(0<arguments.length&&e instanceof o.MediaStreamTrack){var t=e,n=void 0,i=void 0,r=void 0;return this.getSenders().forEach(function(e){e.track===t&&(n?r=!0:n=e)}),this.getReceivers().forEach(function(e){return e.track===t&&(i?r=!0:i=e),e.track===t}),r||n&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return c.apply(this,arguments)}},n.shimAddTrackRemoveTrackWithNative=d,n.shimAddTrackRemoveTrack=function(c){if(!c.RTCPeerConnection)return;var e=s.detectBrowser(c);if(c.RTCPeerConnection.prototype.addTrack&&65<=e.version)return d(c);var n=c.RTCPeerConnection.prototype.getLocalStreams;c.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(function(e){return t._reverseStreams[e.id]})};var i=c.RTCPeerConnection.prototype.addStream;c.RTCPeerConnection.prototype.addStream=function(e){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[e.id]){var t=new c.MediaStream(e.getTracks());this._streams[e.id]=t,this._reverseStreams[t.id]=e,e=t}i.apply(this,[e])};var t=c.RTCPeerConnection.prototype.removeStream;function r(i,e){var r=e.sdp;return Object.keys(i._reverseStreams||[]).forEach(function(e){var t=i._reverseStreams[e],n=i._streams[t.id];r=r.replace(new RegExp(n.id,"g"),t.id)}),new RTCSessionDescription({type:e.type,sdp:r})}c.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},c.RTCPeerConnection.prototype.addTrack=function(t,e){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var r=this._streams[e.id];if(r)r.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var o=new c.MediaStream([t]);this._streams[e.id]=o,this._reverseStreams[o.id]=e,this.addStream(o)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(e){var t=c.RTCPeerConnection.prototype[e],n=l({},e,function(){var n=this,i=arguments;return arguments.length&&"function"==typeof arguments[0]?t.apply(this,[function(e){var t=r(n,e);i[0].apply(null,[t])},function(e){i[1]&&i[1].apply(null,e)},arguments[2]]):t.apply(this,arguments).then(function(e){return r(n,e)})});c.RTCPeerConnection.prototype[e]=n[e]});var o=c.RTCPeerConnection.prototype.setLocalDescription;c.RTCPeerConnection.prototype.setLocalDescription=function(e){return arguments.length&&e.type&&(i=this,r=(t=e).sdp,Object.keys(i._reverseStreams||[]).forEach(function(e){var t=i._reverseStreams[e],n=i._streams[t.id];r=r.replace(new RegExp(t.id,"g"),n.id)}),e=new RTCSessionDescription({type:t.type,sdp:r})),o.apply(this,arguments);var i,t,r};var a=Object.getOwnPropertyDescriptor(c.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(c.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:r(this,e)}}),c.RTCPeerConnection.prototype.removeTrack=function(t){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(t._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var i=void 0;Object.keys(this._streams).forEach(function(e){n._streams[e].getTracks().find(function(e){return t.track===e})&&(i=n._streams[e])}),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}},n.shimPeerConnection=function(i){var n=s.detectBrowser(i);!i.RTCPeerConnection&&i.webkitRTCPeerConnection&&(i.RTCPeerConnection=i.webkitRTCPeerConnection);if(!i.RTCPeerConnection)return;n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=i.RTCPeerConnection.prototype[e],n=l({},e,function(){return arguments[0]=new("addIceCandidate"===e?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)});i.RTCPeerConnection.prototype[e]=n[e]});var r=i.RTCPeerConnection.prototype.addIceCandidate;i.RTCPeerConnection.prototype.addIceCandidate=function(e,t){return e?n.version<78&&e&&""===e.candidate?Promise.resolve():r.apply(this,arguments):(t&&t.apply(null),Promise.resolve())}},n.fixNegotiationNeeded=function(e){s.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})};var s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../utils.js"));function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(e){return t._shimmedLocalStreams[e][0]})};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,t){if(!t)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=i.apply(this,arguments);return this._shimmedLocalStreams[t.id]?-1===this._shimmedLocalStreams[t.id].indexOf(n)&&this._shimmedLocalStreams[t.id].push(n):this._shimmedLocalStreams[t.id]=[t,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")});var t=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===t.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],t.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(n){var i=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},n&&Object.keys(this._shimmedLocalStreams).forEach(function(e){var t=i._shimmedLocalStreams[e].indexOf(n);-1!==t&&i._shimmedLocalStreams[e].splice(t,1),1===i._shimmedLocalStreams[e].length&&delete i._shimmedLocalStreams[e]}),o.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(o,e){if(o.navigator.mediaDevices&&"getDisplayMedia"in o.navigator.mediaDevices)return;if(!o.navigator.mediaDevices)return;if("function"!=typeof e)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");o.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(function(e){var t=r.video&&r.video.width,n=r.video&&r.video.height,i=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:i||3}},t&&(r.video.mandatory.maxWidth=t),n&&(r.video.mandatory.maxHeight=n),o.navigator.mediaDevices.getUserMedia(r)})}}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)};n.shimGetUserMedia=function(e){var c=e&&e.navigator;if(!c.mediaDevices)return;function a(r){if("object"!==(void 0===r?"undefined":l(r))||r.mandatory||r.optional)return r;var o={};return Object.keys(r).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var n="object"===l(r[t])?r[t]:{ideal:r[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){o.optional=o.optional||[];var e={};"number"==typeof n.ideal?(e[i("min",t)]=n.ideal,o.optional.push(e),(e={})[i("max",t)]=n.ideal):e[i("",t)]=n.ideal,o.optional.push(e)}void 0!==n.exact&&"number"!=typeof n.exact?(o.mandatory=o.mandatory||{},o.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(o.mandatory=o.mandatory||{},o.mandatory[i(e,t)]=n[e])})}}),r.advanced&&(o.optional=(o.optional||[]).concat(r.advanced)),o}function i(n,i){if(61<=s.version)return i(n);if((n=JSON.parse(JSON.stringify(n)))&&"object"===l(n.audio)){var e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};e((n=JSON.parse(JSON.stringify(n))).audio,"autoGainControl","googAutoGainControl"),e(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=a(n.audio)}if(n&&"object"===l(n.video)){var r=n.video.facingMode;r=r&&("object"===(void 0===r?"undefined":l(r))?r:{ideal:r});var t=s.version<66;if(r&&("user"===r.exact||"environment"===r.exact||"user"===r.ideal||"environment"===r.ideal)&&(!c.mediaDevices.getSupportedConstraints||!c.mediaDevices.getSupportedConstraints().facingMode||t)){delete n.video.facingMode;var o=void 0;if("environment"===r.exact||"environment"===r.ideal?o=["back","rear"]:"user"!==r.exact&&"user"!==r.ideal||(o=["front"]),o)return c.mediaDevices.enumerateDevices().then(function(e){var t=(e=e.filter(function(e){return"videoinput"===e.kind})).find(function(t){return o.some(function(e){return t.label.toLowerCase().includes(e)})});return!t&&e.length&&o.includes("back")&&(t=e[e.length-1]),t&&(n.video.deviceId=r.exact?{exact:t.deviceId}:{ideal:t.deviceId}),n.video=a(n.video),d("chrome: "+JSON.stringify(n)),i(n)})}n.video=a(n.video)}return d("chrome: "+JSON.stringify(n)),i(n)}function r(e){return 64<=s.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}}var s=o.detectBrowser(e);if(c.getUserMedia=function(e,t,n){i(e,function(e){c.webkitGetUserMedia(e,t,function(e){n&&n(r(e))})})}.bind(c),c.mediaDevices.getUserMedia){var n=c.mediaDevices.getUserMedia.bind(c.mediaDevices);c.mediaDevices.getUserMedia=function(e){return i(e,function(t){return n(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return e},function(e){return Promise.reject(r(e))})})}}};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../utils.js"));var d=o.log},{"../utils.js":15}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)};n.shimRTCIceCandidate=function(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;var r=t.RTCIceCandidate;t.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":o(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var t=new r(e),n=d.default.parseCandidate(e.candidate),i=Object.assign(t,n);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new r(e)},t.RTCIceCandidate.prototype=r.prototype,c.wrapPeerConnectionEvent(t,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e})},n.shimMaxMessageSize=function(e){if(!e.RTCPeerConnection)return;var s=c.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t,n;this._sctp=null,"chrome"===s.browser&&76<=s.version&&("plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}));if(function(e){if(!e||!e.sdp)return!1;var t=d.default.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=d.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(e)){var i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(e),r=(t=i,n=65536,"firefox"===s.browser&&(n=s.version<57?-1===t?16384:2147483637:s.version<60?57===s.version?65535:65536:2147483637),n),o=function(e,t){var n=65536;"firefox"===s.browser&&57===s.version&&(n=65535);var i=d.default.matchPrefix(e.sdp,"a=max-message-size:");return 0<i.length?n=parseInt(i[0].substr(19),10):"firefox"===s.browser&&-1!==t&&(n=2147483637),n}(e,i),c=void 0;c=0===r&&0===o?Number.POSITIVE_INFINITY:0===r||0===o?Math.max(r,o):Math.min(r,o);var a={};Object.defineProperty(a,"maxMessageSize",{get:function(){return c}}),this._sctp=a}return l.apply(this,arguments)}},n.shimSendThrowTypeError=function(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(i,r){var o=i.send;i.send=function(e){var t=e,n=t.length||t.size||t.byteLength;if("open"===i.readyState&&r.sctp&&n>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return o.apply(i,arguments)}}var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return t(e,this),e},c.wrapPeerConnectionEvent(e,"datachannel",function(e){return t(e.channel,e.target),e})},n.shimConnectionState=function(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;var n=e.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var t=n[e];n[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})},n.removeAllowExtmapMixed=function(e){if(!e.RTCPeerConnection)return;var t=c.detectBrowser(e);if("chrome"===t.browser&&71<=t.version)return;var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n")),n.apply(this,arguments)}};var i,r=e("sdp"),d=(i=r)&&i.__esModule?i:{default:i},c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),n.shimPeerConnection=function(e){var t=c.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}});e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var i=(0,l.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),c.log("ICE servers after filtering:",e.iceServers)),new i(e)},e.RTCPeerConnection.prototype=i.prototype},n.shimReplaceTrack=function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var o,c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../utils")),a=e("./filtericeservers"),s=e("rtcpeerconnection-shim"),l=(o=s)&&o.__esModule?o:{default:o}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var n="string"==typeof t;return n&&(t=[t]),t=t.filter(function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!i?i=!0:t&&!i}),delete e.url,e.urls=n?t[0]:t,!!t.length}})};var r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../utils"))},{"../utils":15}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e){if(!("getDisplayMedia"in e.navigator))return;if(!e.navigator.mediaDevices)return;if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)return;e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(t=e).name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}});var t})}}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var s="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),n.shimOnTrack=function(e){"object"===(void 0===e?"undefined":s(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(i){var r=a.detectBrowser(i);if("object"!==(void 0===i?"undefined":s(i))||!i.RTCPeerConnection&&!i.mozRTCPeerConnection)return;!i.RTCPeerConnection&&i.mozRTCPeerConnection&&(i.RTCPeerConnection=i.mozRTCPeerConnection);r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=i.RTCPeerConnection.prototype[e],n=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},e,function(){return arguments[0]=new("addIceCandidate"===e?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)});i.RTCPeerConnection.prototype[e]=n[e]});if(r.version<68){var n=i.RTCPeerConnection.prototype.addIceCandidate;i.RTCPeerConnection.prototype.addIceCandidate=function(e,t){return e?e&&""===e.candidate?Promise.resolve():n.apply(this,arguments):(t&&t.apply(null),Promise.resolve())}}var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),t=e[0],i=e[1],n=e[2];return c.apply(this,[t||null]).then(function(n){if(r.version<53&&!i)try{n.forEach(function(e){e.type=o[e.type]||e.type})}catch(e){if("TypeError"!==e.name)throw e;n.forEach(function(e,t){n.set(t,Object.assign({},e,{type:o[e.type]||e.type}))})}return n}).then(i,n)}},n.shimSenderGetStats=function(e){if("object"!==(void 0===e?"undefined":s(e))||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;var n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e});var t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e});e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}},n.shimReceiverGetStats=function(e){if("object"!==(void 0===e?"undefined":s(e))||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e});a.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}},n.shimRemoveStream=function(e){if(!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype)return;e.RTCPeerConnection.prototype.removeStream=function(t){var n=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&n.removeTrack(e)})}},n.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},n.shimAddTransceiver=function(e){if("object"!==(void 0===e?"undefined":s(e))||!e.RTCPeerConnection)return;var a=e.RTCPeerConnection.prototype.addTransceiver;a&&(e.RTCPeerConnection.prototype.addTransceiver=function(e,t){this.setParametersPromises=[];var n=t,i=n&&"sendEncodings"in n;i&&n.sendEncodings.forEach(function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(1<=parseFloat(e.scaleResolutionDownBy)))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(0<=parseFloat(e.maxFramerate)))throw new RangeError("max_framerate must be >= 0.0")});var r=a.apply(this,arguments);if(i){var o=r.sender,c=o.getParameters();"encodings"in c||(c.encodings=n.sendEncodings,this.setParametersPromises.push(o.setParameters(c).catch(function(){})))}return r})},n.shimCreateOffer=function(e){if("object"!==(void 0===e?"undefined":s(e))||!e.RTCPeerConnection)return;var n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,t=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return n.apply(e,t)}).finally(function(){e.setParametersPromises=[]}):n.apply(this,arguments)}},n.shimCreateAnswer=function(e){if("object"!==(void 0===e?"undefined":s(e))||!e.RTCPeerConnection)return;var n=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return n.apply(e,t)}).finally(function(){e.setParametersPromises=[]}):n.apply(this,arguments)}};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(n,i){if(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices)return;if(!n.navigator.mediaDevices)return;n.navigator.mediaDevices.getDisplayMedia=function(e){if(e&&e.video)return!0===e.video?e.video={mediaSource:i}:e.video.mediaSource=i,n.navigator.mediaDevices.getUserMedia(e);var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)};n.shimGetUserMedia=function(e){var t=l.detectBrowser(e),i=e&&e.navigator,n=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){l.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(55<t.version&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var r=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":s(e))&&"object"===s(e.audio)&&(e=JSON.parse(JSON.stringify(e)),r(e.audio,"autoGainControl","mozAutoGainControl"),r(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},n&&n.prototype.getSettings){var c=n.prototype.getSettings;n.prototype.getSettings=function(){var e=c.apply(this,arguments);return r(e,"mozAutoGainControl","autoGainControl"),r(e,"mozNoiseSuppression","noiseSuppression"),e}}if(n&&n.prototype.applyConstraints){var a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":s(e))&&(e=JSON.parse(JSON.stringify(e)),r(e,"autoGainControl","mozAutoGainControl"),r(e,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[e])}}}};var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../utils"))},{"../utils":15}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)};n.shimLocalStreamsAPI=function(e){if("object"!==(void 0===e?"undefined":l(e))||!e.RTCPeerConnection)return;"getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams});if(!("addStream"in e.RTCPeerConnection.prototype)){var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(function(e){return i.call(n,e,t)}),t.getVideoTracks().forEach(function(e){return i.call(n,e,t)})},e.RTCPeerConnection.prototype.addTrack=function(e,t){var n=t;return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),i.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var i=e.getTracks();this.getSenders().forEach(function(e){i.includes(e.track)&&t.removeTrack(e)})}})},n.shimRemoteStreamsAPI=function(e){if("object"!==(void 0===e?"undefined":l(e))||!e.RTCPeerConnection)return;"getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]});if(!("onaddstream"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var n=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(n._remoteStreams||(n._remoteStreams=[]),!n._remoteStreams.includes(e)){n._remoteStreams.push(e);var t=new Event("addstream");t.stream=e,n.dispatchEvent(t)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(n._remoteStreams||(n._remoteStreams=[]),!(0<=n._remoteStreams.indexOf(e))){n._remoteStreams.push(e);var t=new Event("addstream");t.stream=e,n.dispatchEvent(t)}})}),t.apply(n,arguments)}}},n.shimCallbacksAPI=function(e){if("object"!==(void 0===e?"undefined":l(e))||!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype,o=t.createOffer,c=t.createAnswer,r=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t,n){var i=2<=arguments.length?n:e,r=o.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t,n){var i=2<=arguments.length?n:e,r=c.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r};var n=function(e,t,n){var i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=n,n=function(e,t,n){var i=a.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=n,n=function(e,t,n){var i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=n},n.shimGetUserMedia=function(e){var i=e&&e.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){var t=i.mediaDevices,n=t.getUserMedia.bind(t);i.mediaDevices.getUserMedia=function(e){return n(r(e))}}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(e,t,n){i.mediaDevices.getUserMedia(e).then(t,n)}.bind(i))},n.shimConstraints=r,n.shimRTCIceServerUrls=function(e){var o=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var r=e.iceServers[i];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(c.deprecated("RTCIceServer.url","RTCIceServer.urls"),(r=JSON.parse(JSON.stringify(r))).urls=r.url,delete r.url,n.push(r)):n.push(e.iceServers[i])}e.iceServers=n}return new o(e,t)},e.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})},n.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":l(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(e){var i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var t=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return i.apply(this,arguments)}};var c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../utils"));function r(e){return e&&void 0!==e.video?Object.assign({},e,{video:c.compactObject(e.video)}):e}},{"../utils":15}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.extractVersion=c,n.wrapPeerConnectionEvent=function(e,i,r){if(!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype,o=t.addEventListener;t.addEventListener=function(e,n){if(e!==i)return o.apply(this,arguments);function t(e){var t=r(e);t&&n(t)}return this._eventMap=this._eventMap||{},this._eventMap[n]=t,o.apply(this,[e,t])};var c=t.removeEventListener;t.removeEventListener=function(e,t){if(e!==i||!this._eventMap||!this._eventMap[t])return c.apply(this,arguments);var n=this._eventMap[t];return delete this._eventMap[t],c.apply(this,[e,n])},Object.defineProperty(t,"on"+i,{get:function(){return this["_on"+i]},set:function(e){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),e&&this.addEventListener(i,this["_on"+i]=e)},enumerable:!0,configurable:!0})},n.disableLog=function(e){return"boolean"==typeof e?(r=e)?"adapter.js logging disabled":"adapter.js logging enabled":new Error("Argument type: "+(void 0===e?"undefined":i(e))+". Please use a boolean.")},n.disableWarnings=function(e){return"boolean"==typeof e?(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled")):new Error("Argument type: "+(void 0===e?"undefined":i(e))+". Please use a boolean.")},n.log=function(){if("object"===("undefined"==typeof window?"undefined":i(window))){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(e,t){if(!o)return;console.warn(e+" is deprecated, please use "+t+" instead.")},n.detectBrowser=function(e){var t=e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=c(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=c(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=c(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=c(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n},n.compactObject=function o(c){if(!s(c))return c;return Object.keys(c).reduce(function(e,t){var n=s(c[t]),i=n?o(c[t]):c[t],r=n&&!Object.keys(i).length;return void 0===i||r?e:Object.assign(e,a({},t,i))},{})},n.walkStats=l,n.filterStats=function(n,t,e){var i=e?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;var o=[];return n.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){n.forEach(function(e){e.type===i&&e.trackId===t.id&&l(n,e,r)})}),r};var r=!0,o=!0;function c(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(t,n,i){n&&!i.has(n.id)&&(i.set(n.id,n),Object.keys(n).forEach(function(e){e.endsWith("Id")?l(t,t.get(n[e]),i):e.endsWith("Ids")&&n[e].forEach(function(e){l(t,t.get(e),i)})}))}},{}],16:[function(e,t,n){"use strict";var k=e("sdp");function s(e,t,n,i,r){var o=k.writeRtpDescription(e.kind,t);if(o+=k.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=k.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":r||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var a="msid:"+(i?i.id:"-")+" "+c+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+k.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+k.localCName+"\r\n"),o}function L(l,d){function u(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]}var f={codecs:[],headerExtensions:[],fecMechanisms:[]};return l.codecs.forEach(function(n){for(var e=0;e<d.codecs.length;e++){var t=d.codecs[e];if(n.name.toLowerCase()===t.name.toLowerCase()&&n.clockRate===t.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&t.parameters.apt&&(i=n,r=t,o=l.codecs,c=d.codecs,s=a=void 0,a=u(i.parameters.apt,o),s=u(r.parameters.apt,c),!a||!s||a.name.toLowerCase()!==s.name.toLowerCase()))continue;(t=JSON.parse(JSON.stringify(t))).numChannels=Math.min(n.numChannels,t.numChannels),f.codecs.push(t),t.rtcpFeedback=t.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}var i,r,o,c,a,s}),l.headerExtensions.forEach(function(e){for(var t=0;t<d.headerExtensions.length;t++){var n=d.headerExtensions[t];if(e.uri===n.uri){f.headerExtensions.push(n);break}}}),f}function o(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function U(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function p(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(A,N){function V(e,t){t.addTrack(e),t.dispatchEvent(new A.MediaStreamTrackEvent("addtrack",{track:e}))}function r(e,t,n,i){var r=new Event("track");r.track=t,r.receiver=n,r.transceiver={receiver:n},r.streams=i,A.setTimeout(function(){e._dispatchEvent("track",r)})}function i(e){var t,i,r,n=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){n[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",e=JSON.parse(JSON.stringify(e||{})),this.usingBundle="max-bundle"===e.bundlePolicy,"negotiate"===e.rtcpMuxPolicy)throw p("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(e.rtcpMuxPolicy||(e.rtcpMuxPolicy="require"),e.iceTransportPolicy){case"all":case"relay":break;default:e.iceTransportPolicy="all"}switch(e.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:e.bundlePolicy="balanced"}if(e.iceServers=(t=e.iceServers||[],i=N,r=!1,(t=JSON.parse(JSON.stringify(t))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"==typeof t;return n&&(t=[t]),t=t.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&14393<=i&&-1===e.indexOf("?transport=udp"):r=!0}),delete e.url,e.urls=n?t[0]:t,!!t.length}})),this._iceGatherers=[],e.iceCandidatePoolSize)for(var c=e.iceCandidatePoolSize;0<c;c--)this._iceGatherers.push(new A.RTCIceGatherer({iceServers:e.iceServers,gatherPolicy:e.iceTransportPolicy}));else e.iceCandidatePoolSize=0;this._config=e,this.transceivers=[],this._sdpSessionId=k.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1}Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=0<this.transceivers.length,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();i.iceTransport=r.iceTransport,i.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(i),i},i.prototype.addTrack=function(t,e){if(this._isClosed)throw p("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw p("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n=n||this._createTransceiver(t.kind),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(e)&&this.localStreams.push(e),n.track=t,n.stream=e,n.rtpSender=new A.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},i.prototype.addStream=function(t){var n=this;if(15025<=N)t.getTracks().forEach(function(e){n.addTrack(e,t)});else{var i=t.clone();t.getTracks().forEach(function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),i.getTracks().forEach(function(e){n.addTrack(e,i)})}},i.prototype.removeTrack=function(t){if(this._isClosed)throw p("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof A.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var e=this.transceivers.find(function(e){return e.rtpSender===t});if(!e)throw p("InvalidAccessError","Sender was not created by this connection.");var n=e.stream;e.rtpSender.stop(),e.rtpSender=null,e.track=null,e.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&-1<this.localStreams.indexOf(n)&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var n=this;e.getTracks().forEach(function(t){var e=n.getSenders().find(function(e){return e.track===t});e&&n.removeTrack(e)})},i.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},i.prototype._createIceGatherer=function(n,e){var i=this;if(e&&0<n)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new A.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[n].bufferedCandidateEvents=[],this.transceivers[n].bufferCandidates=function(e){var t=!e.candidate||0===Object.keys(e.candidate).length;r.state=t?"completed":"gathering",null!==i.transceivers[n].bufferedCandidateEvents&&i.transceivers[n].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[n].bufferCandidates),r},i.prototype._gather=function(a,s){var l=this,d=this.transceivers[s].iceGatherer;if(!d.onlocalcandidate){var e=this.transceivers[s].bufferedCandidateEvents;this.transceivers[s].bufferedCandidateEvents=null,d.removeEventListener("localcandidate",this.transceivers[s].bufferCandidates),d.onlocalcandidate=function(e){if(!(l.usingBundle&&0<s)){var t=new Event("icecandidate");t.candidate={sdpMid:a,sdpMLineIndex:s};var n=e.candidate,i=!n||0===Object.keys(n).length;if(i)"new"!==d.state&&"gathering"!==d.state||(d.state="completed");else{"new"===d.state&&(d.state="gathering"),n.component=1,n.ufrag=d.getLocalParameters().usernameFragment;var r=k.writeCandidate(n);t.candidate=Object.assign(t.candidate,k.parseCandidate(r)),t.candidate.candidate=r,t.candidate.toJSON=function(){return{candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex,usernameFragment:t.candidate.usernameFragment}}}var o=k.getMediaSections(l._localDescription.sdp);o[t.candidate.sdpMLineIndex]+=i?"a=end-of-candidates\r\n":"a="+t.candidate.candidate+"\r\n",l._localDescription.sdp=k.getDescription(l._localDescription.sdp)+o.join("");var c=l.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==l.iceGatheringState&&(l.iceGatheringState="gathering",l._emitGatheringStateChange()),i||l._dispatchEvent("icecandidate",t),c&&(l._dispatchEvent("icecandidate",new Event("icecandidate")),l.iceGatheringState="complete",l._emitGatheringStateChange())}},A.setTimeout(function(){e.forEach(function(e){d.onlocalcandidate(e)})},0)}},i.prototype._createIceAndDtlsTransports=function(){var e=this,t=new A.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var n=new A.RTCDtlsTransport(t);return n.ondtlsstatechange=function(){e._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:n}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,t,n){var i=L(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:k.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&0<i.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&N<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,u,f=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(p("TypeError",'Unsupported type "'+e.type+'"'));if(!o("setLocalDescription",e.type,f.signalingState)||f._isClosed)return Promise.reject(p("InvalidStateError","Can not set local "+e.type+" in state "+f.signalingState));if("offer"===e.type)t=k.splitSections(e.sdp),u=t.shift(),t.forEach(function(e,t){var n=k.parseRtpParameters(e);f.transceivers[t].localCapabilities=n}),f.transceivers.forEach(function(e,t){f._gather(e.mid,t)});else if("answer"===e.type){t=k.splitSections(f._remoteDescription.sdp),u=t.shift();var h=0<k.matchPrefix(u,"a=ice-lite").length;t.forEach(function(e,t){var n=f.transceivers[t],i=n.iceGatherer,r=n.iceTransport,o=n.dtlsTransport,c=n.localCapabilities,a=n.remoteCapabilities;if(!(k.isRejected(e)&&0===k.matchPrefix(e,"a=bundle-only").length)&&!n.rejected){var s=k.getIceParameters(e,u),l=k.getDtlsParameters(e,u);h&&(l.role="server"),f.usingBundle&&0!==t||(f._gather(n.mid,t),"new"===r.state&&r.start(i,s,h?"controlling":"controlled"),"new"===o.state&&o.start(l));var d=L(c,a);f._transceive(n,0<d.codecs.length,!1)}})}return f._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?f._updateSignalingState("have-local-offer"):f._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(w){var T=this;if(-1===["offer","answer"].indexOf(w.type))return Promise.reject(p("TypeError",'Unsupported type "'+w.type+'"'));if(!o("setRemoteDescription",w.type,T.signalingState)||T._isClosed)return Promise.reject(p("InvalidStateError","Can not set remote "+w.type+" in state "+T.signalingState));var O={};T.remoteStreams.forEach(function(e){O[e.id]=e});var P=[],e=k.splitSections(w.sdp),M=e.shift(),D=0<k.matchPrefix(M,"a=ice-lite").length,x=0<k.matchPrefix(M,"a=group:BUNDLE ").length;T.usingBundle=x;var t=k.matchPrefix(M,"a=ice-options:")[0];return T.canTrickleIceCandidates=!!t&&0<=t.substr(14).split(" ").indexOf("trickle"),e.forEach(function(e,t){var n=k.splitLines(e),i=k.getKind(e),r=k.isRejected(e)&&0===k.matchPrefix(e,"a=bundle-only").length,o=n[0].substr(2).split(" ")[2],c=k.getDirection(e,M),a=k.parseMsid(e),s=k.getMid(e)||k.generateIdentifier();if(r||"application"===i&&("DTLS/SCTP"===o||"UDP/DTLS/SCTP"===o))T.transceivers[t]={mid:s,kind:i,protocol:o,rejected:!0};else{var l,d,u,f,h,p,_,C,g;!r&&T.transceivers[t]&&T.transceivers[t].rejected&&(T.transceivers[t]=T._createTransceiver(i,!0));var R,m,I=k.parseRtpParameters(e);r||(R=k.getIceParameters(e,M),(m=k.getDtlsParameters(e,M)).role="client"),_=k.parseRtpEncodingParameters(e);var y=k.parseRtcpParameters(e),v=0<k.matchPrefix(e,"a=end-of-candidates",M).length,S=k.matchPrefix(e,"a=candidate:").map(function(e){return k.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===w.type||"answer"===w.type)&&!r&&x&&0<t&&T.transceivers[t]&&(T._disposeIceAndDtlsTransports(t),T.transceivers[t].iceGatherer=T.transceivers[0].iceGatherer,T.transceivers[t].iceTransport=T.transceivers[0].iceTransport,T.transceivers[t].dtlsTransport=T.transceivers[0].dtlsTransport,T.transceivers[t].rtpSender&&T.transceivers[t].rtpSender.setTransport(T.transceivers[0].dtlsTransport),T.transceivers[t].rtpReceiver&&T.transceivers[t].rtpReceiver.setTransport(T.transceivers[0].dtlsTransport)),"offer"!==w.type||r){if("answer"===w.type&&!r){d=(l=T.transceivers[t]).iceGatherer,u=l.iceTransport,f=l.dtlsTransport,h=l.rtpReceiver,p=l.sendEncodingParameters,C=l.localCapabilities,T.transceivers[t].recvEncodingParameters=_,T.transceivers[t].remoteCapabilities=I,T.transceivers[t].rtcpParameters=y,S.length&&"new"===u.state&&(!D&&!v||x&&0!==t?S.forEach(function(e){U(l.iceTransport,e)}):u.setRemoteCandidates(S)),x&&0!==t||("new"===u.state&&u.start(d,R,"controlling"),"new"===f.state&&f.start(m)),!L(l.localCapabilities,l.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&l.sendEncodingParameters[0].rtx&&delete l.sendEncodingParameters[0].rtx,T._transceive(l,"sendrecv"===c||"recvonly"===c,"sendrecv"===c||"sendonly"===c),!h||"sendrecv"!==c&&"sendonly"!==c?delete l.rtpReceiver:(g=h.track,a?(O[a.stream]||(O[a.stream]=new A.MediaStream),V(g,O[a.stream]),P.push([g,h,O[a.stream]])):(O.default||(O.default=new A.MediaStream),V(g,O.default),P.push([g,h,O.default])))}}else{(l=T.transceivers[t]||T._createTransceiver(i)).mid=s,l.iceGatherer||(l.iceGatherer=T._createIceGatherer(t,x)),S.length&&"new"===l.iceTransport.state&&(!v||x&&0!==t?S.forEach(function(e){U(l.iceTransport,e)}):l.iceTransport.setRemoteCandidates(S)),C=A.RTCRtpReceiver.getCapabilities(i),N<15019&&(C.codecs=C.codecs.filter(function(e){return"rtx"!==e.name})),p=l.sendEncodingParameters||[{ssrc:1001*(2*t+2)}];var E,b=!1;if("sendrecv"===c||"sendonly"===c){if(b=!l.rtpReceiver,h=l.rtpReceiver||new A.RTCRtpReceiver(l.dtlsTransport,i),b)g=h.track,a&&"-"===a.stream||(E=a?(O[a.stream]||(O[a.stream]=new A.MediaStream,Object.defineProperty(O[a.stream],"id",{get:function(){return a.stream}})),Object.defineProperty(g,"id",{get:function(){return a.track}}),O[a.stream]):(O.default||(O.default=new A.MediaStream),O.default)),E&&(V(g,E),l.associatedRemoteMediaStreams.push(E)),P.push([g,h,E])}else l.rtpReceiver&&l.rtpReceiver.track&&(l.associatedRemoteMediaStreams.forEach(function(e){var t,n,i=e.getTracks().find(function(e){return e.id===l.rtpReceiver.track.id});i&&(t=i,(n=e).removeTrack(t),n.dispatchEvent(new A.MediaStreamTrackEvent("removetrack",{track:t})))}),l.associatedRemoteMediaStreams=[]);l.localCapabilities=C,l.remoteCapabilities=I,l.rtpReceiver=h,l.rtcpParameters=y,l.sendEncodingParameters=p,l.recvEncodingParameters=_,T._transceive(T.transceivers[t],!1,b)}}}),void 0===T._dtlsRole&&(T._dtlsRole="offer"===w.type?"active":"passive"),T._remoteDescription={type:w.type,sdp:w.sdp},"offer"===w.type?T._updateSignalingState("have-remote-offer"):T._updateSignalingState("stable"),Object.keys(O).forEach(function(e){var i=O[e];if(i.getTracks().length){if(-1===T.remoteStreams.indexOf(i)){T.remoteStreams.push(i);var t=new Event("addstream");t.stream=i,A.setTimeout(function(){T._dispatchEvent("addstream",t)})}P.forEach(function(e){var t=e[0],n=e[1];i.id===e[2].id&&r(T,t,n,[i])})}}),P.forEach(function(e){e[2]||r(T,e[0],e[1],[])}),A.setTimeout(function(){T&&T.transceivers&&T.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,A.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},i.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(p("InvalidStateError","Can not call createOffer after close"));var t=a.transceivers.filter(function(e){return"audio"===e.kind}).length,n=a.transceivers.filter(function(e){return"video"===e.kind}).length,e=arguments[0];if(e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(t=!0===e.offerToReceiveAudio?1:!1===e.offerToReceiveAudio?0:e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(n=!0===e.offerToReceiveVideo?1:!1===e.offerToReceiveVideo?0:e.offerToReceiveVideo)}for(a.transceivers.forEach(function(e){"audio"===e.kind?--t<0&&(e.wantReceive=!1):"video"===e.kind&&--n<0&&(e.wantReceive=!1)});0<t||0<n;)0<t&&(a._createTransceiver("audio"),t--),0<n&&(a._createTransceiver("video"),n--);var i=k.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(e,t){var n=e.track,i=e.kind,r=e.mid||k.generateIdentifier();e.mid=r,e.iceGatherer||(e.iceGatherer=a._createIceGatherer(t,a.usingBundle));var o=A.RTCRtpSender.getCapabilities(i);N<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),e.remoteCapabilities&&e.remoteCapabilities.codecs&&e.remoteCapabilities.codecs.forEach(function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)})}),o.headerExtensions.forEach(function(t){(e.remoteCapabilities&&e.remoteCapabilities.headerExtensions||[]).forEach(function(e){t.uri===e.uri&&(t.id=e.id)})});var c=e.sendEncodingParameters||[{ssrc:1001*(2*t+1)}];n&&15019<=N&&"video"===i&&!c[0].rtx&&(c[0].rtx={ssrc:c[0].ssrc+1}),e.wantReceive&&(e.rtpReceiver=new A.RTCRtpReceiver(e.dtlsTransport,i)),e.localCapabilities=o,e.sendEncodingParameters=c}),"max-compat"!==a._config.bundlePolicy&&(i+="a=group:BUNDLE "+a.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n",a.transceivers.forEach(function(e,t){i+=s(e,e.localCapabilities,"offer",e.stream,a._dtlsRole),i+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===a.iceGatheringState||0!==t&&a.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,i+="a="+k.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(i+="a=end-of-candidates\r\n"))});var r=new A.RTCSessionDescription({type:"offer",sdp:i});return Promise.resolve(r)},i.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(p("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(p("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var o=k.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(o+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n";var c=k.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach(function(e,t){if(!(c<t+1)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?o+="m=application 0 DTLS/SCTP 5000\r\n":o+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var n;if(e.stream)"audio"===e.kind?n=e.stream.getAudioTracks()[0]:"video"===e.kind&&(n=e.stream.getVideoTracks()[0]),n&&15019<=N&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var i=L(e.localCapabilities,e.remoteCapabilities);!i.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=s(e,i,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}});var e=new A.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(e)},i.prototype.addIceCandidate=function(s){var l,d=this;return s&&void 0===s.sdpMLineIndex&&!s.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(e,t){if(!d._remoteDescription)return t(p("InvalidStateError","Can not add ICE candidate without a remote description"));if(s&&""!==s.candidate){var n=s.sdpMLineIndex;if(s.sdpMid)for(var i=0;i<d.transceivers.length;i++)if(d.transceivers[i].mid===s.sdpMid){n=i;break}var r=d.transceivers[n];if(!r)return t(p("OperationError","Can not add ICE candidate"));if(r.rejected)return e();var o=0<Object.keys(s.candidate).length?k.parseCandidate(s.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return e();if(o.component&&1!==o.component)return e();if((0===n||0<n&&r.iceTransport!==d.transceivers[0].iceTransport)&&!U(r.iceTransport,o))return t(p("OperationError","Can not add ICE candidate"));var c=s.candidate.trim();0===c.indexOf("a=")&&(c=c.substr(2)),(l=k.getMediaSections(d._remoteDescription.sdp))[n]+="a="+(o.type?c:"end-of-candidates")+"\r\n",d._remoteDescription.sdp=k.getDescription(d._remoteDescription.sdp)+l.join("")}else for(var a=0;a<d.transceivers.length&&(d.transceivers[a].rejected||(d.transceivers[a].iceTransport.addRemoteCandidate({}),(l=k.getMediaSections(d._remoteDescription.sdp))[a]+="a=end-of-candidates\r\n",d._remoteDescription.sdp=k.getDescription(d._remoteDescription.sdp)+l.join(""),!d.usingBundle));a++);e()})},i.prototype.getStats=function(t){if(t&&t instanceof A.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw p("InvalidAccessError","Invalid selector.");return n.getStats()}var i=[];return this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(e){t[e]&&i.push(t[e].getStats())})}),Promise.all(i).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var t=A[e];if(t&&t.prototype&&t.prototype.getStats){var n=t.prototype.getStats;t.prototype.getStats=function(){return n.apply(this).then(function(n){var i=new Map;return Object.keys(n).forEach(function(e){var t;n[e].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(t=n[e]).type]||t.type,i.set(e,n[e])}),i})}}});var e=["createOffer","createAnswer"];return e.forEach(function(e){var n=i.prototype[e];i.prototype[e]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?n.apply(this,[arguments[2]]).then(function(e){"function"==typeof t[0]&&t[0].apply(null,[e])},function(e){"function"==typeof t[1]&&t[1].apply(null,[e])}):n.apply(this,arguments)}}),(e=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var n=i.prototype[e];i.prototype[e]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?n.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)},function(e){"function"==typeof t[2]&&t[2].apply(null,[e])}):n.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),i}},{sdp:17}],17:[function(e,t,n){"use strict";var d={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};d.localCName=d.generateIdentifier(),d.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},d.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"})},d.getDescription=function(e){var t=d.splitSections(e);return t&&t[0]},d.getMediaSections=function(e){var t=d.splitSections(e);return t.shift(),t},d.matchPrefix=function(e,t){return d.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},d.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:n[t[i]]=t[i+1]}return n},d.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},d.parseIceOptions=function(e){return e.substr(14).split(" ")},d.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},d.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},d.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:0<t[0].indexOf("/")?t[0].split("/")[1]:"sendrecv",uri:t[1]}},d.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},d.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)n[(t=i[r].trim().split("="))[0].trim()]=t[1];return n},d.writeFmtp=function(t){var e="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var i=[];Object.keys(t.parameters).forEach(function(e){t.parameters[e]?i.push(e+"="+t.parameters[e]):i.push(e)}),e+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return e},d.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},d.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},d.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return-1<i?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},d.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},d.getMid=function(e){var t=d.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},d.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},d.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:d.matchPrefix(e+t,"a=fingerprint:").map(d.parseFingerprint)}},d.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},d.getIceParameters=function(e,t){var n=d.splitLines(e);return{usernameFragment:(n=n.concat(d.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},d.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},d.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=d.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var r=n[i],o=d.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(o){var c=d.parseRtpMap(o),a=d.matchPrefix(e,"a=fmtp:"+r+" ");switch(c.parameters=a.length?d.parseFmtp(a[0]):{},c.rtcpFeedback=d.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(d.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return d.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(d.parseExtmap(e))}),t},d.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=0<t.codecs.length?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=d.writeRtpMap(e),n+=d.writeFmtp(e),n+=d.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),0<i&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=d.writeExtmap(e)}),n},d.parseRtpEncodingParameters=function(e){var n,i=[],t=d.parseRtpParameters(e),r=-1!==t.fecMechanisms.indexOf("RED"),o=-1!==t.fecMechanisms.indexOf("ULPFEC"),c=d.matchPrefix(e,"a=ssrc:").map(function(e){return d.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),a=0<c.length&&c[0].ssrc,s=d.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});0<s.length&&1<s[0].length&&s[0][0]===a&&(n=s[0][1]),t.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&n&&(t.rtx={ssrc:n}),i.push(t),r&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},i.push(t))}}),0===i.length&&a&&i.push({ssrc:a});var l=d.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,i.forEach(function(e){e.maxBitrate=l})),i},d.parseRtcpParameters=function(e){var t={},n=d.matchPrefix(e,"a=ssrc:").map(function(e){return d.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=d.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=0<i.length,t.compound=0===i.length;var r=d.matchPrefix(e,"a=rtcp-mux");return t.mux=0<r.length,t},d.parseMsid=function(e){var t,n=d.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=d.matchPrefix(e,"a=ssrc:").map(function(e){return d.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return 0<i.length?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},d.parseSctpDescription=function(e){var t,n=d.parseMLine(e),i=d.matchPrefix(e,"a=max-message-size:");0<i.length&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var r=d.matchPrefix(e,"a=sctp-port:");if(0<r.length)return{port:parseInt(r[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(0<d.matchPrefix(e,"a=sctpmap:").length){var o=d.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:t}}},d.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},d.generateSessionId=function(){return Math.random().toString().substr(2,21)},d.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||d.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},d.writeMediaSection=function(e,t,n,i){var r=d.writeRtpDescription(e.kind,t);if(r+=d.writeIceParameters(e.iceGatherer.getLocalParameters()),r+=d.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),r+="a=mid:"+e.mid+"\r\n",e.direction?r+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?r+="a=sendrecv\r\n":e.rtpSender?r+="a=sendonly\r\n":e.rtpReceiver?r+="a=recvonly\r\n":r+="a=inactive\r\n",e.rtpSender){var o="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";r+="a="+o,r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,r+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+d.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+d.localCName+"\r\n"),r},d.getDirection=function(e,t){for(var n=d.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?d.getDirection(t):"sendrecv"},d.getKind=function(e){return d.splitLines(e)[0].split(" ")[0].substr(2)},d.isRejected=function(e){return"0"===e.split(" ",2)[1]},d.parseMLine=function(e){var t=d.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},d.parseOLine=function(e){var t=d.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},d.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=d.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===_typeof2(t)&&(t.exports=d)},{}]},{},[1])(1)}),window.CRVideo_ERR_DEF={NOERR:0,UNKNOWERR:1,OUTOF_MEM:2,INNER_ERR:3,MISMATCHCLIENTVER:4,MEETPARAM_ERR:5,ERR_DATA:6,ANCTPSWD_ERR:7,SERVER_EXCEPTION:8,LOGINSTATE_ERROR:9,SDK_USER_BEEN_KICKOUT:10,SDK_NOT_INIT:11,SDK_NOT_LOGIN:12,SDK_BASE64_COV_ERR:13,SDK_CUSTOMAUTH_NOINFO:14,SDK_CUSTOMAUTH_NOTSUPPORT:15,SDK_CUSTOMAUTH_EXCEPTION:16,SDK_CUSTOMAUTH_FAILED:17,SDK_TOKEN_TIMEOUT:18,SDK_TOKEN_AUTHINFOERR:19,SDK_TOKEN_APPIDNOTEXIST:20,SDK_TOKEN_AUTH_FAILED:21,SDK_TOKEN_NOTTOKENTYPE:22,NETWORK_INITFAILED:200,NO_SERVERINFO:201,NOSERVER_RSP:202,CREATE_CONN_FAILED:203,SOCKETEXCEPTION:204,SOCKETTIMEOUT:205,FORCEDCLOSECONNECTION:206,CONNECTIONLOST:207,VOICEENG_INITFAILED:208,SDK_SSL_ERR:209,QUE_ID_INVALID:400,QUE_NOUSER:401,QUE_USER_CANCELLED:402,QUE_SERVICE_NOT_START:403,ALREADY_OTHERQUE:404,INVALID_CALLID:600,ERR_CALL_EXIST:601,ERR_BUSY:602,ERR_OFFLINE:603,ERR_NOANSWER:604,ERR_USER_NOT_FOUND:605,ERR_REFUSE:606,MEETNOTEXIST:800,AUTHERROR:801,MEMBEROVERFLOWERROR:802,RESOURCEALLOCATEERROR:803,MEETROOMLOCKED:804,BALANCELESSERROR:805,SEVICE_NOTENABLED:806,ALREADYLOGIN:807,SDK_MIC_NORIGHT:808,SDK_MIC_BEING_USED:809,SDK_MIC_UNKNOWERR:810,SDK_SPK_NORIGHT:811,SDK_SPK_BEING_USED:812,SDK_SPK_UNKNOWERR:813,CATCH_SCREEN_ERR:900,RECORD_MAX:901,RECORD_NO_DISK:902,RECORD_SIZE_ERR:903,SDK_CFG_RESTRICTED:904,SDK_FILE_ERR:905,SDK_RECORDSTARTED:906,SENDFAIL:1e3,CONTAIN_SENSITIVEWORDS:1001,SENDCMD_LARGE:1100,SENDBUFFER_LARGE:1101,SENDDATA_TARGETINVALID:1102,SENDFILE_FILEINERROR:1103,TRANSID_INVALID:1104,RECORDFILE_STATE_ERR:1200,RECORDFILE_NOT_EXIST:1201,IPCAM_URLERR:1300,IPCAM_ALREADYEXIST:1301,IPCAM_TOOMUCH:1302,SDK_FILE_NOT_EXIST:1400,SDK_FILE_READ_ERR:1401,SDK_FILE_WRITE_ERR:1402,SDK_FILE_OPERATOR_ERR:1403,WEB_OCX_NOTINSTALLED:2001,WEB_BROWER_NOTUPPORTED:2002,OCX_VERSION_NOTUPPORTED:2003,DEVICE_UNKNOW_ERR:8001,DEVICE_NOTALLOWED_ERR:8002,DEVICE_UPDATELIST_ERR:8003,DEVICE_HAVENOTAPI_ERR:8004,DEVICE_NONSUPPORT_ERR:8005,DEVICE_LOWVER_ERR:8006};var CRVideo_ASTATUS={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4},CRVideo_VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4},CRVideo_VIDEO_SHOW_SIZE={VIDEO_SZ_80:1,VSIZE_SZ_128:2,VSIZE_SZ_160:3,VSIZE_SZ_192:4,VSIZE_SZ_256:5,VSIZE_SZ_288:6,VSIZE_SZ_320:7,VSIZE_SZ_360:8,VSIZE_SZ_400:9,VSIZE_SZ_480:10,VSIZE_SZ_576:11,VSIZE_SZ_720:12,VSIZE_SZ_1080:13},CRVideo_VIDEO_FORMAT={VFMT_YUV420P:0,VFMT_ARGB32:1},CRVideo_REC_VCONTENT_TYPE={RECVTP_VIDEO:0,RECVTP_PIC:1,RECVTP_SCREEN:2,RECVTP_MEDIA:3,RECVTP_TIMESTAMP:4,RECVTP_REMOTE_SCREEN:5},CRVideo_RECORD_STATE={NO_RECORD:0,STARTING:1,RECORDING:2,PAUSED:3,STOPPING:4},CRVideo_RECORD_AUDIO_TYPE={REC_AUDIO_TYPE_NULL:0,REC_AUDIO_TYPE_LOC:1,REC_AUDIO_TYPE_OTHER:2,REC_AUDIO_TYPE_ALL:3},CRVideo_RECORD_VIDEO_TYPE={REC_VCONTENT_NULL:0,RECORD_VIDEO_TYPE_SCREEN:1,REC_VCONTENT_VIDEOS:3},CRVideo_RECORD_VLAYOUT={REC_VLAYOUT_GRID:0,REC_VLAYOUT_PIP:1},CRVideo_ENCODE_TYPE={ENC_CLOUDROOM:0,ENC_H264:1},CRVideo_MOUSE_MSG_TYPE={MOUSE_MOVE:0,MOUSE_DOWN:1,MOUSE_UP:2,MOUSE_DBCLICK:3},CRVideo_MOUSE_KEY_TYPE={MOUSEKEY_NULL:0,MOUSEKEY_L:1,MOUSEKEY_M:2,MOUSEKEY_R:3,MOUSEKEY_WHEEL:4,MOUSEKEY_X:5},CRVideo_KEY_MSG_TYPE={KEYT_DWON:0,KEYT_UP:1},CRVideo_MAIN_PAGE_TYPE={MAINPAGE_VIDEOWALL:0,MAINPAGE_SHARE:1,MAINPAGE_WHITEBOARD:2},CRVideo_VIDEOLAYOUTMODE={VLO_1v1_M:0,VLO_WALL1_M:1,VLO_WALL2:2,VLO_WALL4:3,VLO_WALL5_M:4,VLO_WALL6_M:5,VLO_WALL9:6,VLO_WALL13_M:7,VLO_WALL16:8,VLO_WALL25:9},CRVideo_HTTP_TRANSFER_STAT={HTTPFS_NULL:0,HTTPFS_QUEUE:1,HTTPFS_TRANSFERING:2,HTTPFS_FINISHED:3},CRVideo_HTTP_TRANSFER_RESULT={HTTPR_Success:0,HTTPR_InnerErr:1,HTTPR_ParamErr:2,HTTPR_NetworkFail:3,HTTPR_NetworkTimeout:4,HTTPR_FileOperationFail:5,HTTPR_PathNotSupprot:6,HTTPR_FileTransfering:7,HTTPR_HTTPERR_BEGIN:1e3,HTTPR_HTTPERR_END:1999},CRVideo_ToolBarUI={BTN_Pause:0,BTN_Stop:1},CRVideo_REC_DATATYPE={REC_AV_DEFAULT:0,REC_AUDIO_LOC:1,REC_AUDIO_OTHER:2,REC_VIDEO:3},CRVideo_NOERR=0,CRVideo_UNKNOWERR=1,CRVideo_OUTOF_MEM=2,CRVideo_INNER_ERR=3,CRVideo_MISMATCHCLIENTVER=4,CRVideo_MEETPARAM_ERR=5,CRVideo_ERR_DATA=6,CRVideo_ANCTPSWD_ERR=7,CRVideo_SERVER_EXCEPTION=8,CRVideo_LOGINSTATE_ERROR=9,CRVideo_USER_BEEN_KICKOUT=10,CRVideo_NETWORK_INITFAILED=200,CRVideo_NO_SERVERINFO=201,CRVideo_NOSERVER_RSP=202,CRVideo_CREATE_CONN_FAILED=203,CRVideo_SOCKETEXCEPTION=204,CRVideo_SOCKETTIMEOUT=205,CRVideo_FORCEDCLOSECONNECTION=206,CRVideo_CONNECTIONLOST=207,CRVideo_QUE_ID_INVALID=400,CRVideo_QUE_NOUSER=401,CRVideo_QUE_USER_CANCELLED=402,CRVideo_QUE_SERVICE_NOT_START=403,CRVideo_ALREADY_OTHERQUE=404,CRVideo_INVALID_CALLID=600,CRVideo_ERR_CALL_EXIST=601,CRVideo_ERR_BUSY=602,CRVideo_ERR_OFFLINE=603,CRVideo_ERR_NOANSWER=604,CRVideo_ERR_USER_NOT_FOUND=605,CRVideo_ERR_REFUSE=606,CRVideo_MEETNOTEXIST=800,CRVideo_AUTHERROR=801,CRVideo_MEMBEROVERFLOWERROR=802,CRVideo_RESOURCEALLOCATEERROR=803,CRVideo_MEETROOMLOCKED=804,CRVideo_CATCH_SCREEN_ERR=900,CRVideo_RECORD_MAX=901,CRVideo_RECORD_NO_DISK=902,CRVideo_SENDFAIL=1e3,CRVideo_CONTAIN_SENSITIVEWORDS=1001,CRVideo_SENDCMD_LARGE=1100,CRVideo_SENDBUFFER_LARGE=1101,CRVideo_SENDDATA_TARGETINVALID=1102,CRVideo_SENDFILE_FILEINERROR=1103,CRVideo_TRANSID_INVALID=1104,CRVideo_RECORDFILE_STATE_ERR=1200,CRVideo_RECORDFILE_NOT_EXIST=1201,CRVideo_IPCAM_URLERR=1300,CRVideo_IPCAM_ALREADYEXIST=1301,CRVideo_IPCAM_TOOMUCH=1302,AUNKNOWN=0,ANULL=1,ACLOSE=2,AOPEN=3,AOPENING=4,VIDEO_SZ_80=1,VSIZE_SZ_128=2,VSIZE_SZ_160=3,VSIZE_SZ_192=4,VSIZE_SZ_256=5,VSIZE_SZ_288=6,VSIZE_SZ_320=7,VSIZE_SZ_360=8,VSIZE_SZ_400=9,VSIZE_SZ_480=10,VSIZE_SZ_576=11,VSIZE_SZ_720=12,VSIZE_SZ_1080=13,VUNKNOWN=0,VNULL=1,VCLOSE=2,VOPEN=3,VOPENING=4,VFMT_YUV420P=0,VFMT_ARGB32=1,RECVTP_VIDEO=0,RECVTP_PIC=1,RECVTP_SCREEN=2,RECVTP_MEDIA=3,RECVTP_TIMESTAMP=4,RECVTP_REMOTE_SCREEN=5,NO_RECORD=0,STARTING=1,RECORDING=2,PAUSED=3,STOPPING=4,REC_AUDIO_TYPE_NULL=0,REC_AUDIO_TYPE_LOC=1,REC_AUDIO_TYPE_OTHER=2,REC_AUDIO_TYPE_ALL=3,REC_VCONTENT_NULL=0,RECORD_VIDEO_TYPE_SCREEN=1,REC_VCONTENT_VIDEOS=3,REC_VLAYOUT_GRID=0,REC_VLAYOUT_PIP=1,ENC_CLOUDROOM=0,ENC_H264=1,MOUSE_MOVE=0,MOUSE_DOWN=1,MOUSE_UP=2,MOUSE_DBCLICK=3,MOUSEKEY_NULL=0,MOUSEKEY_L=1,MOUSEKEY_M=2,MOUSEKEY_R=3,MOUSEKEY_WHEEL=4,MOUSEKEY_X=5,KEYT_DWON=0,KEYT_UP=1,MAINPAGE_VIDEOWALL=0,MAINPAGE_SHARE=1,MAINPAGE_WHITEBOARD=2,VLO_1v1_M=0,VLO_WALL1_M=1,VLO_WALL2=2,VLO_WALL4=3,VLO_WALL5_M=4,VLO_WALL6_M=5,VLO_WALL9=6,VLO_WALL13_M=7,VLO_WALL16=8,VLO_WALL25=9,HTTPFS_NULL=0,HTTPFS_QUEUE=1,HTTPFS_TRANSFERING=2,HTTPFS_FINISHED=3,HTTPR_Success=0,HTTPR_InnerErr=1,HTTPR_ParamErr=2,HTTPR_NetworkFail=3,HTTPR_NetworkTimeout=4,HTTPR_FileOperationFail=5,HTTPR_PathNotSupprot=6,HTTPR_FileTransfering=7,HTTPR_HTTPERR_BEGIN=1e3,HTTPR_HTTPERR_END=1999,BTN_Pause=0,BTN_Stop=1,REC_AV_DEFAULT=0,REC_AUDIO_LOC=1,REC_AUDIO_OTHER=2,REC_VIDEO=3,MIXVTP_VIDEO=0,MIXVTP_PIC=1,MIXVTP_SCREEN=2,MIXVTP_MEDIA=3,MIXVTP_TIMESTAMP=4,MIXVTP_REMOTE_SCREEN=5,MIXVTP_WBOARD=6,MIXVTP_TEXT=7,MIXER_NULL=0,MIXER_STARTING=1,MIXER_RUNNING=2,MIXER_STOPPING=4,MIXOT_FILE=0,MIXOT_LIVE=1,OUTPUT_CREATED=0,OUTPUT_WRITING=1,OUTPUT_CLOSED=2,OUTPUT_ERR=3,MEDIA_CLOSE=0,MEDIA_FINI=1,MEDIA_FILEOPEN_ERR=2,MEDIA_FORMAT_ERR=3,MEDIA_UNSUPPORT=4,MEDIA_EXCEPTION=5,MGRSDK_ERR_DEF={0:"SDK_SUCCESS",1:"SDK_UNSUPPORT",2:"SDK_ANCT_NOTEXIST",3:"SDK_USR_PSWD_ERR",4:"SDK_MEET_PSWD_ERR",5:"SDK_UNKNOW_ERR",6:"SDK_MEET_NOTEXIST",7:"SDK_MEET_START_ERR",8:"SDK_CREATEMEETINGFAILED",9:"SDK_THEME_EMPTY_ERR",10:"SDK_NOUSED",11:"SDK_CMEET_NO_PERMISSION",12:"SDK_FIXMEET_NOBALANCE",13:"SDK_FIXMEETING_TOOMANY",14:"SDK_CONFERENCELINK_ERR",15:"SDK_NICKNAMEEMPTY_ERR",16:"SDK_CONTINUOUSFAILURE",17:"SDK_MEETINGNOTSTART",18:"SDK_MEETINGOVER",19:"SDK_MEETID_INVALID",21:"SDK_ACCOUNT_INVALID",22:"SDK_MEET_BUS_USED",23:"SDK_VIN_NO_PERMISSION",26:"SDK_MEET_NO_TV_MEETING",27:"SDK_OEM_ANCT_MISMATCH",30:"SDK_VERSION_NOTMATCH",31:"SDK_USER_EXISTS",32:"SDK_USER_NOT_EXISTS",33:"SDK_LOGINSTATE_ERROR",34:"SDK_USER_BEEN_KICKOUT",38:"SDK_ONLY_INVITER",71:"SDK_CUSTOMAUTH_NOINFO",72:"SDK_CUSTOMAUTH_NOTSUPPORT",73:"SDK_CUSTOMAUTH_EXCEPTION",74:"SDK_CUSTOMAUTH_FAILED",81:"SDK_TOKEN_AUTHINFOERR",83:"SDK_TOKEN_AUTHCHECKERR",84:"SDK_TOKEN_AUTHEXCEPTION",85:"SDK_TOKEN_AUTHINFOTIMEOUT",86:"SDK_TOKEN_APPIDNOTEXIST",87:"SDK_TOKEN_NOTTOKENTYPE",500:"SDK_NOT_LOGIN",1e4:"HTTP_ERR_BEGIN",10999:"HTTP_ERR_END",11e3:"SDK_SND_DATA_ERR",11001:"SDK_RSP_DATA_ERR",2e4:"CALL_ERR_BEGIN",20001:"CALL_ERR_UNKNOW",20002:"CALL_ERR_CALL_NOT_FOUND",20003:"CALL_ERR_CALL_EXIST",20004:"CALL_ERR_BUSY",20005:"CALL_ERR_OFFLINE",20006:"CALL_ERR_NOANSWER",20007:"CALL_ERR_PARAM_INVALID",20008:"CALL_ERR_USER_NOT_FOUND",20009:"CALL_ERR_PWD_INVALID",20010:"CALL_ERR_BUSY_MEETING",20011:"CALL_ERR_REFUSE",20012:"CALL_SEND_FAILED",20013:"CALL_RSP_DATA_ERR",20014:"CALL_ERR_SESSIONERR",20015:"CALL_ERR_ICEPRXNULL",20016:"CALL_SENDDATA_TARGETINVALID",20100:"RSP_CODE_QUE_ID_INVALID",20101:"RSP_CODE_QUE_NOUSER",20102:"RSP_CODE_QUE_USER_CANCELLED",20103:"RSP_CODE_QUE_SERVICE_NOT_START",20104:"RSP_CODE_QUE_QUEUING",3e4:"CALL_SENDCMD_LARGE",30001:"CALL_SENDBUFFER_LARGE",30002:"CALL_SENDFILE_FILEINERROR",30003:"CALL_TRANSID_INVALID"},MEETSDK_ERR_DEF={0:"MEETSDK_NOERR",1:"MEETSDK_UNKNOWERR",2:"MEETSDK_OUTOF_MEM",3:"MEETSDK_INNER_ERR",4:"MEETSDK_MISMATCHCLIENTVER",5:"MEETSDK_MEETPARAM_ERR",6:"MEETSDK_VOICEENG_INITFAILED",7:"MEETSDK_NETWORK_INITFAILED",8:"MEETSDK_NO_SERVERINFO",9:"MEETSDK_NOSERVER_RSP",10:"MEETSDK_CREATE_CONN_FAILED",11:"MEETSDK_SOCKETEXCEPTION",12:"MEETSDK_SOCKETTIMEOUT",13:"MEETSDK_FORCEDCLOSECONNECTION",14:"MEETSDK_CONNECTIONLOST",15:"MEETSDK_ALREADYLOGIN",16:"MEETSDK_GETMEETINFO_FAILED",17:"MEETSDK_SERVER_EXCEPTION",18:"MEETSDK_CONFIDERROR",19:"MEETSDK_CONFENDEDERROR",20:"MEETSDK_AUTHERROR",21:"MEETSDK_ROOMLOCKEDERROR",22:"MEETSDK_NICKNAMEERROR",23:"MEETSDK_NICKNAMEDUPLICATEDERROR",24:"MEETSDK_NOTPERMITERROR",25:"MEETSDK_MEMBEROVERFLOWERROR",26:"MEETSDK_BALANCELESSERROR",27:"MEETSDK_PINERROR",28:"MEETSDK_FIELDDUPLICATEDERROR",29:"MEETSDK_INVITEEDUPLICATEDERROR",30:"MEETSDK_INVITEENOTFOUNDERROR",31:"MEETSDK_INVALIDTERMTYPEERROR",32:"MEETSDK_NOPSTNHOSTERROR",33:"MEETSDK_RESOURCEALLOCATEERROR",34:"MEETSDK_ONLYINVITEECANLOGIN",35:"MEETSDK_MEMBERALREADYINMEET",36:"MEETSDK_NORESOURCEFORMIC",37:"MEETSDK_OPERATION_FAILED",38:"MEETSDK_CANNOT_BORADCAST",39:"MEETSDK_CANNOT_INTERACTBORADCAST",40:"MEETSDK_CONFCANNOT_INTERACTBORADCAST",41:"MEETSDK_CONTAIN_SENSITIVEWORDS",42:"MEETSDK_RECORDFILE_STATE_ERR",43:"MEETSDK_RECORDFILE_NOT_EXIST",44:"MEETSDK_RECORDFILE_UPLOAD_FAILED",45:"MEETSDK_RECORDFILE_DEL_FAILED",46:"MEETSDK_CONFMEMBER_OVERFLOW",47:"MEETSDK_SEVICE_NOTENABLED",48:"MEETSDK_SCREEN_IS_SHARING",49:"MEETSDK_MIC_NORIGHT",50:"MEETSDK_MIC_BEING_USED",51:"MEETSDK_MIC_UNKNOWERR",52:"MEETSDK_SPK_NORIGHT",53:"MEETSDK_SPK_BEING_USED",54:"MEETSDK_SPK_UNKNOWERR",55:"MEETSDK_SRVRECORDSTARTED",56:"MEETSDK_NEEDRELOGIN"},NDD_EXCEPTION={0:"NDD_NOEXCEPTION",1:"NDD_OBJ_INIT",2:"NDD_ICE_OBJ_NOTEXIST",3:"NDD_INVALIDUSERID",4:"NDD_INVALIDCOMPANYID",5:"NDD_INVALIDCONFID",6:"NDD_INVALIDTASKID",7:"NDD_PERMISSIONDENIED",8:"NDD_INVALIDACCESSMODE",9:"NDD_TASKIDALREADYEXISTS",10:"NDD_INVALIDFILENAME",11:"NDD_FILEALREADYEXISTS",12:"NDD_FDFSFILEALREADYEXISTS",13:"NDD_FILEBUFFERING",14:"NDD_FILEORDIRECTORYNOTEXISTS",15:"NDD_INCONSISTENTDATAVALIDATION",16:"NDD_TRANSFORMNOTRECORD",17:"NDD_TRANSFORMNOTCOMPLETE",18:"NDD_ALREADYTRANSFORMEXCEPT",19:"NDD_PROGRESSTRANSFORMEXCEPT",20:"NDD_TIMEOUTTRANSFORMEXCEPT",21:"NDD_FSNODEALREADYEXISTS",22:"NDD_ALREADYIMPORTEXCEPT",23:"NDD_NOTTRANSFORMSERVER",24:"NDD_NOTAVAILABLETRANSFORMSERVER",25:"NDD_IMPORTSAMEMD5",26:"NDD_EXCEEDTHECAPACITYLIMIT",27:"NDD_NOTSUPPORTEXCEPT",28:"NDD_SERVERINTERNALERROR",39:"NDD_UNKNOWEXCEPT",30:"NDD_DOCCOVER_EXCEPT",31:"NDD_NETWORK_ERR"},CRVIDEOSDK_ERR_DEF={CRVIDEOSDK_NOERR:0,CRVIDEOSDK_UNKNOWERR:1,CRVIDEOSDK_OUTOF_MEM:2,CRVIDEOSDK_INNER_ERR:3,CRVIDEOSDK_MISMATCHCLIENTVER:4,CRVIDEOSDK_MEETPARAM_ERR:5,CRVIDEOSDK_ERR_DATA:6,CRVIDEOSDK_ANCTPSWD_ERR:7,CRVIDEOSDK_SERVER_EXCEPTION:8,CRVIDEOSDK_LOGINSTATE_ERROR:9,CRVIDEOSDK_USER_BEEN_KICKOUT:10,CRVIDEOSDK_NOT_INIT:11,CRVIDEOSDK_NOT_LOGIN:12,CRVIDEOSDK_BASE64_COV_ERR:13,CRVIDEOSDK_CUSTOMAUTH_NOINFO:14,CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT:15,CRVIDEOSDK_CUSTOMAUTH_EXCEPTION:16,CRVIDEOSDK_CUSTOMAUTH_FAILED:17,CRVIDEOSDK_TOKEN_TIMEOUT:18,CRVIDEOSDK_TOKEN_AUTHINFOERR:19,CRVIDEOSDK_TOKEN_APPIDNOTEXIST:20,CRVIDEOSDK_TOKEN_AUTH_FAILED:21,CRVIDEOSDK_TOKEN_NOTTOKENTYPE:22,CRVIDEOSDK_API_NO_PERMISSION:23,CRVIDEOSDK_NETWORK_INITFAILED:200,CRVIDEOSDK_NO_SERVERINFO:201,CRVIDEOSDK_NOSERVER_RSP:202,CRVIDEOSDK_CREATE_CONN_FAILED:203,CRVIDEOSDK_SOCKETEXCEPTION:204,CRVIDEOSDK_SOCKETTIMEOUT:205,CRVIDEOSDK_FORCEDCLOSECONNECTION:206,CRVIDEOSDK_CONNECTIONLOST:207,CRVIDEOSDK_VOICEENG_INITFAILED:208,CRVIDEOSDK_SSL_ERR:209,CRVIDEOSDK_QUE_ID_INVALID:400,CRVIDEOSDK_QUE_NOUSER:401,CRVIDEOSDK_QUE_USER_CANCELLED:402,CRVIDEOSDK_QUE_SERVICE_NOT_START:403,CRVIDEOSDK_ALREADY_OTHERQUE:404,CRVIDEOSDK_INVALID_CALLID:600,CRVIDEOSDK_ERR_CALL_EXIST:601,CRVIDEOSDK_ERR_BUSY:602,CRVIDEOSDK_ERR_OFFLINE:603,CRVIDEOSDK_ERR_NOANSWER:604,CRVIDEOSDK_ERR_USER_NOT_FOUND:605,CRVIDEOSDK_ERR_REFUSE:606,CRVIDEOSDK_MEETNOTEXIST:800,CRVIDEOSDK_AUTHERROR:801,CRVIDEOSDK_MEMBEROVERFLOWERROR:802,CRVIDEOSDK_RESOURCEALLOCATEERROR:803,CRVIDEOSDK_MEETROOMLOCKED:804,CRVIDEOSDK_BALANCELESSERROR:805,CRVIDEOSDK_SEVICE_NOTENABLED:806,CRVIDEOSDK_ALREADYLOGIN:807,CRVIDEOSDK_MIC_NORIGHT:808,CRVIDEOSDK_MIC_BEING_USED:809,CRVIDEOSDK_MIC_UNKNOWERR:810,CRVIDEOSDK_SPK_NORIGHT:811,CRVIDEOSDK_SPK_BEING_USED:812,CRVIDEOSDK_SPK_UNKNOWERR:813,CRVIDEOSDK_PIC_ISNULL:814,CRVIDEOSDK_CATCH_SCREEN_ERR:900,CRVIDEOSDK_RECORD_MAX:901,CRVIDEOSDK_RECORD_NO_DISK:902,CRVIDEOSDK_RECORD_SIZE_ERR:903,CRVIDEOSDK_CFG_RESTRICTED:904,CRVIDEOSDK_FILE_ERR:905,CRVIDEOSDK_RECORDSTARTED:906,CRVIDEOSDK_NOMORE_MCU:907,CRVIDEOSDK_SENDFAIL:1e3,CRVIDEOSDK_CONTAIN_SENSITIVEWORDS:1001,CRVIDEOSDK_SENDCMD_LARGE:1100,CRVIDEOSDK_SENDBUFFER_LARGE:1101,CRVIDEOSDK_SENDDATA_TARGETINVALI:1102,CRVIDEOSDK_SENDFILE_FILEINERRO:1103,CRVIDEOSDK_TRANSID_INVALI:1104,CRVIDEOSDK_RECORDFILE_STATE_ERR:1200,CRVIDEOSDK_RECORDFILE_NOT_EXIST:1201,CRVIDEOSDK_RECORDFILE_UPLOAD_FAILED:1202,CRVIDEOSDK_RECORDFILE_DEL_FAILED:1203,CRVIDEOSDK_IPCAM_URLERR:1300,CRVIDEOSDK_IPCAM_ALREADYEXIST:1301,CRVIDEOSDK_IPCAM_TOOMANYCAM:1302,CRVIDEOSDK_FILE_NOT_EXIST:1400,CRVIDEOSDK_FILE_READ_ERR:1401,CRVIDEOSDK_FILE_WRITE_ERR:1402,CRVIDEOSDK_FILE_ALREADY_EXIST:1403,CRVIDEOSDK_FILE_OPERATOR_ERR:1404,CRVIDEOSDK_NETDISK_NOT_EXIST:1500,CRVIDEOSDK_NETDISK_PERMISSIONDENIED:1501,CRVIDEOSDK_NETDISK_INVALIDFILENAME:1502,CRVIDEOSDK_NETDISK_FILEALREADYEXISTS:1503,CRVIDEOSDK_NETDISK_FILEORDIRECTORYNOTEXISTS:1504,CRVIDEOSDK_NETDISK_FILENOTTRANSFORM:1505,CRVIDEOSDK_NETDISK_TRANSFORMFAILED:1506,CRVIDEOSDK_NETDISK_NOSPACE:1507};function Err_Cover(e){switch(e){case"SDK_SUCCESS":return"CRVIDEOSDK_NOERR";case"SDK_UNKNOW_ERR":return"CRVIDEOSDK_UNKNOWERR";case"SDK_NOT_LOGIN":return"CRVIDEOSDK_NOT_LOGIN";case"SDK_VERSION_NOTMATCH":case"SDK_UNSUPPORT":return"CRVIDEOSDK_MISMATCHCLIENTVER";case"SDK_ACCOUNT_INVALID":case"SDK_ANCT_NOTEXIST":case"SDK_USER_NOT_EXISTS":case"SDK_USR_PSWD_ERR":return"CRVIDEOSDK_ANCTPSWD_ERR";case"SDK_LOGINSTATE_ERROR":return"CRVIDEOSDK_LOGINSTATE_ERROR";case"SDK_USER_BEEN_KICKOUT":return"CRVIDEOSDK_USER_BEEN_KICKOUT";case"SDK_CUSTOMAUTH_NOINFO":return"CRVIDEOSDK_CUSTOMAUTH_NOINFO";case"SDK_CUSTOMAUTH_NOTSUPPORT":return"CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT";case"SDK_CUSTOMAUTH_EXCEPTION":return"CRVIDEOSDK_CUSTOMAUTH_EXCEPTION";case"SDK_CUSTOMAUTH_FAILED":return"CRVIDEOSDK_CUSTOMAUTH_FAILED";case"SDK_MEET_PSWD_ERR":return"CRVIDEOSDK_AUTHERROR";case"SDK_MEETINGOVER":case"SDK_MEETID_INVALID":case"SDK_MEET_NO_TV_MEETING":case"SDK_MEET_NOTEXIST":return"CRVIDEOSDK_MEETNOTEXIST";case"SDK_MEET_START_ERR":case"SDK_CREATEMEETINGFAILED":case"SDK_FIXMEETING_TOOMANY":case"SDK_CMEET_NO_PERMISSION":case"SDK_FIXMEET_NOBALANCE":case"SDK_CONTINUOUSFAILURE":case"SDK_MEETINGNOTSTART":return"CRVIDEOSDK_RESOURCEALLOCATEERROR";case"SDK_VIN_NO_PERMISSION":return"CRVIDEOSDK_API_NO_PERMISSION";case"SDK_CONFERENCELINK_ERR":case"SDK_NICKNAMEEMPTY_ERR":case"SDK_THEME_EMPTY_ERR":case"SDK_OEM_ANCT_MISMATCH":case"SDK_USER_EXISTS":case"SDK_MEET_BUS_USED":return"CRVIDEOSDK_MEETPARAM_ERR";case"SDK_SND_DATA_ERR":return"CRVIDEOSDK_NOSERVER_RSP";case"SDK_RSP_DATA_ERR":case"CALL_RSP_DATA_ERR":return"CRVIDEOSDK_ERR_DATA";case"SDK_TOKEN_AUTHINFOERR":case"SDK_TOKEN_AUTHEXCEPTION":return"CRVIDEOSDK_TOKEN_AUTHINFOERR";case"SDK_TOKEN_AUTHCHECKERR":return"CRVIDEOSDK_TOKEN_AUTH_FAILED";case"SDK_TOKEN_AUTHINFOTIMEOUT":return"CRVIDEOSDK_TOKEN_TIMEOUT";case"SDK_TOKEN_APPIDNOTEXIST":return"CRVIDEOSDK_TOKEN_APPIDNOTEXIST";case"SDK_TOKEN_NOTTOKENTYPE":return"CRVIDEOSDK_TOKEN_NOTTOKENTYPE";case"CALL_ERR_CALL_NOT_FOUND":return"CRVIDEOSDK_INVALID_CALLID";case"CALL_ERR_CALL_EXIST":return"CRVIDEOSDK_ERR_CALL_EXIST";case"CALL_ERR_BUSY":return"CRVIDEOSDK_ERR_BUSY";case"CALL_ERR_OFFLINE":return"CRVIDEOSDK_ERR_OFFLINE";case"CALL_ERR_NOANSWER":return"CRVIDEOSDK_ERR_NOANSWER";case"CALL_ERR_PARAM_INVALID":return"CRVIDEOSDK_MEETPARAM_ERR";case"CALL_ERR_USER_NOT_FOUND":return"CRVIDEOSDK_ERR_USER_NOT_FOUND";case"CALL_ERR_PWD_INVALID":return"CRVIDEOSDK_ANCTPSWD_ERR";case"CALL_ERR_BUSY_MEETING":return"CRVIDEOSDK_ERR_BUSY";case"CALL_ERR_REFUSE":return"CRVIDEOSDK_ERR_REFUSE";case"CALL_ERR_ICEPRXNULL":return"CRVIDEOSDK_CREATE_CONN_FAILED";case"CALL_SENDDATA_TARGETINVALID":return"CRVIDEOSDK_SENDDATA_TARGETINVALID";case"CALL_SENDCMD_LARGE":return"CRVIDEOSDK_SENDCMD_LARGE";case"CALL_SENDBUFFER_LARGE":return"CRVIDEOSDK_SENDBUFFER_LARGE";case"CALL_TRANSID_INVALID":return"CRVIDEOSDK_TRANSID_INVALID";case"CALL_SENDFILE_FILEINERROR":return"CRVIDEOSDK_SENDFILE_FILEINERROR";case"CALL_ERR_SESSIONERR":return"CRVIDEOSDK_CONNECTIONLOST";case"CALL_SEND_FAILED":return"CRVIDEOSDK_SOCKETTIMEOUT";case"RSP_CODE_QUE_ID_INVALID":return"CRVIDEOSDK_QUE_ID_INVALID";case"RSP_CODE_QUE_NOUSER":return"CRVIDEOSDK_QUE_NOUSER";case"RSP_CODE_QUE_USER_CANCELLED":return"CRVIDEOSDK_QUE_USER_CANCELLED";case"RSP_CODE_QUE_SERVICE_NOT_START":return"CRVIDEOSDK_QUE_SERVICE_NOT_START";case"RSP_CODE_QUE_QUEUING":return"CRVIDEOSDK_ALREADY_OTHERQUE";default:return"CRVIDEOSDK_UNKNOWERR"}}function ICE_SDK_ERR(e){return 0==e?0:CRVIDEOSDK_ERR_DEF[Err_Cover(MGRSDK_ERR_DEF[2e4+e])]}function WEB_SDK_ERR(e){return 0==e?0:CRVIDEOSDK_ERR_DEF[Err_Cover(MGRSDK_ERR_DEF[e])]}!function(){var e="undefined"!=typeof window?window:self;e.Ice=e.Ice||{},Ice.Slice=Ice.Slice||{},e.IceMX=e.IceMX||{},e.IceSSL=e.IceSSL||{};var o,t,c,n,i,r,l,a,s,d,_,C,u,f,h,p,g,R,m,I,y,v,S,E,b,w,T,O,P,M,D,x,A,N,V,k,L,U,F,j,B,H,q,K,W,G,z,Q,X,J,Y,Z,$,ee,te,ne,ie,re,oe,ce,ae,se,le,de,ue,fe,he,pe,_e,Ce,ge,Re,me,Ie,ye,ve,Se,Ee,be,we,Te,Oe,Pe,Me,De,xe,Ae,Ne,Ve,ke,Le,Ue,Fe,je,Be,He,qe,Ke,We,Ge,ze,Qe,Xe,Je,Ye,Ze,$e,et,tt,nt,it,rt,ot,ct,at,st,lt,dt,ut,ft,ht,pt,_t,Ct,gt,Rt,mt,It,yt,vt,St,Et,bt,wt,Tt,Ot,Pt,Mt,Dt,xt,At,Nt,Vt,kt,Lt,Ut,Ft,jt,Bt,Ht,qt,Kt,Wt,Gt,zt,Qt,Xt,Jt,Yt,Zt,$t,en,tn,nn,rn,on,cn,an,sn,ln,dn,un,fn,hn,pn,_n,Cn,gn,Rn,mn,In,yn,vn,Sn,En,bn,wn,Tn,On,Pn=Ice.Slice;function Mn(e,t){return e===t||null!=e&&null!=t&&(e.prototype===t.prototype&&("function"==typeof e.equals?e.equals(t):e instanceof Array&&i.equals(e,t,Mn)))}function Dn(e,t,n){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;default:if(32<=e&&e<=126){var i=String.fromCharCode(e);null!==n&&-1!==n.indexOf(i)&&t.push("\\"),t.push(i)}else{t.push("\\");for(var r=e.toString(8),o=r.length;o<3;o++)t.push("0");t.push(r)}}}function xn(e,t){var n,i=e.charCodeAt(t);if(32<=i&&i<=126)return i;throw n=0<t?"character after `"+e.substring(0,t)+"'":"first character",n+=" is not a printable ASCII character (ordinal "+i+")",new Error(n)}function An(e,t,n,i){if(l.assert(0<=t),l.assert(n<=e.length),n<=t)throw new Error("EOF while decoding string");var r;if("\\"!=e.charAt(t))r=xn(e,t++);else{if(t+1==n)throw new Error("trailing backslash");switch(e.charAt(++t)){case"\\":case"'":case'"':r=e.charCodeAt(t++);break;case"b":++t,r="\b".charCodeAt(0);break;case"f":++t,r="\f".charCodeAt(0);break;case"n":++t,r="\n".charCodeAt(0);break;case"r":++t,r="\r".charCodeAt(0);break;case"t":++t,r="\t".charCodeAt(0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":for(var o=0,c=0;c<3&&t<n;++c){var a=e.charAt(t++);if(-1=="01234567".indexOf(a)){--t;break}o=8*o+parseInt(a)}if(255<o){var s="octal value \\"+o.toString(8)+" ("+o+") is out of range";throw new Error(s)}r=o;break;default:r=xn(e,t++)}}return i.value=t,r}function Nn(e){if(this===e)return!0;if(null==e)return!1;if(this.prototype!==e.prototype)return!1;var t,n;for(var i in this)if(t=this[i],n=e[i],"function"!=typeof t&&!d(t,n))return!1;return!0}function Vn(){var e,t=new this.constructor;for(var n in this)if(null==(e=this[n]))t[n]=e;else{if("function"==typeof e)continue;"function"==typeof e.clone?t[n]=e.clone():e instanceof Array?t[n]=s.clone(e):t[n]=e}return t}function kn(e,t){if("function"==typeof t.hashCode)return Ice.HashUtil.addHashable(e,t);if(t instanceof Array)return Ice.HashUtil.addArray(e,t,kn);var n=_typeof2(t);return t instanceof String||"string"==n?Ice.HashUtil.addString(e,t):t instanceof Number||"number"==n?Ice.HashUtil.addNumber(e,t):t instanceof Boolean||"boolean"==n?Ice.HashUtil.addBoolean(e,t):void 0}function Ln(){var e,t=5381;for(var n in this)null!=(e=this[n])&&"function"!=typeof e&&(t=kn(t,e));return t}function Un(e){return e<26?String.fromCharCode(u+e):e<52?String.fromCharCode(f+(e-26)):e<62?String.fromCharCode(h+(e-52)):62==e?"+":"/"}function Fn(e){return"A"<=e&&e<="Z"?e.charCodeAt(0)-u:"a"<=e&&e<="z"?e.charCodeAt(0)-f+26:"0"<=e&&e<="9"?e.charCodeAt(0)-h+52:"+"==e?62:63}function jn(e,t){var n=e.__state===R?t.onResponse:t.onException;try{if("function"!=typeof n)t.promise.setState(e.__state,e._args);else{var i=n.apply(null,e._args);i&&"function"==typeof i.then?i.then(function(){var e=arguments;t.promise.succeed.apply(t.promise,e)},function(){var e=arguments;t.promise.fail.apply(t.promise,e)}):t.promise.succeed(i)}}catch(e){t.promise.fail.call(t.promise,e)}}function Bn(t){var e=t.indexOf(".");if(-1===e)throw new Ice.VersionParseException("malformed version value `"+t+"'");var n,i=t.substring(0,e);try{n=v.toInt(i)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(n<1||255<n)throw new Ice.VersionParseException("range error in version `"+t+"'");return n}function Hn(t){var e=t.indexOf(".");if(-1===e)throw new Ice.VersionParseException("malformed version value `"+t+"'");var n,i=t.substring(e+1);try{n=v.toInt(i)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(n<0||255<n)throw new Ice.VersionParseException("range error in version `"+t+"'");return n}function qn(e,t){return e+"."+t}function Kn(e,t,n){this._pattern=e,this._deprecated=t,this._deprecatedBy=n}function Wn(e){var t=e[0],n=_typeof2(t);return"number"===n?t=Me[e[0]]:"string"===n&&(t=Oe.type(t)),{type:t,isObject:!0===e[1],tag:e[2]}}function Gn(e,t){var n,i,r,o={};o.name=e,o.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal,o.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal,o.amd=!!t[3],o.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat,o.amd?o.servantMethod=e+"_async":o.servantMethod=t[0]?t[0]:e,t[5]&&((r=Wn(t[5])).pos=0),o.returns=r;var c=[],a=[];if(t[6])for(n=0;n<t[6].length;++n)(i=Wn(t[6][n])).pos=n,c.push(i),i.tag&&a.push(i);a.sort(function(e,t){return e.tag-t.tag}),o.inParams=c,o.inParamsOpt=a;var s=[],l=[];if(t[7]){var d=r?1:0;for(n=0;n<t[7].length;++n)(i=Wn(t[7][n])).pos=n+d,s.push(i),i.tag&&l.push(i)}r&&r.tag&&l.push(r),l.sort(function(e,t){return e.tag-t.tag}),o.outParams=s,o.outParamsOpt=l;var u=[];if(t[8])for(n=0;n<t[8].length;++n)u.push(t[8][n]);return o.exceptions=u,o.sendsClasses=!0===t[9],o.returnsClasses=!0===t[10],o}function zn(e,t,n,i,r,o,c){var a,s,l;for(a=0;a<n.length;++a)(s=n[a]).tag||(l=s.type.read(e),o[s.pos+c]=l);for(t&&(l=t.type.read(e),o[t.pos+c]=l),a=0;a<i.length;++a)l=(s=i[a]).type.readOpt(e,s.tag),o[s.pos+c]=l;r&&e.readPendingObjects()}function Qn(e,t,n,i,r,o){var c,a;for(c=0;c<i.length;++c)(a=i[c]).tag||a.type.write(e,t[a.pos]);for(n&&n.type.write(e,t[n.pos]),c=0;c<r.length;++c)(a=r[c]).type.writeOpt(e,a.tag,t[a.pos]);o&&e.writePendingObjects()}function Xn(e,t,n){for(var i,r=0;void 0===i&&r<e.length;++r){var o=e[r];void 0===(i=o[t])&&(-1===n.indexOf(o)&&n.push(o),o.__implements&&(i=Xn(o.__implements,t,n)))}return i}function Jn(e,t){var n,i="__op_"+t,r=e[i];if(void 0===r){n=[];for(var o=e;o&&void 0===r;)o.__implements&&(r=Xn(o.__implements,i,n)),o=o.__parent;void 0!==r&&(e[i]=r)}if(void 0===r){var c,a;if(e.__ops&&(c=e.__ops.find(t)),void 0===c){for(var s=e.__parent;void 0===c&&s;)s.__ops&&void 0!==(c=s.__ops.find(t))&&(a=s),s=s.__parent;for(var l=0;void 0===c&&l<n.length;++l){var d=n[l];d.__ops&&void 0!==(c=d.__ops.find(t))&&(a=d)}}void 0!==c&&(r=function(e,t,n){return function(e,t,n,i){var r=e[t.servantMethod];if(void 0===r||"function"!=typeof r){var o="servant for identity "+i.adapter.getCommunicator().identityToString(i.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(o)}var c=new xe(n,t);try{var a=t.amd?[null]:[];if(0===t.inParams.length)n.readEmptyParams();else{var s=n.startReadParams(),l=t.amd?1:0;if(zn(s,void 0,t.inParams,t.inParamsOpt,t.sendsClasses,a,l),n.endReadParams(),0<t.inParams.length&&(t.sendsClasses||0<t.inParamsOpt.length))for(var d=0;d<t.inParams.length;++d){var u=t.inParams[d];u.isObject&&void 0!==a[u.pos+l]&&(a[u.pos+l]=a[u.pos+l].value)}}if(a.push(i),t.amd){a[0]=c;try{r.apply(e,a)}catch(e){c.ice_exception(e)}return Ice.DispatchStatus.DispatchAsync}var f=t.outParams.length;t.returns&&++f;var h=r.apply(e,a);if(1<f&&!(h instanceof Array))throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+f);return 1===f&&(h=[h]),c.__sendResponse(h),Ice.DispatchStatus.DispatchOK}catch(e){if(c.__checkException(e))return c.__sendException(e),Ice.DispatchStatus.DispatchUserException;throw e}}(e,c,t,n)},e[i]=r,a&&(a[i]=r))}return r}function Yn(e,r,o){var t=o[0]?o[0]:r,c=null;e.prototype[t]=function(){var e=arguments;null===c&&(c=Gn(r,o));var t=e[c.inParams.length],n=null;0<c.inParams.length&&(n=function(e,t){var n,i,r;for(n=0;n<c.inParams.length;++n)if(r=t[(i=c.inParams[n]).pos],!(i.tag&&void 0===r||"function"!=typeof i.type.validate||i.type.validate(r)))throw new Ice.MarshalException("invalid value for argument "+(n+1)+" in operation `"+c.servantMethod+"'");Qn(e,t,void 0,c.inParams,c.inParamsOpt,c.sendsClasses)});var i=null;return(c.returns||0<c.outParams.length)&&(i=function(e){var t,n=[],i=e.__startReadParams();if(c.returns&&!c.returns.tag&&(t=c.returns),zn(i,t,c.outParams,c.outParamsOpt,c.returnsClasses,n,0),e.__endReadParams(),c.returnsClasses||0<c.outParamsOpt.length){c.returns&&c.returns.isObject&&void 0!==n[c.returns.pos+0]&&(n[c.returns.pos+0]=n[c.returns.pos+0].value);for(var r=0;r<c.outParams.length;++r){var o=c.outParams[r];o.isObject&&void 0!==n[o.pos+0]&&(n[o.pos+0]=n[o.pos+0].value)}}return n.push(e),n}),Ice.ObjectPrx.__invoke(this,c.name,c.sendMode,c.format,t,n,i,c.exceptions,Array.prototype.slice.call(e))}}o="undefined"!=typeof window?window:self,t={module:function(e){var t=o[e];return void 0===t&&(t={},o[e]=t),t},require:function(){return o},type:function(e){if(void 0!==e){for(var t=e.split("."),n=o,i=0,r=t.length;i<r;++i)if(void 0===(n=n[t[i]]))return;return n}}},Ice.__require=function(){return o},Ice.Slice=Ice.Slice||{},Ice.__M=t,c=Ice.__M,n=Ice.Slice,(i={clone:function(e){return void 0===e?e:null===e?[]:e.slice()},equals:function(e,t,n){if(e.length!=t.length)return!1;var i,r,o=n||Mn;for(i=0,r=e.length;i<r;++i)if(!o.call(o,e[i],t[i]))return!1;return!0},shuffle:function(e){for(var t=e.length;1<t;--t){var n=e[t-1],i=Math.floor(Math.random()*t);e[t-1]=e[i],e[i]=n}},indexOf:function(e,t,n){if(null==n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(n.call(n,e[i],t))return i;return-1},filter:function(e,t,n){n=void 0===n?t:n;for(var i=[],r=0;r<e.length;++r)t.call(n,e[r],r,e)&&i.push(e[r]);return i}}).eq=Mn,n.defineSequence=function(e,t,n,i,r){var o=null;Object.defineProperty(e,t,{get:function(){return null===o&&(o=Ice.StreamHelpers.generateSeqHelper(c.type(n),i,c.type(r))),o}})},Ice.ArrayUtil=i,Ice.Class=function(){var e,t,n;1==arguments.length?t=arguments[0]:2==arguments.length&&(e=arguments[0],t=arguments[1]),void 0!==t&&(n=t.__init__)&&delete t.__init__;var i=n||function(){};if(void 0!==e&&(i.prototype=new e,i.prototype.constructor=i),void 0!==t)for(var r in t)i.prototype[r]=t[r];return i},function(){var e=Ice.Class,c=function(e,t,n,i){if(i+="  ",null===t)return"\n"+i+e+": (null)";if(void 0===t)return"\n"+i+e+": (undefined)";if("stack"==e||"function"==typeof t)return"";if("object"!=_typeof2(t))return"\n"+i+e+': "'+t+'"';if(-1!=n.indexOf(t))return"\n"+i+e+": (recursive)";n.push(t);var r="\n"+i+e+":";for(var o in t)0!==e.indexOf("_")&&"function"!=typeof t[o]&&(r+=i+c(o,t[o],n,i));return r},t=e(Error,{__init__:function(e){e&&(this.ice_cause=e)},ice_name:function(){return"Ice::Exception"},toString:function(){if(this._inToStringAlready)return"";this._inToStringAlready=!0;var e=this.ice_name();for(var t in this)"_inToStringAlready"!=t&&(e+=c(t,this[t],[],""));return!0===Ice.__printStackTraces&&this.stack&&(e+="\n"+this.stack),this._inToStringAlready=!1,e}});t.captureStackTrace=function(e){var t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})};var n=e(Ice.Exception=t,{__init__:function(e){t.call(this,e),t.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=n;var i=Ice.Slice;i.defineLocalException=function(e,t,n){var i=e;return i.prototype=new t,(i.prototype.constructor=i).prototype.ice_name=function(){return n},i};var r=e(t,{__init__:function(e){t.call(this,e),t.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null),o(this,e,this.__mostDerivedType()),e.endWriteException()},__read:function(e){e.startReadException(),a(this,e,this.__mostDerivedType()),e.endReadException(!1)},__usesClasses:function(){return!1}});Ice.UserException=r;function s(e){e.startWriteException(this.__slicedData),o(this,e,this.__mostDerivedType()),e.endWriteException()}function l(e){e.startReadException(),a(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadException(!0)}var o=function e(t,n,i){void 0!==i&&i!==r&&(n.startWriteSlice(i.__id,-1,i.__parent===r),i.prototype.__writeMemberImpl&&i.prototype.__writeMemberImpl.call(t,n),n.endWriteSlice(),e(t,n,i.__parent))},a=function e(t,n,i){void 0!==i&&i!==r&&(n.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(t,n),n.endReadSlice(),e(t,n,i.__parent))};i.defineUserException=function(e,t,n,i,r,o,c){var a=e;return a.__parent=t,a.prototype=new t,a.__id="::"+n,a.prototype.ice_name=function(){return n},(a.prototype.constructor=a).prototype.__mostDerivedType=function(){return a},o&&(a.prototype.__write=s,a.prototype.__read=l),a.prototype.__writeMemberImpl=i,a.prototype.__readMemberImpl=r,c&&(a.prototype.__usesClasses=function(){return!0}),a}}(),Ice.AsyncStatus={Queued:0,Sent:1},(r=Ice.Class({__init__:function(e,t){if(t<0||t>r.MAX_UINT32)throw new RangeError("Low word must be between 0 and 0xFFFFFFFF");if(e<0||e>r.MAX_UINT32)throw new RangeError("High word must be between 0 and 0xFFFFFFFF");this.high=e,this.low=t},hashCode:function(){return this.low},equals:function(e){return this===e||e instanceof r&&(this.high===e.high&&this.low===e.low)},toString:function(){return this.high+":"+this.low},toNumber:function(){if(0==(this.high&r.SIGN_MASK))return this.high>r.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*r.HIGH_MASK+this.low;if(this.high===r.MAX_UINT32&&0!==this.low)return-(1+~this.low);var e=1+~this.high;return e>r.HIGH_MAX?Number.NEGATIVE_INFINITY:e*r.HIGH_MASK*-1+this.low}})).MAX_UINT32=4294967295,r.SIGN_MASK=2147483648,r.HIGH_MASK=4294967296,r.HIGH_MAX=2097151,Ice.Long=r,Ice.AssertionFailedException=Ice.Class(Error,{__init__:function(e){Error.call(this),Ice.Exception.captureStackTrace(this),this.message=e}}),Ice.Debug={assert:function(e,t){if(!e)throw Cr.Utils.log(void 0===t?"assertion failed":t),Cr.Utils.log(Error().stack),new Ice.AssertionFailedException(void 0===t?"assertion failed":t)}},Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2},function(){var l=Ice.Class({__init__:function(e,t){this._name=e,this._value=t},equals:function(e){return this===e||e instanceof Object.getPrototypeOf(this).constructor&&this._value==e._value},hashCode:function(){return this._value},toString:function(){return this._name}}),e=(Ice.EnumBase=l).prototype;try{Object.defineProperty(e,"name",{enumerable:!0,get:function(){return this._name}}),Object.defineProperty(e,"value",{enumerable:!0,get:function(){return this._value}})}catch(e){}var d=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,n){this._enumType.__writeOpt(e,t,n)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=d,Ice.Slice.defineEnum=function(e){function i(e,t){l.call(this,e,t)}(i.prototype=new l).constructor=i;var t=[],n=0,r=null;for(var o in e){var c=e[o][0],a=e[o][1],s=new i(c,a);t[a]=s,r=r||s,Object.defineProperty(i,c,{enumerable:!0,value:s}),n<a&&(n=a)}return Object.defineProperty(i,"minWireSize",{get:function(){return 1}}),i.__write=function(e,t){t?e.writeEnum(t):e.writeEnum(r)},i.__read=function(e){return e.readEnum(i)},i.__writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,Ice.OptionalFormat.Size)&&i.__write(e,n)},i.__readOpt=function(e,t){return e.readOptEnum(t,i)},i.__helper=new d(i),Object.defineProperty(i,"valueOf",{value:function(e){return void 0===e?i:t[e]}}),Object.defineProperty(i,"maxValue",{value:n}),Object.defineProperty(i.prototype,"maxValue",{value:n}),i}}(),Ice.generateUUID=function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:7&t|8).toString(16)})},Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]]),l=Ice.Debug,Ice.StringUtil={findFirstOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;r<i;r++){var o=e.charAt(r);if(-1!=t.indexOf(o))return r}return-1},findFirstNotOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;r<i;r++){var o=e.charAt(r);if(-1==t.indexOf(o))return r}return-1},escapeString:function(e,t){var n,i;if(null!==(t=void 0===t?null:t))for(n=0,i=t.length;n<i;++n)if(t.charCodeAt(n)<32||126<t.charCodeAt(n))throw new Error("special characters must be in ASCII range 32-126");var r,o=[];for(n=0,i=e.length;n<i;++n)(r=e.charCodeAt(n))<128?Dn(r,o,t):(127<r&&r<2048?Dn(r>>6|192,o,t):(Dn(r>>12|224,o,t),Dn(r>>6&63|128,o,t)),Dn(63&r|128,o,t));return o.join("")},unescapeString:function(e,t,n){t=void 0===t?0:t,n=void 0===n?e.length:n,l.assert(0<=t&&t<=n&&n<=e.length);var i=[];return function(e,t,n,i){var r,o,c,a={value:0};for(;t<n;)r=An(e,t,n,a),t=a.value,r<128?i.push(String.fromCharCode(r)):191<r&&r<224?(o=An(e,t,n,a),t=a.value,i.push(String.fromCharCode((31&r)<<6|63&o))):(o=An(e,t,n,a),c=An(e,t=a.value,n,a),t=a.value,i.push(String.fromCharCode((15&r)<<12|(63&o)<<6|63&c)))}(e,t,n,i),i.join("")},splitString:function(e,t){for(var n=[],i="",r=0,o=null;r<e.length;)if(null!==o||'"'!==e.charAt(r)&&"'"!==e.charAt(r)){if(null===o&&"\\"===e.charAt(r)&&r+1<e.length&&('"'===e.charAt(r+1)||"'"===e.charAt(r+1)))++r;else if(null!==o&&"\\"===e.charAt(r)&&r+1<e.length&&e.charAt(r+1)===o)++r;else{if(null!==o&&e.charAt(r)===o){++r,o=null;continue}if(-1!==t.indexOf(e.charAt(r))&&null===o){++r,0<i.length&&(n.push(i),i="");continue}}r<e.length&&(i+=e.charAt(r++))}else o=e.charAt(r++);return 0<i.length&&n.push(i),null!==o?null:n},checkQuote:function(e,t){t=void 0===t?0:t;var n=e.charAt(t);if('"'!=n&&"'"!=n)return 0;t++;for(var i,r=e.length;t<r&&-1!=(i=e.indexOf(n,t));){if("\\"!=e.charAt(i-1))return i;t=i+1}return-1},hashCode:function(e){for(var t=0,n=e.length,i=0;i<n;i++)t=31*t+e.charCodeAt(i);return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error("conversion of `"+e+"' to int failed");return t}},function(){var d=Ice.__M,i=Ice.StringUtil;function r(e,t,n,i,r){for(var o=e._table[r];null!==o;o=o._nextInBucket)if(o._hash===i&&e.keysEqual(t,o._key))return void(o._value=n);e.add(t,n,i,r)}function a(e,t){return e===t}var u=Ice.Class({__init__:function(e,t){var n,i,r,o,c;if("function"==typeof e?(i=e,r=t):e instanceof u&&(i=(n=e).keyComparator,r=n.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof i?i:a,this._valueComparator="function"==typeof r?r:a,n instanceof u&&0<n._size){for(this._threshold=n._threshold,c=n._table.length,this._table.length=c,o=0;o<c;o++)this._table[o]=null;this.merge(n)}else for(this._threshold=this._initialCapacity*this._loadFactor,o=0;o<this._initialCapacity;o++)this._table[o]=null},set:function(e,t){var n=this.computeHash(e),i=this.hashIndex(n.hash,this._table.length);return r(this,n.key,t,n.hash,i)},get:function(e){var t=this.computeHash(e),n=this.findEntry(t.key,t.hash);return void 0!==n?n._value:void 0},has:function(e){var t=this.computeHash(e);return void 0!==this.findEntry(t.key,t.hash)},del:function(e){for(var t=this.computeHash(e),n=this.hashIndex(t.hash,this._table.length),i=null,r=this._table[n];null!==r;r=r._nextInBucket){if(r._hash===t.hash&&this.keysEqual(t.key,r._key))return this._size--,null!==i?i._nextInBucket=r._nextInBucket:this._table[n]=r._nextInBucket,null!==r._prev&&(r._prev._next=r._next),null!==r._next&&(r._next._prev=r._prev),this._head===r&&(this._head=r._next),r._value;i=r}},clear:function(){for(var e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0},forEach:function(e,t){t=void 0===t?e:t;for(var n=this._head;null!==n;n=n._next)e.call(t,n._key,n._value)},keys:function(){for(var e=[],t=0,n=this._head;null!==n;n=n._next)e[t++]=n._key;return e},values:function(){for(var e=[],t=0,n=this._head;null!==n;n=n._next)e[t++]=n._value;return e},equals:function(e,t){if(null===e||!(e instanceof u)||this._size!==e._size)return!1;for(var n=this,i=t||function(e,t){return n._valueComparator.call(n._valueComparator,e,t)},r=this._head;null!==r;r=r._next){var o=e.findEntry(r._key,r._hash);if(void 0===o||!i(r._value,o._value))return!1}return!0},clone:function(){return new u(this)},merge:function(e){for(var t=e._head;null!==t;t=t._next)r(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))},add:function(e,t,n,i){var r=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:n}});r._nextInBucket=this._table[i],(this._table[i]=r)._next=this._head,null!==this._head&&(this._head._prev=r),this._head=r,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)},resize:function(e){this._table;for(var t=[],n=0;n<e;n++)t[n]=null;for(var i=this._head;null!==i;i=i._next){var r=this.hashIndex(i._hash,e);i._nextInBucket=t[r],t[r]=i}this._table=t,this._threshold=e*this._loadFactor},findEntry:function(e,t){for(var n=this.hashIndex(t,this._table.length),i=this._table[n];null!==i;i=i._nextInBucket)if(i._hash===t&&this.keysEqual(e,i._key))return i},hashIndex:function(e,t){return e&t-1},computeHash:function(e){var t;if(0===e||-0===e)return{key:0,hash:0};if(null===e)return null===u._null&&(t=Ice.generateUUID(),u._null={key:t,hash:i.hashCode(t)}),u._null;if(void 0===e)throw new Error("cannot compute hash for undefined value");if("function"==typeof e.hashCode)return{key:e,hash:e.hashCode()};var n=_typeof2(e);if("string"===n||e instanceof String)return{key:e,hash:i.hashCode(e)};if("number"===n||e instanceof Number)return isNaN(e)?(null===u._nan&&(t=Ice.generateUUID(),u._nan={key:t,hash:i.hashCode(t)}),u._nan):{key:e,hash:e.toFixed(0)};if("boolean"===n||e instanceof Boolean)return{key:e,hash:e?1:0};throw new Error("cannot compute hash for value of type "+n)},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});(Ice.HashMap=u).compareEquals=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},u.compareIdentity=a,u._null=null,u._nan=null;var e=u.prototype;Object.defineProperty(e,"size",{get:function(){return this._size}}),Object.defineProperty(e,"entries",{get:function(){return this._head}}),Ice.Slice.defineDictionary=function(e,t,n,i,r,o,c,a,s){e[t]=void 0!==c||void 0!==s?function(e){return new u(e||c,s)}:u;var l=null;Object.defineProperty(e,n,{get:function(){return null===l&&(l=Ice.StreamHelpers.generateDictHelper(d.type(i),d.type(r),o,d.type(a),e[t])),l}})}}(),Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]]),function(){var e=Ice.Class,c=Object.defineProperty,o=(Ice.HashMap,Ice.OptionalFormat),a={FSizeOptHelper:function(){this.writeOpt=function(e,t,n){if(void 0!==n&&e.writeOpt(t,o.FSize)){var i=e.startSize();this.write(e,n),e.endSize(i)}},this.readOpt=function(e,t){var n;return e.readOpt(t,o.FSize)&&(e.skip(4),n=this.read(e)),n}},VSizeOptHelper:function(){this.writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,o.VSize)&&(e.writeSize(this.minWireSize),this.write(e,n))},this.readOpt=function(e,t){var n;return e.readOpt(t,o.VSize)&&(e.skipSize(),n=this.read(e)),n}},VSizeContainerOptHelper:function(r){this.writeOpt=function(e,t,n){if(void 0!==n&&e.writeOpt(t,o.VSize)){var i=this.size(n);e.writeSize(254<i?i*r+5:i*r+1),this.write(e,n)}},this.readOpt=function(e,t){var n;return e.readOpt(t,o.VSize)&&(e.skipSize(),n=this.read(e)),n}},VSizeContainer1OptHelper:function(){this.writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,o.VSize)&&this.write(e,n)},this.readOpt=function(e,t){var n;return e.readOpt(t,o.VSize)&&(n=this.read(e)),n}}},r=e({write:function(e,t){if(null===t||0===t.length)e.writeSize(0);else{var n=this.elementHelper;e.writeSize(t.length);for(var i=0;i<t.length;++i)n.write(e,t[i])}},read:function(e){var t=this.elementHelper,n=e.readAndCheckSeqSize(t.minWireSize),i=[];i.length=n;for(var r=0;r<n;++r)i[r]=t.read(e);return i},size:function(e){return null==e?0:e.length}});c(r.prototype,"minWireSize",{get:function(){return 1}});var s=new r;s.write=function(e,t){return e.writeByteSeq(t)},s.read=function(e){return e.readByteSeq()},c(s,"elementHelper",{get:function(){return Ice.ByteHelper}}),a.VSizeContainer1OptHelper.call(s);function l(e){var t=e.readAndCheckSeqSize(1),n=[];function i(t){e.readObject(function(e){n[t]=e},r)}n.length=t;for(var r=this.elementType,o=0;o<t;++o)i(o);return n}a.generateSeqHelper=function(e,t,n){if(e===Ice.ByteHelper)return s;var i=new r;return t?1===e.minWireSize?a.VSizeContainer1OptHelper.call(i):a.VSizeContainerOptHelper.call(i,e.minWireSize):a.FSizeOptHelper.call(i),c(i,"elementHelper",{get:function(){return e}}),e==Ice.ObjectHelper&&(c(i,"elementType",{get:function(){return n}}),i.read=l),i};var d=e({write:function(e,t){if(null==t||0===t.size)e.writeSize(0);else{var n=this.keyHelper,i=this.valueHelper;e.writeSize(t.size);for(var r=t.entries;null!==r;r=r.next)n.write(e,r.key),i.write(e,r.value)}},read:function(e){for(var t=new this.mapType,n=e.readSize(),i=this.keyHelper,r=this.valueHelper,o=0;o<n;++o)t.set(i.read(e),r.read(e));return t},size:function(e){return null==e?0:e.size}});Object.defineProperty(d.prototype,"minWireSize",{get:function(){return 1}});function u(e){function t(t){e.readObject(function(e){i.set(t,e)},r)}for(var n=e.readSize(),i=new this.mapType,r=this.valueType,o=this.keyHelper,c=0;c<n;++c)t(o.read(e));return i}a.generateDictHelper=function(e,t,n,i,r){var o=new d;return n?a.VSizeContainerOptHelper.call(o,e.minWireSize+t.minWireSize):a.FSizeOptHelper.call(o),c(o,"mapType",{get:function(){return r}}),c(o,"keyHelper",{get:function(){return e}}),c(o,"valueHelper",{get:function(){return t}}),t==Ice.ObjectHelper&&(c(o,"valueType",{get:function(){return i}}),o.read=u),o},Ice.StreamHelpers=a}(),function(){function i(){return c==t&&(c=0),c++}var r,e=Ice.HashMap,t=Number.MAX_SAFE_INTEGER||9007199254740991,o=new e,n={},c=0;n.setTimeout=function(e,t){var n=i();return o.set(n,e),r.postMessage({type:0,id:n,ms:t}),n},n.clearTimeout=function(e){o.del(e),r.postMessage({type:3,id:e})},n.setInterval=function(e,t){var n=i();return o.set(n,e),r.postMessage({type:1,id:n,ms:t}),n},n.clearInterval=function(e){o.del(e),r.postMessage({type:4,id:e})},n.setImmediate=function(e){var t=i();return o.set(t,e),r.postMessage({type:2,id:t}),t},n.onmessage=function(e){var t;void 0!==(t=1===e.data.type?o.get(e.data.id):o.del(e.data.id))&&t.call()};var a;if(void 0===r)try{a=URL.createObjectURL(new Blob(["("+function(){var t={};self.onmessage=function(e){0==e.data.type?t[e.data.id]=setTimeout(function(){self.postMessage(e.data)},e.data.ms):1==e.data.type?t[e.data.id]=setInterval(function(){self.postMessage(e.data)},e.data.ms):2==e.data.type?self.postMessage(e.data):3==e.data.type?(clearTimeout(t[e.data.id]),delete t[e.data.id]):4==e.data.type&&(clearInterval(t[e.data.id]),delete t[e.data.id])}}.toString()+"());"],{type:"text/javascript"})),(r=new Worker(a)).onmessage=n.onmessage,Ice.Timer=n}catch(e){URL.revokeObjectURL(a),Ice.Timer=function(){var e={setTimeout:function(){setTimeout.apply(null,arguments)},clearTimeout:function(){clearTimeout.apply(null,arguments)},setInterval:function(){setInterval.apply(null,arguments)},clearInterval:function(){clearInterval.apply(null,arguments)}};return e.setImmediate="function"==typeof setImmediate?function(){setImmediate.apply(null,arguments)}:function(){setTimeout.apply(null,arguments)},e}()}}(),function(){var e=Ice.Class,t=0,d=e({__init__:function(){this.__address=t++},hashCode:function(){return this.__address},ice_isA:function(e){return 0<=this.__mostDerivedType().__ids.indexOf(e)},ice_ping:function(){},ice_ids:function(){return this.__mostDerivedType().__ids},ice_id:function(){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null),n(this,e,this.__mostDerivedType()),e.endWriteObject()},__read:function(e){e.startReadObject(),i(this,e,this.__mostDerivedType()),e.endReadObject(!1)},ice_instanceof:function(e){return!!e&&(this instanceof e||this.__mostDerivedType().__instanceof(e))},__mostDerivedType:function(){return d},equals:function(e){return this===e}});d.write=function(e,t){e.writeObject(t)},d.writeOpt=function(e,t,n){e.writeOptObject(t,n)},d.read=function(e){var t={value:null};return e.readObject(function(e){t.value=e},d),t},d.readOpt=function(e,t){var n={value:void 0};return e.readOptObject(t,function(e){n.value=e},d),n},d.ice_staticId=function(){return d.__id},d.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},d.__ids=["::Ice::Object"],d.__id=d.__ids[0],d.__compactId=-1,d.__preserved=!1;function u(e){e.startWriteObject(this.__slicedData),n(this,e,this.__mostDerivedType()),e.endWriteObject()}function f(e){e.startReadObject(),i(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadObject(!0)}var n=function e(t,n,i){void 0!==i&&i!==d&&(n.startWriteSlice(i.__id,i.__compactId,i.__parent===d),i.prototype.__writeMemberImpl&&i.prototype.__writeMemberImpl.call(t,n),n.endWriteSlice(),e(t,n,i.__parent))},i=function e(t,n,i){void 0!==i&&i!==d&&(n.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(t,n),n.endReadSlice(),e(t,n,i.__parent))};Ice.Object=d;var r=Ice.Slice;r.defineLocalObject=function(e,t){var n=e||function(){};return void 0!==t&&(n.prototype=new t,n.__parent=t,n.prototype.constructor=e),n},r.defineObject=function(e,t,n,i,r,o,c,a,s){var l=e||function(){};return l.prototype=new t,l.__parent=t,l.__ids=r,l.__id=r[i],l.__compactId=o,l.__instanceof=d.__instanceof,l.__implements=n,l.write=function(e,t){e.writeObject(t)},l.writeOpt=function(e,t,n){e.writeOptObject(t,n)},l.read=function(e){var t={value:null};return e.readObject(function(e){t.value=e},l),t},l.readOpt=function(e,t){var n={value:void 0};return e.readOptObject(t,function(e){n.value=e},l),n},l.ice_staticId=function(){return r[i]},(l.prototype.constructor=l).prototype.__mostDerivedType=function(){return l},s&&(l.prototype.__write=u,l.prototype.__read=f),l.prototype.__writeMemberImpl=c,l.prototype.__readMemberImpl=a,l}}(),a=Ice.StringUtil,Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(e,t){return null!=t&&(e=(e<<5)+e^a.hashCode(t)),e},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){return null!=t&&(e=(e<<5)+e^t.hashCode()),e},addArray:function(e,t,n){if(null!=t)for(var i=0;i<t.length;++i)e=n(e,t[i]);return e}},s=Ice.ArrayUtil,d=s.eq,Ice.Slice.defineStruct=function(e,t,n,i,r,o){var c=e;return c.prototype.clone=Vn,c.prototype.equals=Nn,t&&(c.prototype.hashCode=Ln),i&&n&&(c.prototype.__write=n,c.prototype.__read=i,c.write=function(e,t){t||(c.prototype._nullMarshalValue||(c.prototype._nullMarshalValue=new this),t=c.prototype._nullMarshalValue),t.__write(e)},c.read=function(e,t){return t&&t instanceof this||(t=new this),t.__read(e),t},Object.defineProperty(c,"minWireSize",{get:function(){return r}}),o?Ice.StreamHelpers.VSizeOptHelper.call(c):Ice.StreamHelpers.FSizeOptHelper.call(c)),c},Ice.CompactIdRegistry=new Ice.HashMap,Pn.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",!0),Pn.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",!0),Pn.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",!0),Pn.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",!0),Pn.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",!0),Pn.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",!0),Pn.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",!0),Pn.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",!1),Pn.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Object"),Pn.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",!1),Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4},function(){var t=Ice.Long;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);t=void 0===t?n.length:t;for(var i=new Uint8Array(new ArrayBuffer(t-e)),r=0,o=i.length;r<o;r++)i[r]=n[r+e];return i.buffer});var i="BufferOverflowException",r="BufferUnderflowException",n="IndexOutOfBoundsException",e=Ice.Class({__init__:function(e){void 0!==e?(this.b=e,this.v=new DataView(this.b)):(this.b=null,this.v=null),this._position=0,this._limit=0,this._shrinkCounter=0},empty:function(){return 0===this._limit},resize:function(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e},clear:function(){this.b=null,this.v=null,this._position=0,this._limit=0},expand:function(e){var t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)},reset:function(){0<this._limit&&2*this._limit<this.capacity?2<++this._shrinkCounter&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=0,this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);if(t=Math.max(1024,t),this.b){var n=new Uint8Array(t);n.set(new Uint8Array(this.b)),this.b=n.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else{if(!(e<this.capacity))return;this.b=this.b.slice(0,this.capacity),this.v=new DataView(this.b)}},put:function(e){if(this._position===this._limit)throw new Error(i);this.v.setUint8(this._position,e),this._position++},putAt:function(e,t){if(e>=this._limit)throw new Error(n);this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(0<e.byteLength){if(this._position+e.length>this._limit)throw new Error(i);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit)throw new Error(i);this.v.setInt16(this._position,e,!0),this._position+=2},putInt:function(e){if(this._position+4>this._limit)throw new Error(i);this.v.setInt32(this._position,e,!0),this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||e<0)throw new Error(n);this.v.setInt32(e,t,!0)},putFloat:function(e){if(this._position+4>this._limit)throw new Error(i);this.v.setFloat32(this._position,e,!0),this._position+=4},putDouble:function(e){if(this._position+8>this._limit)throw new Error(i);this.v.setFloat64(this._position,e,!0),this._position+=8},putLong:function(e){if(this._position+8>this._limit)throw new Error(i);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4},writeString:function(e,t){var n=unescape(encodeURIComponent(t));e.writeSize(n.length),e.expand(n.length),this.putString(n,n.length)},putString:function(e,t){if(this._position+t>this._limit)throw new Error(i);for(var n=0;n<t;++n)this.v.setUint8(this._position,e.charCodeAt(n)),this._position++},get:function(){if(this._position>=this._limit)throw new Error(r);var e=this.v.getUint8(this._position);return this._position++,e},getAt:function(e){if(e<0||e>=this._limit)throw new Error(n);return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit)throw new Error(r);var t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit)throw new Error(r);return t=void 0===t?this.b.byteLength-e:t,new Uint8Array(this.b.slice(e,e+t))},getShort:function(){if(this._limit-this._position<2)throw new Error(r);var e=this.v.getInt16(this._position,!0);return this._position+=2,e},getInt:function(){if(this._limit-this._position<4)throw new Error(r);var e=this.v.getInt32(this._position,!0);return this._position+=4,e},getFloat:function(){if(this._limit-this._position<4)throw new Error(r);var e=this.v.getFloat32(this._position,!0);return this._position+=4,e},getDouble:function(){if(this._limit-this._position<8)throw new Error(r);var e=this.v.getFloat64(this._position,!0);return this._position+=8,e},getLong:function(){if(this._limit-this._position<8)throw new Error(r);var e=new t;return e.low=this.v.getUint32(this._position,!0),this._position+=4,e.high=this.v.getUint32(this._position,!0),this._position+=4,e},getString:function(e){if(this._position+e>this._limit)throw new Error(r);for(var t=new DataView(this.b,this._position,e),n="",i=0;i<e;++i)n+=String.fromCharCode(t.getUint8(i));return this._position+=e,n=decodeURIComponent(escape(n))}}),o=e.prototype;Object.defineProperty(o,"position",{get:function(){return this._position},set:function(e){0<=e&&e<=this._limit&&(this._position=e)}}),Object.defineProperty(o,"limit",{get:function(){return this._limit},set:function(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}}),Object.defineProperty(o,"capacity",{get:function(){return null===this.b?0:this.b.byteLength}}),Object.defineProperty(o,"remaining",{get:function(){return this._limit-this._position}}),e.createNative=function(e){return void 0===e?new Uint8Array(0):new Uint8Array(e)},Ice.Buffer=e}(),_=Ice.Buffer,C={},u="A".charCodeAt(0),f="a".charCodeAt(0),h="0".charCodeAt(0),C.encode=function(e){if(null===e||0===e.length)return"";e.length;for(var t,n,i,r,o,c,a,s=[],l=0;l<e.length;l+=3)t=255&e[l],i=n=0,l+1<e.length&&(n=255&e[l+1]),l+2<e.length&&(i=255&e[l+2]),r=t>>2&255,o=255&((3&t)<<4|n>>4),c=255&((15&n)<<2|i>>6),a=63&i,s.push(Un(r)),s.push(Un(o)),l+1<e.length?s.push(Un(c)):s.push("="),l+2<e.length?s.push(Un(a)):s.push("=");for(var d=s.join(""),u=[],f=0;76<d.length-f;)u.push(d.substring(f,f+76)),u.push("\r\n"),f+=76;return u.push(d.substring(f)),u.join("")},C.decode=function(e){for(var t=[],n=0;n<e.length;n++){var i=e.charAt(n);C.isBase64(i)&&t.push(i)}if(0===t.length)return null;var r,o,c,a,s,l,d,u,f=3*t.length/4+1,h=new _;h.resize(f);for(var p=0;p<t.length;p+=4)u=d=l="A",s=t[p],p+1<t.length&&(l=t[p+1]),p+2<t.length&&(d=t[p+2]),p+3<t.length&&(u=t[p+3]),r=255&Fn(s),o=255&Fn(l),c=255&Fn(d),a=255&Fn(u),h.put(r<<2|o>>4),"="!=d&&h.put((15&o)<<4|c>>2),"="!=u&&h.put((3&c)<<6|a);return 0<h.remaining?h.getArrayAt(0,h.position):h.getArrayAt(0)},C.isBase64=function(e){return"A"<=e&&e<="Z"||("a"<=e&&e<="z"||("0"<=e&&e<="9"||("+"==e||("/"==e||"="==e))))},Ice.Base64=C,Ice.Identity=Pn.defineStruct(function(e,t){this.name=void 0!==e?e:"",this.category=void 0!==t?t:""},!0,function(e){e.writeString(this.name),e.writeString(this.category)},function(e){this.name=e.readString(),this.category=e.readString()},2,!1),Pn.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,Ice.HashMap.compareEquals,"Ice.Object"),Pn.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",!1),Ice.ProtocolVersion=Pn.defineStruct(function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0},!0,function(e){e.writeByte(this.major),e.writeByte(this.minor)},function(e){this.major=e.readByte(),this.minor=e.readByte()},2,!0),Ice.EncodingVersion=Pn.defineStruct(function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0},!0,function(e){e.writeByte(this.major),e.writeByte(this.minor)},function(e){this.major=e.readByte(),this.minor=e.readByte()},2,!0),function(){Ice.SliceInfo=function(){this.typeId="",this.compactId=-1,this.bytes=[],this.objects=[],this.hasOptionalMembers=!1,this.isLastSlice=!1};Ice.SlicedData=function(e){this.slices=e};var e=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData),e.endWriteObject()},__read:function(e){e.startReadObject(),this._slicedData=e.endReadObject(!0)}});Ice.UnknownSlicedObject=e}(),function(){var e=Ice.HashMap,n=Ice.Debug,t=Ice.Class({__init__:function(){this._adapterEndpointsTable=new e,this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear(),this._objectTable.clear()},getAdapterEndpoints:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._adapterEndpointsTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.endpoints):(n.value=!1,null)},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new i(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable.del(e),void 0!==t?t.endpoints:null},getObjectReference:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._objectTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.reference):(n.value=!1,null)},addObjectReference:function(e,t){this._objectTable.set(e,new r(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);return this._objectTable.del(e),void 0!==t?t.reference:null},checkTTL:function(e,t){return n.assert(0!==t),t<0||Date.now()-e<=1e3*t}});Ice.LocatorTable=t;var i=function(e,t){this.time=e,this.endpoints=t},r=function(e,t){this.time=e,this.reference=t}}(),p=Ice.Timer,g=0,R=1,m=2,(I=Ice.Class({__init__:function(){this.__state=g,this.__listeners=[]},then:function(e,t){var n=new I,i=this;return p.setImmediate(function(){i.__listeners.push({promise:n,onResponse:e,onException:t}),i.resolve()}),n},exception:function(e){return this.then(null,e)},finally2:function(r){function e(i){return function(){var t=arguments;try{var e=r.apply(null,t);if(e&&"function"==typeof e.then){function n(){i.apply(o,t)}e.then(n).exception(n)}else i.apply(o,t)}catch(e){i.apply(o,t)}}}var o=new I,t=this;return p.setImmediate(function(){t.then(e(o.succeed),e(o.fail))}),o},delay:function(i){function e(t,n){return function(){var e=arguments;p.setTimeout(function(){n.apply(t,e)},i)}}var t=new I,n=this;return p.setImmediate(function(){n.then(e(t,t.succeed),e(t,t.fail))}),t},resolve:function(){if(this.__state!==g)for(var e;e=this.__listeners.pop();)jn(this,e)},setState:function(e,t){this.__state===g&&e!==g&&(this.__state=e,this._args=t,this.resolve())},succeed:function(){var e=arguments;return this.setState(R,e),this},fail:function(){var e=arguments;return this.setState(m,e),this},succeeded:function(){return this.__state===R},failed:function(){return this.__state===m},completed:function(){return this.__state!==g}})).all=function(){if(1===arguments.length&&arguments[0]instanceof Array)return I.all.apply(this,arguments[0]);var t=new I,n=Array.prototype.slice.call(arguments),i=new Array(arguments.length),r=n.length;0===r&&t.succeed.apply(t,i);for(var e=0;e<n.length;++e)!function(e){n[e]&&"function"==typeof n[e].then?n[e].then(function(){i[e]=arguments,0===--r&&t.succeed.apply(t,i)},function(){t.fail.apply(t,arguments)}):(i[e]=n[e],0===--r&&t.succeed.apply(t,i))}(e);return t},I.try2=function(e){return(new I).succeed().then(e)},I.delay=function(e){if(1<arguments.length){var t=new I,n=Array.prototype.slice.call(arguments);return e=n.pop(),t.succeed.apply(t,n).delay(e)}return(new I).succeed().delay(e)},Ice.Promise=I,y=Ice.Class({__init__:function(e){void 0!==e&&0<e.length?this._prefix=e+": ":this._prefix="",this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}},print:function(e){this.write(e,!1)},trace:function(e,t){var n=[];new Date;n.push("-- "),n.push(this.timestamp()),n.push(" "),n.push(this._prefix),n.push(e),n.push(": "),n.push(t),this.write(n.join(""),!0)},warning:function(e){var t=[];new Date;t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)},error:function(e){var t=[];new Date;t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)},cloneWithPrefix:function(e){return new y(e)},write:function(e,t){t&&(e=e.replace(/\n/g,"\n   ")),Cr.Utils.log(e)},timestamp:function(){var e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}}),Ice.Logger=y,Ice.InitializationException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::InitializationException"),Ice.PluginInitializationException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::PluginInitializationException"),Ice.CollocationOptimizationException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CollocationOptimizationException"),Ice.AlreadyRegisteredException=Pn.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""},Ice.LocalException,"Ice::AlreadyRegisteredException"),Ice.NotRegisteredException=Pn.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""},Ice.LocalException,"Ice::NotRegisteredException"),Ice.TwowayOnlyException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.operation=void 0!==e?e:""},Ice.LocalException,"Ice::TwowayOnlyException"),Ice.CloneNotImplementedException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CloneNotImplementedException"),Ice.UnknownException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.unknown=void 0!==e?e:""},Ice.LocalException,"Ice::UnknownException"),Ice.UnknownLocalException=Pn.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownLocalException"),Ice.UnknownUserException=Pn.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownUserException"),Ice.VersionMismatchException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::VersionMismatchException"),Ice.CommunicatorDestroyedException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CommunicatorDestroyedException"),Ice.ObjectAdapterDeactivatedException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.name=void 0!==e?e:""},Ice.LocalException,"Ice::ObjectAdapterDeactivatedException"),Ice.ObjectAdapterIdInUseException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:""},Ice.LocalException,"Ice::ObjectAdapterIdInUseException"),Ice.NoEndpointException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.proxy=void 0!==e?e:""},Ice.LocalException,"Ice::NoEndpointException"),Ice.EndpointParseException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::EndpointParseException"),Ice.EndpointSelectionTypeParseException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::EndpointSelectionTypeParseException"),Ice.VersionParseException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::VersionParseException"),Ice.IdentityParseException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::IdentityParseException"),Ice.ProxyParseException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""},Ice.LocalException,"Ice::ProxyParseException"),Ice.IllegalIdentityException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:new Ice.Identity},Ice.LocalException,"Ice::IllegalIdentityException"),Ice.IllegalServantException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::IllegalServantException"),Ice.RequestFailedException=Pn.defineLocalException(function(e,t,n,i){Ice.LocalException.call(this,i),this.id=void 0!==e?e:new Ice.Identity,this.facet=void 0!==t?t:"",this.operation=void 0!==n?n:""},Ice.LocalException,"Ice::RequestFailedException"),Ice.ObjectNotExistException=Pn.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::ObjectNotExistException"),Ice.FacetNotExistException=Pn.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::FacetNotExistException"),Ice.OperationNotExistException=Pn.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::OperationNotExistException"),Ice.SyscallException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.error=void 0!==e?e:0},Ice.LocalException,"Ice::SyscallException"),Ice.SocketException=Pn.defineLocalException(function(e,t){Ice.SyscallException.call(this,e,t)},Ice.SyscallException,"Ice::SocketException"),Ice.FileException=Pn.defineLocalException(function(e,t,n){Ice.SyscallException.call(this,e,n),this.path=void 0!==t?t:""},Ice.SyscallException,"Ice::FileException"),Ice.ConnectFailedException=Pn.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectFailedException"),Ice.ConnectionRefusedException=Pn.defineLocalException(function(e,t){Ice.ConnectFailedException.call(this,e,t)},Ice.ConnectFailedException,"Ice::ConnectionRefusedException"),Ice.ConnectionLostException=Pn.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectionLostException"),Ice.DNSException=Pn.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.error=void 0!==e?e:0,this.host=void 0!==t?t:""},Ice.LocalException,"Ice::DNSException"),Ice.OperationInterruptedException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::OperationInterruptedException"),Ice.TimeoutException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::TimeoutException"),Ice.ConnectTimeoutException=Pn.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectTimeoutException"),Ice.CloseTimeoutException=Pn.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::CloseTimeoutException"),Ice.ConnectionTimeoutException=Pn.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectionTimeoutException"),Ice.InvocationTimeoutException=Pn.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::InvocationTimeoutException"),Ice.InvocationCanceledException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::InvocationCanceledException"),Ice.ProtocolException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::ProtocolException"),Ice.BadMagicException=Pn.defineLocalException(function(e,t,n){Ice.ProtocolException.call(this,e,n),this.badMagic=void 0!==t?t:null},Ice.ProtocolException,"Ice::BadMagicException"),Ice.UnsupportedProtocolException=Pn.defineLocalException(function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:new Ice.ProtocolVersion,this.supported=void 0!==n?n:new Ice.ProtocolVersion},Ice.ProtocolException,"Ice::UnsupportedProtocolException"),Ice.UnsupportedEncodingException=Pn.defineLocalException(function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:new Ice.EncodingVersion,this.supported=void 0!==n?n:new Ice.EncodingVersion},Ice.ProtocolException,"Ice::UnsupportedEncodingException"),Ice.UnknownMessageException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownMessageException"),Ice.ConnectionNotValidatedException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ConnectionNotValidatedException"),Ice.UnknownRequestIdException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownRequestIdException"),Ice.UnknownReplyStatusException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownReplyStatusException"),Ice.CloseConnectionException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CloseConnectionException"),Ice.ForcedCloseConnectionException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ForcedCloseConnectionException"),Ice.IllegalMessageSizeException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::IllegalMessageSizeException"),Ice.CompressionException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CompressionException"),Ice.DatagramLimitException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::DatagramLimitException"),Ice.MarshalException=Pn.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::MarshalException"),Ice.ProxyUnmarshalException=Pn.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::ProxyUnmarshalException"),Ice.UnmarshalOutOfBoundsException=Pn.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException"),Ice.NoObjectFactoryException=Pn.defineLocalException(function(e,t,n){Ice.MarshalException.call(this,e,n),this.type=void 0!==t?t:""},Ice.MarshalException,"Ice::NoObjectFactoryException"),Ice.UnexpectedObjectException=Pn.defineLocalException(function(e,t,n,i){Ice.MarshalException.call(this,e,i),this.type=void 0!==t?t:"",this.expectedType=void 0!==n?n:""},Ice.MarshalException,"Ice::UnexpectedObjectException"),Ice.MemoryLimitException=Pn.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::MemoryLimitException"),Ice.StringConversionException=Pn.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::StringConversionException"),Ice.EncapsulationException=Pn.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::EncapsulationException"),Ice.FeatureNotSupportedException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.unsupportedFeature=void 0!==e?e:""},Ice.LocalException,"Ice::FeatureNotSupportedException"),Ice.SecurityException=Pn.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""},Ice.LocalException,"Ice::SecurityException"),Ice.FixedProxyException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::FixedProxyException"),Ice.ResponseSentException=Pn.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::ResponseSentException"),v=Ice.StringUtil,S={},Ice.Encoding_1_0=new Ice.EncodingVersion(1,0),Ice.Encoding_1_1=new Ice.EncodingVersion(1,1),Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0),S.headerSize=14,S.magic=Ice.Buffer.createNative([73,99,101,80]),S.protocolMajor=1,S.protocolMinor=0,S.protocolEncodingMajor=1,S.protocolEncodingMinor=0,S.encodingMajor=1,S.encodingMinor=1,S.requestMsg=0,S.requestBatchMsg=1,S.replyMsg=2,S.validateConnectionMsg=3,S.closeConnectionMsg=4,S.replyOK=0,S.replyUserException=1,S.replyObjectNotExist=2,S.replyFacetNotExist=3,S.replyOperationNotExist=4,S.replyUnknownLocalException=5,S.replyUnknownUserException=6,S.replyUnknownException=7,S.requestHdr=Ice.Buffer.createNative([S.magic[0],S.magic[1],S.magic[2],S.magic[3],S.protocolMajor,S.protocolMinor,S.protocolEncodingMajor,S.protocolEncodingMinor,S.requestMsg,0,0,0,0,0,0,0,0,0]),S.requestBatchHdr=Ice.Buffer.createNative([S.magic[0],S.magic[1],S.magic[2],S.magic[3],S.protocolMajor,S.protocolMinor,S.protocolEncodingMajor,S.protocolEncodingMinor,S.requestBatchMsg,0,0,0,0,0,0,0,0,0]),S.replyHdr=Ice.Buffer.createNative([S.magic[0],S.magic[1],S.magic[2],S.magic[3],S.protocolMajor,S.protocolMinor,S.protocolEncodingMajor,S.protocolEncodingMinor,S.replyMsg,0,0,0,0,0]),S.currentProtocol=new Ice.ProtocolVersion(S.protocolMajor,S.protocolMinor),S.currentProtocolEncoding=new Ice.EncodingVersion(S.protocolEncodingMajor,S.protocolEncodingMinor),S.currentEncoding=new Ice.EncodingVersion(S.encodingMajor,S.encodingMinor),S.checkSupportedProtocol=function(e){if(e.major!==S.currentProtocol.major||e.minor>S.currentProtocol.minor)throw new Ice.UnsupportedProtocolException("",e,S.currentProtocol)},S.checkSupportedProtocolEncoding=function(e){if(e.major!==S.currentProtocolEncoding.major||e.minor>S.currentProtocolEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,S.currentProtocolEncoding)},S.checkSupportedEncoding=function(e){if(e.major!==S.currentEncoding.major||e.minor>S.currentEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,S.currentEncoding)},S.getCompatibleProtocol=function(e){return e.major!==S.currentProtocol.major?e:e.minor<S.currentProtocol.minor?e:S.currentProtocol},S.getCompatibleEncoding=function(e){return e.major!==S.currentEncoding.major?e:e.minor<S.currentEncoding.minor?e:S.currentEncoding},S.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(Bn(e),Hn(e))},Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(Bn(e),Hn(e))},Ice.protocolVersionToString=function(e){return qn(e.major,e.minor)},Ice.encodingVersionToString=function(e){return qn(e.major,e.minor)},Ice.Protocol=S,Object.defineProperty(Kn.prototype,"pattern",{get:function(){return this._pattern}}),Object.defineProperty(Kn.prototype,"deprecated",{get:function(){return this._deprecated}}),Object.defineProperty(Kn.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}}),Ice.Property=Kn,E={},b=Ice.Property,E.IceProps=[new b("/^Ice.ACM.Client/",!0,null),new b("/^Ice.ACM.Server/",!0,null),new b("/^Ice.ACM.Timeout/",!1,null),new b("/^Ice.ACM.Heartbeat/",!1,null),new b("/^Ice.ACM.Close/",!1,null),new b("/^Ice.ACM/",!1,null),new b("/^Ice.ACM.Client.Timeout/",!1,null),new b("/^Ice.ACM.Client.Heartbeat/",!1,null),new b("/^Ice.ACM.Client.Close/",!1,null),new b("/^Ice.ACM.Client/",!1,null),new b("/^Ice.ACM.Server.Timeout/",!1,null),new b("/^Ice.ACM.Server.Heartbeat/",!1,null),new b("/^Ice.ACM.Server.Close/",!1,null),new b("/^Ice.ACM.Server/",!1,null),new b("/^Ice.Admin.ACM.Timeout/",!1,null),new b("/^Ice.Admin.ACM.Heartbeat/",!1,null),new b("/^Ice.Admin.ACM.Close/",!1,null),new b("/^Ice.Admin.ACM/",!1,null),new b("/^Ice.Admin.AdapterId/",!1,null),new b("/^Ice.Admin.Endpoints/",!1,null),new b("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new b("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new b("/^Ice.Admin.Locator.PreferSecure/",!1,null),new b("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new b("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new b("/^Ice.Admin.Locator.Locator/",!1,null),new b("/^Ice.Admin.Locator.Router/",!1,null),new b("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new b("/^Ice.Admin.Locator.Context../",!1,null),new b("/^Ice.Admin.Locator/",!1,null),new b("/^Ice.Admin.PublishedEndpoints/",!1,null),new b("/^Ice.Admin.ReplicaGroupId/",!1,null),new b("/^Ice.Admin.Router.EndpointSelection/",!1,null),new b("/^Ice.Admin.Router.ConnectionCached/",!1,null),new b("/^Ice.Admin.Router.PreferSecure/",!1,null),new b("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new b("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new b("/^Ice.Admin.Router.Locator/",!1,null),new b("/^Ice.Admin.Router.Router/",!1,null),new b("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new b("/^Ice.Admin.Router.Context../",!1,null),new b("/^Ice.Admin.Router/",!1,null),new b("/^Ice.Admin.ProxyOptions/",!1,null),new b("/^Ice.Admin.ThreadPool.Size/",!1,null),new b("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new b("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new b("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new b("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new b("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new b("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new b("/^Ice.Admin.MessageSizeMax/",!1,null),new b("/^Ice.Admin.DelayCreation/",!1,null),new b("/^Ice.Admin.Enabled/",!1,null),new b("/^Ice.Admin.Facets/",!1,null),new b("/^Ice.Admin.InstanceName/",!1,null),new b("/^Ice.Admin.Logger.KeepLogs/",!1,null),new b("/^Ice.Admin.Logger.KeepTraces/",!1,null),new b("/^Ice.Admin.Logger.Properties/",!1,null),new b("/^Ice.Admin.ServerId/",!1,null),new b("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new b("/^Ice.BatchAutoFlush/",!0,null),new b("/^Ice.BatchAutoFlushSize/",!1,null),new b("/^Ice.ChangeUser/",!1,null),new b("/^Ice.ClientAccessPolicyProtocol/",!1,null),new b("/^Ice.Compression.Level/",!1,null),new b("/^Ice.CollectObjects/",!1,null),new b("/^Ice.Config/",!1,null),new b("/^Ice.ConsoleListener/",!1,null),new b("/^Ice.Default.CollocationOptimized/",!1,null),new b("/^Ice.Default.EncodingVersion/",!1,null),new b("/^Ice.Default.EndpointSelection/",!1,null),new b("/^Ice.Default.Host/",!1,null),new b("/^Ice.Default.Locator.EndpointSelection/",!1,null),new b("/^Ice.Default.Locator.ConnectionCached/",!1,null),new b("/^Ice.Default.Locator.PreferSecure/",!1,null),new b("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new b("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new b("/^Ice.Default.Locator.Locator/",!1,null),new b("/^Ice.Default.Locator.Router/",!1,null),new b("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new b("/^Ice.Default.Locator.Context../",!1,null),new b("/^Ice.Default.Locator/",!1,null),new b("/^Ice.Default.LocatorCacheTimeout/",!1,null),new b("/^Ice.Default.InvocationTimeout/",!1,null),new b("/^Ice.Default.Package/",!1,null),new b("/^Ice.Default.PreferSecure/",!1,null),new b("/^Ice.Default.Protocol/",!1,null),new b("/^Ice.Default.Router.EndpointSelection/",!1,null),new b("/^Ice.Default.Router.ConnectionCached/",!1,null),new b("/^Ice.Default.Router.PreferSecure/",!1,null),new b("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new b("/^Ice.Default.Router.InvocationTimeout/",!1,null),new b("/^Ice.Default.Router.Locator/",!1,null),new b("/^Ice.Default.Router.Router/",!1,null),new b("/^Ice.Default.Router.CollocationOptimized/",!1,null),new b("/^Ice.Default.Router.Context../",!1,null),new b("/^Ice.Default.Router/",!1,null),new b("/^Ice.Default.SlicedFormat/",!1,null),new b("/^Ice.Default.SourceAddress/",!1,null),new b("/^Ice.Default.Timeout/",!1,null),new b("/^Ice.EventLog.Source/",!1,null),new b("/^Ice.FactoryAssemblies/",!1,null),new b("/^Ice.HTTPProxyHost/",!1,null),new b("/^Ice.HTTPProxyPort/",!1,null),new b("/^Ice.ImplicitContext/",!1,null),new b("/^Ice.InitPlugins/",!1,null),new b("/^Ice.IPv4/",!1,null),new b("/^Ice.IPv6/",!1,null),new b("/^Ice.LogFile/",!1,null),new b("/^Ice.LogStdErr.Convert/",!1,null),new b("/^Ice.MessageSizeMax/",!1,null),new b("/^Ice.Nohup/",!1,null),new b("/^Ice.NullHandleAbort/",!1,null),new b("/^Ice.Override.CloseTimeout/",!1,null),new b("/^Ice.Override.Compress/",!1,null),new b("/^Ice.Override.ConnectTimeout/",!1,null),new b("/^Ice.Override.Timeout/",!1,null),new b("/^Ice.Override.Secure/",!1,null),new b("/^Ice.Package../",!1,null),new b("/^Ice.Plugin../",!1,null),new b("/^Ice.PluginLoadOrder/",!1,null),new b("/^Ice.PreferIPv6Address/",!1,null),new b("/^Ice.PrintAdapterReady/",!1,null),new b("/^Ice.PrintProcessId/",!1,null),new b("/^Ice.PrintStackTraces/",!1,null),new b("/^Ice.ProgramName/",!1,null),new b("/^Ice.RetryIntervals/",!1,null),new b("/^Ice.ServerIdleTime/",!1,null),new b("/^Ice.SOCKSProxyHost/",!1,null),new b("/^Ice.SOCKSProxyPort/",!1,null),new b("/^Ice.StdErr/",!1,null),new b("/^Ice.StdOut/",!1,null),new b("/^Ice.SyslogFacility/",!1,null),new b("/^Ice.ThreadPool.Client.Size/",!1,null),new b("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new b("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new b("/^Ice.ThreadPool.Client.StackSize/",!1,null),new b("/^Ice.ThreadPool.Client.Serialize/",!1,null),new b("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new b("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new b("/^Ice.ThreadPool.Server.Size/",!1,null),new b("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new b("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new b("/^Ice.ThreadPool.Server.StackSize/",!1,null),new b("/^Ice.ThreadPool.Server.Serialize/",!1,null),new b("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new b("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new b("/^Ice.ThreadPriority/",!1,null),new b("/^Ice.Trace.Admin.Properties/",!1,null),new b("/^Ice.Trace.Admin.Logger/",!1,null),new b("/^Ice.Trace.Locator/",!1,null),new b("/^Ice.Trace.Network/",!1,null),new b("/^Ice.Trace.Protocol/",!1,null),new b("/^Ice.Trace.Retry/",!1,null),new b("/^Ice.Trace.Slicing/",!1,null),new b("/^Ice.Trace.ThreadPool/",!1,null),new b("/^Ice.UDP.RcvSize/",!1,null),new b("/^Ice.UDP.SndSize/",!1,null),new b("/^Ice.TCP.Backlog/",!1,null),new b("/^Ice.TCP.RcvSize/",!1,null),new b("/^Ice.TCP.SndSize/",!1,null),new b("/^Ice.UseApplicationClassLoader/",!1,null),new b("/^Ice.UseSyslog/",!1,null),new b("/^Ice.Warn.AMICallback/",!1,null),new b("/^Ice.Warn.Connections/",!1,null),new b("/^Ice.Warn.Datagrams/",!1,null),new b("/^Ice.Warn.Dispatch/",!1,null),new b("/^Ice.Warn.Endpoints/",!1,null),new b("/^Ice.Warn.UnknownProperties/",!1,null),new b("/^Ice.Warn.UnusedProperties/",!1,null),new b("/^Ice.CacheMessageBuffers/",!1,null),new b("/^Ice.ThreadInterruptSafe/",!1,null),new b("/^Ice.Voip/",!1,null)],E.validProps=[E.IceProps],E.clPropNames=["Ice"],Ice.PropertyNames=E,w=Ice.HashMap,T=Ice.AlreadyRegisteredException,O=Ice.NotRegisteredException,P=Ice.Class({__init__:function(){this._factoryMap=new w},add:function(e,t){var n;if(void 0!==this._factoryMap.get(t))throw(n=new T).id=t,n.kindOfObject="object factory",n;this._factoryMap.set(t,e)},remove:function(e){var t,n;if(void 0===(t=this._factoryMap.get(e)))throw(n=new O).id=e,n.kindOfObject="object factory",n;this._factoryMap.del(e),t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var e=this._factoryMap.entries;for(this._factoryMap=new w;null!==e;)e.value.destroy(),e=e.next}}),Ice.ObjectFactoryManager=P,M=Ice.Promise,D=Ice.Class(M,{__init__:function(e,t,n,i,r){M.call(this),void 0!==e&&(this._communicator=e,this._instance=null!==e?e.instance:null,this._operation=t,this._connection=n,this._proxy=i,this._adapter=r)}}),x=D.prototype,(A=Object.defineProperty)(x,"communicator",{get:function(){return this._communicator}}),A(x,"connection",{get:function(){return this._connection}}),A(x,"proxy",{get:function(){return this._proxy}}),A(x,"adapter",{get:function(){return this._adapter}}),A(x,"operation",{get:function(){return this._operation}}),Ice.AsyncResultBase=D,Pn.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.OperationMode=Pn.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]),Ice.Current=Pn.defineStruct(function(e,t,n,i,r,o,c,a,s){this.adapter=void 0!==e?e:null,this.con=void 0!==t?t:null,this.id=void 0!==n?n:new Ice.Identity,this.facet=void 0!==i?i:"",this.operation=void 0!==r?r:"",this.mode=void 0!==o?o:Ice.OperationMode.Normal,this.ctx=void 0!==c?c:null,this.requestId=void 0!==a?a:0,this.encoding=void 0!==s?s:new Ice.EncodingVersion},!1),Ice.ObjectFactory=Ice.Class({create:function(){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}}),N=Ice.Class(Error,{__init__:function(e){e instanceof Ice.LocalException?this._ex=e:(Ice.Debug.assert(e instanceof N),this._ex=e._ex)}}),V=N.prototype,Object.defineProperty(V,"inner",{get:function(){return this._ex}}),Ice.RetryException=N,Ice.EndpointSelectionType=Pn.defineEnum([["Random",0],["Ordered",1]]),function(){Ice.Promise;var i=Ice.ReferenceMode,e=Ice.Class({__init__:function(e,t,n){this._reference=e,this._response=e.getMode()==i.ModeTwoway,this._connection=t,this._compress=n},update:function(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(e){}return this},sendAsyncRequest:function(e){return e.__invokeRemote(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=e}(),function(){var c=Ice.Debug,e=Ice.HashMap,a=Ice.Protocol,o=Ice.StringUtil,s=Ice.OperationMode,l=Ice.Identity,i={traceSend:function(e,t,n){if(1<=n.protocol){var i=e.pos;e.pos=0;var r=[],o=f(r,e);t.trace(n.protocolCat,"sending "+h(o)+" "+r.join("")),e.pos=i}},traceRecv:function(e,t,n){if(1<=n.protocol){var i=e.pos;e.pos=0;var r=[],o=f(r,e);t.trace(n.protocolCat,"received "+h(o)+" "+r.join("")),e.pos=i}},trace:function(e,t,n,i){if(1<=i.protocol){var r=t.pos;t.pos=0;var o=[];o.push(e),f(o,t),n.trace(i.protocolCat,o.join("")),t.pos=r}}};new e;function d(e,t){var n=new l;n.__read(t),e.push("\nidentity = "+t.instance.identityToString(n));var i=Ice.StringSeqHelper.read(t);e.push("\nfacet = "),0<i.length&&e.push(o.escapeString(i[0],""));var r=t.readString();e.push("\noperation = "+r)}function u(e,t){d(e,t);var n=t.readByte();switch(e.push("\nmode = "+n+" "),s.valueOf(n)){case s.Normal:e.push("(normal)");break;case s.Nonmutating:e.push("(nonmutating)");break;case s.Idempotent:e.push("(idempotent)");break;default:e.push("(unknown)")}var i=t.readSize();for(e.push("\ncontext = ");0<i--;){var r=t.readString(),o=t.readString();e.push(r+"/"+o),0<i&&e.push(", ")}var c=t.skipEncaps();c.equals(Ice.Encoding_1_0)||(e.push("\nencoding = "),e.push(Ice.encodingVersionToString(c)))}function f(e,t){var n,i,r,o=function(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();var n=t.readByte();e.push("\nmessage type = "+n+" ("+h(n)+")");var i=t.readByte();switch(e.push("\ncompression status = "+i+" "),i){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}var r=t.readInt();return e.push("\nmessage size = "+r),n}(e,t);switch(o){case a.closeConnectionMsg:case a.validateConnectionMsg:break;case a.requestMsg:n=e,r=(i=t).readInt(),n.push("\nrequest id = "+r),0===r&&n.push(" (oneway)"),u(n,i);break;case a.requestBatchMsg:!function(e,t){var n=t.readInt();e.push("\nnumber of requests = "+n);for(var i=0;i<n;++i)e.push("\nrequest #"+i+":"),u(e,t)}(e,t);break;case a.replyMsg:!function(e,t){var n=t.readInt();e.push("\nrequest id = "+n);var i=t.readByte();switch(e.push("\nreply status = "+i+" "),i){case a.replyOK:e.push("(ok)");break;case a.replyUserException:e.push("(user exception)");break;case a.replyObjectNotExist:case a.replyFacetNotExist:case a.replyOperationNotExist:switch(i){case a.replyObjectNotExist:e.push("(object not exist)");break;case a.replyFacetNotExist:e.push("(facet not exist)");break;case a.replyOperationNotExist:e.push("(operation not exist)");break;default:c.assert(!1)}d(e,t);break;case a.replyUnknownException:case a.replyUnknownLocalException:case a.replyUnknownUserException:switch(i){case a.replyUnknownException:e.push("(unknown exception)");break;case a.replyUnknownLocalException:e.push("(unknown local exception)");break;case a.replyUnknownUserException:e.push("(unknown user exception)");break;default:c.assert(!1)}var r=t.readString();e.push("\nunknown = "+r);break;default:e.push("(unknown)")}if(i===a.replyOK||i===a.replyUserException){var o=t.skipEncaps();o.equals(Ice.Encoding_1_0)||(e.push("\nencoding = "),e.push(Ice.encodingVersionToString(o)))}}(e,t)}return o}function h(e){switch(e){case a.requestMsg:return"request";case a.requestBatchMsg:return"batch request";case a.replyMsg:return"reply";case a.closeConnectionMsg:return"close connection";case a.validateConnectionMsg:return"validate connection";default:return"unknown"}}i.dumpStream=function(e){var t=e.pos;e.pos=0;var n=e.readBlob(e.size());i.dumpOctets(n),e.pos=t},i.dumpOctets=function(e){for(var t=[],n=0;n<e.length;n+=8){var i;for(i=n;i-n<8;i++)if(i<e.length){var r,o=e[i];o<0&&(o+=256),r=o<10?"  "+o:o<100?" "+o:""+o,t.push(r+" ")}else t.push("    ");for(t.push('"'),i=n;i<e.length&&i-n<8;i++)32<=e[i]&&e[i]<127?t.push(String.fromCharCode(e[i])):t.push(".");t.push('"\n')}Cr.Utils.log(t.join(""))},Ice.TraceUtil=i}(),k=Ice.Logger,L=null,Ice.getProcessLogger=function(){return null===L&&(L=new k("","")),L},Ice.setProcessLogger=function(e){L=e},U=Ice.UnexpectedObjectException,F=Ice.MemoryLimitException,Ice.ExUtil={throwUOE:function(e,t){var n=t.ice_id();throw new U("expected element of type `"+e+"' but received '"+n,n,e)},throwMemoryLimitException:function(e,t){throw new F("requested "+e+" bytes, maximum allowed is "+t+" bytes (see Ice.MessageSizeMax)")}},j=Ice.StringUtil,B=Ice.HashMap,Ice.Promise,H=Ice.PropertyNames,q=Ice.Debug,Ice.ProcessLogger,K=Ice.getProcessLogger,W=Ice.InitializationException,(G=Ice.Class({__init__:function(e,t){if(this._properties=new B,null!=t)for(var n=t._properties.entries;null!==n;n=n.next)this._properties.set(n.key,{value:n.value.value,used:!1});if(null!=e)for(var i=this.parseIceCommandLineOptions(e),r=e.length=0;r<i.length;++r)e.push(i[r])},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,n.value):t},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,parseInt(n.value)):t},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(e,t){null==t&&(t=[]);var n=this._properties.get(e);if(void 0===n)return t;n.used=!0;var i=j.splitString(n.value,", \t\r\n");return null===i?(K().warning("mismatched quotes in property "+e+"'s value, returning default value"),t):(0===i.length&&(i=t),i)},getPropertiesForPrefix:function(e){for(var t=new B,n=this._properties.entries;null!==n;n=n.next)null!=e&&0!==n.key.indexOf(e)||(n.value.used=!0,t.set(n.key,n.value.value));return t},setProperty:function(e,t){null!=e&&(e=e.trim());var n=K();if(null==e||0===e.length)throw new W("Attempt to set property with empty key");var i=e.indexOf(".");if(-1!==i)for(var r=e.substr(0,i),o=0;o<H.validProps.length;++o){var c=H.validProps[o][0].pattern;if(i=c.indexOf("."),q.assert(-1!=i),c.substring(0,i-1)==r){for(var a,s=!1,l=!1,d=0;d<H.validProps[o][d].length&&!s;++d){c=H.validProps[o][d].pattern();var u=new RegExp(c);if((s=u.test(e))&&H.validProps[o][d].deprecated&&(n.warning("deprecated property: "+e),null!==H.validProps[o][d].deprecatedBy&&(e=H.validProps[o][d].deprecatedBy)),s)break;if(s=(u=new RegExp(c.toUpperCase())).test(e.toUpperCase())){l=!0,a=(a=(a=c.substr(2)).substr(0,a.length-1)).replace(/\\/g,"");break}}s?l&&n.warning("unknown property: `"+e+"'; did you mean `"+a+"'"):n.warning("unknown property: "+e)}}if(null!=t&&0<t.length){var f=this._properties.get(e);void 0!==f?f.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties.del(e)},getCommandLineOptions:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)e.push("--"+t.key+"="+t.pv.value);return e},parseCommandLineOptions:function(t,e){0<t.length&&"."!=t.charAt(t.length-1)&&(t+="."),t="--"+t;var n=[],i=this;return e.forEach(function(e){0===e.indexOf(t)?(-1===e.indexOf("=")&&(e+="=1"),i.parseLine(e.substring(2))):n.push(e)}),n},parseIceCommandLineOptions:function(e){for(var t=e.slice(),n=0;n<H.clPropNames.length;++n)t=this.parseCommandLineOptions(H.clPropNames[n],t);return t},parse:function(e){for(var t,n=e.match(/[^\r\n]+/g);t=n.shift();)this.parseLine(t)},parseLine:function(e){for(var t="",n="",i=0,r="",o="",c=!1,a=0;a<e.length;++a){var s=e.charAt(a);switch(i){case 0:switch(s){case"\\":if(a<e.length-1)switch(s=e.charAt(++a)){case"\\":case"#":case"=":t+=r,r="",t+=s;break;case" ":0!==t.length&&(r+=s);break;default:t+=r,r="",t+="\\",t+=s}else t+=r,t+=s;break;case" ":case"\t":case"\r":case"\n":0!==t.length&&(r+=s);break;case"=":r="",i=1;break;case"#":c=!0;break;default:t+=r,r="",t+=s}break;case 1:switch(s){case"\\":if(a<e.length-1)switch(s=e.charAt(++a)){case"\\":case"#":case"=":n+=0===n.length?o:r,o=r="",n+=s;break;case" ":r+=s,o+=s;break;default:n+=0===n.length?o:r,o=r="",n+="\\",n+=s}else n+=0===n.length?o:r,n+=s;break;case" ":case"\t":case"\r":case"\n":0!==n.length&&(r+=s);break;case"#":c=!0;break;default:n+=0===n.length?o:r,o=r="",n+=s}}if(c)break}n+=o,0===i&&0!==t.length||1==i&&0===t.length?K().warning('invalid config file entry: "'+e+'"'):0!==t.length&&this.setProperty(t,n)},clone:function(){return new G(null,this)},getUnusedProperties:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)t.pv.used||e.push(t.key);return e}})).createProperties=function(e,t){return new G(e,t)},Ice.Properties=G,z=Ice.Debug,Q=Ice.HashMap,X=Ice.StringUtil,J=Ice.Class({__init__:function(e,t){this._instance=e,this._adapterName=t,this._servantMapMap=new Q(Q.compareEquals),this._defaultServantMap=new Q,this._locatorMap=new Q},addServant:function(e,t,n){z.assert(null!==this._instance),null===n&&(n="");var i=this._servantMapMap.get(t);if(void 0===i)i=new Q,this._servantMapMap.set(t,i);else if(i.has(n)){var r=new Ice.AlreadyRegisteredException;throw r.id=this._instance.identityToString(t),r.kindOfObject="servant",0<n.length&&(r.id+=" -f "+X.escapeString(n,"")),r}i.set(n,e)},addDefaultServant:function(e,t){if(z.assert(null!==this._instance),void 0!==this._defaultServantMap.get(t)){var n=new Ice.AlreadyRegisteredException;throw n.kindOfObject="default servant",n.id=t,n}this._defaultServantMap.set(t,e)},removeServant:function(e,t){z.assert(null!==this._instance),null===t&&(t="");var n=this._servantMapMap.get(e);if(void 0===n||!n.has(t)){var i=new Ice.NotRegisteredException;throw i.id=this._instance.identityToString(e),i.kindOfObject="servant",0<t.length&&(i.id+=" -f "+X.escapeString(t,"")),i}var r=n.get(t);return n.del(t),0===n.size&&this._servantMapMap.del(e),r},removeDefaultServant:function(e){z.assert(null!==this._instance);var t=this._defaultServantMap.get(e);if(void 0!==t)return this._defaultServantMap.del(e),t;var n=new Ice.NotRegisteredException;throw n.kindOfObject="default servant",n.id=e,n},removeAllFacets:function(e){z.assert(null!==this._instance);var t=this._servantMapMap.get(e);if(void 0!==t)return this._servantMapMap.del(e),t;var n=new Ice.NotRegisteredException;throw n.id=this._instance.identityToString(e),n.kindOfObject="servant",n},findServant:function(e,t){null===t&&(t="");var n=this._servantMapMap.get(e),i=null;return void 0===n?void 0===(i=this._defaultServantMap.get(e.category))&&(i=this._defaultServantMap.get("")):i=n.get(t),void 0===i?null:i},findDefaultServant:function(e){z.assert(null!==this._instance);var t=this._defaultServantMap.get(e);return void 0===t?null:t},findAllFacets:function(e){z.assert(null!==this._instance);var t=this._servantMapMap.get(e);return void 0!==t?t.clone():new Q},hasServant:function(e){var t=this._servantMapMap.get(e);return void 0!==t&&(z.assert(0<t.size),!0)},addServantLocator:function(e,t){if(z.assert(null!==this._instance),void 0!==this._locatorMap.get(t)){var n=new Ice.AlreadyRegisteredException;throw n.id=X.escapeString(t,""),n.kindOfObject="servant locator",n}this._locatorMap.set(t,e)},removeServantLocator:function(e){z.assert(null!==this._instance);var t=this._locatorMap.get(e);if(void 0!==t)return this._locatorMap.del(e),t;var n=new Ice.NotRegisteredException;throw n.id=X.escapeString(e,""),n.kindOfObject="servant locator",n},findServantLocator:function(e){var t=this._locatorMap.get(e);return void 0===t?null:t},destroy:function(){z.assert(null!==this._instance);var t=this._instance.initializationData().logger;this._servantMapMap.clear(),this._defaultServantMap.clear();var e=this._locatorMap.clone();this._locatorMap.clear(),this._instance=null;for(var n=e.entries;null!==n;n=n.next){var i=n.value;try{i.deactivate(n.key)}catch(e){var r="exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+n.key+"'\n"+e.toString();t.error(r)}}}}),Ice.ServantManager=J,function(){var r=Ice.__M,d=Ice.Debug,o=Ice.ExUtil,c=Ice.FormatType,a=Ice.HashMap,s=Ice.Object,l=Ice.OptionalFormat,i=Ice.Protocol,u=Ice.TraceUtil,f=Ice.ArrayUtil,h=Ice.SlicedData,p={NoSlice:0,ObjectSlice:1,ExceptionSlice:2};Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)};function _(e,t){this.index=e,this.patcher=t}var e=Ice.Class,C=e({__init__:function(e,t,n,i){this._stream=e,this._encaps=t,this._sliceObjects=n,this._servantFactoryManager=i,this._patchMap=null,this._unmarshaledMap=new a,this._typeIdMap=null,this._typeIdIndex=0,this._objectList=null},readOpt:function(){return!1},readPendingObjects:function(){},readTypeId:function(e){var t,n;if(null===this._typeIdMap&&(this._typeIdMap=new a),e){if(n=this._stream.readSize(),void 0===(t=this._typeIdMap.get(n)))throw new Ice.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t},newInstance:function(e){var t=this._servantFactoryManager.find(e),n=null;return void 0!==t&&(n=t.create(e)),null==n&&void 0!==(t=this._servantFactoryManager.find(""))&&(n=t.create(e)),null==n&&(n=this._stream.createObject(e)),n},addPatchEntry:function(e,t){d.assert(0<e);var n=this._unmarshaledMap.get(e);if(null==n){null===this._patchMap&&(this._patchMap=new a);var i=this._patchMap.get(e);void 0===i&&(i=[],this._patchMap.set(e,i)),i.push(t)}else t.call(null,n)},unmarshal:function(e,t){var n,i,r;if(this._unmarshaledMap.set(e,t),t.__read(this._stream),null!==this._patchMap&&void 0!==(r=this._patchMap.get(e))){for(d.assert(0<r.length),n=0,i=r.length;n<i;++n)r[n](t);this._patchMap.del(e)}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._objectList){if(null===this._objectList&&(this._objectList=[]),this._objectList.push(t),null===this._patchMap||0===this._patchMap.size){for(n=0,i=this._objectList.length;n<i;n++)try{this._objectList[n].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}this._objectList=[]}}else try{t.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}}),t=e(C,{__init__:function(e,t,n,i){C.call(this,e,t,n,i),this._sliceType=p.NoSlice},readObject:function(e){d.assert(null!==e);var t=this._stream.readInt();if(0<t)throw new Ice.MarshalException("invalid object id");0===(t=-t)?e.call(null,null):this.addPatchEntry(t,e)},throwException:function(){d.assert(this._sliceType===p.NoSlice);var e=this._stream.readBool();this._sliceType=p.ExceptionSlice,this._skipFirstSlice=!1,this.startSlice();for(var t=this._typeId;;){var n=this._stream.createUserException(this._typeId);if(null!==n)throw n.__read(this._stream),e&&this.readPendingObjects(),n;this.skipSlice();try{this.startSlice()}catch(e){throw e instanceof Ice.UnmarshalOutOfBoundsException&&(e.reason="unknown exception type `"+t+"'"),e}}},startInstance:function(e){d.assert(this._sliceType===e),this._skipFirstSlice=!0},endInstance:function(){if(this._sliceType===p.ObjectSlice){if(this.startSlice(),0!==this._stream.readSize())throw new Ice.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=p.NoSlice,null},startSlice:function(){var e;if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(this._sliceType===p.ObjectSlice?(e=this._stream.readBool(),this._typeId=this.readTypeId(e)):this._typeId=this._stream.readString(),this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException;return this._typeId},endSlice:function(){},skipSlice:function(){if(0<this._stream.instance.traceLevels().slicing){var e=this._stream.instance.initializationData().logger;this._sliceType===p.ObjectSlice?u.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e):u.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}d.assert(4<=this._sliceSize),this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do{for(e=t=this._stream.readSize();0<e;--e)this.readInstance()}while(0<t);if(null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance")},readInstance:function(){var e,t=this._stream.readInt(),n=null;if(t<=0)throw new Ice.MarshalException("invalid object id");for(this._sliceType=p.ObjectSlice,this._skipFirstSlice=!1,this.startSlice(),e=this._typeId;;){if(this._typeId==s.ice_staticId())throw new Ice.NoObjectFactoryException("",e);if(n=this.newInstance(this._typeId))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(t,n)}}),n=e(C,{__init__:function(e,t,n,i){C.call(this,e,t,n,i),this._current=null,this._objectIdIndex=1},readObject:function(e){d.assert(void 0!==e);var t=this._stream.readSize();if(t<0)throw new Ice.MarshalException("invalid object id");if(0===t)null!==e&&e.call(null,null);else if(null!==this._current&&0!=(8&this._current.sliceFlags)){if(null!==e){null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]);var n=new _;n.index=t-1,n.patcher=e,this._current.indirectPatchList.push(n)}}else this.readInstance(t,e)},throwException:function(){d.assert(null===this._current),this.push(p.ExceptionSlice),this.startSlice();for(var e=this._current.typeId;;){var t=this._stream.createUserException(this._current.typeId);if(null!==t)throw t.__read(this._stream),t;if(this.skipSlice(),0!=(32&this._current.sliceFlags)){if(0===e.indexOf("::"))throw new Ice.UnknownUserException(e.substr(2));throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){d.assert(void 0!==e),d.assert(null!==this._current.sliceType&&this._current.sliceType===e),this._current.skipFirstSlice=!0},endInstance:function(e){var t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t},startSlice:function(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),this._current.sliceType===p.ObjectSlice?3==(3&this._current.sliceFlags)?(this._current.typeId="",this._current.compactId=this._stream.readSize()):(0!=(3&this._current.sliceFlags)?this._current.typeId=this.readTypeId(0!=(2&this._current.sliceFlags)):this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!=(16&this._current.sliceFlags)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId},endSlice:function(){var e,t,n,i=[];if(0!=(4&this._current.sliceFlags)&&this._stream.skipOpts(),0!=(8&this._current.sliceFlags)){for(n=this._stream.readAndCheckSeqSize(1),t=0;t<n;++t)i[t]=this.readInstance(this._stream.readSize(),null);if(0===i.length)throw new Ice.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0==(4&this._current.sliceFlags))throw new Ice.MarshalException("no references to indirection table");if(null!==this._current.indirectPatchList){for(t=0,n=this._current.indirectPatchList.length;t<n;++t){if(e=this._current.indirectPatchList[t],d.assert(0<=e.index),e.index>=i.length)throw new Ice.MarshalException("indirection out of range");this.addPatchEntry(i[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(0<this._stream.instance.traceLevels().slicing){var e=this._stream.instance.initializationData().logger,t=this._stream.instance.traceLevels().slicingCat;this._current.sliceType===p.ExceptionSlice?u.traceSlicing("exception",this._current.typeId,t,e):u.traceSlicing("object",this._current.typeId,t,e)}var n=this._stream.pos;if(0==(16&this._current.sliceFlags)){if(this._current.sliceType===p.ObjectSlice)throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId);if(0===this._current.typeId.indexOf("::"))throw new Ice.UnknownUserException(this._current.typeId.substring(2));throw new Ice.UnknownUserException(this._current.typeId)}d.assert(4<=this._current.sliceSize),this._stream.skip(this._current.sliceSize-4);var i=new Ice.SliceInfo;i.typeId=this._current.typeId,i.compactId=this._current.compactId,i.hasOptionalMembers=0!=(4&this._current.sliceFlags),i.isLastSlice=0!=(32&this._current.sliceFlags);var r=this._stream._buf,o=r.position,c=o;if(i.hasOptionalMembers&&--c,r.position=n,i.bytes=r.getArray(c-n),r.position=o,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!=(8&this._current.sliceFlags)){for(var a=this._stream.readAndCheckSeqSize(1),s=[],l=0;l<a;++l)s[l]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(s)}else this._current.indirectionTables.push(null);this._current.slices.push(i)},readOpt:function(e,t){return null===this._current?this._stream.readOptImpl(e,t):0!=(4&this._current.sliceFlags)&&this._stream.readOptImpl(e,t)},readInstance:function(e,t){d.assert(0<e);var n,i=null;if(1<e)return null!==t&&this.addPatchEntry(e,t),e;for(this.push(p.ObjectSlice),e=++this._objectIdIndex,this.startSlice(),n=this._current.typeId;0<=this._current.compactId&&(this._current.typeId="",0===this._current.typeId.length&&(this._current.typeId=this._stream.getTypeId(this._current.compactId))),!(0<this._current.typeId.length&&null!=(i=this.newInstance(this._current.typeId)));){if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId);if(this.skipSlice(),0!=(32&this._current.sliceFlags)){i=new Ice.UnknownSlicedObject(n);break}this.startSlice()}if(this.unmarshal(e,i),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance");return null!==t&&t.call(null,i),e},readSlicedData:function(){var e,t,n,i,r,o;if(null===this._current.slices)return null;for(d.assert(this._current.slices.length===this._current.indirectionTables.length),e=0,t=this._current.slices.length;e<t;++e)for(n=this._current.indirectionTables[e],(i=this._current.slices[e]).objects=[],o=n?n.length:0,r=0;r<o;++r)this.addPatchEntry(n[r],g(i.objects,r,s));return new h(f.clone(this._current.slices))},push:function(e){null===this._current?this._current=new n.InstanceData(null):this._current=this._current.next?this._current.next:new n.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}});n.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null};var g=function(t,n,i){return function(e){null===e||e instanceof i||o.throwUOE(i.ice_staticId(),e),t[n]=e}},R=e({__init__:function(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new a,this._typeIdMap=null,this._typeIdIndex=0},writeOpt:function(){return!1},writePendingObjects:function(){},registerTypeId:function(e){null===this._typeIdMap&&(this._typeIdMap=new a);var t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}),m=e(R,{__init__:function(e,t){R.call(this,e,t),this._sliceType=p.NoSlice,this._writeSlice=0,this._objectIdIndex=0,this._toBeMarshaledMap=new a},writeObject:function(e){d.assert(void 0!==e),null!==e?this._stream.writeInt(-this.registerObject(e)):this._stream.writeInt(0)},writeUserException:function(e){d.assert(null!=e);var t=e.__usesClasses();this._stream.writeBool(t),e.__write(this._stream),t&&this.writePendingObjects()},startInstance:function(e){this._sliceType=e},endInstance:function(){this._sliceType===p.ObjectSlice&&(this.startSlice(s.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=p.NoSlice},startSlice:function(e){if(this._sliceType===p.ObjectSlice){var t=this.registerTypeId(e);t<0?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){function e(e,t){n._stream.writeInt(t);try{e.ice_preMarshal()}catch(e){n._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}e.__write(n._stream)}for(var t,n=this;0<this._toBeMarshaledMap.size;)this._marshaledMap.merge(this._toBeMarshaledMap),t=this._toBeMarshaledMap,this._toBeMarshaledMap=new a,this._stream.writeSize(t.size),t.forEach(e);this._stream.writeSize(0)},registerObject:function(e){d.assert(null!==e);var t=this._toBeMarshaledMap.get(e);return void 0!==t?t:void 0!==(t=this._marshaledMap.get(e))?t:(this._toBeMarshaledMap.set(e,++this._objectIdIndex),this._objectIdIndex)}}),I=e(R,{__init__:function(e,t){R.call(this,e,t),this._current=null,this._objectIdIndex=1},writeObject:function(e){var t,n;d.assert(void 0!==e),null===e?this._stream.writeSize(0):null!==this._current&&this._encaps.format===c.SlicedFormat?(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new a),void 0===(t=this._current.indirectionMap.get(e))?(this._current.indirectionTable.push(e),n=this._current.indirectionTable.length,this._current.indirectionMap.set(e,n),this._stream.writeSize(n)):this._stream.writeSize(t)):this.writeInstance(e)},writePendingObjects:function(){},writeUserException:function(e){d.assert(null!=e),e.__write(this._stream)},startInstance:function(e,t){null===this._current?this._current=new I.InstanceData(null):this._current=null===this._current.next?new I.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!=t&&this.writeSlicedData(t)},endInstance:function(){this._current=this._current.previous},startSlice:function(e,t,n){if(d.assert(!(null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length||null!==this._current.indirectionMap&&0!==this._current.indirectionMap.size)),this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===c.SlicedFormat&&(this._current.sliceFlags|=16),n&&(this._current.sliceFlags|=32),this._stream.writeByte(0),this._current.sliceType===p.ObjectSlice){if(this._encaps.format===c.SlicedFormat||this._current.firstSlice)if(0<=t)this._current.sliceFlags|=3,this._stream.writeSize(t);else{var i=this.registerTypeId(e);i<0?(this._current.sliceFlags|=1,this._stream.writeString(e)):(this._current.sliceFlags|=2,this._stream.writeSize(i))}}else this._stream.writeString(e);0!=(16&this._current.sliceFlags)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1},endSlice:function(){var e,t,n;if(0!=(4&this._current.sliceFlags)&&this._stream.writeByte(255),0!=(16&this._current.sliceFlags)&&(e=this._stream.pos-this._current.writeSlice+4,this._stream.rewriteInt(e,this._current.writeSlice-4)),null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length){for(d.assert(this._encaps.format===c.SlicedFormat),this._current.sliceFlags|=8,this._stream.writeSize(this._current.indirectionTable.length),t=0,n=this._current.indirectionTable.length;t<n;++t)this.writeInstance(this._current.indirectionTable[t]);this._current.indirectionTable.length=0,this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){return null===this._current?this._stream.writeOptImpl(e,t):!!this._stream.writeOptImpl(e,t)&&(this._current.sliceFlags|=4,!0)},writeSlicedData:function(e){var t,n,i,r,o;if(d.assert(null!=e),this._encaps.format===c.SlicedFormat)for(t=0,n=e.slices.length;t<n;++t){if(i=e.slices[t],this.startSlice(i.typeId,i.compactId,i.isLastSlice),this._stream.writeBlob(i.bytes),i.hasOptionalMembers&&(this._current.sliceFlags|=4),null!==i.objects&&0<i.objects.length)for(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new a),r=0,o=i.objects.length;r<o;++r)this._current.indirectionTable.push(i.objects[r]);this.endSlice()}},writeInstance:function(e){d.assert(null!=e);var t=this._marshaledMap.get(e);if(void 0===t){this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1),e.__write(this._stream)}else this._stream.writeSize(t)}});I.InstanceData=function(e){d.assert(void 0!==e),null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null};var y=e({__init__:function(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),v=e({__init__:function(){this.start=0,this.format=c.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),S=e({__init__:function(e,t,n){this._instance=e,this._closure=null,this._encoding=t,this._readEncapsStack=null,this._writeEncapsStack=null,this._readEncapsCache=null,this._writeEncapsCache=null,this._sliceObjects=!0,this._startSeq=-1,this._sizePos=-1,this._buf=void 0!==n?new Ice.Buffer(n):new Ice.Buffer},reset:function(){this._buf.reset(),this.clear()},clear:function(){null!==this._readEncapsStack&&(d.assert(this._readEncapsStack.next),this._readEncapsStack.next=this._readEncapsCache,this._readEncapsCache=this._readEncapsStack,this._readEncapsCache.reset(),this._readEncapsStack=null),null!==this._writeEncapsStack&&(d.assert(this._writeEncapsStack.next),this._writeEncapsStack.next=this._writeEncapsCache,this._writeEncapsCache=this._writeEncapsStack,this._writeEncapsCache.reset(),this._writeEncapsStack=null),this._startSeq=-1,this._sliceObjects=!0},swap:function(e){var t,n,i,r,o;d.assert(this._instance===e._instance),t=e._buf,e._buf=this._buf,this._buf=t,n=e._closure,e._closure=this._closure,this._closure=n,this.resetEncaps(),e.resetEncaps(),i=e._startSeq,e._startSeq=this._startSeq,this._startSeq=i,r=e._minSeqSize,e._minSeqSize=this._minSeqSize,this._minSeqSize=r,o=e._sizePos,e._sizePos=this._sizePos,this._sizePos=o},resetEncaps:function(){this._readEncapsStack=null,this._writeEncapsStack=null},resize:function(e){this._buf.resize(e),this._buf.position=e},prepareWrite:function(){return this._buf.position=0,this._buf},startWriteObject:function(e){d.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(p.ObjectSlice,e)},endWriteObject:function(){d.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){d.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(p.ObjectSlice)},endReadObject:function(e){return d.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){d.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(p.ExceptionSlice,e)},endWriteException:function(){d.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadException:function(){d.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(p.ExceptionSlice)},endReadException:function(e){return d.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){void 0===e&&(t=null!==this._writeEncapsStack?(e=this._writeEncapsStack.encoding,this._writeEncapsStack.format):(e=this._encoding,c.DefaultFormat)),i.checkSupportedEncoding(e);var n=this._writeEncapsCache;null!==n?(n.reset(),this._writeEncapsCache=this._writeEncapsCache.next):n=new v,n.next=this._writeEncapsStack,this._writeEncapsStack=n,this._writeEncapsStack.format=t,this._writeEncapsStack.setEncoding(e),this._writeEncapsStack.start=this._buf.limit,this.writeInt(0),this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){d.assert(this._writeEncapsStack);var e=this._writeEncapsStack.start,t=this._buf.limit-e;this._buf.putIntAt(e,t);var n=this._writeEncapsStack;this._writeEncapsStack=n.next,n.next=this._writeEncapsCache,this._writeEncapsCache=n,this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(null===this._writeEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endWriteEncaps()},writeEmptyEncaps:function(e){i.checkSupportedEncoding(e),this.writeInt(6),e.__write(this)},writeEncaps:function(e){if(e.length<6)throw new Ice.EncapsulationException;this.expand(e.length),this._buf.putArray(e)},getWriteEncoding:function(){return null!==this._writeEncapsStack?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;null!==e?(e.reset(),this._readEncapsCache=this._readEncapsCache.next):e=new y,e.next=this._readEncapsStack,this._readEncapsStack=e,this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(t<6)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._readEncapsStack.sz=t;var n=new Ice.EncodingVersion;return n.__read(this),i.checkSupportedEncoding(n),this._readEncapsStack.setEncoding(n),n},endReadEncaps:function(){if(d.assert(null!==this._readEncapsStack),this._readEncapsStack.encoding_1_0){if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}}else if(this.skipOpts(),this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;var e=this._readEncapsStack;this._readEncapsStack=e.next,e.next=this._readEncapsCache,this._readEncapsCache=e,this._readEncapsCache.reset()},skipEmptyEncaps:function(e){if(d.assert(void 0!==e),6!==this.readInt())throw new Ice.EncapsulationException;var t=this._buf.position;if(t+2>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;null!==e?e.__read(this):this._buf.position=t+2},endReadEncapsChecked:function(){if(null===this._readEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endReadEncaps()},readEncaps:function(e){d.assert(void 0!==e);var t=this.readInt();if(t<6)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;null!==e?(e.__read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(t)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){return d.assert(null!==this._readEncapsStack),this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(e<6)throw new Ice.UnmarshalOutOfBoundsException;var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(e){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,t,n){d.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startSlice(e,t,n)},endWriteSlice:function(){d.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){return d.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){d.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endSlice()},skipSlice:function(){d.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readPendingObjects():(null!==this._readEncapsStack&&this._readEncapsStack.encoding_1_0||null===this._readEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.skipSize()},writePendingObjects:function(){null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writePendingObjects():(null!==this._writeEncapsStack&&this._writeEncapsStack.encoding_1_0||null===this._writeEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.writeSize(0)},writeSize:function(e){254<e?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))},readSize:function(){try{var e=this._buf.get();if(255!==e)return e;var t=this._buf.getInt();if(t<0)throw new Ice.UnmarshalOutOfBoundsException;return t}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;return t},startSize:function(){var e=this._buf.position;return this.writeInt(0),e},endSize:function(e){d.assert(0<=e),this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){null!==e&&(this.expand(e.length),this._buf.putArray(e))},readBlob:function(e){if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,t){return d.assert(null!==this._writeEncapsStack),null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writeOpt(e,t):this.writeOptImpl(e,t)},readOpt:function(e,t){return d.assert(null!==this._readEncapsStack),null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readOpt(e,t):this.readOptImpl(e,t)},writeOptValue:function(e,t,n,i){void 0!==i&&this.writeOpt(e,t)&&n.call(this,i)},readOptValue:function(e,t,n){return this.readOpt(e,t)?n.call(this):void 0},writeByte:function(e){this.expand(1),this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){null===e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1),this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return 1===this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2),this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4),this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8),this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4),this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8),this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){null==e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)},readString:function(){var e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(void 0!==t&&this.writeOpt(e,l.FSize)){var n=this.startSize();this.writeProxy(t),this.endSize(n)}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){return this.readOpt(e,l.FSize)?(this.skip(4),this.readProxy(t)):void 0},writeEnum:function(e){this.isWriteEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)},readEnum:function(e){var t;t=this.getReadEncoding().equals(Ice.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();var n=e.valueOf(t);if(void 0===n)throw new Ice.MarshalException("enumerator value "+t+" is out of range");return n},readOptEnum:function(e,t){return this.readOpt(e,l.Size)?this.readEnum(t):void 0},writeObject:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){void 0!==t&&this.writeOpt(e,l.Class)&&this.writeObject(t)},readObject:function(t,n){this.initReadEncaps(),this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,function(e){null===e||e.ice_instanceof(n)||o.throwUOE(n.ice_staticId(),e),t(e)})},readOptObject:function(e,t,n){this.readOpt(e,l.Class)?this.readObject(t,n):t(void 0)},writeUserException:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps(),this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var n,i,r,o;if(this.isReadEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return!1;if(255===(n=this.readByte()))return this._buf.position-=1,!1;if(i=l.valueOf(7&n),30===(r=n>>3)&&(r=this.readSize()),e<r)return o=r<30?1:r<255?2:6,this._buf.position-=o,!1;if(!(r<e)){if(i!==t)throw new Ice.MarshalException("invalid optional data member `"+r+"': unexpected format");return!0}this.skipOpt(i)}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0())return!1;var n=t.value;return e<30?(n|=e<<3,this.writeByte(n)):(n|=240,this.writeByte(n),this.writeSize(e)),!0},skipOpt:function(e){switch(e){case l.F1:this.skip(1);break;case l.F2:this.skip(2);break;case l.F4:this.skip(4);break;case l.F8:this.skip(8);break;case l.Size:this.skipSize();break;case l.VSize:this.skip(this.readSize());break;case l.FSize:this.skip(this.readInt());break;case l.Class:this.readObject(null,Ice.Object)}},skipOpts:function(){for(var e,t,n;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return;if(255===(t=(e=this.readByte())<0?e+256:e))return;n=l.valueOf(7&t),t>>3==30&&this.skipSize(),this.skipOpt(n)}},skip:function(e){if(e>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._buf.position+=e},skipSize:function(){255===this.readByte()&&this.skip(4)},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(t){var e,n=null;try{var i=2<t.length?t.substr(2).replace(/::/g,"."):"";void 0!==(e=r.type(i))&&(n=new e)}catch(e){throw new Ice.NoObjectFactoryException("no object factory",t,e)}return n},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return void 0===t?"":t},isReadEncoding_1_0:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(null===this._readEncapsStack&&(this._readEncapsStack=this._readEncapsCache,null!==this._readEncapsStack?this._readEncapsCache=this._readEncapsCache.next:this._readEncapsStack=new y,this._readEncapsStack.setEncoding(this._encoding),this._readEncapsStack.sz=this._buf.limit),null===this._readEncapsStack.decoder){var e=this._instance.servantFactoryManager();this._readEncapsStack.encoding_1_0?this._readEncapsStack.decoder=new t(this,this._readEncapsStack,this._sliceObjects,e):this._readEncapsStack.decoder=new n(this,this._readEncapsStack,this._sliceObjects,e)}},initWriteEncaps:function(){this._writeEncapsStack||(this._writeEncapsStack=this._writeEncapsCache,this._writeEncapsStack?this._writeEncapsCache=this._writeEncapsCache.next:this._writeEncapsStack=new v,this._writeEncapsStack.setEncoding(this._encoding)),this._writeEncapsStack.format===c.DefaultFormat&&(this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._writeEncapsStack.encoder||(this._writeEncapsStack.encoding_1_0?this._writeEncapsStack.encoder=new m(this,this._writeEncapsStack):this._writeEncapsStack.encoder=new I(this,this._writeEncapsStack))},createUserException:function(e){var t,n=null;try{var i=2<e.length?e.substr(2).replace(/::/g,"."):"";void 0!==(t=r.type(i))&&(n=new t)}catch(e){throw new Ice.MarshalException(e)}return n}}),E=Object.defineProperty;E(S.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}}),E(S.prototype,"size",{get:function(){return this._buf.limit}}),E(S.prototype,"instance",{get:function(){return this._instance}}),E(S.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}}),E(S.prototype,"buffer",{get:function(){return this._buf}});function b(i,n,e,r,t,o){var c={write:function(e,t){return i.call(e,t)},read:function(e){return n.call(e)},writeOpt:function(e,t,n){e.writeOptValue(t,r,i,n)},readOpt:function(e,t){return e.readOptValue(t,r,n)}};return void 0!==t&&void 0!==o&&(c.validate=function(e){return t<=e&&e<=o}),E(c,"minWireSize",{get:function(){return e}}),c}var w=S.prototype,T=-34028234664e28,O=34028234664e28;Ice.ByteHelper=b(w.writeByte,w.readByte,1,Ice.OptionalFormat.F1,0,255),Ice.ShortHelper=b(w.writeShort,w.readShort,2,Ice.OptionalFormat.F2,-32768,32767),Ice.IntHelper=b(w.writeInt,w.readInt,4,Ice.OptionalFormat.F4,-2147483648,2147483647),Ice.FloatHelper=b(w.writeFloat,w.readFloat,4,Ice.OptionalFormat.F4,T,O),Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||T<=e&&e<=O},Ice.DoubleHelper=b(w.writeDouble,w.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE),Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE},Ice.BoolHelper=b(w.writeBool,w.readBool,1,Ice.OptionalFormat.F1),Ice.LongHelper=b(w.writeLong,w.readLong,8,Ice.OptionalFormat.F8),Ice.LongHelper.validate=function(e){return 0<=e.low&&e.low<=4294967295&&0<=e.high&&e.high<=4294967295},Ice.StringHelper=b(w.writeString,w.readString,1,Ice.OptionalFormat.VSize),Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;return e.readObject(function(e){t=e},Ice.Object),t},writeOpt:function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Class,w.writeObject,n)},readOpt:function(e,t){var n;return e.readOptObject(t,function(e){n=e},Ice.Object),n}},E(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}}),Ice.BasicStream=S}(),Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2},Y=Ice.Class({__init__:function(e,t,n,i){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=n,this._secure=i},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}}),Ice.ProtocolInstance=Y,Pn.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint"),Z=Ice.AsyncResultBase,$=Ice.Debug,Ice.Promise,ee=Ice.Protocol,te=Ice.UserException,ne=Ice.BasicStream,(ie=Ice.Class(Z,{__init__:function(e,t,n,i,r,o){Z.call(this,e,t,n,i,r),void 0!==e&&(this._completed=o,this._is=null,this._os=null!==e?new ne(this._instance,ee.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1)},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return 0<(this._state&ie.Done)},isSent:function(){return 0<(this._state&ie.Sent)},throwLocalException:function(){if(null!==this._exception)throw this._exception},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){$.assert(0==(this._state&ie.Done)),this._state|=ie.Sent,e&&(this._state|=ie.Done|ie.OK,this._cancellationHandler=null,this.succeed(this))},__markFinished:function(e,t){$.assert(0==(this._state&ie.Done)),this._state|=ie.Done,e&&(this._state|=ie.OK),this._cancellationHandler=null,t?t(this):this.succeed(this)},__markFinishedEx:function(e){$.assert(0==(this._state&ie.Done)),this._exception=e,this._state|=ie.Done,this._cancellationHandler=null,this.fail(e,this)},__cancel:function(e){this._cancellationException=e,this._cancellationHandler&&this._cancellationHandler.asyncRequestCanceled(this,e)},__cancelable:function(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if($.assert(0!=(this._state&ie.Done)),0==(this._state&ie.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof te&&this._is.endReadEncaps(),e}}})).OK=1,ie.Done=2,ie.Sent=4,Ice.AsyncResult=ie,Ice.Address=function(e,t){this.host=e,this.port=t},re=Ice.BasicStream,oe=Ice.Debug,Ice.ExUtil,ce=Ice.Class,ae=Ice.Protocol,se=ce({__init__:function(e,t){if(this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchStream=new re(e,ae.currentProtocolEncoding),this._batchStream.writeBlob(ae.requestBatchHdr),this._batchMarker=this._batchStream.size,this._exception=null,this._maxSize=e.batchAutoFlushSize(),0<this._maxSize&&t){var n=e.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65507);n<this._maxSize&&(this._maxSize=n)}},prepareBatchRequest:function(e){if(this._exception)throw this._exception;this._batchStream.swap(e)},finishBatchRequest:function(e,t){this._batchStream.swap(e);try{0<this._maxSize&&this._batchStream.size>=this._maxSize&&t.ice_flushBatchRequests(),oe.assert(this._batchMarker<this._batchStream.size),this._batchMarker=this._batchStream.size,++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}},abortBatchRequest:function(e){this._batchStream.swap(e),this._batchStream.resize(this._batchMarker)},swap:function(e){if(0===this._batchRequestNum)return 0;var t=null;if(this._batchMarker<this._batchStream.size){var n=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker,t=this._batchStream.buffer.getArray(n),this._batchStream.resize(this._batchMarker)}var i=this._batchRequestNum;return this._batchStream.swap(e),this._batchRequestNum=0,this._batchStream.writeBlob(ae.requestBatchHdr),this._batchMarker=this._batchStream.size,null!==t&&this._batchStream.writeBlob(t),i},destroy:function(e){this._exception=e},isEmpty:function(){return this._batchStream.size===ae.requestBatchHdr.length}}),Ice.BatchRequestQueue=se,le=Ice.HashMap,de=Ice.CommunicatorDestroyedException,(ue=Ice.Class({__init__:function(e){this._logger=e,this._destroyed=!1,this._tokenId=0,this._tokens=new le},destroy:function(){var n=this;this._tokens.forEach(function(e,t){n.cancel(e)}),this._destroyed=!0,this._tokens.clear()},schedule:function(e,t){if(this._destroyed)throw new de;var n=this._tokenId++,i=this,r=ue.setTimeout(function(){i.handleTimeout(n)},t);return this._tokens.set(n,{callback:e,id:r,isInterval:!1}),n},scheduleRepeated:function(e,t){if(this._destroyed)throw new de;var n=this._tokenId++,i=this,r=ue.setInterval(function(){i.handleInterval(n)},t);return this._tokens.set(n,{callback:e,id:r,isInterval:!0}),n},cancel:function(e){if(this._destroyed)return!1;var t=this._tokens.get(e);return void 0!==t&&(this._tokens.del(e),t.isInterval?ue.clearInterval(t.id):ue.clearTimeout(t.id),!0)},handleTimeout:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t){this._tokens.del(e);try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}},handleInterval:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}})).setTimeout=Ice.Timer.setTimeout,ue.clearTimeout=Ice.Timer.clearTimeout,ue.setInterval=Ice.Timer.setInterval,ue.clearInterval=Ice.Timer.clearInterval,ue.setImmediate=Ice.Timer.setImmediate,Ice.Timer=ue,function(){var e=Ice.Class,t=e({__init__:function(e){this._instance=e,this._requests=[]},add:function(e,t){if(null===this._instance)throw new Ice.CommunicatorDestroyedException;var n=new i(this._instance,this,e);e.__cancelable(n),n.token=this._instance.timer().schedule(function(){n.run()},t),this._requests.push(n)},destroy:function(){for(var e=0;e<this._requests.length;++e)this._instance.timer().cancel(this._requests[e].token),this._requests[e].destroy();this._requests=[],this._instance=null},remove:function(e){var t=this._requests.indexOf(e);0<=t&&this._requests.splice(t,1)},cancel:function(e){var t=this._requests.indexOf(e);return 0<=t&&(this._requests.splice(t,1),this._instance.timer().cancel(e.token))}});Ice.RetryQueue=t;var i=e({__init__:function(e,t,n){this._instance=e,this._queue=t,this._outAsync=n},run:function(){this._outAsync.__retry(),this._queue.remove(this)},destroy:function(){try{this._outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){this._queue.cancel(this)&&(1<=this._instance.traceLevels().retry&&this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString()),this._outAsync.__completedEx(t))}})}(),fe=Ice.ArrayUtil,he=Ice.Debug,pe=Ice.HashMap,_e=Ice.Promise,Ce=Ice.Class({__init__:function(e){this._router=e,he.assert(null!==this._router),this._clientEndpoints=null,this._serverEndpoints=null,this._adapter=null,this._identities=new pe(pe.compareEquals),this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[],this._serverEndpoints=[],this._adapter=null,this._identities.clear()},equals:function(e){return this===e||e instanceof Ce&&this._router.equals(e._router)},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var t=new _e;if(null!==this._clientEndpoints)t.succeed(this._clientEndpoints);else{var n=this;this._router.getClientProxy().then(function(e){n.setClientEndpoints(e,t)}).exception(function(e){t.fail(e)})}return t},getServerEndpoints:function(){if(null!==this._serverEndpoints)return(new _e).succeed(this._serverEndpoints);var t=this;return this._router.getServerProxy().then(function(e){return t.setServerEndpoints(e)})},addProxy:function(t){if(he.assert(null!==t),this._identities.has(t.ice_getIdentity()))return(new _e).succeed();var n=this;return this._router.addProxies([t]).then(function(e){n.addAndEvictProxies(t,e)})},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities.del(e.getIdentity())},setClientEndpoints:function(n,i){if(null===this._clientEndpoints)if(null===n)this._clientEndpoints=this._router.__reference().getEndpoints(),i.succeed(this._clientEndpoints);else{n=n.ice_router(null);var r=this;this._router.ice_getConnection().then(function(e){var t=n.ice_timeout(e.timeout());r._clientEndpoints=t.__reference().getEndpoints(),i.succeed(r._clientEndpoints)}).exception(function(e){i.fail(e)})}else i.succeed(this._clientEndpoints)},setServerEndpoints:function(e){if(null===e)throw new Ice.NoEndpointException;return e=e.ice_router(null),this._serverEndpoints=e.__reference().getEndpoints(),this._serverEndpoints},addAndEvictProxies:function(e,t){var n=fe.indexOf(this._evictedIdentities,e.ice_getIdentity(),function(e,t){return e.equals(t)});0<=n?this._evictedIdentities.splice(n,1):this._identities.set(e.ice_getIdentity(),1);for(var i=0;i<t.length;++i)this._identities.del(t[i].ice_getIdentity())}}),Ice.RouterInfo=Ce,function(){var r=Ice.AsyncStatus,o=Ice.AsyncResult,l=Ice.BasicStream,d=Ice.Debug,a=Ice.HashMap,c=Ice.RetryException,u=(Ice.OperationMode,Ice.Protocol),f=Ice.Identity,i=Ice.Class(o,{__init__:function(e,t,n,i,r){void 0!==e?(o.call(this,e,t,n,i,r),this._os=new l(this._instance,u.currentProtocolEncoding)):o.call(this)},__os:function(){return this._os},__sent:function(){this.__markSent(!0)},__completedEx:function(e){this.__markFinishedEx(e)}}),s=Ice.Class(i,{__init__:function(e,t){void 0!==e?(i.call(this,e.ice_getCommunicator(),t,null,e,null),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null):o.call(this)},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(){try{this._proxy.__updateRequestHandler(this._handler,null),this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(!1)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(e){try{if(e){var t=this._proxy.__reference().getInvocationTimeout();if(0<t){var n=this;this._timeoutToken=this._instance.timer().schedule(function(){n.__cancel(new Ice.InvocationTimeoutException)},t)}}for(;;)try{return this._sent=!1,this._handler=this._proxy.__getRequestHandler(),void(0<(this._handler.sendAsyncRequest(this)&r.Sent)&&e&&(this._sentSynchronously=!0))}catch(e){if(e instanceof c)this._proxy.__updateRequestHandler(this._handler,null);else{var i=this.__handleException(e);if(0<i)return void this._instance.retryQueue().add(this,i)}}}catch(e){this.__markFinishedEx(e)}},__markSent:function(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),i.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),i.prototype.__markFinishedEx.call(this,e)},__handleException:function(e){var t={value:0};return this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}),h=Ice.Class(s,{__init__:function(e,t,n){void 0!==e?(s.call(this,e,t),this._encoding=u.getCompatibleEncoding(this._proxy.__reference().getEncoding()),this._completed=n):s.call(this)},__prepare:function(e,t,n){u.checkSupportedProtocol(u.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this._mode=t,null===n&&(n=h._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()?this._proxy.__getBatchRequestQueue().prepareBatchRequest(this._os):this._os.writeBlob(u.requestHdr);var i=this._proxy.__reference();i.getIdentity().__write(this._os);var r=i.getFacet();if(null===r||0===r.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[r]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==n){if(null!==n&&!(n instanceof a))throw new Error("illegal context value, expecting null or HashMap");Ice.ContextHelper.write(this._os,n)}else{var o=i.getInstance().getImplicitContext(),c=i.getContext();null===o?Ice.ContextHelper.write(this._os,c):o.write(c,this._os)}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__invokeRemote:function(e,t,n){return e.sendAsyncRequest(this,t,n,0)},__abort:function(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&this._proxy.__getBatchRequestQueue().abortBatchRequest(this._os),s.prototype.__abort.call(this,e)},__invoke:function(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())return this._sentSynchronously=!0,this._proxy.__getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation),void this.__markFinished(!0);this.__invokeImpl(!0)},__completed:function(e){var t;d.assert(this._proxy.ice_isTwoway());try{switch(null===this._is&&(this._is=new l(this._instance,u.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte()){case u.replyOK:case u.replyUserException:break;case u.replyObjectNotExist:case u.replyFacetNotExist:case u.replyOperationNotExist:var n=new f;n.__read(this._is);var i,r=Ice.StringSeqHelper.read(this._is);if(0<r.length){if(1<r.length)throw new Ice.MarshalException;i=r[0]}else i="";var o=this._is.readString(),c=null;switch(t){case u.replyObjectNotExist:c=new Ice.ObjectNotExistException;break;case u.replyFacetNotExist:c=new Ice.FacetNotExistException;break;case u.replyOperationNotExist:c=new Ice.OperationNotExistException;break;default:d.assert(!1)}throw c.id=n,c.facet=i,c.operation=o,c;case u.replyUnknownException:case u.replyUnknownLocalException:case u.replyUnknownUserException:var a=this._is.readString(),s=null;switch(t){case u.replyUnknownException:s=new Ice.UnknownException;break;case u.replyUnknownLocalException:s=new Ice.UnknownLocalException;break;case u.replyUnknownUserException:s=new Ice.UnknownUserException;break;default:d.assert(!1)}throw s.unknown=a,s;default:throw new Ice.UnknownReplyStatusException}this.__markFinished(t==u.replyOK,this._completed)}catch(e){this.__completedEx(e)}},__startWriteParams:function(e){return this._os.startWriteEncaps(this._encoding,e),this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){null===e||0===e.length?this._os.writeEmptyEncaps(this._encoding):this._os.writeEncaps(e)},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(d.assert(0!=(this._state&o.Done)),0==(this._state&o.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof Ice.UserException&&this._is.endReadEncaps(),e}}});h._emptyContext=new a;var e=Ice.Class(s,{__init__:function(e,t){s.call(this,e,t),this._batchRequestNum=e.__getBatchRequestQueue().swap(this._os)},__invokeRemote:function(e,t,n){return 0===this._batchRequestNum?(this.__sent(),r.Sent):e.sendAsyncRequest(this,t,n,this._batchRequestNum)},__invoke:function(){u.checkSupportedProtocol(u.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this.__invokeImpl(!0)}}),t=Ice.Class(s,{__init__:function(e,t){s.call(this,e,t)},__invokeRemote:function(t){return this.__markFinished(!0,function(e){e.succeed(t)}),r.Sent},__invoke:function(){this.__invokeImpl(!0)}}),n=Ice.Class(i,{__init__:function(e,t,n){i.call(this,t,n,e,null,null)},__invoke:function(){try{var e=this._connection.getBatchRequestQueue().swap(this._os);0<((0===e?(this.__sent(),r.Sent):this._connection.sendAsyncRequest(this,!1,!1,e))&r.Sent)&&(this._sentSynchronously=!0)}catch(e){this.__completedEx(e)}}});Ice.OutgoingAsync=h,Ice.ProxyFlushBatch=e,Ice.ProxyGetConnection=t,Ice.ConnectionFlushBatch=n}(),ge=Ice.ArrayUtil,Re=Ice.AsyncResultBase,Ice.AsyncResult,me=Ice.Debug,Ice.FormatType,Ie=Ice.HashMap,ye=Ice.OutgoingAsync,ve=Ice.ProxyFlushBatch,Se=Ice.ProxyGetConnection,Ee=Ice.ReferenceMode,be=Ice.OperationMode,(we=Ice.Class({__init__:function(){this._reference=null,this._requestHandler=null},hashCode:function(){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(null==e||0===e.name.length)throw new Ice.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;var t=new we;return t.__setup(this._reference.changeIdentity(e)),t},ice_getContext:function(){return new Ie(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if(null==e&&(e=""),e===this._reference.getFacet())return this;var t=new we;return t.__setup(this._reference.changeFacet(e)),t},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){return null==e&&(e=""),e===this._reference.getAdapterId()?this:this.__newInstance(this._reference.changeAdapterId(e))},ice_getEndpoints:function(){return ge.clone(this._reference.getEndpoints())},ice_endpoints:function(e){return null==e&&(e=[]),ge.equals(e,this._reference.getEndpoints())?this:this.__newInstance(this._reference.changeEndpoints(e))},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(e<-1)throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this.__newInstance(this._reference.changeLocatorCacheTimeout(e))},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this.__newInstance(this._reference.changeInvocationTimeout(e))},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){return e===this._reference.getCacheConnection()?this:this.__newInstance(this._reference.changeCacheConnection(e))},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){return e===this._reference.getEndpointSelection()?this:this.__newInstance(this._reference.changeEndpointSelection(e))},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){return e===this._reference.getSecure()?this:this.__newInstance(this._reference.changeSecure(e))},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){return e.equals(this._reference.getEncoding())?this:this.__newInstance(this._reference.changeEncoding(e))},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){return e===this._reference.getPreferSecure()?this:this.__newInstance(this._reference.changePreferSecure(e))},ice_getRouter:function(){var e=this._reference.getRouterInfo();return null!==e?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_isTwoway:function(){return this._reference.getMode()===Ee.ModeTwoway},ice_twoway:function(){return this._reference.getMode()===Ee.ModeTwoway?this:this.__newInstance(this._reference.changeMode(Ee.ModeTwoway))},ice_isOneway:function(){return this._reference.getMode()===Ee.ModeOneway},ice_oneway:function(){return this._reference.getMode()===Ee.ModeOneway?this:this.__newInstance(this._reference.changeMode(Ee.ModeOneway))},ice_isBatchOneway:function(){return this._reference.getMode()===Ee.ModeBatchOneway},ice_batchOneway:function(){return this._reference.getMode()===Ee.ModeBatchOneway?this:this.__newInstance(this._reference.changeMode(Ee.ModeBatchOneway))},ice_isDatagram:function(){return this._reference.getMode()===Ee.ModeDatagram},ice_datagram:function(){return this._reference.getMode()===Ee.ModeDatagram?this:this.__newInstance(this._reference.changeMode(Ee.ModeDatagram))},ice_isBatchDatagram:function(){return this._reference.getMode()===Ee.ModeBatchDatagram},ice_batchDatagram:function(){return this._reference.getMode()===Ee.ModeBatchDatagram?this:this.__newInstance(this._reference.changeMode(Ee.ModeBatchDatagram))},ice_compress:function(e){var t=this._reference.changeCompress(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_timeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_timeout: "+e);var t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnection:function(){var t=new Se(this,"ice_getConnection");try{t.__invoke()}catch(e){t.__abort(e)}return t},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var t=new ve(this,"ice_flushBatchRequests");try{t.__invoke()}catch(e){t.__abort(e)}return t},equals:function(e){return this===e||e instanceof we&&this._reference.equals(e._reference)},__reference:function(){return this._reference},__copyFrom:function(e){me.assert(null===this._reference),me.assert(null===this._requestHandler),this._reference=e._reference,this._requestHandler=e._requestHandler},__handleException:function(t,e,n,i,r,o){if(this.__updateRequestHandler(e,null),!(t instanceof Ice.LocalException&&(!i||n==be.Nonmutating||n==be.Idempotent||t instanceof Ice.CloseConnectionException||t instanceof Ice.ObjectNotExistException)))throw t;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(t,this._reference,r,o)}catch(e){throw e instanceof Ice.CommunicatorDestroyedException?t:e}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway())throw new Error("`"+e+"' can only be called with a twoway proxy")},__getRequestHandler:function(){return this._reference.getCacheConnection()&&this._requestHandler?this._requestHandler:this._reference.getRequestHandler(this)},__getBatchRequestQueue:function(){return this._batchRequestQueue||(this._batchRequestQueue=this._reference.getBatchRequestQueue()),this._batchRequestQueue},__setRequestHandler:function(e){return this._reference.getCacheConnection()?(this._requestHandler||(this._requestHandler=e),this._requestHandler):e},__updateRequestHandler:function(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))},__setup:function(e){me.assert(null===this._reference),this._reference=e},__newInstance:function(e){var t=new this.constructor;return t.__setup(e),t},ice_instanceof:function(e){return!!e&&(this instanceof e||this.constructor.__instanceof(e))}})).__invoke=function(e,t,n,i,r,o,c,a,s){(null!==c||0<a.length)&&e.__checkAsyncTwowayOnly(t);var l=new ye(e,t,function(e){we.__completed(e,c,a)});try{if(l.__prepare(t,n,r),null===o)l.__writeEmptyParams();else{var d=l.__startWriteParams(i);o.call(null,d,s),l.__endWriteParams()}l.__invoke()}catch(e){l.__abort(e)}return l},we.__completed=function(t,e,n){if(we.__check(t,n))try{if(null===e)t.__readEmptyParams(),t.succeed(t);else{var i=e(t);t.succeed.apply(t,i)}}catch(e){return void we.__dispatchLocalException(t,e)}},we.__returns_bool=function(e,t){t.push(e.readBool())},we.__returns_byte=function(e,t){t.push(e.readByte())},we.__returns_short=function(e,t){t.push(e.readShort())},we.__returns_int=function(e,t){t.push(e.readInt())},we.__returns_long=function(e,t){t.push(e.readLong())},we.__returns_float=function(e,t){t.push(e.readFloat())},we.__returns_double=function(e,t){t.push(e.readDouble())},we.__returns_string=function(e,t){t.push(e.readString())},we.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())},we.__returns_Object=function(e,t){e.readObject(function(e){t.push(e)},Ice.Object),e.readPendingObjects()},we.__check=function(t,n){try{t.__throwUserException()}catch(e){if(e instanceof Ice.UserException){if(null!==n)for(var i=0;i<n.length;++i)if(e instanceof n[i])return t.fail(e,t),!1;return t.fail(new Ice.UnknownUserException(e.ice_name()),t),!1}return t.fail(e,t),!1}return!0},we.__dispatchLocalException=function(e,t){e.fail(t,e)},we.ice_staticId=Ice.Object.ice_staticId,we.checkedCast=function(i,e,t){var r=null;if(null==i)(r=new Re(null,"checkedCast",null,null,null)).succeed(null,r);else{void 0!==e&&(i=i.ice_facet(e));var o=this;r=new Re(i.ice_getCommunicator(),"checkedCast",null,i,null),i.ice_isA(this.ice_staticId(),t).then(function(e,t){if(t){var n=new o;n.__copyFrom(i),r.succeed(n,r)}else r.succeed(null,r)}).exception(function(e){e instanceof Ice.FacetNotExistException?r.succeed(null,r):r.fail(e,r)})}return r},we.uncheckedCast=function(e,t){var n=null;return null!=e&&(n=new this,void 0!==t&&(e=e.ice_facet(t)),n.__copyFrom(e)),n},Object.defineProperty(we,"minWireSize",{get:function(){return 2}}),we.write=function(e,t){e.writeProxy(t)},we.read=function(e){return e.readProxy(this)},we.writeOpt=function(e,t,n){e.writeOptProxy(t,n)},we.readOpt=function(e,t){return e.readOptProxy(t,this)},we.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},Ice.Slice.defineProxy=function(e,t,n){function i(){e.call(this)}return i.__parent=e,i.__implements=n,((i.prototype=new e).constructor=i).ice_staticId=t,i.checkedCast=we.checkedCast,i.uncheckedCast=we.uncheckedCast,i.write=we.write,i.writeOpt=we.writeOpt,i.read=we.read,i.readOpt=we.readOpt,i.__instanceof=we.__instanceof,Object.defineProperty(i,"minWireSize",{get:function(){return 2}}),i},Ice.ObjectPrx=we,Object.defineProperty(Ice,"TCPEndpointType",{value:1}),Object.defineProperty(Ice,"SSLEndpointType",{value:2}),Object.defineProperty(Ice,"UDPEndpointType",{value:3}),Object.defineProperty(Ice,"WSEndpointType",{value:4}),Object.defineProperty(Ice,"WSSEndpointType",{value:5}),Ice.EndpointInfo=Pn.defineLocalObject(function(e,t){this.timeout=void 0!==e?e:0,this.compress=void 0!==t&&t}),Ice.Endpoint=Pn.defineLocalObject(),Ice.IPEndpointInfo=Pn.defineLocalObject(function(e,t,n,i,r){Ice.EndpointInfo.call(this,e,t),this.host=void 0!==n?n:"",this.port=void 0!==i?i:0,this.sourceAddress=void 0!==r?r:""},Ice.EndpointInfo),Ice.TCPEndpointInfo=Pn.defineLocalObject(function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)},Ice.IPEndpointInfo),Ice.UDPEndpointInfo=Pn.defineLocalObject(function(e,t,n,i,r,o,c){Ice.IPEndpointInfo.call(this,e,t,n,i,r),this.mcastInterface=void 0!==o?o:"",this.mcastTtl=void 0!==c?c:0},Ice.IPEndpointInfo),Ice.WSEndpointInfo=Pn.defineLocalObject(function(e,t,n,i,r,o){Ice.TCPEndpointInfo.call(this,e,t,n,i,r),this.resource=void 0!==o?o:""},Ice.TCPEndpointInfo),Ice.OpaqueEndpointInfo=Pn.defineLocalObject(function(e,t,n,i){Ice.EndpointInfo.call(this,e,t),this.rawEncoding=void 0!==n?n:new Ice.EncodingVersion,this.rawBytes=void 0!==i?i:null},Ice.EndpointInfo),Te=(0,Ice.Class)(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t,n=[],i="`"+this.protocol();for(t=0;t<e.length;++t)-1!==e[t].search(/[ \t\n\r]+/)?i+=' "'+e[t]+'"':i+=" "+e[t];for(i+="'",t=0;t<e.length;){var r=e[t++];if(r.length<2||"-"!=r.charAt(0))n.push(r);else{var o=null;t<e.length&&"-"!=e[t].charAt(0)&&(o=e[t++]),this.checkOption(r,o,i)||(n.push(r),null!==o&&n.push(o))}}for(t=e.length=0;t<n.length;t++)e.push(n[t])},equals:function(e){return e instanceof Te&&0===this.compareTo(e)},checkOption:function(){return!1}}),Ice.EndpointI=Te,Oe=Ice.__M,Pe=Ice.Class,Me=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx],De=Pe({__init__:function(e){this.raw=e,this.parsed={}},find:function(e){var t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=Gn(e,this.raw[e]),this.parsed[e]=t),t}}),xe=Pe({__init__:function(e,t){this.incomingAsync=e,this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(!0))try{this.__sendResponse(e),this.incomingAsync.__response()}catch(e){this.incomingAsync.__exception(e)}},ice_exception:function(e){this.__checkException(e)?this.incomingAsync.__validateResponse(!1)&&(this.__sendException(e),this.incomingAsync.__response()):this.incomingAsync.ice_exception(e)},__sendResponse:function(e){if(void 0===this.op.returns&&0===this.op.outParams.length){if(e&&0<e.length)throw new Error("ice_response called with invalid arguments");this.incomingAsync.__writeEmptyParams()}else{var t,n=this.incomingAsync.__startWriteParams(this.op.format);this.op.returns&&!this.op.returns.tag&&(t=this.op.returns),Qn(n,e,t,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses),this.incomingAsync.__endWriteParams(!0)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t)if(e instanceof this.op.exceptions[t])return!0;return!1},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}}),(Ae=Ice.Slice).defineOperations=function(i,e,t){if(t&&(i.__ops=new De(t)),i.prototype.__dispatch=function(e,t){var n=Jn(i,t.operation);if(void 0===n||"function"!=typeof n)throw new Ice.OperationNotExistException(t.id,t.facet,t.operation);return n.call(n,this,e,t)},t)for(var n in t)Yn(e,n,t[n]);if(e.__implements)for(var r in e.__implements){var o=e.__implements[r].prototype;for(var c in o)"function"==typeof o[c]&&void 0===e.prototype[c]&&(e.prototype[c]=o[c])}},Ae.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]}),Ne=Ice.Address,Ve=Ice.HashUtil,ke=Ice.StringUtil,Le=Ice.Class,Ue=Ice.EndpointParseException,Fe=Le(Ice.EndpointI,{__init__:function(e,t,n,i,r){this._instance=e,this._host=void 0===t?null:t,this._port=void 0===n?null:n,this._sourceAddr=void 0===i?null:i,this._connectionId=void 0===r?"":r},streamWrite:function(e){e.startWriteEncaps(),this.streamWriteImpl(e),e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;return this.fillEndpointInfo(e),e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode},options:function(){var e="";if(null!==this._host&&0<this._host.length){e+=" -h ";var t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}return e+=" -p "+this._port,null!==this._sourceAddr&&0<this._sourceAddr.length&&(e+=" --sourceAddr "+this._sourceAddr),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof Fe?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1},getAddress:function(){return new Ne(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host),e.writeInt(this._port)},hashInit:function(e){return e=Ve.addNumber(e,this.type()),e=Ve.addString(e,this._host),e=Ve.addNumber(e,this._port),e=Ve.addString(e,this._sourceAddr),e=Ve.addString(e,this._connectionId)},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()},e.datagram=function(){return t.datagram()},e.secure=function(){return t.secure()},e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new Ue("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new Ue("`--sourceAddress not valid for object adapter endpoint `"+this+"'")},initWithStream:function(e){this._host=e.readString(),this._port=e.readInt()},checkOption:function(e,t,n){if("-h"===e){if(null===t)throw new Ue("no argument provided for -h option in endpoint "+n);this._host=t}else if("-p"===e){if(null===t)throw new Ue("no argument provided for -p option in endpoint "+n);try{this._port=ke.toInt(t)}catch(e){throw new Ue("invalid port value `"+t+"' in endpoint "+n)}if(this._port<0||65535<this._port)throw new Ue("port value `"+t+"' out of range in endpoint "+n)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new Ue("no argument provided for --sourceAddress option in endpoint "+n);this._sourceAddr=t}return!0}}),Ice.IPEndpointI=Fe,Object.defineProperty(IceSSL,"EndpointType",{value:Ice.SSLEndpointType}),IceSSL.EndpointInfo=Pn.defineLocalObject(function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)},Ice.IPEndpointInfo),IceSSL.WSSEndpointInfo=Pn.defineLocalObject(function(e,t,n,i,r,o){IceSSL.EndpointInfo.call(this,e,t,n,i,r),this.resource=void 0!==o?o:""},IceSSL.EndpointInfo),Ice.ConnectionInfo=Pn.defineLocalObject(function(e,t,n,i,r){this.incoming=void 0!==e&&e,this.adapterName=void 0!==t?t:"",this.connectionId=void 0!==n?n:"",this.rcvSize=void 0!==i?i:0,this.sndSize=void 0!==r?r:0}),Ice.ConnectionCallback=Pn.defineLocalObject(),Ice.ACMClose=Pn.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]),Ice.ACMHeartbeat=Pn.defineEnum([["HeartbeatOff",0],["HeartbeatOnInvocation",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]),Ice.ACM=Pn.defineStruct(function(e,t,n){this.timeout=void 0!==e?e:0,this.close=void 0!==t?t:Ice.ACMClose.CloseOff,this.heartbeat=void 0!==n?n:Ice.ACMHeartbeat.HeartbeatOff},!0),Ice.Connection=Pn.defineLocalObject(),Ice.IPConnectionInfo=Pn.defineLocalObject(function(e,t,n,i,r,o,c,a,s){Ice.ConnectionInfo.call(this,e,t,n,i,r),this.localAddress=void 0!==o?o:"",this.localPort=void 0!==c?c:-1,this.remoteAddress=void 0!==a?a:"",this.remotePort=void 0!==s?s:-1},Ice.ConnectionInfo),Ice.TCPConnectionInfo=Pn.defineLocalObject(function(e,t,n,i,r,o,c,a,s){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,c,a,s)},Ice.IPConnectionInfo),Ice.UDPConnectionInfo=Pn.defineLocalObject(function(e,t,n,i,r,o,c,a,s,l,d){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,c,a,s),this.mcastAddress=void 0!==l?l:"",this.mcastPort=void 0!==d?d:-1},Ice.IPConnectionInfo),Pn.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.WSConnectionInfo=Pn.defineLocalObject(function(e,t,n,i,r,o,c,a,s,l){Ice.TCPConnectionInfo.call(this,e,t,n,i,r,o,c,a,s),this.headers=void 0!==l?l:null},Ice.TCPConnectionInfo),Ice.TraceLevels=function(e){var t="Ice.Trace.",n=e.getPropertyAsInt(t+"Network"),i=e.getPropertyAsInt(t+"Protocol"),r=e.getPropertyAsInt(t+"Retry"),o=e.getPropertyAsInt(t+"Locator"),c=e.getPropertyAsInt(t+"Slicing");return e.getPropertyAsInt(t+"ThreadPool"),Object.create(null,{network:{get:function(){return n}},networkCat:{get:function(){return"Network"}},protocol:{get:function(){return i}},protocolCat:{get:function(){return"Protocol"}},retry:{get:function(){return r}},retryCat:{get:function(){return"Retry"}},location:{get:function(){return o}},locationCat:{get:function(){return"Locator"}},slicing:{get:function(){return c}},slicingCat:{get:function(){return"Slicing"}}})},je=Ice.Base64,Be=Ice.Debug,He=Ice.HashUtil,Ice.Protocol,qe=Ice.StringUtil,Ke=Ice.EndpointParseException,We=Ice.Class,Ge=We(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endWriteEncaps()},getInfo:function(){return new ze(-1,!1,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(){return this},changeConnectionId:function(){return this},compress:function(){return!1},changeCompress:function(){return this},datagram:function(){return!1},secure:function(){return!1},rawBytes:function(){return this._rawBytes},transceiver:function(e){return e.value=null},acceptor:function(e){return e.value=this,null},connect:function(){return null},hashCode:function(){if(void 0===this._hashCode){var e=5381;e=He.addNumber(e,this._type),e=He.addHashable(e,this._rawEncoding),e=He.addArray(e,this._rawBytes,He.addNumber),this._hashCode=e}return this._hashCode},options:function(){var e="";return e+=" -t "+this._type,e+=" -e "+Ice.encodingVersionToString(this._rawEncoding),e+=" -v "+je.encode(this._rawBytes)},equals:function(e){if(!(e instanceof Ge))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(var t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof Ge))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0},checkOption:function(e,t,n){switch(e.charAt(1)){case"t":if(-1<this._type)throw new Ke("multiple -t options in endpoint "+n);if(null===t)throw new Ke("no argument provided for -t option in endpoint "+n);var i;try{i=qe.toInt(t)}catch(e){throw new Ke("invalid type value `"+t+"' in endpoint "+n)}if(i<0||65535<i)throw new Ke("type value `"+t+"' out of range in endpoint "+n);return this._type=i,!0;case"v":if(this._rawBytes)throw new Ke("multiple -v options in endpoint "+n);if(null===t||0===t.length)throw new Ke("no argument provided for -v option in endpoint "+n);for(var r=0;r<t.length;++r)if(!je.isBase64(t.charAt(r)))throw new Ke("invalid base64 character `"+t.charAt(r)+"' (ordinal "+t.charCodeAt(r)+") in endpoint "+n);return this._rawBytes=je.decode(t),!0;case"e":if(null===t)throw new Ke("no argument provided for -e option in endpoint "+n);try{this._rawEncoding=Ice.stringToEncodingVersion(t)}catch(e){throw new Ke("invalid encoding version `"+t+"' in endpoint "+n+":\n"+e.str)}return!0;default:return!1}},initWithOptions:function(e){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),Be.assert(this._rawEncoding),this._type<0)throw new Ke("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new Ke("no -v option in endpoint `"+this+"'")},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}}),ze=We(Ice.OpaqueEndpointInfo,{__init__:function(e,t,n,i,r){Ice.OpaqueEndpointInfo.call(this,-1,!1,n,i),this._type=r},type:function(){return this._type},datagram:function(){return!1},secure:function(){return!1}}),Ice.OpaqueEndpointI=Ge,Qe=Ice.BasicStream,Xe=Ice.Current,Je=Ice.Debug,Ye=Ice.FormatType,Ze=Ice.Context,$e=Ice.Identity,et=Ice.Protocol,tt=Ice.StringUtil,nt=Ice.Class({__init__:function(e,t,n,i,r,o){this._instance=e,this._response=i,this._compress=r,this._response&&(this._os=new Qe(e,et.currentProtocolEncoding)),this._connection=t,this._current=new Xe,this._current.id=new $e,this._current.adapter=n,this._current.con=this._connection,this._current.requestId=o,this._servant=null,this._locator=null,this._cookie={value:null},i&&(this._os.writeBlob(et.replyHdr),this._os.writeInt(o)),this._is=null,this._cb=null,this._active=!0},__startWriteParams:function(e){if(!this._response)throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch");return Je.assert(this._os.size==et.headerSize+4),Je.assert(null!==this._current.encoding),this._os.writeByte(0),this._os.startWriteEncaps(this._current.encoding,e),this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=et.headerSize+4,this._os.writeByte(e?et.replyOK:et.replyUserException),this._os.pos=t,this._os.endWriteEncaps()}},__writeEmptyParams:function(){this._response&&(Je.assert(this._os.size===et.headerSize+4),Je.assert(null!==this._current.encoding),this._os.writeByte(et.replyOK),this._os.writeEmptyEncaps(this._current.encoding))},__writeParamEncaps:function(e,t){this._response&&(Je.assert(this._os.size===et.headerSize+4),Je.assert(null!==this._current.encoding),this._os.writeByte(t?et.replyOK:et.replyUserException),null===e||0===e.length?this._os.writeEmptyEncaps(this._current.encoding):this._os.writeEncaps(e))},__writeUserException:function(e,t){this.__startWriteParams(t).writeUserException(e),this.__endWriteParams(!1)},__warning:function(e){Je.assert(null!==this._instance);var t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+this._instance.identityToString(this._current.id)),t.push("\nfacet: "+tt.escapeString(this._current.facet,"")),t.push("\noperation: "+this._current.operation),null!==this._connection){var n=this._connection.getInfo();if(n instanceof Ice.IPConnectionInfo){var i=n;t.push("\nremote host: "+i.remoteAddress+" remote port: "+i.remotePort)}}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(){Je.assert(null!==this._locator&&null!==this._servant);try{return this._locator.finished(this._current,this._servant,this._cookie.value),!0}catch(e){return e instanceof Ice.UserException?(Je.assert(null!==this._connection),this._response?(this._os.resize(et.headerSize+4),this._os.writeByte(et.replyUserException),this._os.startWriteEncaps(),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),this._connection=null):this.__handleException(e),!1}},__handleException:function(e){Je.assert(null!==this._connection);var t,n=this._instance.initializationData().properties;e instanceof Ice.RequestFailedException?(null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),null!==e.operation&&0!==e.operation.length||(e.operation=this._current.operation),1<n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)&&this.__warning(e),this._response?(this._os.resize(et.headerSize+4),e instanceof Ice.ObjectNotExistException?this._os.writeByte(et.replyObjectNotExist):e instanceof Ice.FacetNotExistException?this._os.writeByte(et.replyFacetNotExist):e instanceof Ice.OperationNotExistException?this._os.writeByte(et.replyOperationNotExist):Je.assert(!1),e.id.__write(this._os),null===e.facet||0===e.facet.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownLocalException?(0<n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)&&this.__warning(e),this._response?(this._os.resize(et.headerSize+4),this._os.writeByte(et.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownUserException?(0<n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)&&this.__warning(e),this._response?(this._os.resize(et.headerSize+4),this._os.writeByte(et.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownException?(0<n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)&&this.__warning(e),this._response?(this._os.resize(et.headerSize+4),this._os.writeByte(et.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.LocalException?(0<n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)&&this.__warning(e),this._response?(this._os.resize(et.headerSize+4),this._os.writeByte(et.replyUnknownLocalException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UserException?(0<n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)&&this.__warning(e),this._response?(this._os.resize(et.headerSize+4),this._os.writeByte(et.replyUnknownUserException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):(0<n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)&&this.__warning(e),this._response?(this._os.resize(et.headerSize+4),this._os.writeByte(et.replyUnknownException),this._os.writeString(e.stack?e.stack:""),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()),this._connection=null},invoke:function(e,t){this._is=t;this._is.pos;this._current.id.__read(this._is);var n=Ice.StringSeqHelper.read(this._is);if(0<n.length){if(1<n.length)throw new Ice.MarshalException;this._current.facet=n[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=Ice.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new Ze;for(var i=this._is.readSize();0<i--;){var r=this._is.readString(),o=this._is.readString();this._current.ctx.set(r,o)}if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&0<this._current.id.category.length&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){if(e instanceof Ice.UserException){var c=this._is.skipEncaps();return this._response?(this._os.writeByte(et.replyUserException),this._os.startWriteEncaps(c,Ye.DefaultFormat),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),void(this._connection=null)}return this._is.skipEncaps(),void this.__handleException(e)}try{if(null===this._servant)throw this._is.skipEncaps(),null!==e&&e.hasServant(this._current.id)?new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation);if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync)return;if(null!==this._locator&&!this.__servantLocatorFinished())return}catch(e){if(null!==this._servant&&null!==this._locator&&!this.__servantLocatorFinished())return;return void this.__handleException(e)}Je.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null},startReadParams:function(){return this._current.encoding=this._is.startReadEncaps(),this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=new Ice.EncodingVersion,this._is.skipEmptyEncaps(this._current.encoding)},readParamEncaps:function(){return this._current.encoding=new Ice.EncodingVersion,this._is.readEncaps(this._current.encoding)},__response:function(){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;Je.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this.__handleException(e)}catch(e){this._connection.invokeException(e,1)}},__validateResponse:function(){return!!this._active&&!(this._active=!1)},ice_exception:function(e){this._active&&(this._active=!1,null!==this._connection?this.__exception(e):0<this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)&&this.__warning(e))}}),Ice.IncomingAsync=nt,function(){Ice.AsyncResult;var t=Ice.AsyncStatus,r=(Ice.BasicStream,Ice.ConnectionRequestHandler),o=Ice.Debug,c=(Ice.ExUtil,Ice.RetryException),n=(Ice.OutgoingAsync,Ice.Protocol,Ice.ReferenceMode),a=Ice.LocalException,e=(Ice.Promise,Ice.Class({__init__:function(e,t){this._reference=e,this._response=e.getMode()===n.ModeTwoway,this._proxy=t,this._proxies=[],this._initialized=!1,this._connection=null,this._compress=!1,this._exception=null,this._requests=[]},connect:function(e){return this.initialized()||this._proxies.push(e),this._requestHandler?this._requestHandler:this},update:function(e,t){return e===this?t:this},sendAsyncRequest:function(e){return this._initialized||e.__cancelable(this),this.initialized()?e.__invokeRemote(this._connection,this._compress,this._response):(this._requests.push(e),t.Queued)},asyncRequestCanceled:function(e,t){if(null===this._exception){if(!this.initialized()){for(var n=0;n<this._requests.length;n++)if(this._requests[n]===e)return e.__completedEx(t),void this._requests.splice(n,1);o.assert(!1)}this._connection.asyncRequestCanceled(e,t)}},getReference:function(){return this._reference},getConnection:function(){if(null!==this._exception)throw this._exception;return this._connection},setConnection:function(e,t){o.assert(null===this._exception&&null===this._connection),this._connection=e,this._compress=t;var n=this._reference.getRouterInfo();if(null===n)this.flushRequests();else{var i=this;n.addProxy(this._proxy).then(function(){i.flushRequests()},function(e){i.setException(e)})}},setException:function(e){o.assert(!this._initialized&&null===this._exception),this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}for(var t=0;t<this._requests.length;++t){var n=this._requests[t];null!==n&&n.__completedEx(this._exception)}this._requests.length=0},initialized:function(){if(this._initialized)return o.assert(null!==this._connection),!0;if(null===this._exception)return this._initialized;if(null!==this._connection)return!0;throw this._exception},flushRequests:function(){o.assert(null!==this._connection&&!this._initialized);for(var t=null,e=0;e<this._requests.length;++e){var n=this._requests[e];try{n.__invokeRemote(this._connection,this._compress,this._response)}catch(e){e instanceof c?(t=e.inner,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),n.__retryException(e.inner)):(o.assert(e instanceof a),t=e,n.out.__completedEx(e))}}if(this._requests.length=0,this._reference.getCacheConnection()&&null===t){this._requestHandler=new r(this._reference,this._connection,this._compress);for(var i=0;i<this._proxies.length;++i)this._proxies[i].__updateRequestHandler(this,this._requestHandler)}o.assert(!this._initialized),this._exception=t,this._initialized=null===this._exception,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),this._proxies.length=0,this._proxy=null}}));Ice.ConnectRequestHandler=e}(),IceSSL.ConnectionInfo=Pn.defineLocalObject(function(e,t,n,i,r,o,c,a,s,l,d,u){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,c,a,s),this.cipher=void 0!==l?l:"",this.certs=void 0!==d?d:null,this.verified=void 0!==u&&u},Ice.IPConnectionInfo),IceSSL.WSSConnectionInfo=Pn.defineLocalObject(function(e,t,n,i,r,o,c,a,s,l,d,u,f){IceSSL.ConnectionInfo.call(this,e,t,n,i,r,o,c,a,s,l,d,u),this.headers=void 0!==f?f:null},IceSSL.ConnectionInfo),function(){var t=Ice.__M.module("IceSSL");IsChrome=-1===navigator.userAgent.indexOf("Edge/")&&-1!==navigator.userAgent.indexOf("Chrome/");var r=Ice.Debug,n=(Ice.ExUtil,Ice.Network,Ice.SocketOperation),o=(Ice.Connection,Ice.LocalException,Ice.SocketException,Ice.Timer),i=2,c=Ice.Class({__init__:function(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288),this._writeReadyTimeout=0},writeReadyTimeout:function(){var e=Math.round(this._writeReadyTimeout);return this._writeReadyTimeout+=5<=this._writeReadyTimeout?5:.2,Math.min(e,25)},setCallbacks:function(e,t,n){this._connectedCallback=e,this._bytesAvailableCallback=t,this._bytesWrittenCallback=n},initialize:function(){try{if(this._exception)throw this._exception;if(0===this._state){this._state=1,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer";var t=this;return this._fd.onopen=function(e){console.crlog("[RTC] Websocket is opened: "+t._url),"wss://crlab.cloudroom.com:543/sig/13100"==t._url&&(window.callsvr=t._fd),t.socketConnected(e)},this._fd.onmessage=function(e){t.socketBytesAvailable(e.data)},this._fd.onclose=function(e){console.crlog("[RTC] Websocket is closed: "+t._url),t.socketClosed(e)},n.Connect}1===this._state&&(this._desc="local address = <not available>\nremote address = "+(e=this._addr).host+":"+e.port,this._state=i)}catch(e){throw this._exception||(this._exception=a(this._state,e)),this._exception}var e;return r.assert(this._state===i),n.None},register:function(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._bytesAvailableCallback(),this._hasBytesAvailable=!1)},unregister:function(){this._registered=!1},close:function(){if(null!==this._fd)if(IsChrome&&this._fd.readyState===WebSocket.CONNECTING)this._state=3;else{r.assert(null!==this._fd);try{this._state=4,this._fd.close()}catch(e){throw a(this._state,e)}finally{this._fd=null}}else r.assert(this._exception)},write:function(e){if(this._exception)throw this._exception;if(0===e.remaining)return!0;r.assert(this._fd);for(e.position;;){var t=0<this._maxSendPacketSize&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(0===e.remaining)break;if(r.assert(0<t),this._fd.bufferedAmount+t>this._maxSendPacketSize){var n=this;return o.setTimeout(function(){n._fd&&n._fd.bufferedAmount+t<=n._maxSendPacketSize&&n._bytesWrittenCallback(0,0)},this.writeReadyTimeout()),!1}this._writeReadyTimeout=0;var i=e.b.slice(e.position,e.position+t);this._fd.send(i),e.position=e.position+t}return!0},read:function(e,t){if(this._exception)throw this._exception;if(t.value=!1,0===this._readBuffers.length)return!1;var n=this._readBuffers[0].byteLength-this._readPosition;r.assert(0<n);for(e.remaining;0<e.remaining;)if(n>e.remaining&&(n=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,n),e.position),e.position+=n,this._readPosition+=n,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;n=this._readBuffers[0].byteLength}return t.value=0<this._readBuffers.byteLength,0===e.remaining},type:function(){return this._secure?"wss":"ws"},getInfo:function(){r.assert(null!==this._fd);var e=this._secure?new t.WSSConnectionInfo:new Ice.WSConnectionInfo;return e.localAddress="",e.localPort=-1,e.remoteAddress=this._addr.host,e.remotePort=this._addr.port,e.rcvSize=-1,e.sndSize=this._maxSendPacketSize,e.headers={},e},checkSendSize:function(){},setBufferSize:function(e,t){this._maxSendPacketSize=t},toString:function(){return this._desc},socketConnected:function(){3!=this._state?(r.assert(null!==this._connectedCallback),this._connectedCallback()):this.close()},socketBytesAvailable:function(e){if(r.assert(null!==this._bytesAvailableCallback),0<e.byteLength)if(this._readBuffers.push(e),this._registered)for(;0<this._readBuffers.length;)this._bytesAvailableCallback();else this._hasBytesAvailable||(this._hasBytesAvailable=!0)},socketClosed:function(e){3!=this._state?(this._exception=a(this._state,e),this._state<i?this._connectedCallback():this._registered&&this._bytesAvailableCallback()):this.close()}});function a(e,t){return e<i?new Ice.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new Ice.ConnectionLostException:new Ice.SocketException(t.code,t)}c.createOutgoing=function(e,t,n,i){var r=new c(e),o=t?"wss":"ws";return o+="://"+n.host,80!==n.port&&(o+=":"+n.port),o+=i||"/",r._url=o,r._fd=null,r._addr=n,r._desc="local address = <not available>\nremote address = "+n.host+":"+n.port,r._state=0,r._secure=t,r._exception=null,r},Ice.WSTransceiver=c}(),Ice.Router=Pn.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Ice.RouterPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,void 0),Pn.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),Ice.RouterFinder=Pn.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RouterFinder"],-1,void 0,void 0,!1),Ice.RouterFinderPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,void 0),Pn.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]}),Ice.AdapterNotFoundException=Pn.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterNotFoundException",void 0,void 0,!1,!1),Ice.InvalidReplicaGroupIdException=Pn.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::InvalidReplicaGroupIdException",void 0,void 0,!1,!1),Ice.AdapterAlreadyActiveException=Pn.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterAlreadyActiveException",void 0,void 0,!1,!1),Ice.ObjectNotFoundException=Pn.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ObjectNotFoundException",void 0,void 0,!1,!1),Ice.ServerNotFoundException=Pn.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ServerNotFoundException",void 0,void 0,!1,!1),Ice.Locator=Pn.defineObject(void 0,Ice.Object,void 0,0,["::Ice::Locator","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,void 0),Pn.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]}),Ice.LocatorRegistry=Pn.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorRegistryPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,void 0),Pn.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]}),Ice.LocatorFinder=Pn.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorFinder","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorFinderPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,void 0),Pn.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]}),it=Ice.Debug,rt=Ice.HashUtil,ot=Ice.StringUtil,ct=void 0!==Ice.TcpTransceiver?Ice.TcpTransceiver:null,at=(0,Ice.Class)(Ice.IPEndpointI,{__init__:function(e,t,n,i,r,o,c){Ice.IPEndpointI.call(this,e,t,n,i,o),this._timeout=void 0===r?e?e.defaultTimeout():void 0:r,this._compress=void 0!==c&&c},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;return this.fillEndpointInfo(e),e},timeout:function(){return this._timeout},changeTimeout:function(e){return e===this._timeout?this:new at(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)},changeConnectionId:function(e){return e===this._connectionId?this:new at(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)},compress:function(){return this._compress},changeCompress:function(e){return e===this._compress?this:new at(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)},datagram:function(){return!1},connectable:function(){return null!==ct&&!this.secure()},connect:function(){return it.assert(!this.secure()),ct.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);return-1==this._timeout?e+=" -t infinite":e+=" -t "+this._timeout,this._compress&&(e+=" -z"),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof at?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:Ice.IPEndpointI.prototype.compareTo.call(this,e):this.type()<e.type()?-1:1},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e),e.writeInt(this._timeout),e.writeBool(this._compress)},hashInit:function(e){return e=Ice.IPEndpointI.prototype.hashInit.call(this,e),e=rt.addNumber(e,this._timeout),e=rt.addBoolean(e,this._compress)},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e),e.timeout=this._timeout,e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e),this._timeout=e.readInt(),this._compress=e.readBool()},checkOption:function(e,t,n){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,t,n))return!0;if("-t"===e){if(null===t)throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+n);if("infinite"==t)this._timeout=-1;else{var i=!1;try{this._timeout=ot.toInt(t)}catch(e){i=!0}if(i||this._timeout<1)throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+n)}}else{if("-z"!==e)return!1;if(null!==t)throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+n);this._compress=!0}return!0},createEndpoint:function(e,t,n){return new at(this._instance,e,t,this._sourceAddr,this._timeout,n,this._compress)}}),Ice.TcpEndpointI=at,function(){function i(e){this.stream=new s(e,p.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.compress=!1,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null}var n=Ice.AsyncStatus,r=Ice.AsyncResultBase,s=Ice.BasicStream,l=Ice.BatchRequestQueue,t=Ice.ConnectionFlushBatch,d=Ice.Debug,u=Ice.ExUtil,f=Ice.HashMap,a=Ice.IncomingAsync,h=Ice.RetryException,o=Ice.Promise,p=Ice.Protocol,_=Ice.SocketOperation,C=Ice.Timer,c=Ice.TraceUtil,g=Ice.ProtocolVersion,R=Ice.EncodingVersion,e=Ice.ACM,m=Ice.ACMClose,I=Ice.ACMHeartbeat,y=Ice.Class,v=y({__init__:function(e,t,n,i,r,o,c){this._communicator=e,this._instance=t,this._monitor=n,this._transceiver=i,this._desc=i.toString(),this._type=i.type(),this._endpoint=r,this._incoming=o,this._adapter=c;var a=t.initializationData();this._logger=a.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=0<a.properties.getPropertyAsInt("Ice.Warn.Connections"),this._warnUdp=0<t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams"),this._acmLastActivity=null!==this._monitor&&0<this._monitor.getACM().timeout?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=c?c.messageSizeMax():t.messageSizeMax(),this._batchRequestQueue=new l(t,r.datagram()),this._sendStreams=[],this._readStream=new s(t,p.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new s(t,p.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=0,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new g,this._readProtocolEncoding=new R,this._asyncRequests=new f,this._exception=null,this._startPromise=null,this._closePromises=[],this._holdPromises=[],this._finishedPromises=[],null!==this._adapter?this._servantManager=this._adapter.getServantManager():this._servantManager=null,this._callback=null},start:function(){d.assert(null===this._startPromise);try{if(5<=this._state)return d.assert(null!==this._exception),(new o).fail(this._exception);this._startPromise=new o;var i=this;this._transceiver.setCallbacks(function(){i.message(_.Write)},function(){i.message(_.Read)},function(e,t){if(i.message(_.Write),3<=i._instance.traceLevels().network&&0<e){var n=[];n.push("sent "),n.push(e),i._endpoint.datagram()||(n.push(" of "),n.push(t)),n.push(" bytes via "),n.push(i._endpoint.protocol()),n.push("\n"),n.push(this.toString()),i._instance.initializationData().logger.trace(i._instance.traceLevels().networkCat,n.join(""))}}),this.initialize()}catch(e){return e instanceof Ice.LocalException&&this.exception(e),(new o).fail(e)}return this._startPromise},activate:function(){this._state<=1||(0<this._acmLastActivity&&(this._acmLastActivity=Date.now()),this.setState(2))},hold:function(){this._state<=1||this.setState(3)},destroy:function(e){switch(e){case v.ObjectAdapterDeactivated:this.setState(4,new Ice.ObjectAdapterDeactivatedException);break;case v.CommunicatorDestroyed:this.setState(4,new Ice.CommunicatorDestroyedException)}},close:function(e){var t=new r(this._communicator,"close",this,null,null);return e?(this.setState(5,new Ice.ForcedCloseConnectionException),t.succeed(t)):(this._closePromises.push(t),this.checkClose()),t},checkClose:function(){if(0===this._asyncRequests.size&&0<this._closePromises.length){this.setState(4,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e)this._closePromises[e].succeed(this._closePromises[e]);this._closePromises=[]}},isActiveOrHolding:function(){return 1<this._state&&this._state<4},isFinished:function(){return 6===this._state&&0===this._dispatchCount&&(d.assert(6===this._state),!0)},throwException:function(){if(null!==this._exception)throw d.assert(4<=this._state),this._exception},waitUntilHolding:function(){var e=new o;return this._holdPromises.push(e),this.checkState(),e},waitUntilFinished:function(){var e=new o;return this._finishedPromises.push(e),this.checkState(),e},monitor:function(e,t){2===this._state&&((t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||0<this._dispatchCount)&&this.heartbeat(),this._readStream.size>p.headerSize||!this._writeStream.isEmpty()||t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&0<this._asyncRequests.size?this.setState(5,new Ice.ConnectionTimeoutException):t.close!=Ice.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchRequestQueue.isEmpty()&&0===this._asyncRequests.size&&this.setState(4,new Ice.ConnectionTimeoutException)))},sendAsyncRequest:function(e,t,n,i){var r,o=0,c=e.__os();if(null!==this._exception)throw new h(this._exception);d.assert(1<this._state),d.assert(this._state<4),this._transceiver.checkSendSize(c),e.__cancelable(this),n?((o=this._nextRequestId++)<=0&&(this._nextRequestId=1,o=this._nextRequestId++),c.pos=p.headerSize,c.writeInt(o)):0<i&&(c.pos=p.headerSize,c.writeInt(i));try{r=this.sendMessage(S.create(e,e.__os(),t,o))}catch(e){throw e instanceof Ice.LocalException?(this.setState(5,e),d.assert(null!==this._exception),this._exception):e}return n&&this._asyncRequests.set(o,e),r},getBatchRequestQueue:function(){return this._batchRequestQueue},flushBatchRequests:function(){var e=new t(this,this._communicator,"flushBatchRequests");return e.__invoke(),e},setCallback:function(e){if(5<=this._state){if(null!==e){var t=this;C.setImmediate(function(){try{e.closed(this)}catch(e){t._logger.error("connection callback exception:\n"+e+"\n"+t._desc)}})}}else this._callback=e},setACM:function(e,t,n){null===this._monitor||5<=this._state||(2==this._state&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,n),2==this._state&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:2==this._state&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))},getACM:function(){return null!==this._monitor?this._monitor.getACM():new e(0,m.CloseOff,I.HeartbeatOff)},asyncRequestCanceled:function(e,t){for(var n=0;n<this._sendStreams.length;n++){var i=this._sendStreams[n];if(i.outAsync===e)return 0<i.requestId&&this._asyncRequests.del(i.requestId),i.canceled(),0!==n&&this._sendStreams.splice(n,1),void e.__completedEx(t)}if(e instanceof Ice.OutgoingAsync)for(var r=this._asyncRequests.entries;null!==r;r=r.next)if(r.value===e)return this._asyncRequests.del(r.key),void e.__completedEx(t)},sendResponse:function(e,t){d.assert(1<this._state);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),5<=this._state)throw d.assert(null!==this._exception),this._exception;this.sendMessage(S.createForStream(e,0!==t,!0)),4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},sendNoResponse:function(){d.assert(1<this._state);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),5<=this._state)throw d.assert(null!==this._exception),this._exception;4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},endpoint:function(){return this._endpoint},setAdapter:function(e){this._state<=1||4<=this._state||(d.assert(this._state<4),this._adapter=e,null!==this._adapter?(this._servantManager=this._adapter.getServantManager(),null===this._servantManager&&(this._adapter=null)):this._servantManager=null)},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(!(5<=this._state)){this.unscheduleTimeout(e),this._hasMoreData.value=0!=(e&_.Read);var t=null;try{if(0!=(e&_.Write)&&0<this._writeStream.buffer.remaining){if(!this.write(this._writeStream.buffer))return d.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(_.Write,this._endpoint.timeout());d.assert(0===this._writeStream.buffer.remaining)}if(0!=(e&_.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;d.assert(0===this._readStream.buffer.remaining),this._readHeader=!1;var n=this._readStream.pos;if(n<p.headerSize)throw new Ice.IllegalMessageSizeException;this._readStream.pos=0;var i=this._readStream.readByte(),r=this._readStream.readByte(),o=this._readStream.readByte(),c=this._readStream.readByte();if(i!==p.magic[0]||r!==p.magic[1]||o!==p.magic[2]||c!==p.magic[3]){var a=new Ice.BadMagicException;throw a.badMagic=Ice.Buffer.createNative([i,r,o,c]),a}this._readProtocol.__read(this._readStream),p.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),p.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();var s=this._readStream.readInt();if(s<p.headerSize)throw new Ice.IllegalMessageSizeException;s>this._messageSizeMax&&u.throwMemoryLimitException(s,this._messageSizeMax),s>this._readStream.size&&this._readStream.resize(s),this._readStream.pos=n}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new Ice.DatagramLimitException;if(!this.read(this._readStream.buffer))return d.assert(!this._readStream.isEmpty()),void this.scheduleTimeout(_.Read,this._endpoint.timeout());d.assert(0===this._readStream.buffer.remaining)}}if(this._state<=1){if(0===this._state&&!this.initialize())return;if(this._state<=1&&!this.validate())return;this._transceiver.unregister(),this.setState(3),null!==this._startPromise&&++this._dispatchCount}else d.assert(this._state<=4),0!=(e&_.Read)&&(t=this.parseMessage()),0!=(e&_.Write)&&this.sendNextMessage()}catch(e){if(e instanceof Ice.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(p.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(e instanceof Ice.SocketException)return void this.setState(5,e);if(e instanceof Ice.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc),this._readStream.resize(p.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(5,e));throw e}if(0<this._acmLastActivity&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value){var l=this;C.setImmediate(function(){l.message(_.Read)})}}},dispatch:function(e){var t=0;if(null!==this._startPromise&&(this._startPromise.succeed(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.__completed(e.stream),++t),0<e.invokeNum&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback.heartbeat(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(0<t&&(this._dispatchCount-=t,0===this._dispatchCount)){if(4!==this._state||this._shutdownInitiated)6===this._state&&this.reap();else try{this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}this.checkState()}},finish:function(){var e;d.assert(5===this._state),this.unscheduleTimeout(_.Read|_.Write|_.Connect);var t=this._instance.traceLevels();if(this._initialized?1<=t.network&&((e=[]).push("closed "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||(e.push("\n"),e.push(this._exception.toString())),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))):2<=t.network&&((e=[]).push("failed to establish "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),e.push("\n"),e.push(this._exception.toString()),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))),null!==this._startPromise&&(this._startPromise.fail(this._exception),this._startPromise=null),0<this._sendStreams.length){if(!this._writeStream.isEmpty()){var n=this._sendStreams[0];this._writeStream.swap(n.stream)}for(var i=0;i<this._sendStreams.length;++i){var r=this._sendStreams[i];0<r.requestId&&this._asyncRequests.del(r.requestId),r.completed(this._exception)}this._sendStreams=[]}for(var o=this._asyncRequests.entries;null!==o;o=o.next)o.value.__completedEx(this._exception);if(this._asyncRequests.clear(),this._readStream.clear(),this._readStream.buffer.clear(),this._writeStream.clear(),this._writeStream.buffer.clear(),null!==this._callback){try{this._callback.closed(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._callback=null}0===this._dispatchCount&&this.reap(),this.setState(6)},toString:function(){return this._desc},timedOut:function(){this._state<=1?this.setState(5,new Ice.ConnectTimeoutException):this._state<4?this.setState(5,new Ice.TimeoutException):4===this._state&&this.setState(5,new Ice.CloseTimeoutException)},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(5<=this._state)throw this._exception;var e=this._transceiver.getInfo();return e.adapterName=null!==this._adapter?this._adapter.getName():"",e.incoming=this._incoming,e},setBufferSize:function(e,t){if(5<=this._state)throw this._exception;this._transceiver.setBufferSize(e,t)},exception:function(e){this.setState(5,e)},invokeException:function(e,t){this.setState(5,e),0<t&&(d.assert(0<this._dispatchCount),this._dispatchCount-=t,d.assert(0<=this._dispatchCount),0===this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()))},setState:function(e,t){if(void 0!==t){if(d.assert(t instanceof Ice.LocalException),d.assert(4<=e),this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&4===this._state||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&4===e&&(e=5),this._state<=1&&4===e&&(e=5),this._state!==e){try{switch(e){case 0:d.assert(!1);break;case 1:if(0!==this._state)return void d.assert(5===this._state);this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case 2:if(3!==this._state&&1!==this._state)return;this._transceiver.register();break;case 3:if(2!==this._state&&1!==this._state)return;2===this._state&&this._transceiver.unregister();break;case 4:if(5<=this._state)return;3===this._state&&this._transceiver.register();break;case 5:if(6===this._state)return;this._batchRequestQueue.destroy(this._exception),this._transceiver.unregister();break;case 6:d.assert(5===this._state),this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof Ice.LocalException))throw t;var n="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(n)}if(null!==this._monitor&&(2===e?(this._monitor.add(this),0<this._acmLastActivity&&(this._acmLastActivity=Date.now())):2===this._state&&this._monitor.remove(this)),this._state=e,4===this._state&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof Ice.LocalException))throw t;this.setState(5,t)}else 5===this._state&&this.finish();this.checkState()}},initiateShutdown:function(){if(d.assert(4===this._state),d.assert(0===this._dispatchCount),d.assert(!this._shutdownInitiated),!this._endpoint.datagram()){var e=new s(this._instance,p.currentProtocolEncoding);e.writeBlob(p.magic),p.currentProtocol.__write(e),p.currentProtocolEncoding.__write(e),e.writeByte(p.closeConnectionMsg),e.writeByte(0),e.writeInt(p.headerSize),0<(this.sendMessage(S.createForStream(e,!1,!1))&n.Sent)&&this.scheduleTimeout(_.Write,this.closeTimeout())}},heartbeat:function(){if(d.assert(2===this._state),!this._endpoint.datagram()){var e=new s(this._instance,p.currentProtocolEncoding);e.writeBlob(p.magic),p.currentProtocol.__write(e),p.currentProtocolEncoding.__write(e),e.writeByte(p.validateConnectionMsg),e.writeByte(0),e.writeInt(p.headerSize);try{this.sendMessage(S.createForStream(e,!1,!1))}catch(e){this.setState(5,e),d.assert(null!==this._exception)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=_.None?(this.scheduleTimeout(e,this.connectTimeout()),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(1),!0)},validate:function(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(p.magic),p.currentProtocol.__write(this._writeStream),p.currentProtocolEncoding.__write(this._writeStream),this._writeStream.writeByte(p.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(p.headerSize),c.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(_.Write,this.connectTimeout()),!1}else{if(0===this._readStream.size&&(this._readStream.resize(p.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(_.Read,this.connectTimeout()),!1;d.assert(this._readStream.pos===p.headerSize),this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==p.magic[0]||e[1]!==p.magic[1]||e[2]!==p.magic[2]||e[3]!==p.magic[3]){var t=new Ice.BadMagicException;throw t.badMagic=e,t}if(this._readProtocol.__read(this._readStream),p.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),p.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte()!==p.validateConnectionMsg)throw new Ice.ConnectionNotValidatedException;if(this._readStream.readByte(),this._readStream.readInt()!==p.headerSize)throw new Ice.IllegalMessageSizeException;c.traceRecv(this._readStream,this._logger,this._traceLevels),this._validated=!0}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(p.headerSize),this._readHeader=!0,this._readStream.pos=0;var n=this._instance.traceLevels();if(1<=n.network){var i=[];this._endpoint.datagram()?(i.push("starting to send "),i.push(this._endpoint.protocol()),i.push(" messages\n"),i.push(this._transceiver.toDetailedString())):((i=[]).push("established "),i.push(this._endpoint.protocol()),i.push(" connection\n"),i.push(this.toString())),this._instance.initializationData().logger.trace(n.networkCat,i.join(""))}return!0},sendNextMessage:function(){if(0!==this._sendStreams.length){d.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{for(;;){var e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(5<=this._state)return;e=this._sendStreams[0],d.assert(!e.prepared);var t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,null!==e.outAsync?c.trace("sending asynchronous request",t,this._logger,this._traceLevels):c.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return d.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(_.Write,this._endpoint.timeout())}}catch(e){if(e instanceof Ice.LocalException)return void this.setState(5,e);throw e}d.assert(this._writeStream.isEmpty()),4===this._state&&this.scheduleTimeout(_.Write,this.closeTimeout())}},sendMessage:function(e){if(0<this._sendStreams.length)return e.doAdopt(),this._sendStreams.push(e),n.Queued;d.assert(this._state<5),d.assert(!e.prepared);var t=e.stream;return t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,e.outAsync?c.trace("sending asynchronous request",e.stream,this._logger,this._traceLevels):c.traceSend(e.stream,this._logger,this._traceLevels),this.write(e.stream.buffer)?(e.sent(),0<this._acmLastActivity&&(this._acmLastActivity=Date.now()),n.Sent):(e.doAdopt(),this._writeStream.swap(e.stream),this._sendStreams.push(e),this.scheduleTimeout(_.Write,this._endpoint.timeout()),n.Queued)},parseMessage:function(){d.assert(1<this._state&&this._state<5);var e=new i(this._instance);this._readStream.swap(e.stream),this._readStream.resize(p.headerSize),this._readStream.pos=0,this._readHeader=!0,this._validated=!0,d.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;var t=e.stream.readByte();if(e.compress=e.stream.readByte(),2===e.compress){var n=new Ice.FeatureNotSupportedException;throw n.unsupportedFeature="Cannot uncompress compressed message",n}switch(e.stream.pos=p.headerSize,t){case p.closeConnectionMsg:c.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(5,new Ice.CloseConnectionException);break;case p.requestMsg:4===this._state?c.trace("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(c.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case p.requestBatchMsg:if(4===this._state)c.trace("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(c.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new Ice.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case p.replyMsg:c.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests.del(e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case p.validateConnectionMsg:c.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._callback&&(e.heartbeatCallback=this._callback,++this._dispatchCount);break;default:throw c.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new Ice.UnknownMessageException}}catch(n){if(!(n instanceof Ice.LocalException))throw n;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+n+"\n"+this._desc):this.setState(5,n)}return e},invokeAll:function(e,t,n,i,r,o){try{for(;0<t;){var c=!this._endpoint.datagram()&&0!==n;new a(this._instance,this,o,c,i,n).invoke(r,e),--t,null}e.clear()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.invokeException(e,t)}},scheduleTimeout:function(e,t){if(!(t<0)){var n=this;0!=(e&_.Read)&&(this._readTimeoutId=this._timer.schedule(function(){n.timedOut()},t),this._readTimeoutScheduled=!0),0!=(e&(_.Write|_.Connect))&&(this._writeTimeoutId=this._timer.schedule(function(){n.timedOut()},t),this._writeTimeoutScheduled=!0)}},unscheduleTimeout:function(e){0!=(e&_.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!=(e&(_.Write|_.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(!(this._state<3||0<this._dispatchCount)){var e;if(0<this._holdPromises.length){for(e=0;e<this._holdPromises.length;++e)this._holdPromises[e].succeed();this._holdPromises=[]}if(6===this._state&&0<this._finishedPromises.length){for(this._adapter=null,e=0;e<this._finishedPromises.length;++e)this._finishedPromises[e].succeed();this._finishedPromises=[]}}},reap:function(){null!==this._monitor&&this._monitor.reap(this)},read:function(e){var t=e.position,n=this._transceiver.read(e,this._hasMoreData);if(3<=this._instance.traceLevels().network&&e.position!=t){var i=[];i.push("received "),this._endpoint.datagram()?i.push(e.limit):(i.push(e.position-t),i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n},write:function(e){var t=e.position,n=this._transceiver.write(e);if(3<=this._instance.traceLevels().network&&e.position!=t){var i=[];i.push("sent "),i.push(e.position-t),this._endpoint.datagram()||(i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n}});v.ObjectAdapterDeactivated=0,v.CommunicatorDestroyed=1,Ice.ConnectionI=v;var S=y({__init__:function(){this.stream=null,this.outAsync=null,this.compress=!1,this.requestId=0,this.prepared=!1},canceled:function(){d.assert(null!==this.outAsync),this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new s(this.stream.instance,p.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}},sent:function(){null!==this.outAsync&&this.outAsync.__sent()},completed:function(e){null!==this.outAsync&&this.outAsync.__completedEx(e)}});S.createForStream=function(e,t,n){var i=new S;return i.stream=e,i.compress=t,i.adopt=n,i.isSent=!1,i.requestId=0,i.outAsync=null,i},S.create=function(e,t,n,i){var r=new S;return r.stream=t,r.compress=n,r.outAsync=e,r.requestId=i,r.isSent=!1,r.adopt=!1,r}}(),st=Ice.__M.module("IceSSL"),lt=Ice.HashUtil,Ice.StringUtil,dt=Ice.EndpointI,ut=(0,Ice.Class)(dt,{__init__:function(e,t,n){this._instance=e,this._delegate=t,this._resource=n||"/"},getInfo:function(){var e=this._delegate.secure()?new st.WSSEndpointInfo:new Ice.WSEndpointInfo;return e.resource=this._resource,this._delegate.fillEndpointInfo(e),e},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){return e===this._delegate.timeout()?this:new ut(this._instance,this._delegate.changeTimeout(e),this._resource)},changeConnectionId:function(e){return e===this._delegate.connectionId()?this:new ut(this._instance,this._delegate.changeConnectionId(e),this._resource)},compress:function(){return this._delegate.compress()},changeCompress:function(e){return e===this._delegate.compress()?this:new ut(this._instance,this._delegate.changeCompress(e),this._resource)},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=lt.addString(this._hashCode,this._resource)),this._hashCode},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof ut))return this.type()<e.type()?-1:1;var t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0},options:function(){var e=this._delegate.options();return null!==this._resource&&0<this._resource.length&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,n){if("-r"!==e)return!1;if(null===t)throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+n);return this._resource=t,!0}}),void 0!==Ice.WSTransceiver?ut.prototype.connectable=function(){return!0}:ut.prototype.connectable=function(){return!1},Ice.WSEndpoint=ut,ft=Ice.HashMap,ht=Ice.RouterInfo,pt=Ice.RouterPrx,_t=Ice.Class({__init__:function(){this._table=new ft(ft.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear()},find:function(e){if(null===e)return null;var t=pt.uncheckedCast(e.ice_router(null)),n=this._table.get(t);return void 0===n&&(n=new ht(t),this._table.set(t,n)),n},erase:function(e){var t=null;if(null!==e){var n=pt.uncheckedCast(e.ice_router(null));t=this._table.get(n),this._table.del(n)}return t}}),Ice.RouterManager=_t,Ct=Ice.Class,gt=Ice.Debug,Rt=Ct({__init__:function(e,t,n,i){if(void 0===e)return this.timeout=6e4,this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation,void(this.close=Ice.ACMClose.CloseOnInvocationAndIdle);var r;r="Ice.ACM.Client"!=n&&"Ice.ACM.Server"!=n||0!==e.getProperty(n+".Timeout").length?n+".Timeout":n,this.timeout=1e3*e.getPropertyAsIntWithDefault(r,i.timeout/1e3);var o=e.getPropertyAsIntWithDefault(n+".Heartbeat",i.heartbeat.value);0<=o&&o<=Ice.ACMHeartbeat.maxValue?this.heartbeat=Ice.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+n+".Heartbeat', default value will be used instead"),this.heartbeat=i.heartbeat);var c=e.getPropertyAsIntWithDefault(n+".Close",i.close.value);0<=c&&c<=Ice.ACMClose.maxValue?this.close=Ice.ACMClose.valueOf(c):(t.warning("invalid value for property `"+n+".Close', default value will be used instead"),this.close=i.close)}}),mt=Ct({add:function(){gt.assert(!1)},remove:function(){gt.assert(!1)},reap:function(){gt.assert(!1)},acm:function(){return gt.assert(!1),null},getACM:function(){return gt.assert(!1),0}}),It=Ct(mt,{__init__:function(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]},destroy:function(){null!==this._instance&&(this._instance=null,this._connections=null)},add:function(e){if(0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length)){var t=this;this._timerToken=this._instance.timer().scheduleRepeated(function(){t.runTimerTask()},this._config.timeout/2)}},remove:function(e){if(0!==this._config.timeout){var t=this._connections.indexOf(e);gt.assert(0<=t),this._connections.splice(t,1),0!==this._connections.length||this._instance.timer().cancel(this._timerToken)}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,t,n){gt.assert(null!==this._instance);var i=new Rt;return i.timeout=this._config.timeout,i.close=this._config.close,i.heartbeat=this._config.heartbeat,void 0!==e&&(i.timeout=1e3*e),void 0!==t&&(i.close=t),void 0!==n&&(i.heartbeat=n),new yt(this,this._instance.timer(),i)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(0===this._reapedConnections.length)return null;var e=this._reapedConnections;return this._reapedConnections=[],e},runTimerTask:function(){if(null!==this._instance)for(var e=Date.now(),t=0;t<this._connections.length;t++)try{this._connections[t].monitor(e,this._config)}catch(e){this.handleException(e)}},handleException:function(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}),yt=Ct(mt,{__init__:function(e,t,n){this._parent=e,this._timer=t,this._config=n,this._connection=null},add:function(e){if(gt.assert(null===this._connection),this._connection=e,0<this._config.timeout){var t=this;this._timerToken=this._timer.scheduleRepeated(function(){t.runTimerTask()},this._config.timeout/2)}},remove:function(e){gt.assert(this._connection===e),this._connection=null,0<this._config.timeout&&this._timer.cancel(this._timerToken)},reap:function(e){this._parent.reap(e)},acm:function(e,t,n){return this._parent.acm(e,t,n)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},runTimerTask:function(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}}),Ice.FactoryACMMonitor=It,Ice.ACMConfig=Rt,vt=Ice.Context,St=Ice.InitializationException,(Et=Ice.Class({__init__:function(){this._context=new vt},getContext:function(){return new vt(this._context)},setContext:function(e){null!==e&&0<e.size?this._context=new vt(e):this._context.clear()},containsKey:function(e){return null===e&&(e=""),this._context.has(e)},get:function(e){null===e&&(e="");var t=this._context.get(e);return null===t&&(t=""),t},put:function(e,t){null===e&&(e=""),null===t&&(t="");var n=this._context.get(e);return null===n&&(n=""),this._context.set(e,t),n},remove:function(e){null===e&&(e="");var t=this._context.get(e);return this._context.del(e),null===t&&(t=""),t},write:function(e,t){if(0===e.size)Ice.ContextHelper.write(t,this._context);else{var n=null;0===this._context.size?n=e:(n=new vt(this._context)).merge(e),Ice.ContextHelper.write(t,n)}}})).create=function(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new Et;throw new St("'"+e+"' is not a valid value for Ice.ImplicitContext")},Ice.ImplicitContextI=Et,function(){var o=Ice.ArrayUtil,w=Ice.Debug,e=Ice.BatchRequestQueue,i=Ice.HashMap,n=Ice.HashUtil,c=Ice.OpaqueEndpointI,a=Ice.Promise,T=(Ice.Protocol,Ice.ReferenceMode),O=Ice.StringUtil,f=Ice.StringSeqHelper,E=Ice.EndpointSelectionType,r=Ice.Identity,b=Ice.RouterPrx,P=Ice.LocatorPrx,s=Ice.PropertyNames,l=Ice.ConnectionRequestHandler,t=Ice.Class,d=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"],u=t({__init__:function(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null},create:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),i,null,null)},createWithAdapterId:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),null,i,null)},createFixed:function(e,t){return 0===e.name.length&&0===e.category.length?null:new h(this._instance,this._communicator,e,"",t.endpoint().datagram()?T.ModeDatagram:T.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t)},copy:function(e){var t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()},createFromString:function(t,e){if(null==t||0===t.length)return null;var n,i=" \t\n\r",r=0;if(-1==(n=O.findFirstNotOf(t,i,r)))throw new Ice.ProxyParseException("no non-whitespace characters found in `"+t+"'");var o=null;if(-1===(r=O.checkQuote(t,n)))throw new Ice.ProxyParseException("mismatched quotes around identity in `"+t+"'");if(0===r?(-1===(r=O.findFirstOf(t,i+":@",n))&&(r=t.length),o=t.substring(n,r)):(n++,o=t.substring(n,r),r++),n===r)throw new Ice.ProxyParseException("no identity in `"+t+"'");var c=this._instance.stringToIdentity(o);if(0===c.name.length){if(0<c.category.length)throw new Ice.IllegalIdentityException(c);if(-1!=O.findFirstNotOf(t,i,r))throw new Ice.ProxyParseException("invalid characters after identity in `"+t+"'");return null}for(var a="",s=T.ModeTwoway,l=!1,d=this._instance.defaultsAndOverrides().defaultEncoding,u=Ice.Protocol_1_0,f="";-1!==(n=O.findFirstNotOf(t,i,r))&&":"!=t.charAt(n)&&"@"!=t.charAt(n)&&(-1==(r=O.findFirstOf(t,i+":@",n))&&(r=t.length),n!=r);){var h=t.substring(n,r);if(2!=h.length||"-"!=h.charAt(0))throw new Ice.ProxyParseException("expected a proxy option but found `"+h+"' in `"+t+"'");var p=null,_=O.findFirstNotOf(t,i,r);if(-1!=_){var C=t.charAt(_);if("@"!=C&&":"!=C&&"-"!=C){if(n=_,-1==(r=O.checkQuote(t,n)))throw new Ice.ProxyParseException("mismatched quotes around value for "+h+" option in `"+t+"'");0===r?(-1===(r=O.findFirstOf(t,i+":@",n))&&(r=t.length),p=t.substring(n,r)):(n++,p=t.substring(n,r),r++)}}switch(h.charAt(1)){case"f":if(null===p)throw new Ice.ProxyParseException("no argument provided for -f option in `"+t+"'");try{a=O.unescapeString(p,0,p.length)}catch(e){throw new Ice.ProxyParseException("invalid facet in `"+t+"': "+e.message)}break;case"t":if(null!==p)throw new Ice.ProxyParseException("unexpected argument `"+p+"' provided for -t option in `"+t+"'");s=T.ModeTwoway;break;case"o":if(null!==p)throw new Ice.ProxyParseException("unexpected argument `"+p+"' provided for -o option in `"+t+"'");s=T.ModeOneway;break;case"O":if(null!==p)throw new Ice.ProxyParseException("unexpected argument `"+p+"' provided for -O option in `"+t+"'");s=T.ModeBatchOneway;break;case"d":if(null!==p)throw new Ice.ProxyParseException("unexpected argument `"+p+"' provided for -d option in `"+t+"'");s=T.ModeDatagram;break;case"D":if(null!==p)throw new Ice.ProxyParseException("unexpected argument `"+p+"' provided for -D option in `"+t+"'");s=T.ModeBatchDatagram;break;case"s":if(null!==p)throw new Ice.ProxyParseException("unexpected argument `"+p+"' provided for -s option in `"+t+"'");l=!0;break;case"e":if(null===p)throw new Ice.ProxyParseException("no argument provided for -e option in `"+t+"'");try{d=Ice.stringToEncodingVersion(p)}catch(e){throw new Ice.ProxyParseException("invalid encoding version `"+p+"' in `"+t+"':\n"+e.str)}break;case"p":if(null===p)throw new Ice.ProxyParseException("no argument provided for -p option in `"+t+"'");try{u=Ice.stringToProtocolVersion(p)}catch(e){throw new Ice.ProxyParseException("invalid protocol version `"+p+"' in `"+t+"':\n"+e.str)}break;default:throw new Ice.ProxyParseException("unknown option `"+h+"' in `"+t+"'")}}if(-1===n)return this.createImpl(c,a,s,l,u,d,null,null,e);var g=[];if(":"==t.charAt(n)){var R=[];for(r=n;r<t.length&&":"==t.charAt(r);){for(r=n=r+1;;){if(-1==(r=t.indexOf(":",r))){r=t.length;break}for(var m=!1,I=n;!(-1==(I=t.indexOf('"',I))||r<I)&&-1!=(I=t.indexOf('"',++I));){if(r<I){m=!0;break}++I}if(!m)break;++r}var y=t.substring(n,r),v=this._instance.endpointFactoryManager().create(y,!1);null!==v?g.push(v):R.push(y)}if(0===g.length)throw w.assert(0<R.length),new Ice.EndpointParseException("invalid endpoint `"+R[0]+"' in `"+t+"'");if(0!==R.length&&0<this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)){var S=[];S.push("Proxy contains unknown endpoints:");for(var E=0;E<R.length;++E)S.push(" `"),S.push(R[E]),S.push("'");this._instance.initializationData().logger.warning(S.join(""))}return this.createImpl(c,a,s,l,u,d,g,null,e)}if("@"!=t.charAt(n))throw new Ice.ProxyParseException("malformed proxy `"+t+"'");if(-1==(n=O.findFirstNotOf(t,i,n+1)))throw new Ice.ProxyParseException("missing adapter id in `"+t+"'");var b=null;if(-1===(r=O.checkQuote(t,n)))throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+t+"'");if(0===r?(-1===(r=O.findFirstOf(t,i,n))&&(r=t.length),b=t.substring(n,r)):(n++,b=t.substring(n,r),r++),r!==t.length&&-1!==O.findFirstNotOf(t,i,r))throw new Ice.ProxyParseException("invalid trailing characters after `"+t.substring(0,r+1)+"' in `"+t+"'");try{f=O.unescapeString(b,0,b.length)}catch(e){throw new Ice.ProxyParseException("invalid adapter id in `"+t+"': "+e.message)}if(0===f.length)throw new Ice.ProxyParseException("empty adapter id in `"+t+"'");return this.createImpl(c,a,s,l,u,d,null,f,e)},createFromStream:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var n,i=f.read(t);if(0<i.length){if(1<i.length)throw new Ice.ProxyUnmarshalException;n=i[0]}else n="";var r=t.readByte();if(r<0||r>T.ModeLast)throw new Ice.ProxyUnmarshalException;var o=t.readBool(),c=null,a=null;t.getReadEncoding().equals(Ice.Encoding_1_0)?(c=Ice.Protocol_1_0,a=Ice.Encoding_1_0):((c=new Ice.ProtocolVersion).__read(t),(a=new Ice.EncodingVersion).__read(t));var s=null,l=null,d=t.readSize();if(0<d){s=[];for(var u=0;u<d;u++)s[u]=this._instance.endpointFactoryManager().read(t)}else l=t.readString();return this.createImpl(e,n,r,o,c,a,s,l,null)},setDefaultRouter:function(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;var t=new u(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;var t=new u(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t,n,i=[];for(t=0;t<s.clPropNames.length;++t)if(0===e.indexOf(s.clPropNames[t]+"."))return;for(var r=this._instance.initializationData().properties.getPropertiesForPrefix(e+".").entries;null!==r;r=r.next){var o=!1;for(t=0,n=d.length;t<n;++t)if(r.key===e+"."+d[t]){o=!0;break}o||i.push(r.key)}if(0<i.length){var c=[];for(c.push("found unknown properties for proxy '"),c.push(e),c.push("':"),t=0,n=i.length;t<n;++t)c.push("\n    "),c.push(i[t]);this._instance.initializationData().logger.warning(c.join(""))}},createImpl:function(e,t,n,i,r,o,c,a,s){var l=this._instance.defaultsAndOverrides(),d=null;null!==this._defaultLocator&&(d=this._defaultLocator.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(this._defaultLocator):this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(o)));var u=this._instance.routerManager().find(this._defaultRouter),f=!0,h=l.defaultPreferSecure,p=l.defaultEndpointSelection,_=l.defaultLocatorCacheTimeout,C=l.defaultInvocationTimeout;if(null!==s&&0<s.length){var g,R=this._instance.initializationData().properties;0<R.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)&&this.checkForUnknownProperties(s),g=s+".Locator";var m=P.uncheckedCast(this._communicator.propertyToProxy(g));null!==m&&(d=m.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(m):this._instance.locatorManager().find(m.ice_encodingVersion(o))),g=s+".Router";var I=b.uncheckedCast(this._communicator.propertyToProxy(g));if(null!==I){if(s.lastIndexOf(".Router")==s.length-".Router".length){var y="`"+g+"="+R.getProperty(g)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(y)}else u=this._instance.routerManager().find(I)}if(g=s+".ConnectionCached",f=0<R.getPropertyAsIntWithDefault(g,f?1:0),g=s+".PreferSecure",h=0<R.getPropertyAsIntWithDefault(g,h?1:0),g=s+".EndpointSelection",0<R.getProperty(g).length){var v=R.getProperty(g);if("Random"==v)p=E.Random;else{if("Ordered"!=v)throw new Ice.EndpointSelectionTypeParseException("illegal value `"+v+"'; expected `Random' or `Ordered'");p=E.Ordered}}g=s+".LocatorCacheTimeout";var S=R.getProperty(g);0!==S.length&&(_=R.getPropertyAsIntWithDefault(g,_))<-1&&(_=-1,this._instance.initializationData().logger.warning("invalid value for"+g+"`"+R.getProperty(g)+"': defaulting to -1")),g=s+".InvocationTimeout",0!==(S=R.getProperty(g)).length&&(C=R.getPropertyAsIntWithDefault(g,C))<1&&-1!==C&&(C=-1,this._instance.initializationData().logger.warning("invalid value for"+g+"`"+R.getProperty(g)+"': defaulting to -1"))}return new M(this._instance,this._communicator,e,t,n,i,r,o,c,a,d,u,f,h,p,_,C)}});Ice.ReferenceFactory=u;var g=t({__init__:function(e,t,n,i,r,o,c,a,s){w.assert(void 0===n||null!==n.name),w.assert(void 0===n||null!==n.category),w.assert(void 0===i||null!==i),this._instance=e,this._communicator=t,this._mode=r,this._secure=o,this._identity=n,this._context=g._emptyContext,this._facet=i,this._protocol=c,this._encoding=a,this._invocationTimeout=s,this._hashInitialized=!1,this._overrideCompress=!1,this._compress=!1},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){return w.assert(!1),null},getAdapterId:function(){return w.assert(!1),""},getRouterInfo:function(){return w.assert(!1),null},getLocatorInfo:function(){return w.assert(!1),null},getCacheConnection:function(){return w.assert(!1),!1},getPreferSecure:function(){return w.assert(!1),!1},getEndpointSelection:function(){return w.assert(!1),null},getLocatorCacheTimeout:function(){return w.assert(!1),0},getConnectionId:function(){return w.assert(!1),""},changeContext:function(e){null==e&&(e=g._emptyContext);var t=this._instance.referenceFactory().copy(this);return 0===e.size?t._context=g._emptyContext:t._context=new i(e),t},changeMode:function(e){if(e===this._mode)return this;var t=this._instance.referenceFactory().copy(this);return t._mode=e,t},changeSecure:function(e){if(e===this._secure)return this;var t=this._instance.referenceFactory().copy(this);return t._secure=e,t},changeIdentity:function(e){if(e.equals(this._identity))return this;var t=this._instance.referenceFactory().copy(this);return t._identity=new r(e.name,e.category),t},changeFacet:function(e){if(e===this._facet)return this;var t=this._instance.referenceFactory().copy(this);return t._facet=e,t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout)return this;var t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t},changeEncoding:function(e){if(e.equals(this._encoding))return this;var t=this._instance.referenceFactory().copy(this);return t._encoding=e,t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e)return this;var t=this._instance.referenceFactory().copy(this);return t._compress=e,t._overrideCompress=!0,t},changeAdapterId:function(){return w.assert(!1),null},changeEndpoints:function(){return w.assert(!1),null},changeLocator:function(){return w.assert(!1),null},changeRouter:function(){return w.assert(!1),null},changeCacheConnection:function(){return w.assert(!1),null},changePreferSecure:function(){return w.assert(!1),null},changeEndpointSelection:function(){return w.assert(!1),null},changeLocatorCacheTimeout:function(){return w.assert(!1),null},changeTimeout:function(){return w.assert(!1),null},changeConnectionId:function(){return w.assert(!1),null},hashCode:function(){if(this._hashInitialized)return this._hashValue;var e=5381;if(e=n.addNumber(e,this._mode),e=n.addBoolean(e,this._secure),e=n.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(var t=this._context.entries;null!==t;t=t.next)e=n.addString(e,t.key),e=n.addString(e,t.value);return e=n.addString(e,this._facet),e=n.addBoolean(e,this._overrideCompress),this._overrideCompress&&(e=n.addBoolean(e,this._compress)),e=n.addHashable(e,this._protocol),e=n.addHashable(e,this._encoding),e=n.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue},isIndirect:function(){return w.assert(!1),!1},isWellKnown:function(){return w.assert(!1),!1},streamWrite:function(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getWriteEncoding().equals(Ice.Encoding_1_0)||(this._protocol.__write(e),this._encoding.__write(e))},toString:function(){var e=[],t=this._instance.identityToString(this._identity);if(-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t),0<this._facet.length){e.push(" -f ");var n=O.escapeString(this._facet,"");-1!=n.search(/[ :@]/)?(e.push('"'),e.push(n),e.push('"')):e.push(n)}switch(this._mode){case T.ModeTwoway:e.push(" -t");break;case T.ModeOneway:e.push(" -o");break;case T.ModeBatchOneway:e.push(" -O");break;case T.ModeDatagram:e.push(" -d");break;case T.ModeBatchDatagram:e.push(" -D")}return this._secure&&e.push(" -s"),this._protocol.equals(Ice.Protocol_1_0)||(e.push(" -p "),e.push(Ice.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(Ice.encodingVersionToString(this._encoding)),e.join("")},toProperty:function(){return w.assert(!1),null},getRequestHandler:function(){w.assert(!1)},getBatchRequestQueue:function(){w.assert(!1)},equals:function(e){return this._mode===e._mode&&(this._secure===e._secure&&(!!this._identity.equals(e._identity)&&(!!this._context.equals(e._context)&&(this._facet===e._facet&&(this._overrideCompress===e._overrideCompress&&((!this._overrideCompress||this._compress===e._compress)&&(!!this._protocol.equals(e._protocol)&&(!!this._encoding.equals(e._encoding)&&this._invocationTimeout===e._invocationTimeout))))))))},clone:function(){return w.assert(!1),null},copyMembers:function(e){e._context=this._context,e._overrideCompress=this._overrideCompress,e._compress=this._compress}});g._emptyContext=new i,g._emptyEndpoints=[];var h=t(Ice.Reference=g,{__init__:function(e,t,n,i,r,o,c,a){g.call(this,e,t,n,i,r,o,Ice.Protocol_1_0,c),this._fixedConnection=a},getEndpoints:function(){return g._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!0},getPreferSecure:function(){return!1},getEndpointSelection:function(){return E.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(){throw new Ice.FixedProxyException},changeEndpoints:function(){throw new Ice.FixedProxyException},changeLocator:function(){throw new Ice.FixedProxyException},changeRouter:function(){throw new Ice.FixedProxyException},changeCacheConnection:function(){throw new Ice.FixedProxyException},changePreferSecure:function(){throw new Ice.FixedProxyException},changeEndpointSelection:function(){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(){throw new Ice.FixedProxyException},changeTimeout:function(){throw new Ice.FixedProxyException},changeConnectionId:function(){throw new Ice.FixedProxyException},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(){throw new Ice.FixedProxyException},clone:function(){var e=new h(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);return this.copyMembers(e),e},getRequestHandler:function(e){switch(this.getMode()){case T.ModeTwoway:case T.ModeOneway:case T.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("");break;case T.ModeDatagram:case T.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("")}var t,n=this.getInstance().defaultsAndOverrides();if((n.overrideSecure?n.overrideSecureValue:this.getSecure())&&!this._fixedConnection.endpoint().secure())throw new Ice.NoEndpointException("");return this._fixedConnection.throwException(),t=n.overrideCompress?n.overrideCompressValue:this._overrideCompress?this._compress:this._fixedConnection.endpoint().compress(),e.__setRequestHandler(new l(this,this._fixedConnection,t))},getBatchRequestQueue:function(){return this._fixedConnection.getBatchRequestQueue()},equals:function(e){return this===e||e instanceof h&&(!!g.prototype.equals.call(this,e)&&this._fixedConnection.equals(e._fixedConnection))}});Ice.FixedReference=h;var M=t(g,{__init__:function(e,t,n,i,r,o,c,a,s,l,d,u,f,h,p,_,C){g.call(this,e,t,n,i,r,o,c,a,C),this._endpoints=s,this._adapterId=l,this._locatorInfo=d,this._routerInfo=u,this._cacheConnection=f,this._preferSecure=h,this._endpointSelection=p,this._locatorCacheTimeout=_,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=g._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId="",w.assert(0===this._adapterId.length||0===this._endpoints.length)},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=g.prototype.changeEncoding.call(this,e);if(t!==this){var n=t._locatorInfo;null===n||n.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(n.getLocator().ice_encodingVersion(e)))}return t},changeCompress:function(e){var t=g.prototype.changeCompress.call(this,e);if(t!==this&&0<this._endpoints.length){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeCompress(e);t._endpoints=n}return t},changeAdapterId:function(e){if(this._adapterId===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=g._emptyEndpoints,t},changeEndpoints:function(e){if(o.equals(e,this._endpoints,function(e,t){return e.equals(t)}))return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpoints=e,t._adapterId="",t.applyOverrides(t._endpoints),t},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._locatorInfo=t,n},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._routerInfo=t,n},changeCacheConnection:function(e){if(e===this._cacheConnection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t},changePreferSecure:function(e){if(e===this._preferSecure)return this;var t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t},changeEndpointSelection:function(e){if(e===this._endpointSelection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._timeout=e,t._overrideTimeout=!0,0<this._endpoints.length){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeTimeout(e);t._endpoints=n}return t},changeConnectionId:function(e){if(this._connectionId===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._connectionId=e,0<this._endpoints.length){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeConnectionId(e);t._endpoints=n}return t},isIndirect:function(){return 0===this._endpoints.length},isWellKnown:function(){return 0===this._endpoints.length&&0===this._adapterId.length},streamWrite:function(e){if(g.prototype.streamWrite.call(this,e),e.writeSize(this._endpoints.length),0<this._endpoints.length){w.assert(0===this._adapterId.length);for(var t=0;t<this._endpoints.length;++t)e.writeShort(this._endpoints[t].type()),this._endpoints[t].streamWrite(e)}else e.writeString(this._adapterId)},toString:function(){var e=[];if(e.push(g.prototype.toString.call(this)),0<this._endpoints.length)for(var t=0;t<this._endpoints.length;++t){var n=this._endpoints[t].toString();null!==n&&0<n.length&&(e.push(":"),e.push(n))}else if(0<this._adapterId.length){e.push(" @ ");var i=O.escapeString(this._adapterId,null);-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i)}return e.join("")},toProperty:function(e){var t,n=new i;if(n.set(e,this.toString()),n.set(e+".CollocationOptimized","0"),n.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),n.set(e+".PreferSecure",this._preferSecure?"1":"0"),n.set(e+".EndpointSelection",this._endpointSelection===E.Random?"Random":"Ordered"),n.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout),n.set(e+".InvocationTimeout",""+this.getInvocationTimeout()),null!==this._routerInfo)for(t=this._routerInfo.getRouter().__reference().toProperty(e+".Router").entries;null!==t;t=t.next)n.set(t.key,t.value);if(null!==this._locatorInfo)for(t=this._locatorInfo.getLocator().__reference().toProperty(e+".Locator").entries;null!==t;t=t.next)n.set(t.key,t.value);return n},hashCode:function(){return this._hashInitialized||(g.prototype.hashCode.call(this),this._hashValue=n.addString(this._hashValue,this._adapterId)),this._hashValue},equals:function(e){return this===e||e instanceof M&&(!!g.prototype.equals.call(this,e)&&(!(null===this._locatorInfo?null!==e._locatorInfo:!this._locatorInfo.equals(e._locatorInfo))&&(!(null===this._routerInfo?null!==e._routerInfo:!this._routerInfo.equals(e._routerInfo))&&(this._cacheConnection===e._cacheConnection&&(this._preferSecure===e._preferSecure&&(this._endpointSelection===e._endpointSelection&&(this._locatorCacheTimeout===e._locatorCacheTimeout&&(this._connectionId===e._connectionId&&(this._overrideTimeout===e._overrideTimeout&&((!this._overrideTimeout||this._timeout===e._timeout)&&(!!o.equals(this._endpoints,e._endpoints,function(e,t){return e.equals(t)})&&this._adapterId===e._adapterId)))))))))))},getRequestHandler:function(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)},getBatchRequestQueue:function(){return new e(this._instance,this._mode===T.ModeBatchDatagram)},getConnection:function(){var n=new a;if(null!==this._routerInfo){var t=this;this._routerInfo.getClientEndpoints().then(function(e){0<e.length?(t.applyOverrides(e),t.createConnection(e).then(function(e,t){n.succeed(e,t)},function(e){n.fail(e)})):t.getConnectionNoRouterInfo(n)}).exception(function(e){n.fail(e)})}else this.getConnectionNoRouterInfo(n);return n},getConnectionNoRouterInfo:function(r){if(0<this._endpoints.length)this.createConnection(this._endpoints).then(function(e,t){r.succeed(e,t)}).exception(function(e){r.fail(e)});else{var o=this;null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then(function(e,i){0!==e.length?(o.applyOverrides(e),o.createConnection(e).then(function(e,t){r.succeed(e,t)},function(e){if(e instanceof Ice.NoEndpointException)r.fail(e);else{if(w.assert(null!==o._locatorInfo),o.getLocatorInfo().clearCache(o),i){var t=o.getInstance().traceLevels();if(2<=t.retry){var n="connection to cached endpoints failed\nremoving endpoints from cache and trying one more time\n"+e.toString();o.getInstance().initializationData().logger.trace(t.retryCat,n)}return void o.getConnectionNoRouterInfo(r)}r.fail(e)}})):r.fail(new Ice.NoEndpointException(o.toString()))}).exception(function(e){r.fail(e)}):r.fail(new Ice.NoEndpointException(this.toString()))}},clone:function(){var e=new M(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e},copyMembers:function(e){g.prototype.copyMembers.call(this,e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideCompress&&(e[t]=e[t].changeCompress(this._compress)),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))},filterEndpoints:function(e){for(var t=[],n=0;n<e.length;++n)e[n]instanceof c||!e[n].connectable()||t.push(e[n]);switch(this.getMode()){case T.ModeTwoway:case T.ModeOneway:case T.ModeBatchOneway:t=o.filter(t,function(e,t,n){return!e.datagram()});break;case T.ModeDatagram:case T.ModeBatchDatagram:t=o.filter(t,function(e,t,n){return e.datagram()})}switch(this.getEndpointSelection()){case E.Random:o.shuffle(t);break;case E.Ordered:break;default:w.assert(!1)}var i=this.getInstance().defaultsAndOverrides();if(i.overrideSecure?i.overrideSecureValue:this.getSecure())t=o.filter(t,function(e,t,n){return e.secure()});else{var r=this.getPreferSecure();t.sort(function(e,t){var n=e.secure(),i=t.secure();return n&&i||!n&&!i?0:!n&&i?r?1:-1:r?-1:1})}return t},createConnection:function(e){var t=this.filterEndpoints(e);if(0===t.length)return(new a).fail(new Ice.NoEndpointException(this.toString()));var n,i=new a,r=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length)n=new p(this,null,i),r.create(t,!1,this.getEndpointSelection()).then(function(e,t){n.setConnection(e,t)}).exception(function(e){n.setException(e)});else{var o=[t[0]];n=new p(this,t,i),r.create(o,!0,this.getEndpointSelection()).then(function(e,t){n.setConnection(e,t)}).exception(function(e){n.setException(e)})}return i}});Ice.RoutableReference=M;var p=t({__init__:function(e,t,n){this.ref=e,this.endpoints=t,this.promise=n,this.i=0,this.exception=null},setConnection:function(e,t){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.succeed(e,t)},setException:function(e){if(null===this.exception&&(this.exception=e),null!==this.endpoints&&++this.i!==this.endpoints.length){var t=this.i!=this.endpoints.length-1,n=[this.endpoints[this.i]],i=this;this.ref.getInstance().outgoingConnectionFactory().create(n,t,this.ref.getEndpointSelection()).then(function(e,t){i.setConnection(e,t)}).exception(function(e){i.setException(e)})}else this.promise.fail(this.exception)}})}(),bt=Ice.Debug,wt=Ice.BasicStream,Tt=Ice.EndpointParseException,Ot=Ice.OpaqueEndpointI,Pt=Ice.Protocol,Mt=Ice.StringUtil,Dt=Ice.Class({__init__:function(e){this._instance=e,this._factories=[]},add:function(e){for(var t=0;t<this._factories.length;++t)bt.assert(this._factories[t].type()!=e.type());this._factories.push(e)},get:function(e){for(var t=0;t<this._factories.length;++t)if(this._factories[t].type()===e)return this._factories[t];return null},create:function(e,t){var n=e.trim();if(0===n.length)throw new Tt("value has no non-whitespace characters");var i=Mt.splitString(n," \t\n\r");if(0===i.length)throw new Tt("value has no non-whitespace characters");var r=i[0];i.splice(0,1),"default"===r&&(r=this._instance.defaultsAndOverrides().defaultProtocol);for(var o=0,c=this._factories.length;o<c;++o)if(this._factories[o].protocol()===r){var a=this._factories[o].create(i,t);if(0<i.length)throw new Tt("unrecognized argument `"+i[0]+"' in endpoint `"+e+"'");return a}if("opaque"!==r)return null;var s=new Ot;if(s.initWithOptions(i),0<i.length)throw new Tt("unrecognized argument `"+i[0]+"' in endpoint `"+e+"'");for(o=0,c=this._factories.length;o<c;++o)if(this._factories[o].type()==s.type()){var l=new wt(this._instance,Pt.currentProtocolEncoding);l.writeShort(s.type()),s.streamWrite(l),l.pos=0,l.readShort(),l.startReadEncaps();var d=this._factories[o].read(l);return l.endReadEncaps(),d}return s},read:function(e){for(var t,n=e.readShort(),i=0;i<this._factories.length;++i)if(this._factories[i].type()==n)return e.startReadEncaps(),t=this._factories[i].read(e),e.endReadEncaps(),t;return e.startReadEncaps(),(t=new Ot(n)).initWithStream(e),e.endReadEncaps(),t},destroy:function(){for(var e=0;e<this._factories.length;++e)this._factories[e].destroy();this._factories=[]}}),Ice.EndpointFactoryManager=Dt,xt=Ice.Debug,At=Ice.HashMap,Nt=Ice.ObjectPrx,Vt=Ice.StringUtil,kt=Ice.Identity,Lt=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(0<t.length){this._retryIntervals=[];for(var n=0;n<t.length;n++){var i;try{i=Vt.toInt(t[n])}catch(e){i=0}if(0===n&&-1===i)break;this._retryIntervals[n]=0<i?i:0}}else this._retryIntervals=[0]},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){return null!==e?e.__reference().toString():""},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e),n=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(n)},proxyToProperty:function(e,t){return null!==e?e.__reference().toProperty(t):new At},streamToProxy:function(e,t){var n=new kt;n.__read(e);var i=this._instance.referenceFactory().createFromStream(n,e);return this.referenceToProxy(i,t)},referenceToProxy:function(e,t){if(null===e)return null;var n=t?new t:new Nt;return n.__setup(e),n},proxyToStream:function(e,t){if(null!==e){var n=e.__reference();n.getIdentity().__write(t),n.streamWrite(t)}else{new kt("","").__write(t)}},checkRetryAfterException:function(e,t,n,i){var r,o=this._instance.traceLevels(),c=this._instance.initializationData().logger;if(t.getMode()===Ice.Reference.ModeBatchOneway||t.getMode()===Ice.Reference.ModeBatchDatagram)throw e;if(e instanceof Ice.ObjectNotExistException){var a=e;if(null!==t.getRouterInfo()&&"ice_add_proxy"===a.operation)return t.getRouterInfo().clearCache(t),1<=o.retry&&c.trace(o.retryCat,"retrying operation call to add proxy to router\n"+e.toString()),null!==n&&(n.value=0),i;if(!t.isIndirect())throw e;if(t.isWellKnown()){var s=t.getLocatorInfo();null!==s&&s.clearCache(t)}}else if(e instanceof Ice.RequestFailedException)throw e;if(e instanceof Ice.MarshalException)throw e;if(e instanceof Ice.CommunicatorDestroyedException||e instanceof Ice.ObjectAdapterDeactivatedException)throw e;if(e instanceof Ice.InvocationTimeoutException||e instanceof Ice.InvocationCanceledException)throw e;if(++i,xt.assert(0<i),i===this._retryIntervals.length+1&&e instanceof Ice.CloseConnectionException)r=0;else{if(i>this._retryIntervals.length)throw 1<=o.retry&&c.trace(o.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+e.toString()),e;r=this._retryIntervals[i-1]}if(1<=o.retry){var l="retrying operation call";0<r&&(l+=" in "+r+"ms"),l+=" because of exception\n"+e.toString(),c.trace(o.retryCat,l)}return xt.assert(null!==n),n.value=r,i}}),Ice.ProxyFactory=Lt,Ut=Ice.FormatType,Ft=Ice.EndpointSelectionType,jt=Ice.Protocol,Ice.DefaultsAndOverrides=function(e,t){this.defaultProtocol=e.getPropertyWithDefault("Ice.Default.Protocol",void 0!==Ice.TcpEndpointFactory?"tcp":"ws");var n=e.getProperty("Ice.Default.Host");if(this.defaultHost=0<n.length?n:null,n=e.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=0<n.length?n:null,0<(n=e.getProperty("Ice.Override.Timeout")).length?(this.overrideTimeout=!0,this.overrideTimeoutValue=e.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,t.warning("invalid value for Ice.Override.Timeout `"+e.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),0<(n=e.getProperty("Ice.Override.ConnectTimeout")).length?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=e.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,t.warning("invalid value for Ice.Override.ConnectTimeout `"+e.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),0<(n=e.getProperty("Ice.Override.CloseTimeout")).length?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=e.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,t.warning("invalid value for Ice.Override.CloseTimeout `"+e.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideCompress=!1,this.overrideSecure=!1,"Random"===(n=e.getPropertyWithDefault("Ice.Default.EndpointSelection","Random")))this.defaultEndpointSelection=Ft.Random;else{if("Ordered"!==n){var i=new Ice.EndpointSelectionTypeParseException;throw i.str="illegal value `"+n+"'; expected `Random' or `Ordered'",i}this.defaultEndpointSelection=Ft.Ordered}this.defaultTimeout=e.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,t.warning("invalid value for Ice.Default.Timeout `"+e.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=e.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,t.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+e.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=e.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,t.warning("invalid value for Ice.Default.InvocationTimeout `"+e.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=0<e.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0),n=e.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(jt.currentEncoding)),this.defaultEncoding=Ice.stringToEncodingVersion(n),jt.checkSupportedEncoding(this.defaultEncoding);var r=0<e.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0);this.defaultFormat=r?Ut.SlicedFormat:Ut.CompactFormat},Bt=Ice.StringUtil,Ht=Ice.Identity,qt=Ice.IdentityParseException,Ice.stringToIdentity=function(t){for(var e=new Ht,n=-1,i=0;-1!==(i=t.indexOf("/",i));){for(var r=0;0<i-r&&"\\"==t.charAt(i-r-1);)r++;if(r%2==0){if(-1!=n)throw(o=new qt).str="unescaped backslash in identity `"+t+"'",o;n=i}i++}if(-1==n){e.category="";try{e.name=Bt.unescapeString(t)}catch(e){throw(o=new qt).str="invalid identity name `"+t+"': "+o.toString(),o}}else{try{e.category=Bt.unescapeString(t,0,n)}catch(e){throw(o=new qt).str="invalid category in identity `"+t+"': "+o.toString(),o}if(n+1<t.length)try{e.name=Bt.unescapeString(t,n+1,t.length)}catch(e){var o;throw(o=new qt).str="invalid name in identity `"+t+"': "+o.toString(),o}else e.name=""}return e},Ice.identityToString=function(e){return null===e.category||0===e.category.length?Bt.escapeString(e.name,"/"):Bt.escapeString(e.category,"/")+"/"+Bt.escapeString(e.name,"/")},Ice.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();return 0!==(n=i.name.localeCompare(r.name))?n:i.category.localeCompare(r.category)},Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();if(0!==(n=i.name.localeCompare(r.name)))return n;if(0!==(n=i.category.localeCompare(r.category)))return n;var o=e.ice_getFacet(),c=t.ice_getFacet();return null===o&&null===c?0:null===o?-1:null===c?1:o.localeCompare(c)},function(){Ice.ArrayUtil;var e=Ice.AsyncResultBase,i=Ice.ConnectionI,d=(Ice.ConnectionReaper,Ice.Debug),r=Ice.HashMap,c=Ice.Promise,n=(Ice.EndpointSelectionType,Ice.FactoryACMMonitor),t=Ice.Class,o=t({__init__:function(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new n(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new a,this._pending=new r(r.compareEquals),this._pendingConnectCount=0,this._waitPromise=null},destroy:function(){this._destroyed||(this._connectionsByEndpoint.forEach(function(e){e.destroy(i.CommunicatorDestroyed)}),this._destroyed=!0,this._communicator=null,this.checkFinished())},waitUntilFinished:function(){return this._waitPromise=new c,this.checkFinished(),this._waitPromise},create:function(e,t,n){d.assert(0<e.length);var i=this.applyOverrides(e);try{var r={value:!1},o=this.findConnectionByEndpoint(i,r);if(null!==o)return(new c).succeed(o,r.value)}catch(e){return(new c).fail(e)}return new s(this,i,t,n).start()},setRouterInfo:function(a){var s=this;return Ice.Promise.try2(function(){if(s._destroyed)throw new Ice.CommunicatorDestroyedException;return a.getClientEndpoints()}).then(function(e){for(var t=a.getAdapter(),n=s._instance.defaultsAndOverrides(),i=0;i<e.length;++i){var r=e[i];n.overrideTimeout&&(r=r.changeTimeout(n.overrideTimeoutValue)),r=r.changeCompress(!1);for(var o=0;o<s._connectionsByEndpoint.length;++o){var c=s._connectionsByEndpoint[o];c.endpoint().equals(r)&&c.setAdapter(t)}}})},removeAdapter:function(t){this._destroyed||this._connectionsByEndpoint.forEach(function(e){e.getAdapter()===t&&e.setAdapter(null)})},flushAsyncBatchRequests:function(){var t=new e(this._communicator,"flushBatchRequests",null,null,null);if(!this._destroyed)return c.all(this._connectionsByEndpoint.map(function(e){if(e.isActiveOrHolding())return e.flushBatchRequests().exception(function(e){if(!(e instanceof Ice.LocalException))throw e})})).then(function(){t.succeed(t)},function(e){t.fail(e,t)}),t;t.succeed()},applyOverrides:function(e){for(var t=this._instance.defaultsAndOverrides(),n=[],i=0;i<e.length;++i){var r=e[i];t.overrideTimeout?n.push(r.changeTimeout(t.overrideTimeoutValue)):n.push(r)}return n},findConnectionByEndpoint:function(e,t){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var n=this._instance.defaultsAndOverrides();d.assert(0<e.length);for(var i=0;i<e.length;++i){var r=e[i];if(!this._pending.has(r)){var o=this._connectionsByEndpoint.get(r);if(void 0!==o)for(var c=0;c<o.length;++c)if(o[c].isActiveOrHolding())return n.overrideCompress?t.value=n.overrideCompressValue:t.value=r.compress(),o[c]}}return null},incPendingConnectCount:function(){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount,d.assert(0<=this._pendingConnectCount),this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()},getConnection:function(e,t,n){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var i=this._monitor.swapReapedConnections();if(null!==i)for(var r=0;r<i.length;++r){var o=i[r];this._connectionsByEndpoint.removeConnection(o.endpoint(),o),this._connectionsByEndpoint.removeConnection(o.endpoint().changeCompress(!0),o)}for(;;){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var c=this.findConnectionByEndpoint(e,n);if(null!==c)return c;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null},createConnection:function(t,e){d.assert(this._pending.has(e)&&null!==t);var n=null;try{if(this._destroyed)throw new Ice.CommunicatorDestroyedException;n=new i(this._communicator,this._instance,this._monitor,t,e.changeCompress(!1),!1,null)}catch(e){if(e instanceof Ice.LocalException)try{t.close()}catch(e){}throw e}return this._connectionsByEndpoint.set(n.endpoint(),n),this._connectionsByEndpoint.set(n.endpoint().changeCompress(!0),n),n},finishGetConnection:function(e,t,n,i){var r,o,c=[];null!==i&&c.push(i);var a,s=[];for(r=0;r<e.length;++r){var l=e[r],d=this._pending.get(l);if(void 0!==d){this._pending.del(l);for(var u=0;u<d.length;++u)(o=d[u]).hasEndpoint(t)?-1===c.indexOf(o)&&c.push(o):-1===s.indexOf(o)&&s.push(o)}}for(r=0;r<c.length;++r){(o=c[r]).removeFromPending();var f=s.indexOf(o);-1!==f&&s.splice(f,1)}for(r=0;r<s.length;++r)(o=s[r]).removeFromPending();var h=this._instance.defaultsAndOverrides();for(a=h.overrideCompress?h.overrideCompressValue:t.compress(),r=0;r<s.length;++r)(o=s[r]).getConnection();for(r=0;r<c.length;++r)(o=c[r]).setConnection(n,a);this.checkFinished()},finishGetConnectionEx:function(e,t,n){var i,r,o=[];null!==n&&o.push(n);var c=[];for(i=0;i<e.length;++i){var a=e[i],s=this._pending.get(a);if(void 0!==s){this._pending.del(a);for(var l=0;l<s.length;++l)(r=s[l]).removeEndpoints(e)?-1===o.indexOf(r)&&o.push(r):-1===c.indexOf(r)&&c.push(r)}}for(i=0;i<c.length;++i)r=c[i],d.assert(-1===o.indexOf(r)),r.removeFromPending();for(this.checkFinished(),i=0;i<c.length;++i)(r=c[i]).getConnection();for(i=0;i<o.length;++i)(r=o[i]).setException(t)},addToPending:function(e,t){var n,i,r=!1;if(null!==e)for(i=0;i<t.length;++i){n=t[i];var o=this._pending.get(n);void 0!==o&&(r=!0,-1===o.indexOf(e)&&o.push(e))}if(r)return!0;for(i=0;i<t.length;++i)n=t[i],this._pending.has(n)||this._pending.set(n,[]);return!1},removeFromPending:function(e,t){for(var n=0;n<t.length;++n){var i=t[n],r=this._pending.get(i);if(void 0!==r){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}}},handleConnectionException:function(e,t){var n=this._instance.traceLevels();if(2<=n.retry){var i=[];i.push("connection to endpoint failed"),e instanceof Ice.CommunicatorDestroyedException?i.push("\n"):t?i.push(", trying next endpoint\n"):i.push(" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},handleException:function(e,t){var n=this._instance.traceLevels();if(2<=n.retry){var i=[];i.push("couldn't resolve endpoint host"),e instanceof Ice.CommunicatorDestroyedException?i.push("\n"):t?i.push(", trying next endpoint\n"):i.push(" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},checkFinished:function(){if(!(!this._waitPromise||!this._destroyed||0<this._pending.size||0<this._pendingConnectCount)){var o=this;c.all(o._connectionsByEndpoint.map(function(e){return e.waitUntilFinished().exception(function(e){d.assert(!1)})})).then(function(){var e=o._monitor.swapReapedConnections();if(null!==e){for(var t=[],n=o._connectionsByEndpoint.entries;null!==n;n=n.next)for(var i=n.value,r=0;r<i.length;++r)-1===t.indexOf(i[r])&&t.push(i[r]);d.assert(e.length===t.length),o._connectionsByEndpoint.clear()}else d.assert(0===o._connectionsByEndpoint.size);d.assert(null!==o._waitPromise),o._waitPromise.succeed(),o._monitor.destroy()})}}});Ice.OutgoingConnectionFactory=o;var a=t(r,{__init__:function(e){r.call(this,e||r.compareEquals)},set:function(e,t){var n=this.get(e);void 0===n&&(n=[],r.prototype.set.call(this,e,n)),d.assert(t instanceof i),n.push(t)},removeConnection:function(e,t){var n=this.get(e);d.assert(null!==n);var i=n.indexOf(t);d.assert(-1!==i),n.splice(i,1),0===n.length&&this.del(e)},map:function(t){var n=[];return this.forEach(function(e){n.push(t(e))}),n},forEach:function(e){for(var t=this._head;null!==t;t=t._next)for(var n=0;n<t.value.length;++n)e(t.value[n])}}),s=t({__init__:function(e,t,n,i){this._factory=e,this._endpoints=t,this._hasMore=n,this._selType=i,this._promise=new c,this._index=0,this._current=null},connectionStartCompleted:function(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){d.assert(null!==this._current),t instanceof Ice.LocalException?(this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length),t instanceof Ice.CommunicatorDestroyedException?this._factory.finishGetConnectionEx(this._endpoints,t,this):this._index<this._endpoints.length?this.nextEndpoint():this._factory.finishGetConnectionEx(this._endpoints,t,this)):this._factory.finishGetConnectionEx(this._endpoints,t,this)},setConnection:function(e,t){this._promise.succeed(e,t),this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e),this._factory.decPendingConnectCount()},hasEndpoint:function(e){return-1!==this.findEndpoint(e)},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t)if(e.equals(this._endpoints[t]))return t;return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var n=this.findEndpoint(e[t]);-1!==n&&this._endpoints.splice(n,1)}return(this._index=0)===this._endpoints.length},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.fail(e)}return this.getConnection(),this._promise},getConnection:function(){try{var e={value:!1},t=this._factory.getConnection(this._endpoints,this,e);if(null===t)return;this._promise.succeed(t,e.value),this._factory.decPendingConnectCount()}catch(e){this._promise.fail(e),this._factory.decPendingConnectCount()}},nextEndpoint:function(){var t=null,n=this._factory._instance.traceLevels();try{if(d.assert(this._index<this._endpoints.length),this._current=this._endpoints[this._index++],2<=n.network)(r=[]).push("trying to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(n.networkCat,r.join(""));t=this._factory.createConnection(this._current.connect(),this._current);var i=this;t.start().then(function(){i.connectionStartCompleted(t)},function(e){i.connectionStartFailed(t,e)})}catch(e){var r;if(2<=n.network)(r=[]).push("failed to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toString()),r.push("\n"),r.push(e.toString()),this._factory._instance.initializationData().logger.trace(n.networkCat,r.join(""));this.connectionStartFailed(t,e)}}})}(),function(){var s=Ice.Debug,i=Ice.HashMap,l=Ice.Promise,o=Ice.Protocol,n=Ice.LocatorRegisterPrx,e=Ice.Class,t=e({__init__:function(e,t,n){this._locator=e,this._locatorRegistry=null,this._table=t,this._background=n,this._adapterRequests=new i,this._objectRequests=new i(i.compareEquals)},destroy:function(){this._locatorRegistry=null,this._table.clear()},equals:function(e){return this===e||e instanceof t&&this._locator.equals(e._locator)},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(null!==this._locatorRegistry)return(new l).succeed(this._locatorRegistry);var t=this;return this._locator.getRegistry().then(function(e){return t._locatorRegistry=n.uncheckedCast(e.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered)),t._locatorRegistry})},getEndpoints:function(e,t,n,i){var r=i||new l;s.assert(e.isIndirect());var o=null,c={value:!1};if(e.isWellKnown()){var a=this._table.getObjectReference(e.getIdentity(),n,c);if(!c.value){if(!this._background||null===a)return this.getObjectRequest(e).addCallback(e,null,n,r),r;this.getObjectRequest(e).addCallback(e,null,n,null)}if(a.isIndirect()){if(!a.isWellKnown())return this.getEndpoints(a,e,n,r),r}else o=a.getEndpoints()}else if(o=this._table.getAdapterEndpoints(e.getAdapterId(),n,c),!c.value){if(!this._background||null===o)return this.getAdapterRequest(e).addCallback(e,t,n,r),r;this.getAdapterRequest(e).addCallback(e,t,n,null)}return s.assert(null!==o),1<=e.getInstance().traceLevels().location&&this.getEndpointsTrace(e,o,!0),r.succeed(o,!0),r},clearCache:function(e){if(s.assert(e.isIndirect()),e.isWellKnown()){var t=this._table.removeObjectReference(e.getIdentity());null!==t&&(t.isIndirect()?t.isWellKnown()||this.clearCache(t):2<=e.getInstance().traceLevels().location&&this.trace("removed endpoints from locator table",e,t.getEndpoints()))}else{var n=this._table.removeAdapterEndpoints(e.getAdapterId());null!==n&&2<=e.getInstance().traceLevels().location&&this.trace("removed endpoints from locator table\n",e,n)}},trace:function(e,t,n){s.assert(t.isIndirect());var i=[];i.push(e),i.push("\n"),t.isWellKnown()?(i.push("object = "),i.push(t.getInstance().identityToString(t.getIdentity()))):(i.push("adapter = "),i.push(t.getAdapterId())),i.push("\n"),i.push("endpoints = ");for(var r=0;r<n.length;r++)i.push(n[r].toString()),r+1<n.length&&i.push(":");t.getInstance().initializationData().logger.trace(t.getInstance().traceLevels().locationCat,i.join(""))},getEndpointsException:function(t,e){s.assert(t.isIndirect());var n,i,r=t.getInstance();try{throw e}catch(e){if(e instanceof Ice.AdapterNotFoundException)throw 1<=r.traceLevels().location&&((n=[]).push("adapter not found\n"),n.push("adapter = "),n.push(t.getAdapterId()),r.initializationData().logger.trace(r.traceLevels().locationCat,n.join(""))),(i=new Ice.NotRegisteredException).kindOfObject="object adapter",i.id=t.getAdapterId(),i;if(e instanceof Ice.ObjectNotFoundException)throw 1<=r.traceLevels().location&&((n=[]).push("object not found\n"),n.push("object = "),n.push(r.identityToString(t.getIdentity())),r.initializationData().logger.trace(r.traceLevels().locationCat,n.join(""))),(i=new Ice.NotRegisteredException).kindOfObject="object",i.id=r.identityToString(t.getIdentity()),i;if(e instanceof Ice.NotRegisteredException)throw e;if(e instanceof Ice.LocalException)throw 1<=r.traceLevels().location&&((n=[]).push("couldn't contact the locator to retrieve adapter endpoints\n"),0<t.getAdapterId().length?(n.push("adapter = "),n.push(t.getAdapterId())):(n.push("object = "),n.push(r.identityToString(t.getIdentity()))),n.push("\n"),n.push("reason = "+e.toString()),r.initializationData().logger.trace(r.traceLevels().locationCat,n.join(""))),e;s.assert(!1)}},getEndpointsTrace:function(e,t,n){if(null!==t&&0<t.length)n?this.trace("found endpoints in locator table",e,t):this.trace("retrieved endpoints from locator, adding to locator table",e,t);else{var i=e.getInstance(),r=[];r.push("no endpoints configured for "),0<e.getAdapterId().length?(r.push("adapter\n"),r.push("adapter = "),r.push(e.getAdapterId())):(r.push("object\n"),r.push("object = "),r.push(i.identityToString(e.getIdentity()))),r.push("\n"),i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}},getAdapterRequest:function(e){if(1<=e.getInstance().traceLevels().location){var t=e.getInstance(),n=[];n.push("searching for adapter by id\n"),n.push("adapter = "),n.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._adapterRequests.get(e.getAdapterId());return void 0!==i||(i=new d(this,e),this._adapterRequests.set(e.getAdapterId(),i)),i},getObjectRequest:function(e){if(1<=e.getInstance().traceLevels().location){var t=e.getInstance(),n=[];n.push("searching for object by id\n"),n.push("object = "),n.push(t.identityToString(e.getIdentity())),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._objectRequests.get(e.getIdentity());return void 0!==i||(i=new a(this,e),this._objectRequests.set(e.getIdentity(),i)),i},finishRequest:function(e,t,n,i){if(null===n||n.__reference().isIndirect())for(var r=0;r<t.length;++r)this._table.removeObjectReference(t[r].getIdentity());e.isWellKnown()?(null===n||n.__reference().isWellKnown()?i&&this._table.removeObjectReference(e.getIdentity()):this._table.addObjectReference(e.getIdentity(),n.__reference()),s.assert(this._objectRequests.has(e.getIdentity())),this._objectRequests.del(e.getIdentity())):(null===n||n.__reference().isIndirect()?i&&this._table.removeAdapterEndpoints(e.getAdapterId()):this._table.addAdapterEndpoints(e.getAdapterId(),n.__reference().getEndpoints()),s.assert(this._adapterRequests.has(e.getAdapterId())),this._adapterRequests.del(e.getAdapterId()))}});Ice.LocatorInfo=t;var c=e({__init__:function(e,t,n){this._ref=e,this._ttl=t,this._promise=n},response:function(e,t){var n=null;if(null!==t){var i=t.__reference();if(!this._ref.isWellKnown()||o.isSupported(this._ref.getEncoding(),i.getEncoding()))if(i.isIndirect()){if(this._ref.isWellKnown()&&!i.isWellKnown()){var r=this;return void e.getEndpoints(i,this._ref,this._ttl).then(function(e,t){null!==r._promise&&r._promise.succeed(e,t)},function(e){null!==r._promise&&r._promise.fail(e)})}}else n=i.getEndpoints()}1<=this._ref.getInstance().traceLevels().location&&e.getEndpointsTrace(this._ref,n,!1),null!==this._promise&&this._promise.succeed(null===n?[]:n,!1)},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(e){null!==this._promise&&this._promise.fail(e)}}}),r=e({__init__:function(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null},addCallback:function(e,t,n,i){var r=new c(e,n,i);this._response?r.response(this._locatorInfo,this._proxy):null!==this._exception?r.exception(this._locatorInfo,this._exception):(this._callbacks.push(r),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException),this._exception=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}),a=e(r,{__init__:function(e,t){r.call(this,e,t),s.assert(t.isWellKnown())},send:function(){try{var t=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then(function(e){t.response(e)},function(e){t.exception(e)})}catch(e){this.exception(e)}}}),d=e(r,{__init__:function(e,t){r.call(this,e,t),s.assert(t.isIndirect())},send:function(){try{var t=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then(function(e){t.response(e)},function(e){t.exception(e)})}catch(e){this.exception(e)}}})}(),Kt=Ice.AsyncResultBase,Wt=Ice.Debug,Gt=Ice.Identity,Ice.Promise,zt=Ice.PropertyNames,Qt=Ice.ServantManager,Ice.StringUtil,Xt=["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"],Jt=Ice.Class({__init__:function(e,t,n,i,r,o,c){if(this._instance=e,this._communicator=t,this._objectAdapterFactory=n,this._servantManager=new Qt(e,i),this._name=i,this._routerEndpoints=[],this._routerInfo=null,this._state=0,this._noConfig=o,this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void c.succeed(this,c);var a=this._instance.initializationData().properties,s=[],l=this.filterProperties(s);if(0!==s.length&&0<a.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)){for(var d=["found unknown properties for object adapter `"+i+"':"],u=0;u<s.length;++u)d.push("\n    "+s[u]);this._instance.initializationData().logger.warning(d.join(""))}if(null===r&&l)throw(h=new Ice.InitializationException).reason="object adapter `"+this._name+"' requires configuration",h;var f=a.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+f,"")}catch(e){var h;if(e instanceof Ice.ProxyParseException)throw(h=new Ice.InitializationException).reason="invalid proxy options `"+f+"' for object adapter `"+i+"'",h;throw e}var p=this._instance.messageSizeMax()/1024,_=a.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",p);this._messageSizeMax=_<1||2147483647/1024<_?2147483647:1024*_;try{if(null===r&&(r=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==r){if(this._routerInfo=this._instance.routerManager().find(r),Wt.assert(null!==this._routerInfo),null!==this._routerInfo.getAdapter())throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(r.ice_getIdentity()));var C=this;this._routerInfo.getServerEndpoints().then(function(e){var t;for(t=0;t<e.length;++t)C._routerEndpoints.push(e[t]);for(C._routerEndpoints.sort(function(e,t){return e.compareTo(t)}),t=0;t<C._routerEndpoints.length-1;){var n=C._routerEndpoints[t],i=C._routerEndpoints[t+1];n.equals(i)?C._routerEndpoints.splice(t,1):++t}return C._routerInfo.setAdapter(C),C._instance.outgoingConnectionFactory().setRouterInfo(C._routerInfo)}).then(function(){c.succeed(C,c)},function(e){c.fail(e,c)})}else{if(0<a.getProperty(this._name+".Endpoints").length)throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported");c.succeed(this,c)}}catch(h){throw this.destroy(),h}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var e=new Kt(this._communicator,"waitForHold",null,null,this);return this.checkForDeactivation(e)?e:e.succeed(e)},deactivate:function(){var e=new Kt(this._communicator,"deactivate",null,null,this);return this._state<5&&(this._state=5,this._instance.outgoingConnectionFactory().removeAdapter(this)),e.succeed(e)},waitForDeactivate:function(){var e=new Kt(this._communicator,"deactivate",null,null,this);return e.succeed(e)},isDeactivated:function(){return 5<=this._state},destroy:function(){function e(){return n._state<6&&(n._state=6,n._servantManager.destroy(),n._objectAdapterFactory.removeObjectAdapter(n)),t.succeed(t)}var t=new Kt(this._communicator,"destroy",null,null,this),n=this;return this._state<5?this.deactivate().then(e):e()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,n){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);var i=t.clone();return this._servantManager.addServant(e,i,n),this.newProxy(i,n)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,t){return this.addFacet(e,new Gt(Ice.generateUUID(),""),t)},addDefaultServant:function(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)},removeAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)},findAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)},findServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)},createProxy:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){for(var n=[],i=0;i<this._routerEndpoints.length;++i)n.push(this._routerEndpoints[i]);var r=this._instance.referenceFactory().create(e,t,this._reference,n);return this._instance.proxyFactory().referenceToProxy(r)},checkForDeactivation:function(e){if(5<=this._state){var t=new Ice.ObjectAdapterDeactivatedException;if(t.name=this.getName(),void 0!==e)return e.fail(t,e),!0;throw t}return!1},checkIdentity:function(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new Ice.IllegalIdentityException(e);void 0!==e.category&&null!==e.category||(e.category="")},checkServant:function(e){if(null==e)throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")},filterProperties:function(e){var t,n=!0,i=this._name+".";for(t=0;t<zt.clPropNames.length;++t)if(0===i.indexOf(zt.clPropNames[t]+".")){n=!1;break}for(var r=!0,o=this._instance.initializationData().properties.getPropertiesForPrefix(i).entries;null!==o;o=o.next){var c=!1;for(t=0;t<Xt.length;++t)if(o.key===i+Xt[t]){c=!(r=!1);break}!c&&n&&e.push(o.key)}return r}}),Ice.ObjectAdapterI=Jt,Yt=Ice.HashMap,Zt=Ice.LocatorInfo,$t=Ice.LocatorTable,en=Ice.LocatorPrx,tn=Ice.Class({__init__:function(e){this._background=0<e.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates"),this._table=new Yt(Yt.compareEquals),this._locatorTables=new Yt(Yt.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear(),this._locatorTables.clear()},find:function(e){if(null===e)return null;var t=en.uncheckedCast(e.ice_locator(null)),n=this._table.get(t);if(void 0===n){var i=this._locatorTables.get(t.ice_getIdentity());void 0===i&&(i=new $t,this._locatorTables.set(t.ice_getIdentity(),i)),n=new Zt(t,i,this._background),this._table.set(t,n)}return n}}),Ice.LocatorManager=tn,function(){Ice.AsyncResultBase;var o=Ice.ObjectAdapterI,n=Ice.Promise,e=Ice.Class({__init__:function(e,t){this._instance=e,this._communicator=t,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new n},shutdown:function(){return null===this._instance||(this._instance=null,this._communicator=null,this._shutdownPromise=n.all(this._adapters.map(function(e){return e.deactivate()}))),this._shutdownPromise},waitForShutdown:function(){var e=this;return this._shutdownPromise.then(function(){return n.all(e._adapters.map(function(e){return e.waitForDeactivate()}))})},isShutdown:function(){return null===this._instance},destroy:function(){var e=this;return this.waitForShutdown().then(function(){return n.all(e._adapters.map(function(e){return e.destroy()}))})},createObjectAdapter:function(e,t,n){if(null===this._instance)throw new Ice.ObjectAdapterDeactivatedException;var i=null;try{if(0===e.length){var r=Ice.generateUUID();i=new o(this._instance,this._communicator,this,r,null,!0,n)}else{if(-1!==this._adapterNamesInUse.indexOf(e))throw new Ice.AlreadyRegisteredException("object adapter",e);i=new o(this._instance,this._communicator,this,e,t,!1,n),this._adapterNamesInUse.push(e)}this._adapters.push(i)}catch(e){n.fail(e,n)}},removeObjectAdapter:function(e){if(null!==this._instance){var t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),-1!==(t=this._adapterNamesInUse.indexOf(e.getName()))&&this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=e}(),Pn.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),IceMX.Metrics=Pn.defineObject(function(e,t,n,i,r){Ice.Object.call(this),this.id=void 0!==e?e:"",this.total=void 0!==t?t:new Ice.Long(0,0),this.current=void 0!==n?n:0,this.totalLifetime=void 0!==i?i:new Ice.Long(0,0),this.failures=void 0!==r?r:0},Ice.Object,void 0,1,["::Ice::Object","::IceMX::Metrics"],-1,function(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)},function(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()},!1),IceMX.MetricsPrx=Pn.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,void 0),Pn.defineOperations(IceMX.Metrics,IceMX.MetricsPrx),IceMX.MetricsFailures=Pn.defineStruct(function(e,t){this.id=void 0!==e?e:"",this.failures=void 0!==t?t:null},!1,function(e){e.writeString(this.id),IceMX.StringIntDictHelper.write(e,this.failures)},function(e){this.id=e.readString(),this.failures=IceMX.StringIntDictHelper.read(e)},2,!1),Pn.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),Pn.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),Pn.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,Ice.ArrayUtil.equals),IceMX.UnknownMetricsView=Pn.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"IceMX::UnknownMetricsView",void 0,void 0,!1,!1),IceMX.MetricsAdmin=Pn.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,void 0,void 0,!1),IceMX.MetricsAdminPrx=Pn.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,void 0),Pn.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]}),IceMX.ThreadMetrics=Pn.defineObject(function(e,t,n,i,r,o,c,a){IceMX.Metrics.call(this,e,t,n,i,r),this.inUseForIO=void 0!==o?o:0,this.inUseForUser=void 0!==c?c:0,this.inUseForOther=void 0!==a?a:0},IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,function(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)},function(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()},!1),IceMX.ThreadMetricsPrx=Pn.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,void 0),Pn.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx),IceMX.DispatchMetrics=Pn.defineObject(function(e,t,n,i,r,o,c,a){IceMX.Metrics.call(this,e,t,n,i,r),this.userException=void 0!==o?o:0,this.size=void 0!==c?c:new Ice.Long(0,0),this.replySize=void 0!==a?a:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)},function(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()},!1),IceMX.DispatchMetricsPrx=Pn.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,void 0),Pn.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx),IceMX.ChildInvocationMetrics=Pn.defineObject(function(e,t,n,i,r,o,c){IceMX.Metrics.call(this,e,t,n,i,r),this.size=void 0!==o?o:new Ice.Long(0,0),this.replySize=void 0!==c?c:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.size),e.writeLong(this.replySize)},function(e){this.size=e.readLong(),this.replySize=e.readLong()},!1),IceMX.ChildInvocationMetricsPrx=Pn.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,void 0),Pn.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx),IceMX.CollocatedMetrics=Pn.defineObject(function(e,t,n,i,r,o,c){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,c)},IceMX.ChildInvocationMetrics,void 0,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,void 0,void 0,!1),IceMX.CollocatedMetricsPrx=Pn.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,void 0),Pn.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx),IceMX.RemoteMetrics=Pn.defineObject(function(e,t,n,i,r,o,c){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,c)},IceMX.ChildInvocationMetrics,void 0,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,void 0,void 0,!1),IceMX.RemoteMetricsPrx=Pn.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,void 0),Pn.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx),IceMX.InvocationMetrics=Pn.defineObject(function(e,t,n,i,r,o,c,a,s){IceMX.Metrics.call(this,e,t,n,i,r),this.retry=void 0!==o?o:0,this.userException=void 0!==c?c:0,this.remotes=void 0!==a?a:null,this.collocated=void 0!==s?s:null},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.retry),e.writeInt(this.userException),IceMX.MetricsMapHelper.write(e,this.remotes),IceMX.MetricsMapHelper.write(e,this.collocated)},function(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=IceMX.MetricsMapHelper.read(e),this.collocated=IceMX.MetricsMapHelper.read(e)},!1),IceMX.InvocationMetricsPrx=Pn.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,void 0),Pn.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx),IceMX.ConnectionMetrics=Pn.defineObject(function(e,t,n,i,r,o,c){IceMX.Metrics.call(this,e,t,n,i,r),this.receivedBytes=void 0!==o?o:new Ice.Long(0,0),this.sentBytes=void 0!==c?c:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)},function(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()},!1),IceMX.ConnectionMetricsPrx=Pn.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,void 0),Pn.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx),function(){Ice.Debug;var t=Ice.HashMap,r=Ice.ConnectRequestHandler,e=Ice.Class({__init__:function(e){this._instance=e,this._handlers=new t(t.compareEquals)},getRequestHandler:function(e,t){var n,i=!1;return e.getCacheConnection()?(n=this._handlers.get(e))||(n=new r(e,t),this._handlers.set(e,n),i=!0):(i=!0,n=new r(e,t)),i&&e.getConnection().then(function(e,t){n.setConnection(e,t)},function(e){n.setException(e)}),t.__setRequestHandler(n.connect(t))},removeRequestHandler:function(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers.del(e)}});Ice.RequestHandlerFactory=e}(),Ice.Process=Pn.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Process"],-1,void 0,void 0,!1),Ice.ProcessPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,void 0),Pn.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]}),nn=Ice.TcpEndpointI,rn=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var n=new nn(this._instance);return n.initWithOptions(e,t),n},read:function(e){var t=new nn(this._instance);return t.initWithStream(e),t},destroy:function(){this._instance=null},clone:function(e){return new rn(e)}}),Ice.TcpEndpointFactory=rn,Pn.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.PropertiesAdmin=Pn.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,void 0,void 0,!1),Ice.PropertiesAdminPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,void 0),Pn.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]}),Ice.LogMessageType=Pn.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]),Pn.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType.__helper",!1),Ice.LogMessage=Pn.defineStruct(function(e,t,n,i){this.type=void 0!==e?e:Ice.LogMessageType.PrintMessage,this.timestamp=void 0!==t?t:0,this.traceCategory=void 0!==n?n:"",this.message=void 0!==i?i:""},!0,function(e){Ice.LogMessageType.__write(e,this.type),e.writeLong(this.timestamp),e.writeString(this.traceCategory),e.writeString(this.message)},function(e){this.type=Ice.LogMessageType.__read(e),this.timestamp=e.readLong(),this.traceCategory=e.readString(),this.message=e.readString()},11,!1),Pn.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",!1),Ice.RemoteLogger=Pn.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RemoteLogger"],-1,void 0,void 0,!1),Ice.RemoteLoggerPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.RemoteLogger.ice_staticId,void 0),Pn.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,{init:[,,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,,[[Ice.LogMessage]],,,,]}),Ice.RemoteLoggerAlreadyAttachedException=Pn.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::RemoteLoggerAlreadyAttachedException",void 0,void 0,!1,!1),Ice.LoggerAdmin=Pn.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LoggerAdmin","::Ice::Object"],-1,void 0,void 0,!1),Ice.LoggerAdminPrx=Pn.defineProxy(Ice.ObjectPrx,Ice.LoggerAdmin.ice_staticId,void 0),Pn.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,{attachRemoteLogger:[,,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]}),on=Ice.WSEndpoint,cn=Ice.Class({__init__:function(e,t){this._instance=e,this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var n=new on(this._instance,this._delegate.create(e,t));return n.initWithOptions(e),n},read:function(e){var t=new on(this._instance,this._delegate.read(e));return t.initWithStream(e),t},destroy:function(){this._delegate.destroy(),this._instance=null}}),Ice.WSEndpointFactory=cn,Pn.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),an=Ice.AsyncResultBase,sn=Ice.Debug,ln=Ice.DefaultsAndOverrides,dn=Ice.EndpointFactoryManager,Ice.HashMap,un=Ice.ImplicitContextI,fn=Ice.LocatorManager,Ice.Logger,hn=Ice.ObjectAdapterFactory,pn=Ice.ObjectFactoryManager,_n=Ice.OutgoingConnectionFactory,Ice.Promise,Cn=Ice.Properties,gn=Ice.ProxyFactory,Rn=Ice.RetryQueue,mn=Ice.RouterManager,In=Ice.Timer,yn=Ice.TraceLevels,vn=Ice.ReferenceFactory,Sn=Ice.RequestHandlerFactory,En=Ice.ACMConfig,bn=Ice.Class({__init__:function(e){this._state=0,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._servantFactoryManager=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){return sn.assert(null!==this._traceLevels),this._traceLevels},defaultsAndOverrides:function(){return sn.assert(null!==this._defaultsAndOverrides),this._defaultsAndOverrides},routerManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._routerManager),this._routerManager},locatorManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._locatorManager),this._locatorManager},referenceFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._referenceFactory),this._referenceFactory},requestHandlerFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._requestHandlerFactory),this._requestHandlerFactory},proxyFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._proxyFactory),this._proxyFactory},outgoingConnectionFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._outgoingConnectionFactory),this._outgoingConnectionFactory},servantFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._servantFactoryManager),this._servantFactoryManager},objectAdapterFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._objectAdapterFactory),this._objectAdapterFactory},retryQueue:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._retryQueue),this._retryQueue},timer:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._timer),this._timer},endpointFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return sn.assert(null!==this._endpointFactoryManager),this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,t){try{null===this._initData.properties&&(this._initData.properties=Cn.createProperties()),void 0===Ice.__oneOfDone&&(Ice.__printStackTraces=0<this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0),Ice.__oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=Ice.getProcessLogger()),this._traceLevels=new yn(this._initData.properties),this._defaultsAndOverrides=new ln(this._initData.properties,this._initData.logger);var n=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",1024);this._messageSizeMax=n<1||2147483647/1024<n?2147483647:1024*n,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&0<this._initData.properties.getProperty("Ice.BatchAutoFlush").length?0<this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")&&(this._batchAutoFlushSize=this._messageSizeMax):(n=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),this._batchAutoFlushSize=n<1?n:2147483647/1024<n?2147483647:1024*n),this._clientACM=new En(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new En(this._initData.properties,this._initData.logger,"Ice.ACM",new En)),this._implicitContext=un.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new mn,this._locatorManager=new fn(this._initData.properties),this._referenceFactory=new vn(this,e),this._requestHandlerFactory=new Sn(this,e),this._proxyFactory=new gn(this),this._endpointFactoryManager=new dn(this);var i=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",!1),r=new Ice.TcpEndpointFactory(i);this._endpointFactoryManager.add(r);var o=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",!1),c=new Ice.WSEndpointFactory(o,r.clone(o));this._endpointFactoryManager.add(c);var a=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",!0),s=new Ice.TcpEndpointFactory(a);this._endpointFactoryManager.add(s);var l=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",!0),d=new Ice.WSEndpointFactory(l,s.clone(l));this._endpointFactoryManager.add(d),this._outgoingConnectionFactory=new _n(e,this),this._servantFactoryManager=new pn,this._objectAdapterFactory=new hn(this,e),this._retryQueue=new Rn(this),this._timer=new In(this._initData.logger);var u=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==u&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(u));var f=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==f&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(f)),null!==t&&t.succeed(e)}catch(e){if(null===t)throw e instanceof Ice.LocalException&&this.destroy(),e;e instanceof Ice.LocalException?this.destroy().finally2(function(){t.fail(e)}):t.fail(e)}},destroy:function(){var i=new an(null,"destroy",null,this,null);if(1==this._state)return this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(i),i;this._state=1;var r=this;return Ice.Promise.try2(function(){if(r._objectAdapterFactory)return r._objectAdapterFactory.shutdown()}).then(function(){if(null!==r._outgoingConnectionFactory&&r._outgoingConnectionFactory.destroy(),null!==r._objectAdapterFactory)return r._objectAdapterFactory.destroy()}).then(function(){if(null!==r._outgoingConnectionFactory)return r._outgoingConnectionFactory.waitUntilFinished()}).then(function(){var e;if(r._retryQueue&&r._retryQueue.destroy(),r._timer&&r._timer.destroy(),r._servantFactoryManager&&r._servantFactoryManager.destroy(),r._routerManager&&r._routerManager.destroy(),r._locatorManager&&r._locatorManager.destroy(),r._endpointFactoryManager&&r._endpointFactoryManager.destroy(),0<r._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")){var t=r._initData.properties.getUnusedProperties();if(0<t.length){var n=[];for(n.push("The following properties were set but never read:"),e=0;e<t.length;++e)n.push("\n    "),n.push(t[e]);r._initData.logger.warning(n.join(""))}}if(r._objectAdapterFactory=null,r._outgoingConnectionFactory=null,r._retryQueue=null,r._timer=null,r._servantFactoryManager=null,r._referenceFactory=null,r._requestHandlerFactory=null,r._proxyFactory=null,r._routerManager=null,r._locatorManager=null,r._endpointFactoryManager=null,r._state=2,this._destroyPromises)for(e=0;e<this._destroyPromises.length;++e)this._destroyPromises[e].succeed(this._destroyPromises[e]);i.succeed(i)}).exception(function(e){if(this._destroyPromises)for(var t=0;t<this._destroyPromises.length;++t)this._destroyPromises[t].fail(e,this._destroyPromises[t]);i.fail(e,i)}),i}}),Ice.Instance=bn,wn=Ice.Instance,Ice.Promise,Tn=Ice.Class({__init__:function(e){this._instance=new wn(e)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t},createObjectAdapterWithEndpoints:function(e,t){0===e.length&&(e=Ice.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,n),n},createObjectAdapterWithRouter:function(e,t){0===e.length&&(e=Ice.generateUUID());for(var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null),i=this.proxyToProperty(t,e+".Router").entries;null!==i;i=i.next)this.getProperties().setProperty(i.key,i.value);return this._instance.objectAdapterFactory().createObjectAdapter(e,t,n),n},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}}),Object.defineProperty(Tn.prototype,"instance",{get:function(){return this._instance}}),Ice.Communicator=Tn,On=Ice.Protocol,Ice.InitializationData=function(){this.properties=null,this.logger=null},Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;return e.properties=this.properties,e.logger=this.logger,e},Ice.initialize=function(e,t){var n=null,i=null;if(e instanceof Array)n=e;else if(e instanceof Ice.InitializationData)i=e;else if(null!=e)throw new Ice.InitializationException("invalid argument to initialize");if(null!=t){if(!(t instanceof Ice.InitializationData&&null===i))throw new Ice.InitializationException("invalid argument to initialize");i=t}(i=null===i?new Ice.InitializationData:i.clone()).properties=Ice.createProperties(n,i.properties);var r=new Ice.Communicator(i);return r.finishSetup(null),r},Ice.createProperties=function(e,t){return new Ice.Properties(e,t)},Ice.currentProtocol=function(){return On.currentProtocol.clone()},Ice.currentEncoding=function(){return On.currentEncoding.clone()},e.Ice=Ice,e.IceMX=IceMX,e.IceSSL=IceSSL}(),function(){var e="undefined"!=typeof window?window:self;e.Glacier2=e.Glacier2||{};var t=Ice.Slice;IceMX.SessionMetrics=t.defineObject(function(e,t,n,i,r,o,c,a,s,l,d,u){IceMX.Metrics.call(this,e,t,n,i,r),this.forwardedClient=void 0!==o?o:0,this.forwardedServer=void 0!==c?c:0,this.routingTableSize=void 0!==a?a:0,this.queuedClient=void 0!==s?s:0,this.queuedServer=void 0!==l?l:0,this.overriddenClient=void 0!==d?d:0,this.overriddenServer=void 0!==u?u:0},IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::SessionMetrics"],-1,function(e){e.writeInt(this.forwardedClient),e.writeInt(this.forwardedServer),e.writeInt(this.routingTableSize),e.writeInt(this.queuedClient),e.writeInt(this.queuedServer),e.writeInt(this.overriddenClient),e.writeInt(this.overriddenServer)},function(e){this.forwardedClient=e.readInt(),this.forwardedServer=e.readInt(),this.routingTableSize=e.readInt(),this.queuedClient=e.readInt(),this.queuedServer=e.readInt(),this.overriddenClient=e.readInt(),this.overriddenServer=e.readInt()},!1),IceMX.SessionMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.SessionMetrics.ice_staticId,void 0),t.defineOperations(IceMX.SessionMetrics,IceMX.SessionMetricsPrx),Glacier2.SSLInfo=t.defineStruct(function(e,t,n,i,r,o){this.remoteHost=void 0!==e?e:"",this.remotePort=void 0!==t?t:0,this.localHost=void 0!==n?n:"",this.localPort=void 0!==i?i:0,this.cipher=void 0!==r?r:"",this.certs=void 0!==o?o:null},!0,function(e){e.writeString(this.remoteHost),e.writeInt(this.remotePort),e.writeString(this.localHost),e.writeInt(this.localPort),e.writeString(this.cipher),Ice.StringSeqHelper.write(e,this.certs)},function(e){this.remoteHost=e.readString(),this.remotePort=e.readInt(),this.localHost=e.readString(),this.localPort=e.readInt(),this.cipher=e.readString(),this.certs=Ice.StringSeqHelper.read(e)},12,!1),Glacier2.CannotCreateSessionException=t.defineUserException(function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""},Ice.UserException,"Glacier2::CannotCreateSessionException",function(e){e.writeString(this.reason)},function(e){this.reason=e.readString()},!0,!1),Glacier2.Session=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::Session","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Session.ice_staticId,void 0),t.defineOperations(Glacier2.Session,Glacier2.SessionPrx,{destroy:[,,,,,,,,,,]}),Glacier2.StringSet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::StringSet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.StringSetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.StringSet.ice_staticId,void 0),t.defineOperations(Glacier2.StringSet,Glacier2.StringSetPrx,{add:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],get:[,2,2,,,["Ice.StringSeqHelper"],,,,,]}),Glacier2.IdentitySet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::IdentitySet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.IdentitySetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.IdentitySet.ice_staticId,void 0),t.defineOperations(Glacier2.IdentitySet,Glacier2.IdentitySetPrx,{add:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],get:[,2,2,,,["Ice.IdentitySeqHelper"],,,,,]}),Glacier2.SessionControl=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionControl","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionControlPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionControl.ice_staticId,void 0),t.defineOperations(Glacier2.SessionControl,Glacier2.SessionControlPrx,{categories:[,,,,,["Glacier2.StringSetPrx"],,,,,],adapterIds:[,,,,,["Glacier2.StringSetPrx"],,,,,],identities:[,,,,,["Glacier2.IdentitySetPrx"],,,,,],getSessionTimeout:[,2,2,,,[3],,,,,],destroy:[,,,,,,,,,,]}),Glacier2.SessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SessionManager,Glacier2.SessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[7],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.SSLSessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLSessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLSessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLSessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SSLSessionManager,Glacier2.SSLSessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[Glacier2.SSLInfo],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.PermissionDeniedException=t.defineUserException(function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""},Ice.UserException,"Glacier2::PermissionDeniedException",function(e){e.writeString(this.reason)},function(e){this.reason=e.readString()},!0,!1),Glacier2.PermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::PermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.PermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.PermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.PermissionsVerifier,Glacier2.PermissionsVerifierPrx,{checkPermissions:[,2,1,,2,[1],[[7],[7]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SSLPermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLPermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLPermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLPermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.SSLPermissionsVerifier,Glacier2.SSLPermissionsVerifierPrx,{authorize:[,2,1,,2,[1],[[Glacier2.SSLInfo]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SessionNotExistException=t.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Glacier2::SessionNotExistException",void 0,void 0,!1,!1),Glacier2.Router=t.defineObject(void 0,Ice.Object,[Ice.Router],0,["::Glacier2::Router","::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Glacier2.RouterPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Router.ice_staticId,[Ice.RouterPrx]),t.defineOperations(Glacier2.Router,Glacier2.RouterPrx,{getCategoryForClient:[,2,1,,,[7],,,,,],createSession:[,,,1,2,["Glacier2.SessionPrx"],[[7],[7]],,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],createSessionFromSecureConnection:[,,,1,2,["Glacier2.SessionPrx"],,,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],refreshSession:[,,,1,,,,,[Glacier2.SessionNotExistException],,],destroySession:[,,,,,,,,[Glacier2.SessionNotExistException],,],getSessionTimeout:[,2,1,,,[4],,,,,],getACMTimeout:[,2,1,,,[3],,,,,]}),e.Glacier2=Glacier2}(),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,c=r.module("Common");c.ConferenceError=o.defineUserException(function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""},i.UserException,"Common::ConferenceError",function(e){e.writeInt(this.error),e.writeString(this.reason)},function(e){this.error=e.readInt(),this.reason=e.readString()},!1,!1),n.Common=c}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("MS");s.AudioTransType=o.defineEnum([["ATT_CORP_PRIV",0],["ATT_EIS_ENCRYPT",1],["ATT_RTP_STD",2],["ATT_RTMP",3]]),s.AudioCodecType=o.defineEnum([["ACT_PCMU",0],["ACT_PCMA",1],["ACT_G723",2],["ACT_G729",3],["ACT_AMRWB",4],["ACT_SPEEX",5],["ACT_AAC",6],["ACT_ISAC",7],["ACT_RESERV08",8],["ACT_RESERV09",9],["ACT_RESERV10",10],["ACT_RESERV11",11],["ACT_RESERV12",12],["ACT_RESERV13",13],["ACT_RESERV14",14],["ACT_NULL",15]]),s.MediaStreamIOMode=o.defineEnum([["MSIO_INACTIVE",0],["MSIO_SEND",1],["MSIO_RECV",2],["MSIO_SEND_RECV",3]]),s.AudioStreamParam=o.defineStruct(function(e,t,n,i,r){this.codecType=void 0!==e?e:s.AudioCodecType.ACT_PCMU,this.transType=void 0!==t?t:s.AudioTransType.ATT_CORP_PRIV,this.ioMode=void 0!==n?n:s.MediaStreamIOMode.MSIO_INACTIVE,this.mixerID=void 0!==i?i:0,this.shareListen=void 0!==r&&r},!0,function(e){s.AudioCodecType.__write(e,this.codecType),s.AudioTransType.__write(e,this.transType),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.mixerID),e.writeBool(this.shareListen)},function(e){this.codecType=s.AudioCodecType.__read(e),this.transType=s.AudioTransType.__read(e),this.ioMode=s.MediaStreamIOMode.__read(e),this.mixerID=e.readInt(),this.shareListen=e.readBool()},8,!1),s.VideoContentType=o.defineEnum([["VCT_CAMERA",0],["VCT_SCREEN",1],["VCT_FILM",2],["VCT_LIVE",3]]),s.VideoStreamParam=o.defineStruct(function(e,t,n,i,r,o,c,a){this.contentType=void 0!==e?e:s.VideoContentType.VCT_CAMERA,this.srcTermID=void 0!==t?t:0,this.cameraID=void 0!==n?n:0,this.ioMode=void 0!==i?i:s.MediaStreamIOMode.MSIO_INACTIVE,this.attachToMSID=void 0!==r?r:0,this.subscribeFlag=void 0!==o&&o,this.isPeerSourceTerm=void 0!==c&&c,this.screenAuthKey=void 0!==a?a:""},!0,function(e){s.VideoContentType.__write(e,this.contentType),e.writeShort(this.srcTermID),e.writeShort(this.cameraID),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.attachToMSID),e.writeBool(this.subscribeFlag),e.writeBool(this.isPeerSourceTerm),e.writeString(this.screenAuthKey)},function(e){this.contentType=s.VideoContentType.__read(e),this.srcTermID=e.readShort(),this.cameraID=e.readShort(),this.ioMode=s.MediaStreamIOMode.__read(e),this.attachToMSID=e.readInt(),this.subscribeFlag=e.readBool(),this.isPeerSourceTerm=e.readBool(),this.screenAuthKey=e.readString()},13,!1),s.NetworkAddress=o.defineStruct(function(e,t){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0},!0,function(e){e.writeString(this.ip),e.writeShort(this.port)},function(e){this.ip=e.readString(),this.port=e.readShort()},3,!1),s.MediaStreamAddr=o.defineStruct(function(e,t){this.netAddr=void 0!==e?e:new s.NetworkAddress,this.MSID=void 0!==t?t:0},!0,function(e){s.NetworkAddress.write(e,this.netAddr),e.writeInt(this.MSID)},function(e){this.netAddr=s.NetworkAddress.read(e,this.netAddr),this.MSID=e.readInt()},7,!1),s.ConferenceInfo=o.defineStruct(function(e,t,n,i){this.confId=void 0!==e?e:0,this.isPeerTerminal=void 0!==t&&t,this.peerTermId=void 0!==n?n:0,this.peerTermName=void 0!==i?i:""},!0,function(e){e.writeInt(this.confId),e.writeBool(this.isPeerTerminal),e.writeShort(this.peerTermId),e.writeString(this.peerTermName)},function(e){this.confId=e.readInt(),this.isPeerTerminal=e.readBool(),this.peerTermId=e.readShort(),this.peerTermName=e.readString()},8,!1),o.defineDictionary(s,"DictStrParams","DictStrParamsHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),n.MS=s}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Trans/MSPub").MS),o=i.Slice;r.LanTerm=o.defineStruct(function(e,t){this.hostIP=void 0!==e?e:"",this.termID=void 0!==t?t:0},!0,function(e){e.writeString(this.hostIP),e.writeShort(this.termID)},function(e){this.hostIP=e.readString(),this.termID=e.readShort()},3,!1),o.defineSequence(r,"TermSeqHelper","MS.LanTerm",!1),r.MSClient=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::MS::MSClient"],-1,void 0,void 0,!1),r.MSClientPrx=o.defineProxy(i.ObjectPrx,r.MSClient.ice_staticId,void 0),o.defineOperations(r.MSClient,r.MSClientPrx,{AudioAllocRaw:[,,,1,,[3],[[r.AudioStreamParam]],,,,],AudioAlloc:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr]],,,,],VideoAllocRaw:[,,,1,,[3],[[r.VideoStreamParam],[1]],,,,],VideoAlloc:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr]],,,,],AudioAllocRawExt:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],,,,],AudioAllocRawExt2:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],AudioAllocExt:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt2:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],VideoAllocExt:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],Free:[,,,1,,,[[3]],,,,],ModifyPeerAddr:[,,,1,,,[[3],[r.MediaStreamAddr]],,,,],ModifyPeerAddrExt:[,,,1,,,[[3],["MS.DictStrParamsHelper"]],,,,],ModifyIOMode:[,,,1,,,[[3],[r.MediaStreamIOMode.__helper]],,,,],NotifyRTMPStreamPublishFinished:[,,,1,,,[[3]],,,,],StartLanThrough:[,,,1,,,[[3],[3],[7]],,,,],StopLanThrough:[,,,1,,,[[3]],,,,],LanDetect:[,,,1,,,[["MS.TermSeqHelper"]],,,,],EnableSendVideo2Internet:[,,,1,,,[[2]],,,,],DisableSendVideo2Internet:[,,,1,,,[[2]],,,,],EnableSendScreen2Internet:[,,,1,,,,,,,],DisableSendScreen2Internet:[,,,1,,,,,,,],EnableSendFilm2Internet:[,,,1,,,,,,,],DisableSendFilm2Internet:[,,,1,,,,,,,],EnableSendLive2Internet:[,,,1,,,,,,,],DisableSendLive2Internet:[,,,1,,,,,,,]}),r.ClientReport=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::MS::ClientReport"],-1,void 0,void 0,!1),r.ClientReportPrx=o.defineProxy(i.ObjectPrx,r.ClientReport.ice_staticId,void 0),o.defineOperations(r.ClientReport,r.ClientReportPrx,{UpdateClientIP:[,,,1,,,[[7],[3],[7]],,,,],ReportLanNeighbor:[,,,1,,,[["MS.TermSeqHelper"]],,,,],LanMediaStreamFail:[,,,1,,,[[3],[3],[7]],,,,],VideoResolutionReport:[,,,1,,,[[3],[3],[3]],,,,]}),n.MS=r}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,c=r.module("SendCmd");c.CmdError=o.defineUserException(function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""},i.UserException,"SendCmd::CmdError",function(e){e.writeInt(this.error),e.writeString(this.reason)},function(e){this.error=e.readInt(),this.reason=e.readString()},!1,!1),c.UnknowErr=o.defineUserException(function(e,t,n){c.CmdError.call(this,e,t,n)},c.CmdError,"SendCmd::UnknowErr",void 0,void 0,!1,!1),c.CmdNotFound=o.defineUserException(function(e,t,n){c.CmdError.call(this,e,t,n)},c.CmdError,"SendCmd::CmdNotFound",void 0,void 0,!1,!1),c.CmdNotImplement=o.defineUserException(function(e,t,n){c.CmdError.call(this,e,t,n)},c.CmdError,"SendCmd::CmdNotImplement",void 0,void 0,!1,!1),c.AppException=o.defineUserException(function(e,t,n){c.CmdError.call(this,e,t,n)},c.CmdError,"SendCmd::AppException",void 0,void 0,!1,!1),c.AppReturnInvalid=o.defineUserException(function(e,t,n){c.CmdError.call(this,e,t,n)},c.CmdError,"SendCmd::AppReturnInvalid",void 0,void 0,!1,!1),c.SessionInvalid=o.defineUserException(function(e,t,n){c.CmdError.call(this,e,t,n)},c.CmdError,"SendCmd::SessionInvalid",void 0,void 0,!1,!1),c.TargetInvalid=o.defineUserException(function(e,t,n){c.CmdError.call(this,e,t,n)},c.CmdError,"SendCmd::TargetInvalid",void 0,void 0,!1,!1),Object.defineProperty(c,"DATATYPE_ALPHA",{value:1}),c.Cmd=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::SendCmd::Cmd"],-1,void 0,void 0,!1),c.CmdPrx=o.defineProxy(i.ObjectPrx,c.Cmd.ice_staticId,void 0),o.defineOperations(c.Cmd,c.CmdPrx,{sendCmd:[,,,1,,[7],[[7]],,[c.CmdError],,],sendBuffer:[,,,1,,[7],[[7],["Ice.ByteSeqHelper"]],,[c.CmdError],,]}),n.SendCmd=c}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,c=r.module("LogSpace");c.LogLevel=o.defineEnum([["debug",0],["info",1],["warning",2],["error",3]]),c.FatalLogInfo=o.defineStruct(function(e,t,n,i,r,o,c,a){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==n?n:0,this.client=void 0!==i?i:"",this.clientIP=void 0!==r?r:"",this.logDate=void 0!==o?o:"",this.content=void 0!==c?c:"",this.dumpData=void 0!==a?a:null},!0,function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.logDate),e.writeString(this.content),i.ByteSeqHelper.write(e,this.dumpData)},function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.logDate=e.readString(),this.content=e.readString(),this.dumpData=i.ByteSeqHelper.read(e)},14,!1),c.AppendData=o.defineStruct(function(e,t,n){this.uuid=void 0!==e?e:"",this.type=void 0!==t?t:"",this.data=void 0!==n?n:null},!0,function(e){e.writeString(this.uuid),e.writeString(this.type),i.ByteSeqHelper.write(e,this.data)},function(e){this.uuid=e.readString(),this.type=e.readString(),this.data=i.ByteSeqHelper.read(e)},3,!1),o.defineSequence(c,"AppendDataSeqHelper","LogSpace.AppendData",!1),c.UsrReportInfo=o.defineStruct(function(e,t,n,i,r,o,c,a,s){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==n?n:0,this.client=void 0!==i?i:"",this.clientIP=void 0!==r?r:"",this.reportDate=void 0!==o?o:"",this.contact=void 0!==c?c:"",this.content=void 0!==a?a:"",this.appendDatas=void 0!==s?s:null},!0,function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.reportDate),e.writeString(this.contact),e.writeString(this.content),c.AppendDataSeqHelper.write(e,this.appendDatas)},function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.reportDate=e.readString(),this.contact=e.readString(),this.content=e.readString(),this.appendDatas=c.AppendDataSeqHelper.read(e)},15,!1),c.ClientLogServer=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::LogSpace::ClientLogServer"],-1,void 0,void 0,!1),c.ClientLogServerPrx=o.defineProxy(i.ObjectPrx,c.ClientLogServer.ice_staticId,void 0),o.defineOperations(c.ClientLogServer,c.ClientLogServerPrx,{log:[,,,,,,[["Ice.ByteSeqHelper"]],,,,],logFatal:[,,,,,,[[c.FatalLogInfo]],,,,],usrReport:[,,,,,,[[c.UsrReportInfo]],,,,],logDetail:[,,,,,,[[3],[7],["Ice.ByteSeqHelper"]],,,,]}),n.LogSpace=c}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,a=r.module("Resm");a.ResmError=o.defineUserException(function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""},i.UserException,"Resm::ResmError",function(e){e.writeInt(this.error),e.writeString(this.reason)},function(e){this.error=e.readInt(),this.reason=e.readString()},!1,!1),a.ServerIdNotConfiger=o.defineUserException(function(e,t,n){a.ResmError.call(this,e,t,n)},a.ResmError,"Resm::ServerIdNotConfiger",void 0,void 0,!1,!1),a.ServerNotEnable=o.defineUserException(function(e,t,n){a.ResmError.call(this,e,t,n)},a.ResmError,"Resm::ServerNotEnable",void 0,void 0,!1,!1),a.NotAddedToService=o.defineUserException(function(e,t,n){a.ResmError.call(this,e,t,n)},a.ResmError,"Resm::NotAddedToService",void 0,void 0,!1,!1),a.NoServerAvailable=o.defineUserException(function(e,t,n){a.ResmError.call(this,e,t,n)},a.ResmError,"Resm::NoServerAvailable",void 0,void 0,!1,!1),a.NotConnected2Db=o.defineUserException(function(e,t,n){a.ResmError.call(this,e,t,n)},a.ResmError,"Resm::NotConnected2Db",void 0,void 0,!1,!1),a.ResSessionBase=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.ResSessionBasePrx=o.defineProxy(i.ObjectPrx,a.ResSessionBase.ice_staticId,void 0),o.defineOperations(a.ResSessionBase,a.ResSessionBasePrx,{nouse:[,,,,,,,,,,]}),a.InfoResponse=o.defineStruct(function(e,t,n,i){this.serverNo=void 0!==e?e:0,this.domain=void 0!==t?t:0,this.registerInverval=void 0!==n?n:0,this.reportInverval=void 0!==i?i:0},!0,function(e){e.writeInt(this.serverNo),e.writeInt(this.domain),e.writeInt(this.registerInverval),e.writeInt(this.reportInverval)},function(e){this.serverNo=e.readInt(),this.domain=e.readInt(),this.registerInverval=e.readInt(),this.reportInverval=e.readInt()},16,!0),Object.defineProperty(a,"SERVER_ACCESS",{value:0}),Object.defineProperty(a,"SERVER_SS",{value:1}),Object.defineProperty(a,"SERVER_CONTROL",{value:2}),Object.defineProperty(a,"SERVER_FILE",{value:3}),Object.defineProperty(a,"SERVER_MIX",{value:4}),Object.defineProperty(a,"SERVER_FN",{value:5}),Object.defineProperty(a,"SERVER_MCU",{value:6}),a.ResmCommon=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ResmCommon"],-1,void 0,void 0,!1),a.ResmCommonPrx=o.defineProxy(i.ObjectPrx,a.ResmCommon.ice_staticId,void 0),o.defineOperations(a.ResmCommon,a.ResmCommonPrx,{getSelfInfo:[,,,,,[a.InfoResponse],[[7],[3]],,[a.ResmError],,],getActiveConference:[,,,,,["Ice.IntSeqHelper"],,,[a.ResmError],,]}),o.defineDictionary(a,"ReportDict","ReportDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineDictionary(a,"DataDict","DataDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineSequence(a,"IpAddressSeqHelper","Ice.StringHelper",!1),a.NetworkStatus=o.defineStruct(function(e,t){this.latency=void 0!==e?e:0,this.lostRate=void 0!==t?t:0},!0,function(e){e.writeInt(this.latency),e.writeInt(this.lostRate)},function(e){this.latency=e.readInt(),this.lostRate=e.readInt()},8,!0),a.NetworkReport=o.defineStruct(function(e,t,n,i,r,o,c,a){this.avgLatency=void 0!==e?e:0,this.maxLatency=void 0!==t?t:0,this.minLatency=void 0!==n?n:0,this.lostRate=void 0!==i?i:0,this.singleLost=void 0!==r?r:0,this.contLostCnt=void 0!==o?o:0,this.contLostPkt=void 0!==c?c:0,this.statisTime=void 0!==a?a:""},!0,function(e){e.writeInt(this.avgLatency),e.writeInt(this.maxLatency),e.writeInt(this.minLatency),e.writeInt(this.lostRate),e.writeInt(this.singleLost),e.writeInt(this.contLostCnt),e.writeInt(this.contLostPkt),e.writeString(this.statisTime)},function(e){this.avgLatency=e.readInt(),this.maxLatency=e.readInt(),this.minLatency=e.readInt(),this.lostRate=e.readInt(),this.singleLost=e.readInt(),this.contLostCnt=e.readInt(),this.contLostPkt=e.readInt(),this.statisTime=e.readString()},29,!1),a.PathStatus=o.defineStruct(function(e,t,n,i){this.remoteServerNo=void 0!==e?e:0,this.remoteIP=void 0!==t?t:"",this.netReport=void 0!==n?n:new a.NetworkReport,this.weight=void 0!==i?i:0},!0,function(e){e.writeInt(this.remoteServerNo),e.writeString(this.remoteIP),a.NetworkReport.write(e,this.netReport),e.writeInt(this.weight)},function(e){this.remoteServerNo=e.readInt(),this.remoteIP=e.readString(),this.netReport=a.NetworkReport.read(e,this.netReport),this.weight=e.readInt()},38,!1),o.defineSequence(a,"PathStatusSeqHelper","Resm.PathStatus",!1),o.defineDictionary(a,"PathStatusDict","PathStatusDictHelper","Ice.StringHelper","Resm.PathStatusSeqHelper",!1,void 0,void 0,i.ArrayUtil.equals),a.MixSession=o.defineObject(void 0,i.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::MixSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.MixSessionPrx=o.defineProxy(i.ObjectPrx,a.MixSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.MixSession,a.MixSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,[a.ResmError],,]}),a.NetworkProperty=o.defineEnum([["TELECOM",0],["UNICOM",1],["TELEUNI",2],["UNKNOW",3]]),a.MixM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::MixM"],-1,void 0,void 0,!1),a.MixMPrx=o.defineProxy(i.ObjectPrx,a.MixM.ice_staticId,void 0),o.defineOperations(a.MixM,a.MixMPrx,{register:[,,,,,["Resm.MixSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,[3],[[3],[3],[a.NetworkProperty.__helper]],,[a.ResmError],,],locateMixAndSs:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3]],,[a.ResmError],,]}),a.SsSession=o.defineObject(void 0,i.Object,[a.ResSessionBase],2,["::Ice::Object","::Resm::ResSessionBase","::Resm::SsSession"],-1,void 0,void 0,!1),a.SsSessionPrx=o.defineProxy(i.ObjectPrx,a.SsSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.SsSession,a.SsSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),a.SsM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::SsM"],-1,void 0,void 0,!1),a.SsMPrx=o.defineProxy(i.ObjectPrx,a.SsM.ice_staticId,void 0),o.defineOperations(a.SsM,a.SsMPrx,{register:[,,,,,["Resm.SsSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,[3],[[3],[3]],,[a.ResmError],,]}),a.ControlSession=o.defineObject(void 0,i.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::ControlSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.ControlSessionPrx=o.defineProxy(i.ObjectPrx,a.ControlSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.ControlSession,a.ControlSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),a.ControlM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ControlM"],-1,void 0,void 0,!1),a.ControlMPrx=o.defineProxy(i.ObjectPrx,a.ControlM.ice_staticId,void 0),o.defineOperations(a.ControlM,a.ControlMPrx,{register:[,,,,,["Resm.ControlSessionPrx"],[[3],[7],[7]],,[a.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3],[3]],,[a.ResmError],,]}),a.FileCallback=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FileCallback"],-1,void 0,void 0,!1),a.FileCallbackPrx=o.defineProxy(i.ObjectPrx,a.FileCallback.ice_staticId,void 0),o.defineOperations(a.FileCallback,a.FileCallbackPrx,{setFileData:[,,,,,,[["Resm.DataDictHelper"]],,,,]}),a.FileSession=o.defineObject(void 0,i.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::FileSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.FileSessionPrx=o.defineProxy(i.ObjectPrx,a.FileSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.FileSession,a.FileSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),a.FileM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FileM"],-1,void 0,void 0,!1),a.FileMPrx=o.defineProxy(i.ObjectPrx,a.FileM.ice_staticId,void 0),o.defineOperations(a.FileM,a.FileMPrx,{register:[,,,,,["Resm.FileSessionPrx"],[[3],[7],[7],["Resm.FileCallbackPrx"]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3]],,[a.ResmError],,]}),o.defineDictionary(a,"ConfMemberDict","ConfMemberDictHelper","Ice.IntHelper","Ice.IntHelper",!0,void 0,void 0),a.AccessSession=o.defineObject(void 0,i.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::AccessSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.AccessSessionPrx=o.defineProxy(i.ObjectPrx,a.AccessSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.AccessSession,a.AccessSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.ConfMemberDictHelper"]],,,,]}),o.defineDictionary(a,"NetworkResult","NetworkResultHelper","Ice.IntHelper","Resm.NetworkStatus",!0,void 0,void 0,i.HashMap.compareEquals),a.NetworkAddress=o.defineStruct(function(e,t,n){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0,this.glacier2Port=void 0!==n?n:0},!0,function(e){e.writeString(this.ip),e.writeShort(this.port),e.writeShort(this.glacier2Port)},function(e){this.ip=e.readString(),this.port=e.readShort(),this.glacier2Port=e.readShort()},5,!1),o.defineDictionary(a,"AccessAddrDict","AccessAddrDictHelper","Ice.IntHelper","Resm.NetworkAddress",!1,void 0,void 0,i.HashMap.compareEquals),a.AccessM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::AccessM"],-1,void 0,void 0,!1),a.AccessMPrx=o.defineProxy(i.ObjectPrx,a.AccessM.ice_staticId,void 0),o.defineOperations(a.AccessM,a.AccessMPrx,{register:[,,,,,["Resm.AccessSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,[3],[[3],[3],["Resm.NetworkResultHelper"],[7],[7]],,[a.ResmError],,],getAccessList:[,,,,,["Resm.AccessAddrDictHelper"],[[3]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[a.ResmError],,]}),a.NetworkBandwidth=o.defineStruct(function(e,t){this.sendBandWidth=void 0!==e?e:0,this.recvBandWidth=void 0!==t?t:0},!0,function(e){e.writeInt(this.sendBandWidth),e.writeInt(this.recvBandWidth)},function(e){this.sendBandWidth=e.readInt(),this.recvBandWidth=e.readInt()},8,!0),o.defineDictionary(a,"FNBandwidthDict","FNBandwidthDictHelper","Ice.StringHelper","Resm.NetworkBandwidth",!1,void 0,void 0,i.HashMap.compareEquals),a.FnSession=o.defineObject(void 0,i.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::FnSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.FnSessionPrx=o.defineProxy(i.ObjectPrx,a.FnSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.FnSession,a.FnSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.FNBandwidthDictHelper"]],,,,]}),a.FnM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FnM"],-1,void 0,void 0,!1),a.FnMPrx=o.defineProxy(i.ObjectPrx,a.FnM.ice_staticId,void 0),o.defineOperations(a.FnM,a.FnMPrx,{register:[,,,,,["Resm.FnSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[a.ResmError],,]}),a.RouteType=o.defineEnum([["UNREACHABLE",0],["DIRECT",1],["FORWARD",2]]),a.RouteScore=o.defineEnum([["BROKEN",0],["BAD",1],["AVAILABLE",2],["PERFECT",3]]),o.defineSequence(a,"IntSeqHelper","Ice.IntHelper",!0),a.Route=o.defineStruct(function(e,t,n,i,r,o,c){this.type=void 0!==e?e:a.RouteType.UNREACHABLE,this.score=void 0!==t?t:a.RouteScore.BROKEN,this.srcIP=void 0!==n?n:"",this.dstIP=void 0!==i?i:"",this.fnNo=void 0!==r?r:0,this.srcFnIP=void 0!==o?o:"",this.dstFnIP=void 0!==c?c:""},!0,function(e){a.RouteType.__write(e,this.type),a.RouteScore.__write(e,this.score),e.writeString(this.srcIP),e.writeString(this.dstIP),e.writeInt(this.fnNo),e.writeString(this.srcFnIP),e.writeString(this.dstFnIP)},function(e){this.type=a.RouteType.__read(e),this.score=a.RouteScore.__read(e),this.srcIP=e.readString(),this.dstIP=e.readString(),this.fnNo=e.readInt(),this.srcFnIP=e.readString(),this.dstFnIP=e.readString()},10,!1),o.defineDictionary(a,"RouteMap","RouteMapHelper","Ice.IntHelper","Resm.Route",!1,void 0,void 0,i.HashMap.compareEquals),a.RouteM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::RouteM"],-1,void 0,void 0,!1),a.RouteMPrx=o.defineProxy(i.ObjectPrx,a.RouteM.ice_staticId,void 0),o.defineOperations(a.RouteM,a.RouteMPrx,{RouteAllocBatch:[,,,,,["Resm.RouteMapHelper"],[[3],[3],["Resm.IntSeqHelper"]],,,,],RouteAlloc:[,,,,,[a.Route],[[3],[3],[3],["Resm.IntSeqHelper"]],,,,],PathReport:[,,,,,,[[3],["Resm.PathStatusDictHelper"]],,,,],RouteMapGet:[,,,,,["Resm.RouteMapHelper"],[[3],[3]],,,,]}),a.McuSession=o.defineObject(void 0,i.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::McuSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.McuSessionPrx=o.defineProxy(i.ObjectPrx,a.McuSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.McuSession,a.McuSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),a.McuM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::McuM"],-1,void 0,void 0,!1),a.McuMPrx=o.defineProxy(i.ObjectPrx,a.McuM.ice_staticId,void 0),o.defineOperations(a.McuM,a.McuMPrx,{register:[,,,,,["Resm.McuSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,[3],[[3]],,[a.ResmError],,]}),n.Resm=a}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,c=i.Slice,C=r.module("Conference");Object.defineProperty(C,"SLICE_VER",{value:"1.9"}),Object.defineProperty(C,"ANON_TERMID",{value:0}),Object.defineProperty(C,"ALL_TERMID",{value:32767}),Object.defineProperty(C,"ANON_MEMBER_ID",{value:0}),Object.defineProperty(C,"TERM_PC",{value:1}),Object.defineProperty(C,"TERM_PHONE",{value:2}),Object.defineProperty(C,"NORMAL_AT",{value:0}),Object.defineProperty(C,"DEMO_AT",{value:1}),Object.defineProperty(C,"HOST_AT",{value:2}),Object.defineProperty(C,"PSTN_HOST_AT",{value:4}),Object.defineProperty(C,"ASSISTANT_AT",{value:8}),Object.defineProperty(C,"OPT_VIDEO",{value:1}),Object.defineProperty(C,"OPT_AUTO_MUTE",{value:2}),Object.defineProperty(C,"OPT_AUTO_AUDIO",{value:4}),Object.defineProperty(C,"OPT_PSTN_CALL",{value:8}),Object.defineProperty(C,"OPT_END_WHEN_HOST_EXIT",{value:16}),Object.defineProperty(C,"OPT_ONLY_INVITE_CAN_LOGIN",{value:32}),Object.defineProperty(C,"OPT_ALLOW_PLAY_APPLAUSE",{value:64}),Object.defineProperty(C,"OPT_PLAY_ENTRANCEANDEXITTONE",{value:128}),Object.defineProperty(C,"OPT_ALLOW_MODIFY_NICKNAME",{value:256}),Object.defineProperty(C,"OPT_NOT_SEE_EACH_OTHER",{value:512}),Object.defineProperty(C,"OPT_IM_FORBID_PIC",{value:1024}),Object.defineProperty(C,"OPT_IM_FORBID_URL",{value:2048}),Object.defineProperty(C,"OPT_FORBID_OPEN_CAMERA",{value:4096}),Object.defineProperty(C,"OPT_AUTO_MUTE_HOST",{value:8192}),Object.defineProperty(C,"OPT_REVIEW_CHAT",{value:16384}),Object.defineProperty(C,"OPT_AUTO_OPEN_CAMERA",{value:32768}),Object.defineProperty(C,"OPT_MIC_USE_LOCAL",{value:65536}),Object.defineProperty(C,"OPT_CAMERA_USE_LOCAL",{value:131072}),Object.defineProperty(C,"OPT_FORBID_MARK",{value:262144}),Object.defineProperty(C,"OPT_ALLOW_SHARE",{value:524288}),c.defineSequence(C,"ByteListHelper","Ice.ByteHelper",!0),c.defineDictionary(C,"StringStringMap","StringStringMapHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),C.ASTATUS=c.defineEnum([["AUNKNOWN",0],["ANULL",1],["ACLOSE",2],["AOPEN",3],["AOPENING",4]]),C.WINDOW_MODE=c.defineEnum([["VMANAGER_LOCK",0],["VSPEAKER_TRACK",1],["VPRESENTER_LOCK",2]]),C.VSTATUS=c.defineEnum([["VUNKNOWN",0],["VNULL",1],["VCLOSE",2],["VOPEN",3],["VOPENING",4]]),C.VIDEOLEVEL=c.defineEnum([["VL_HIGH_HD",0],["VL_HIGH_HDL",1],["VL_HIGH_H",2],["VL_HIGH_M",3],["VL_HIGH_L",4],["VL_MID",5],["VL_LOW",6]]),C.VideoSize=c.defineStruct(function(e,t){this.w=void 0!==e?e:0,this.h=void 0!==t?t:0},!0,function(e){e.writeShort(this.w),e.writeShort(this.h)},function(e){this.w=e.readShort(),this.h=e.readShort()},4,!0),C.VideoQuality=c.defineStruct(function(e,t,n,i,r,o){this.vl=void 0!==e?e:C.VIDEOLEVEL.VL_HIGH_HD,this.vs=void 0!==t?t:new C.VideoSize,this.isec=void 0!==n?n:0,this.fps=void 0!==i?i:null,this.crf=void 0!==r?r:null,this.cost=void 0!==o?o:""},!0,function(e){C.VIDEOLEVEL.__write(e,this.vl),C.VideoSize.write(e,this.vs),e.writeByte(this.isec),C.ByteListHelper.write(e,this.fps),C.ByteListHelper.write(e,this.crf),e.writeString(this.cost)},function(e){this.vl=C.VIDEOLEVEL.__read(e),this.vs=C.VideoSize.read(e,this.vs),this.isec=e.readByte(),this.fps=C.ByteListHelper.read(e),this.crf=C.ByteListHelper.read(e),this.cost=e.readString()},9,!1),C.VIDEOLAYOUTMODE=c.defineEnum([["VLO_1v1_M",0],["VLO_WALL1_M",1],["VLO_WALL2",2],["VLO_WALL4",3],["VLO_WALL5_M",4],["VLO_WALL6_M",5],["VLO_WALL9",6],["VLO_WALL13_M",7],["VLO_WALL16",8],["VLO_WALL25",9]]),Object.defineProperty(C,"MVM_1MAIN",{value:0}),Object.defineProperty(C,"MVM_1v1",{value:1}),Object.defineProperty(C,"MVM_2VIDEO",{value:2}),Object.defineProperty(C,"MVM_4VIDEO",{value:3}),Object.defineProperty(C,"MVM_6VIDEO",{value:4}),Object.defineProperty(C,"VIDEO_SS_1M",{value:0}),Object.defineProperty(C,"VIDEO_SS_5M",{value:1}),Object.defineProperty(C,"VIDEO_SS_13M",{value:2}),Object.defineProperty(C,"VIDEO_SS_2",{value:3}),Object.defineProperty(C,"VIDEO_SS_4",{value:4}),Object.defineProperty(C,"VIDEO_SS_9",{value:5}),Object.defineProperty(C,"VIDEO_SS_16",{value:6}),Object.defineProperty(C,"VIDEO_SS_25",{value:7}),Object.defineProperty(C,"VIDEO_SS_NULL",{value:255}),c.defineSequence(C,"VideoQualitySeqHelper","Conference.VideoQuality",!1),C.SYNCMODE=c.defineEnum([["SYNC_FORCE",0],["SYNC_FREE",1]]),C.TabID=c.defineStruct(function(e,t){this.termID=void 0!==e?e:0,this.localID=void 0!==t?t:0},!0,function(e){e.writeShort(this.termID),e.writeShort(this.localID)},function(e){this.termID=e.readShort(),this.localID=e.readShort()},4,!0),c.defineSequence(C,"TabIDSeqHelper","Conference.TabID",!0),C.WBBOARD_TYPE=c.defineEnum([["WB_WHITE",0],["WB_DOC",1]]),C.WBBOARD_DOCTYPE=c.defineEnum([["WD_IMG",0],["WD_PPTANIM",1],["WD_PPT",2]]),C.WB_SCALE_TYPE=c.defineEnum([["WB_SCALE_50",0],["WB_SCALE_100",1],["WB_SCALE_150",2],["WB_SCALE_200",3],["WB_SCALE_SADP",4],["WB_SCALE_WIDTH",5]]),C.WB_ROTATE_TYPE=c.defineEnum([["WB_ROTATE_0",0],["WB_ROTATE_90",1],["WB_ROTATE_180",2],["WB_ROTATE_270",3]]),C.WhiteBoardDescribe=c.defineStruct(function(e,t,n,i,r,o,c,a,s,l,d,u,f,h,p,_){this.wID=void 0!==e?e:new C.TabID,this.wType=void 0!==t?t:C.WBBOARD_TYPE.WB_WHITE,this.docType=void 0!==n?n:C.WBBOARD_DOCTYPE.WD_IMG,this.name=void 0!==i?i:"",this.docName=void 0!==r?r:"",this.width=void 0!==o?o:0,this.height=void 0!==c?c:0,this.scaleType=void 0!==a?a:C.WB_SCALE_TYPE.WB_SCALE_50,this.rotation=void 0!==s?s:C.WB_ROTATE_TYPE.WB_ROTATE_0,this.pageCount=void 0!==l?l:0,this.curPage=void 0!==d?d:0,this.animID=void 0!==u?u:0,this.animFrames=void 0!==f?f:0,this.showThum=void 0!==h&&h,this.bAll=void 0!==p&&p,this.allowTerms=void 0!==_?_:null},!0,function(e){C.TabID.write(e,this.wID),C.WBBOARD_TYPE.__write(e,this.wType),C.WBBOARD_DOCTYPE.__write(e,this.docType),e.writeString(this.name),e.writeString(this.docName),e.writeInt(this.width),e.writeInt(this.height),C.WB_SCALE_TYPE.__write(e,this.scaleType),C.WB_ROTATE_TYPE.__write(e,this.rotation),e.writeInt(this.pageCount),e.writeInt(this.curPage),e.writeInt(this.animID),e.writeInt(this.animFrames),e.writeBool(this.showThum),e.writeBool(this.bAll),i.ShortSeqHelper.write(e,this.allowTerms)},function(e){this.wID=C.TabID.read(e,this.wID),this.wType=C.WBBOARD_TYPE.__read(e),this.docType=C.WBBOARD_DOCTYPE.__read(e),this.name=e.readString(),this.docName=e.readString(),this.width=e.readInt(),this.height=e.readInt(),this.scaleType=C.WB_SCALE_TYPE.__read(e),this.rotation=C.WB_ROTATE_TYPE.__read(e),this.pageCount=e.readInt(),this.curPage=e.readInt(),this.animID=e.readInt(),this.animFrames=e.readInt(),this.showThum=e.readBool(),this.bAll=e.readBool(),this.allowTerms=i.ShortSeqHelper.read(e)},37,!1),c.defineSequence(C,"WhiteBoardDescribeSeqHelper","Conference.WhiteBoardDescribe",!1),C.ConfIdError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ConfIdError",void 0,void 0,!1,!1),C.AuthError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::AuthError",void 0,void 0,!1,!1),C.ReenterError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ReenterError",void 0,void 0,!1,!1),C.RoomLockedError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::RoomLockedError",void 0,void 0,!1,!1),C.NicknameError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::NicknameError",void 0,void 0,!1,!1),C.NicknameDuplicatedError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::NicknameDuplicatedError",void 0,void 0,!1,!1),C.NotPermitError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::NotPermitError",void 0,void 0,!1,!1),C.MemberDeactivedError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::MemberDeactivedError",void 0,void 0,!1,!1),C.MemberOverflowError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::MemberOverflowError",void 0,void 0,!1,!1),C.ConfMemberOverflowError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ConfMemberOverflowError",void 0,void 0,!1,!1),C.BalanceLessError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::BalanceLessError",void 0,void 0,!1,!1),C.KickoutSelfError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::KickoutSelfError",void 0,void 0,!1,!1),C.ConferenceEndError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ConferenceEndError",void 0,void 0,!1,!1),C.ConferenceBeginError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ConferenceBeginError",void 0,void 0,!1,!1),C.PINError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::PINError",void 0,void 0,!1,!1),C.FieldDuplicatedError=c.defineUserException(function(e,t,n,i,r){o.ConferenceError.call(this,e,t,r),this.name=void 0!==n?n:"",this.value=void 0!==i?i:""},o.ConferenceError,"Conference::FieldDuplicatedError",function(e){e.writeString(this.name),e.writeString(this.value)},function(e){this.name=e.readString(),this.value=e.readString()},!1,!1),C.InviteeNotFoundError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::InviteeNotFoundError",void 0,void 0,!1,!1),C.InviteeDuplicatedError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::InviteeDuplicatedError",void 0,void 0,!1,!1),C.InvalidTermTypeError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::InvalidTermTypeError",void 0,void 0,!1,!1),C.NoPSTNHostError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::NoPSTNHostError",void 0,void 0,!1,!1),C.ConferencePrepareError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ConferencePrepareError",void 0,void 0,!1,!1),C.ConferenceLoginRetry=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ConferenceLoginRetry",void 0,void 0,!1,!1),C.ResourceAllocateError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ResourceAllocateError",void 0,void 0,!1,!1),C.OnlyInviteeCanLogin=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::OnlyInviteeCanLogin",void 0,void 0,!1,!1),C.MemberAlreadyInMeet=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::MemberAlreadyInMeet",void 0,void 0,!1,!1),C.MemberAlreadyInCanTryVisitor=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::MemberAlreadyInCanTryVisitor",void 0,void 0,!1,!1),C.MismatchClientVersion=c.defineUserException(function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.newVer=void 0!==n?n:""},o.ConferenceError,"Conference::MismatchClientVersion",function(e){e.writeString(this.newVer)},function(e){this.newVer=e.readString()},!1,!1),C.PeerHasBeen1v1SubMeeting=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::PeerHasBeen1v1SubMeeting",void 0,void 0,!1,!1),C.LiveStreamNotStart=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::LiveStreamNotStart",void 0,void 0,!1,!1),C.PstnHostCantLoginInWeb=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::PstnHostCantLoginInWeb",void 0,void 0,!1,!1),C.CannotBoradcast=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::CannotBoradcast",void 0,void 0,!1,!1),C.CannotInteractBoradcast=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::CannotInteractBoradcast",void 0,void 0,!1,!1),C.ConfCannotInteractBoradcast=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ConfCannotInteractBoradcast",void 0,void 0,!1,!1),C.ContainsSensitiveWords=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ContainsSensitiveWords",void 0,void 0,!1,!1),C.ThirdPartyLiveIsOn=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ThirdPartyLiveIsOn",void 0,void 0,!1,!1),C.ListLiveIsOn=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ListLiveIsOn",void 0,void 0,!1,!1),C.ClientLiveIsOn=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ClientLiveIsOn",void 0,void 0,!1,!1),C.LuckyDrawNotExists=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::LuckyDrawNotExists",void 0,void 0,!1,!1),C.LuckyDrawCfgFails=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::LuckyDrawCfgFails",void 0,void 0,!1,!1),C.JoinLuckyDrawFails=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::JoinLuckyDrawFails",void 0,void 0,!1,!1),C.AnnouceLuckyDrawFails=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::AnnouceLuckyDrawFails",void 0,void 0,!1,!1),C.AnnouceLuckyDrawNoMember=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::AnnouceLuckyDrawNoMember",void 0,void 0,!1,!1),C.SeviceNotEnabled=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::SeviceNotEnabled",void 0,void 0,!1,!1),C.SrvRecordStarted=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::SrvRecordStarted",void 0,void 0,!1,!1),C.NoResourceForMIC=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::NoResourceForMIC",void 0,void 0,!1,!1),C.StartRecordError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::StartRecordError",void 0,void 0,!1,!1),C.PlayBackGroundMusicFail=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::PlayBackGroundMusicFail",void 0,void 0,!1,!1),C.SameTimeStartMediaError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::SameTimeStartMediaError",void 0,void 0,!1,!1),C.lockQuesError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::lockQuesError",void 0,void 0,!1,!1),C.delQuesError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::delQuesError",void 0,void 0,!1,!1),C.quesNotExistError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::quesNotExistError",void 0,void 0,!1,!1),C.modifyQuesTypeError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::modifyQuesTypeError",void 0,void 0,!1,!1),C.AlreadyRollCallError=c.defineUserException(function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.rollCaller=void 0!==n?n:0},o.ConferenceError,"Conference::AlreadyRollCallError",function(e){e.writeShort(this.rollCaller)},function(e){this.rollCaller=e.readShort()},!1,!1),C.AlreadySharedException=c.defineUserException(function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.sharer=void 0!==n?n:0},o.ConferenceError,"Conference::AlreadySharedException",function(e){e.writeShort(this.sharer)},function(e){this.sharer=e.readShort()},!1,!1),C.WBMaxError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::WBMaxError",void 0,void 0,!1,!1),C.WBNotExistError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::WBNotExistError",void 0,void 0,!1,!1),C.WBElementNoExistError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::WBElementNoExistError",void 0,void 0,!1,!1),C.ExceedTheCapacityLimit=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::ExceedTheCapacityLimit",void 0,void 0,!1,!1),Object.defineProperty(C,"SET_PSTN_NUM",{value:1}),Object.defineProperty(C,"CALLED_PSTN_NUM",{value:2}),Object.defineProperty(C,"BIND_PSTN_NUM",{value:4}),c.defineDictionary(C,"ModuleDict","ModuleDictHelper","Ice.StringHelper","Ice.ObjectPrx",!1,void 0,void 0),Object.defineProperty(C,"CLIENT_SLICE_VER",{value:"slice_ver"}),Object.defineProperty(C,"CLINET_PCID",{value:"client_pcid"}),Object.defineProperty(C,"CLINET_MACADDR",{value:"client_macaddr"}),Object.defineProperty(C,"CLINET_LANGUAGE",{value:"client_lang"}),Object.defineProperty(C,"CLINET_VER",{value:"client_ver"}),Object.defineProperty(C,"CLINET_SDK_VER",{value:"sdk_ver"}),Object.defineProperty(C,"CLINET_H5SDK_VER",{value:"h5sdk_ver"}),Object.defineProperty(C,"CLINET_ISWIFI",{value:"client_iswifi"}),Object.defineProperty(C,"CLINET_PLATFORM",{value:"client_platform"}),Object.defineProperty(C,"CLINET_PRODUCTTYPE",{value:"client_pdType"}),Object.defineProperty(C,"CLINET_DEVICETYPE",{value:"client_device"}),Object.defineProperty(C,"CLIENT_BRIDGETYPE",{value:"bridgeType"}),Object.defineProperty(C,"CLIENT_INVITECODE",{value:"invite_code"}),Object.defineProperty(C,"CLIENT_PHONENUM",{value:"phone_num"}),Object.defineProperty(C,"CLIENT_ISCUSTOMERSERVICE",{value:"is_cs"}),Object.defineProperty(C,"CLIENT_PRIV_ID",{value:"priv_id"}),Object.defineProperty(C,"CLIETN_PRIV_DAT",{value:"priv_dat"}),Object.defineProperty(C,"CLIETN_PRIV_ROLE",{value:"priv_role"}),Object.defineProperty(C,"CLINET_LOGIN_TIMESTAMP",{value:"client_time"}),Object.defineProperty(C,"CLINET_IS_WEB_VIEWER",{value:"webview"}),Object.defineProperty(C,"CLINET_LIVEAUDIO",{value:"liveAudio"}),Object.defineProperty(C,"CLINET_OPENID",{value:"openId"}),Object.defineProperty(C,"CLIENT_ACODEC",{value:"acodec"}),Object.defineProperty(C,"CLIENT_LIVE_TYPE",{value:"livetype"}),Object.defineProperty(C,"CLIENT_LIVE_MOBILE",{value:"livemobile"}),Object.defineProperty(C,"CLINET_BROWSER_INFO",{value:"browser"}),Object.defineProperty(C,"CLINET_VP8_SUPPORT",{value:"vp8"}),Object.defineProperty(C,"CLINET_WEBRTC_CODECS",{value:"rtc_codecs"}),Object.defineProperty(C,"CLIENT_TIME_OUT",{value:"time_out"}),Object.defineProperty(C,"CLINET_SUPPORT_NEWCONFID",{value:"spt_newconf"}),Object.defineProperty(C,"CLIENT_SDK_USRTOKEN",{value:"token"}),Object.defineProperty(C,"CLIENT_MCUID",{value:"mcuID"}),Object.defineProperty(C,"CLIENT_VER",{value:"client_ver"}),Object.defineProperty(C,"CLIENT_SDK_TYPE",{value:"sdktype"}),Object.defineProperty(C,"CLIENT_SDK_TYPE_VIDEO",{value:"video"}),Object.defineProperty(C,"CLIENT_SDK_TYPE_LIVE",{value:"live"}),Object.defineProperty(C,"PLATFORMTYPE_WIN32",{value:"win32"}),Object.defineProperty(C,"PLATFORMTYPE_IOS",{value:"ios"}),Object.defineProperty(C,"PLATFORMTYPE_ANDROID",{value:"android"}),Object.defineProperty(C,"PLATFORMTYPE_LINUX",{value:"linux"}),Object.defineProperty(C,"PLATFORMTYPE_MAC",{value:"mac"}),Object.defineProperty(C,"PDTYPE_TVNETMEETING",{value:"net_tv"}),Object.defineProperty(C,"PDTYPE_NETMEETING",{value:"net"}),Object.defineProperty(C,"PDTYPE_PSTNMEETING",{value:"pstn"}),Object.defineProperty(C,"PDTYPE_LIVE",{value:"live"}),Object.defineProperty(C,"PDTYPE_MCU",{value:"mcu"}),Object.defineProperty(C,"DEVICETYPE_PC",{value:"pc"}),Object.defineProperty(C,"DEVICETYPE_PAD",{value:"pad"}),Object.defineProperty(C,"DEVICETYPE_PHONE",{value:"phone"}),Object.defineProperty(C,"DEVICETYPE_FLASH",{value:"flash"}),Object.defineProperty(C,"DEVICETYPE_MCU",{value:"mcu"}),Object.defineProperty(C,"DEVICETYPE_BOX",{value:"box"}),Object.defineProperty(C,"DEVICETYPE_SIPGATEWAY",{value:"sipgateway"}),Object.defineProperty(C,"DEVICETYPE_WEBRTC",{value:"webrtc"}),Object.defineProperty(C,"DEVICETYPE_WXMINI",{value:"wxmini"}),Object.defineProperty(C,"BRIDGETYPE_MONITOR",{value:"monitor"}),Object.defineProperty(C,"BRIDGETYPE_MEETING",{value:"meeting"}),Object.defineProperty(C,"MEETINGMODE_NORMAL",{value:"normal"}),Object.defineProperty(C,"MEETINGMODE_CONSULTATION",{value:"consultation"}),Object.defineProperty(C,"ACODEC_ISAC",{value:"isac"}),Object.defineProperty(C,"LIVETYPE_WEIXIN",{value:"0"}),Object.defineProperty(C,"LIVETYPE_USER",{value:"1"}),Object.defineProperty(C,"LIVETYPE_OTHER",{value:"2"}),C.LoginRequest=c.defineStruct(function(e,t,n,i,r,o,c,a,s,l,d,u){this.confId=void 0!==e?e:0,this.confKey=void 0!==t?t:"",this.termId=void 0!==n?n:0,this.memberId=void 0!==i?i:0,this.memberType=void 0!==r?r:0,this.nickname=void 0!==o?o:"",this.callbacks=void 0!==c?c:null,this.accessNo=void 0!==a?a:0,this.publicIP=void 0!==s?s:"",this.localIP=void 0!==l?l:"",this.localMask=void 0!==d?d:"",this.extProperty=void 0!==u?u:null},!1,function(e){e.writeInt(this.confId),e.writeString(this.confKey),e.writeShort(this.termId),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.nickname),C.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.publicIP),e.writeString(this.localIP),e.writeString(this.localMask),C.StringStringMapHelper.write(e,this.extProperty)},function(e){this.confId=e.readInt(),this.confKey=e.readString(),this.termId=e.readShort(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.nickname=e.readString(),this.callbacks=C.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.publicIP=e.readString(),this.localIP=e.readString(),this.localMask=e.readString(),this.extProperty=C.StringStringMapHelper.read(e)},22,!1),C.FileServerInfo=c.defineStruct(function(e,t){this.fsProxy=void 0!==e?e:"",this.key=void 0!==t?t:""},!0,function(e){e.writeString(this.fsProxy),e.writeString(this.key)},function(e){this.fsProxy=e.readString(),this.key=e.readString()},2,!1),C.REC_STATE=c.defineEnum([["NO_RECORD",0],["STARTING",1],["RECORDING",2],["PAUSED",3],["STOPPING",4]]),c.defineSequence(C,"FileServerSeqHelper","Conference.FileServerInfo",!1),Object.defineProperty(C,"INVALID_COUNTDOWN",{value:-1}),Object.defineProperty(C,"CONFINFO_HOSTPWD",{value:"hostpwd"}),Object.defineProperty(C,"CONFINFO_CONFPWD",{value:"confpwd"}),Object.defineProperty(C,"CONFINFO_SCHEDULETIME",{value:"scheduletime"}),Object.defineProperty(C,"CONFINFO_SUBJECT",{value:"subject"}),Object.defineProperty(C,"CONFINFO_URL",{value:"url"}),Object.defineProperty(C,"CONFINFO_URLPIC",{value:"urlpic"}),Object.defineProperty(C,"CONFINFO_PSTNNUM",{value:"pstnnum"}),Object.defineProperty(C,"CONFINFO_PSTNPWD",{value:"pstnpwd"}),Object.defineProperty(C,"CONFINFO_AGENDA",{value:"agenda"}),Object.defineProperty(C,"CONFINFO_SUPPORT_VLIST",{value:"vlist"}),Object.defineProperty(C,"CONFINFO_ROOM_SIZETYPE",{value:"roomsizetype"}),Object.defineProperty(C,"CONFINFO_ISTEST",{value:"istest"}),Object.defineProperty(C,"CONFINFO_ISDEMO",{value:"isdemo"}),Object.defineProperty(C,"CONFINFO_HOTLINE",{value:"hotline"}),Object.defineProperty(C,"CONFINFO_ISFIX",{value:"isfixed"}),Object.defineProperty(C,"CONFINFO_HD",{value:"hd"}),Object.defineProperty(C,"CONFINFO_PSTNNOTICE",{value:"pstnnotice"}),Object.defineProperty(C,"CONFINFO_FUNC_VIDEOWALL",{value:"videowall"}),Object.defineProperty(C,"CONFINFO_VIDEO_ENABLE",{value:"video"}),Object.defineProperty(C,"CONFINFO_SHOW_MAIN_AD",{value:"main_ad"}),Object.defineProperty(C,"CONFINFO_VIDEO_MONITOR",{value:"vmonitor"}),Object.defineProperty(C,"CONFINFO_USE_PHONE",{value:"use_phone"}),Object.defineProperty(C,"CONFINFO_INVITE",{value:"invite"}),Object.defineProperty(C,"CONFINFO_VIDEO_LUBO",{value:"lubo"}),Object.defineProperty(C,"CONFINFO_MEDIA_PLAY",{value:"media_play"}),Object.defineProperty(C,"CONFINFO_MULTI_CAMERAS",{value:"multiple_cameras"}),Object.defineProperty(C,"CONFINFO_SUPPORT_BRIDGE",{value:"bridge"}),Object.defineProperty(C,"CONFINFO_SCREEN_SHARE",{value:"screen_share"}),Object.defineProperty(C,"CONFINFO_DOCUMENT_SHOW",{value:"document_show"}),Object.defineProperty(C,"CONFINFO_WHITE_BOARD",{value:"whiteboard"}),Object.defineProperty(C,"CONFINFO_ANSWER_QUESTION",{value:"answer_question"}),Object.defineProperty(C,"CONFINFO_FILE_SHARE",{value:"file_share"}),Object.defineProperty(C,"CONFINFO_MEETING_INFO",{value:"meeting_info"}),Object.defineProperty(C,"CONFINFO_OMNIDIRECTIONAL_MIC",{value:"omnidirectional_mic"}),Object.defineProperty(C,"CONFINFO_MEET_MODE",{value:"meeting_mode"}),Object.defineProperty(C,"CONFINFO_USER_ROLE",{value:"user_role"}),Object.defineProperty(C,"CONFINFO_COMPANY_ID",{value:"compid"}),Object.defineProperty(C,"CONFINFO_USER_NETDISK_ENABLE",{value:"user_net_disk"}),Object.defineProperty(C,"CONFINFO_COMP_NETDISK_ENABLE",{value:"comp_net_disk"}),Object.defineProperty(C,"CONFINFO_FREECONF",{value:"freeconf"}),Object.defineProperty(C,"CONFINFO_MAINVIDEO_SHOWMODE",{value:"main_svm"}),Object.defineProperty(C,"CONFINFO_IS_BROADCATING",{value:"rtmpliveon"}),Object.defineProperty(C,"CONFINFO_WEBVIEWER_NUM",{value:"webviewer_num"}),Object.defineProperty(C,"CONFINFO_WEBVIEWER_RIGHTS",{value:"webviewer_rights"}),Object.defineProperty(C,"CONFINFO_WEBVIEWER_QUES",{value:"webviewer_ques"}),Object.defineProperty(C,"CONFINFO_BROADCAST_DURATION",{value:"rtmplivetm"}),Object.defineProperty(C,"CONFINFO_WB_CONTAINERSIZE",{value:"wb_container"}),Object.defineProperty(C,"CONFINFO_H264_PROFILE",{value:"h264profile"}),Object.defineProperty(C,"CONFINFO_H264_NOCABAC",{value:"h264nocabac"}),Object.defineProperty(C,"CONFINFO_H264_SLICEMAXSZ",{value:"h264slicemaxsz"}),Object.defineProperty(C,"CONFINFO_H264_IFRAME",{value:"h264iframe"}),Object.defineProperty(C,"CONFINFO_H264_NOHARDCODING",{value:"h264nohardcoding"}),Object.defineProperty(C,"CONFINFO_SCREEN_ENCTYPE",{value:"screenenctype"}),Object.defineProperty(C,"CONFINFO_HIFPS_VALUE",{value:"hi_fps"}),Object.defineProperty(C,"CONFINFO_H264_PICMAXSIZE",{value:"h264picmaxsize"}),Object.defineProperty(C,"CONFINFO_SUPPORT_SIP",{value:"is_sip"}),Object.defineProperty(C,"CONFINFO_MS_MODE",{value:"ms_mode"}),Object.defineProperty(C,"CONFINFO_H264_ENCFIXEDSZ",{value:"h264encfixedsz"}),Object.defineProperty(C,"CONFINFO_HD_FOR_MOBILE",{value:"hd_for_mobile"}),Object.defineProperty(C,"CONFINFO_LIVE_CONFIG",{value:"livecfg"}),Object.defineProperty(C,"CONFINFO_SRV_RECORDSTATE",{value:"srv_record_state"}),Object.defineProperty(C,"CONFINFO_SRV_RECORDCFG",{value:"srv_record_cfg"}),Object.defineProperty(C,"CONFINFO_SVR_RECORDOWNER",{value:"svr_record_owner"}),Object.defineProperty(C,"CONFINFO_VIDEO_VPU_SUPPORT_ENC",{value:"vpu_support_enc"}),Object.defineProperty(C,"CONFINFO_VIDEO_VPU_SUPPORT_DEC",{value:"vpu_supportd_dec"}),Object.defineProperty(C,"CONFINFO_VIDEO_VPU_UNSUPPORT_ENC_DEV",{value:"vpu_unsupport_enc_dev"}),Object.defineProperty(C,"CONFINFO_VIDEO_VPU_UNSUPPORT_DEC_DEV",{value:"vpu_unsupport_dec_dev"}),Object.defineProperty(C,"CONFINFO_VIDEOLIST_MODE",{value:"vlistmode"}),Object.defineProperty(C,"CONFINFO_VIDEOLIST_CAMS",{value:"vlistcams"}),Object.defineProperty(C,"CONFINFO_MAX_VIDEOUIS",{value:"maxvuis"}),Object.defineProperty(C,"CONFINFO_VIDEOWALL_LAYOUT",{value:"vwalllo"}),Object.defineProperty(C,"CONFINFO_UI_LOCKSTATUS",{value:"uilock"}),Object.defineProperty(C,"CONFINFO_SRV_RECORD",{value:"srv_record"}),Object.defineProperty(C,"CONFINFO_SHOW_LIVE",{value:"show_live"}),Object.defineProperty(C,"CONFINFO_SIGNIN",{value:"signinurl"}),Object.defineProperty(C,"CONFINFO_EXTTAB_URL",{value:"exttaburl"}),Object.defineProperty(C,"CONFINFO_PRIVTAB_INFO",{value:"privtabinfo"}),Object.defineProperty(C,"CONFINFO_PRIVATE_FILE_SERVER",{value:"privfs"}),Object.defineProperty(C,"CONFINFO_DOC_BACKUP_COMP_NDD",{value:"doc_backup_comp_ndd"}),Object.defineProperty(C,"CONFINFO_OEMKEY",{value:"oem_key"}),Object.defineProperty(C,"CONFINFO_VIDEOCUSTOMBPS",{value:"video_custom_bps"}),Object.defineProperty(C,"CONFINFO_CONFIRM_AUTOEND_TYPE",{value:"autoend"}),Object.defineProperty(C,"CONFINFO_RECORD_ALL_MEMBER",{value:"record_all"}),Object.defineProperty(C,"CONFINFO_ACCESS_KEEPALIVE_TIME",{value:"kp_time_a"}),Object.defineProperty(C,"CONFINFO_CONTROL_KEEPALIVE_TIME",{value:"kp_time_c"}),Object.defineProperty(C,"CONFINFO_NEW_CONFID",{value:"new_confid"}),Object.defineProperty(C,"CONFINFO_FS_HTTP",{value:"fs_http"}),Object.defineProperty(C,"CONFINFO_SHARE_CFG",{value:"share_cfg"}),Object.defineProperty(C,"CONF_END_REASON_UNKOWN",{value:"unkown"}),Object.defineProperty(C,"CONF_END_REASON_TERM",{value:"term"}),Object.defineProperty(C,"CONF_END_REASON_AUTO",{value:"auto"}),Object.defineProperty(C,"CONF_END_REASON_WEB",{value:"web"}),Object.defineProperty(C,"CONF_END_REASON_AAA",{value:"aaa"}),Object.defineProperty(C,"CONF_END_REASON_HOST_OFFLINE",{value:"host_offline"}),Object.defineProperty(C,"LEFT_REASON_KICK",{value:"kick"}),Object.defineProperty(C,"LEFT_REASON_REFRESH",{value:"refresh"}),Object.defineProperty(C,"LEFT_REASON_EXTRUDE",{value:"extrude"}),Object.defineProperty(C,"LEFT_REASON_TIMEOUT",{value:"timeout"}),Object.defineProperty(C,"LEFT_REASON_SEAT",{value:"seat"}),Object.defineProperty(C,"LEFT_REASON_EXIT",{value:"exit"}),Object.defineProperty(C,"LEFT_REASON_BUSY",{value:"busy"}),Object.defineProperty(C,"LEFT_REASON_BALANCE_LESS",{value:"balance_less"}),Object.defineProperty(C,"LEFT_REASON_TOKENTIMEOUT",{value:"token_timeout"}),Object.defineProperty(C,"KNOCKED_REASON_ROOMLOCKED",{value:"room_locked"}),Object.defineProperty(C,"KNOCKED_REASON_SEATLESS",{value:"seat_less"}),Object.defineProperty(C,"KNOCKED_REASON_BALANCELESS",{value:"balance_less"}),Object.defineProperty(C,"BOARDCAST_RTMP",{value:"rtmp"}),Object.defineProperty(C,"BOARDCAST_RTMP2",{value:"rtmp2"}),Object.defineProperty(C,"BOARDCAST_SCREEN_RTMP",{value:"rtmp_screen"}),Object.defineProperty(C,"BOARDCAST_HLS",{value:"hls"}),Object.defineProperty(C,"BOARDCAST_HLS2",{value:"hls2"}),Object.defineProperty(C,"BOARDCAST_SCREEN_HLS",{value:"hls_screen"}),n.Conference=C}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,f=(t("Common/Exception").Common,r.require(e,["Control/PublicTypes","Control/Contact"]).Conference),o=i.Slice;Object.defineProperty(f,"ACNT_ADMIN",{value:0}),Object.defineProperty(f,"ACNT_MEETCREATOR",{value:1}),Object.defineProperty(f,"ACNT_PARTICIPANTS",{value:2}),Object.defineProperty(f,"MINFO_ALLCAMS",{value:"allCams"}),Object.defineProperty(f,"MINFO_OPENEDCAMIDS",{value:"openedCamIDs"}),Object.defineProperty(f,"MINFO_ACNTTYPE",{value:"anctType"}),Object.defineProperty(f,"MINFO_WDTXDTYPE",{value:"WDTXDType"}),Object.defineProperty(f,"WDTXDTYPE_ADMIN",{value:"1"}),Object.defineProperty(f,"WDTXDTYPE_USER",{value:"2"}),Object.defineProperty(f,"MINFO_PSTNIVR",{value:"ivr"}),Object.defineProperty(f,"PSTNIVR_YES",{value:"1"}),Object.defineProperty(f,"MINFO_YDYUSERID",{value:"ydyuserid"}),Object.defineProperty(f,"MINFO_SCEP",{value:"scep"}),f.Member=o.defineStruct(function(e,t,n,i,r,o,c,a,s,l,d,u){this.termId=void 0!==e?e:0,this.bindId=void 0!==t?t:0,this.termType=void 0!==n?n:0,this.nickname=void 0!==i?i:"",this.actor=void 0!==r?r:0,this.audioStatus=void 0!==o?o:f.ASTATUS.AUNKNOWN,this.videoStatus=void 0!==c?c:f.VSTATUS.VUNKNOWN,this.bEnableVideo=void 0!==a&&a,this.rights=void 0!==s?s:null,this.contactId=void 0!==l?l:new f.ContactIdType,this.phone=void 0!==d?d:"",this.extProperty=void 0!==u?u:null},!1,function(e){e.writeShort(this.termId),e.writeShort(this.bindId),e.writeByte(this.termType),e.writeString(this.nickname),e.writeByte(this.actor),f.ASTATUS.__write(e,this.audioStatus),f.VSTATUS.__write(e,this.videoStatus),e.writeBool(this.bEnableVideo),f.ByteListHelper.write(e,this.rights),f.ContactIdType.write(e,this.contactId),e.writeString(this.phone),f.StringStringMapHelper.write(e,this.extProperty)},function(e){this.termId=e.readShort(),this.bindId=e.readShort(),this.termType=e.readByte(),this.nickname=e.readString(),this.actor=e.readByte(),this.audioStatus=f.ASTATUS.__read(e),this.videoStatus=f.VSTATUS.__read(e),this.bEnableVideo=e.readBool(),this.rights=f.ByteListHelper.read(e),this.contactId=f.ContactIdType.read(e,this.contactId),this.phone=e.readString(),this.extProperty=f.StringStringMapHelper.read(e)},18,!1),o.defineSequence(f,"MemberSeqHelper","Conference.Member",!1),n.Conference=f}("undefined"!=typeof global&&void 0!==global.process?module:void 0,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,c=r.module("Conference");Object.defineProperty(c,"CT_USER",{value:1}),Object.defineProperty(c,"CT_CONTACT",{value:2}),Object.defineProperty(c,"CT_TMP",{value:3}),Object.defineProperty(c,"CT_CLIENT",{value:6}),Object.defineProperty(c,"CT_VIRTUAL",{value:7}),c.Contact=o.defineStruct(function(e,t,n,i,r,o){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0,this.nickname=void 0!==n?n:"",this.email=void 0!==i?i:"",this.mobile=void 0!==r?r:"",this.confPhone=void 0!==o?o:""},!0,function(e){e.writeInt(this.id),e.writeByte(this.type),e.writeString(this.nickname),e.writeString(this.email),e.writeString(this.mobile),e.writeString(this.confPhone)},function(e){this.id=e.readInt(),this.type=e.readByte(),this.nickname=e.readString(),this.email=e.readString(),this.mobile=e.readString(),this.confPhone=e.readString()},9,!1),c.ContactIdType=o.defineStruct(function(e,t){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0},!0,function(e){e.writeInt(this.id),e.writeByte(this.type)},function(e){this.id=e.readInt(),this.type=e.readByte()},5,!0),o.defineSequence(c,"ContactSeqHelper","Conference.Contact",!1),o.defineSequence(c,"ContactIdSeqHelper","Conference.ContactIdType",!0),o.defineDictionary(c,"ContactTree","ContactTreeHelper","Ice.StringHelper","Conference.ContactSeqHelper",!1,void 0,void 0,i.ArrayUtil.equals),n.Conference=c}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,c=i.Slice;o.ConferenceSessionV4=c.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),o.ConferenceSessionV4Prx=c.defineProxy(i.ObjectPrx,o.ConferenceSessionV4.ice_staticId,void 0),c.defineOperations(o.ConferenceSessionV4,o.ConferenceSessionV4Prx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=(i.Slice,r.module("Conference"));Object.defineProperty(o,"PUBLIC_CHAT",{value:1}),Object.defineProperty(o,"PRIVATE_HOST_CHAT",{value:2}),Object.defineProperty(o,"PRIVATE_DEMO_CHAT",{value:3}),Object.defineProperty(o,"PRIVATE_OTHER_CHAT",{value:4}),Object.defineProperty(o,"SCREEN_RECORD",{value:11}),Object.defineProperty(o,"FILE_SHARE",{value:5}),Object.defineProperty(o,"WB_VIEW_PAGE",{value:9}),Object.defineProperty(o,"WB_VIEW_ANY",{value:10}),Object.defineProperty(o,"DEMO_RIGHT_MANAGE",{value:50}),Object.defineProperty(o,"DEMO_ACTOR_MANAGE",{value:51}),Object.defineProperty(o,"OPTION_MANAGE",{value:60}),Object.defineProperty(o,"HOST_ACTOR_MANAGE",{value:70}),Object.defineProperty(o,"LOCK_RIGHT",{value:71}),Object.defineProperty(o,"KICKOUT_RIGHT",{value:72}),Object.defineProperty(o,"END_CONFERENCE_RIGHT",{value:73}),Object.defineProperty(o,"MEMBER_INFO_MANAGE",{value:74}),Object.defineProperty(o,"INVITE_RIGHT",{value:75}),Object.defineProperty(o,"BEGIN_CONFERENCE_RIGHT",{value:76}),Object.defineProperty(o,"UPLOAD_FILE",{value:80}),Object.defineProperty(o,"DEL_OTHERS_FILE",{value:81}),Object.defineProperty(o,"START_NOTICE",{value:85}),Object.defineProperty(o,"STOP_NOTICE",{value:86}),Object.defineProperty(o,"START_ROLL_CALL",{value:90}),Object.defineProperty(o,"STOP_ROLL_CALL",{value:91}),Object.defineProperty(o,"OPEN_OTHERS_MIC",{value:95}),Object.defineProperty(o,"CLOSE_OTHERS_MIC",{value:96}),Object.defineProperty(o,"ALL_SILENCE",{value:97}),Object.defineProperty(o,"CHANGE_VIDEO_FOCUS_WINDOW_MODE",{value:100}),Object.defineProperty(o,"CHANGE_VIDEO_LAYOUT_MODE",{value:101}),Object.defineProperty(o,"SET_CURRENT_TAB",{value:105}),Object.defineProperty(o,"SET_FULLSCREEN",{value:106}),Object.defineProperty(o,"SET_FRAME_LAYOUT",{value:107}),Object.defineProperty(o,"FORCE_SYNC",{value:108}),Object.defineProperty(o,"WB_CREATE",{value:110}),Object.defineProperty(o,"WB_CLOSE",{value:111}),Object.defineProperty(o,"WB_CHANGE_NAME",{value:112}),Object.defineProperty(o,"WB_MARK",{value:113}),Object.defineProperty(o,"WB_SAVE",{value:114}),Object.defineProperty(o,"WB_PAGE_IMPORT",{value:115}),Object.defineProperty(o,"WB_CHANGE_SCALE",{value:116}),Object.defineProperty(o,"WB_ROTATE",{value:117}),Object.defineProperty(o,"WB_SET_CURRENT_PAGE",{value:118}),Object.defineProperty(o,"WB_SET_HOTSPOT",{value:119}),Object.defineProperty(o,"WB_SET_MARK_TERMS",{value:120}),Object.defineProperty(o,"SCREEN_SHARE_OPERATE",{value:130}),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,S=r.require(e,["Control/Member","Control/Contact","Control/PublicTypes","Control/Notice","Control/ConferenceV4"]).Conference,c=i.Slice;S.LoginResponse=c.defineStruct(function(e,t,n,i,r,o,c,a,s,l,d,u,f,h,p,_,C,g,R,m,I,y,v){this.termId=void 0!==e?e:0,this.option=void 0!==t?t:0,this.myDetail=void 0!==n?n:new S.Contact,this.modules=void 0!==i?i:null,this.activeMembers=void 0!==r?r:null,this.ServerUTCTime=void 0!==o?o:0,this.bRoomLocked=void 0!==c&&c,this.confInfo=void 0!==a?a:null,this.isBegan=void 0!==s&&s,this.countdown=void 0!==l?l:0,this.fileServers=void 0!==d?d:null,this.vqs=void 0!==u?u:null,this.windowMode=void 0!==f?f:S.WINDOW_MODE.VMANAGER_LOCK,this.mainVideoTermID=void 0!==h?h:0,this.vlo=void 0!==p?p:S.VIDEOLAYOUTMODE.VLO_1v1_M,this.bAllowWall=void 0!==_&&_,this.curMainTab=void 0!==C?C:new S.TabID,this.curSubTab=void 0!==g?g:new S.TabID,this.bFull=void 0!==R&&R,this.sm=void 0!==m?m:S.SYNCMODE.SYNC_FORCE,this.lastTabValue=void 0!==I?I:0,this.lastElemValue=void 0!==y?y:0,this.wbDescibes=void 0!==v?v:null},!1,function(e){e.writeShort(this.termId),e.writeInt(this.option),S.Contact.write(e,this.myDetail),S.ModuleDictHelper.write(e,this.modules),S.MemberSeqHelper.write(e,this.activeMembers),e.writeInt(this.ServerUTCTime),e.writeBool(this.bRoomLocked),S.StringStringMapHelper.write(e,this.confInfo),e.writeBool(this.isBegan),e.writeInt(this.countdown),S.FileServerSeqHelper.write(e,this.fileServers),S.VideoQualitySeqHelper.write(e,this.vqs),S.WINDOW_MODE.__write(e,this.windowMode),e.writeShort(this.mainVideoTermID),S.VIDEOLAYOUTMODE.__write(e,this.vlo),e.writeBool(this.bAllowWall),S.TabID.write(e,this.curMainTab),S.TabID.write(e,this.curSubTab),e.writeBool(this.bFull),S.SYNCMODE.__write(e,this.sm),e.writeShort(this.lastTabValue),e.writeShort(this.lastElemValue),S.WhiteBoardDescribeSeqHelper.write(e,this.wbDescibes)},function(e){this.termId=e.readShort(),this.option=e.readInt(),this.myDetail=S.Contact.read(e,this.myDetail),this.modules=S.ModuleDictHelper.read(e),this.activeMembers=S.MemberSeqHelper.read(e),this.ServerUTCTime=e.readInt(),this.bRoomLocked=e.readBool(),this.confInfo=S.StringStringMapHelper.read(e),this.isBegan=e.readBool(),this.countdown=e.readInt(),this.fileServers=S.FileServerSeqHelper.read(e),this.vqs=S.VideoQualitySeqHelper.read(e),this.windowMode=S.WINDOW_MODE.__read(e),this.mainVideoTermID=e.readShort(),this.vlo=S.VIDEOLAYOUTMODE.__read(e),this.bAllowWall=e.readBool(),this.curMainTab=S.TabID.read(e,this.curMainTab),this.curSubTab=S.TabID.read(e,this.curSubTab),this.bFull=e.readBool(),this.sm=S.SYNCMODE.__read(e),this.lastTabValue=e.readShort(),this.lastElemValue=e.readShort(),this.wbDescibes=S.WhiteBoardDescribeSeqHelper.read(e)},50,!1),S.ConferenceRoom=c.defineObject(void 0,i.Object,[S.ConferenceSessionV4],0,["::Conference::ConferenceRoom","::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),S.ConferenceRoomPrx=c.defineProxy(i.ObjectPrx,S.ConferenceRoom.ice_staticId,[S.ConferenceSessionV4Prx]),c.defineOperations(S.ConferenceRoom,S.ConferenceRoomPrx,{login:[,,,1,,[S.LoginResponse],[[S.LoginRequest]],,[o.ConferenceError],,]}),S.SSLoginRequest=c.defineStruct(function(e,t,n,i,r,o,c,a){this.confKey=void 0!==e?e:"",this.memberId=void 0!==t?t:0,this.memberType=void 0!==n?n:0,this.phoneNum=void 0!==i?i:"",this.callbacks=void 0!==r?r:null,this.accessNo=void 0!==o?o:0,this.PIN=void 0!==c?c:"",this.sessionId=void 0!==a?a:""},!1,function(e){e.writeString(this.confKey),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.phoneNum),S.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.PIN),e.writeString(this.sessionId)},function(e){this.confKey=e.readString(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.phoneNum=e.readString(),this.callbacks=S.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.PIN=e.readString(),this.sessionId=e.readString()},14,!1),S.SSLoginResponse=c.defineStruct(function(e,t,n,i,r,o,c,a){this.termId=void 0!==e?e:0,this.modules=void 0!==t?t:null,this.actor=void 0!==n?n:0,this.needPIN=void 0!==i&&i,this.PINLen=void 0!==r?r:0,this.currentTermNum=void 0!==o?o:0,this.isBegan=void 0!==c&&c,this.audioStatus=void 0!==a?a:S.ASTATUS.AUNKNOWN},!1,function(e){e.writeShort(this.termId),S.ModuleDictHelper.write(e,this.modules),e.writeByte(this.actor),e.writeBool(this.needPIN),e.writeByte(this.PINLen),e.writeInt(this.currentTermNum),e.writeBool(this.isBegan),S.ASTATUS.__write(e,this.audioStatus)},function(e){this.termId=e.readShort(),this.modules=S.ModuleDictHelper.read(e),this.actor=e.readByte(),this.needPIN=e.readBool(),this.PINLen=e.readByte(),this.currentTermNum=e.readInt(),this.isBegan=e.readBool(),this.audioStatus=S.ASTATUS.__read(e)},12,!1),Object.defineProperty(S,"PHASE_ALERTING",{value:0}),Object.defineProperty(S,"PHASE_CONNECT",{value:1}),Object.defineProperty(S,"PHASE_END",{value:2}),Object.defineProperty(S,"END_REASON_NORMAL",{value:0}),Object.defineProperty(S,"END_REASON_NO_ANSWER",{value:1}),Object.defineProperty(S,"END_REASON_REJECT",{value:2}),Object.defineProperty(S,"END_REASON_CONNECT_ERR",{value:3}),Object.defineProperty(S,"END_REASON_USER_BUSY",{value:4}),Object.defineProperty(S,"END_REASON_BALANCE_LESS",{value:5}),S.SoftSwitchUser=c.defineObject(void 0,i.Object,void 0,0,["::Conference::SoftSwitchUser","::Ice::Object"],-1,void 0,void 0,!1),S.SoftSwitchUserPrx=c.defineProxy(i.ObjectPrx,S.SoftSwitchUser.ice_staticId,void 0),c.defineOperations(S.SoftSwitchUser,S.SoftSwitchUserPrx,{login:[,,,1,,[S.SSLoginResponse],[[S.SSLoginRequest]],,[o.ConferenceError],,],callProgress:[,,,1,,,[[3],[3],[7]],,,,]}),S.AAAReport=c.defineObject(void 0,i.Object,void 0,0,["::Conference::AAAReport","::Ice::Object"],-1,void 0,void 0,!1),S.AAAReportPrx=c.defineProxy(i.ObjectPrx,S.AAAReport.ice_staticId,void 0),c.defineOperations(S.AAAReport,S.AAAReportPrx,{callBalanceLess:[,,,1,,,[[7],[7]],,[o.ConferenceError],,]}),S.WebAdmin=c.defineObject(void 0,i.Object,void 0,0,["::Conference::WebAdmin","::Ice::Object"],-1,void 0,void 0,!1),S.WebAdminPrx=c.defineProxy(i.ObjectPrx,S.WebAdmin.ice_staticId,void 0),c.defineOperations(S.WebAdmin,S.WebAdminPrx,{refresInvitees:[,,,1,,,,,[o.ConferenceError],,],refreshOptions:[,,,1,,,,,[o.ConferenceError],,],getConfStatus:[,,,1,,[7],,,,,],callInvite:[,,,1,,,[[7],[7],[1]],,[o.ConferenceError],,],getLiveStream:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],requestThirdPartyLiveStreamUrl:[,,,1,,[7],[[3]],,,,],notifyLiveStreamStatus:[,,,1,,,[[3],[3]],,,,],refreshThirdPublishStatus:[,,,1,,,,,,,],startListLive:[,,,1,,[3],[[7]],,[o.ConferenceError],,],stopListLive:[,,,1,,[3],,,,,],notifyRedStatus:[,,,1,,,[[3],[7],[3],[3],[7],[7],[7],[7]],,,,],notifyThumbUp:[,,,1,,,[[3],[3],[3],[7]],,,,],notifypayback:[,,,1,,,[[3],[7]],,,,],swtichLiveAppElements:[,,,1,,,[[3],[2]],,,,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],startRtsp:[,,,1,,[7],[[3],[3],[3],[3]],,[o.ConferenceError],,],stopRtsp:[,,,1,,,,,[o.ConferenceError],,],getRtspInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],updateRtspContent:[,,,1,,,[[3],[3]],,[o.ConferenceError],,],startNoticeMsg:[,,,1,,,[[S.NoticeInfo]],,,,]}),c.defineDictionary(S,"MemberRights","MemberRightsHelper","Ice.ShortHelper","Conference.ByteListHelper",!1,void 0,void 0,i.ArrayUtil.equals),S.ChangedRights=c.defineStruct(function(e,t,n){this.termId=void 0!==e?e:0,this.addedRights=void 0!==t?t:null,this.reducedRights=void 0!==n?n:null},!0,function(e){e.writeShort(this.termId),S.ByteListHelper.write(e,this.addedRights),S.ByteListHelper.write(e,this.reducedRights)},function(e){this.termId=e.readShort(),this.addedRights=S.ByteListHelper.read(e),this.reducedRights=S.ByteListHelper.read(e)},4,!1),c.defineSequence(S,"ChangedRightsSeqHelper","Conference.ChangedRights",!1),Object.defineProperty(S,"INVITE_PREPARE",{value:0}),Object.defineProperty(S,"PSTN_CALLING",{value:1}),Object.defineProperty(S,"PSTN_RING",{value:2}),Object.defineProperty(S,"PSTN_CONNECTED",{value:3}),Object.defineProperty(S,"PSTN_HUNG",{value:4}),Object.defineProperty(S,"PSTN_NO_ANSWER",{value:5}),Object.defineProperty(S,"PSTN_REJECT",{value:6}),Object.defineProperty(S,"PSTN_CONNECT_ERR",{value:7}),Object.defineProperty(S,"PSTN_BUSY",{value:8}),Object.defineProperty(S,"AAA_ACCOUNT_NOT_EXIST",{value:100}),Object.defineProperty(S,"AAA_NO_PERMIT",{value:101}),Object.defineProperty(S,"AAA_BALANCE_NOT_ENOUGH",{value:102}),Object.defineProperty(S,"INV_SMS_FAILED",{value:2}),Object.defineProperty(S,"INV_SMS_SUCCESS",{value:1}),Object.defineProperty(S,"INV_EMAIL_FAILED",{value:2}),Object.defineProperty(S,"INV_EMAIL_SUCCESS",{value:1}),Object.defineProperty(S,"INV_EMAIL_READED",{value:3}),Object.defineProperty(S,"WDT_1V1SUBMT_MONITOR",{value:0}),Object.defineProperty(S,"WDT_1v1SUBMT_CHAT",{value:1}),S.InvitedMember=c.defineStruct(function(e,t,n){this.member=void 0!==e?e:new S.Contact,this.pstnNotice=void 0!==t&&t,this.state=void 0!==n?n:0},!0,function(e){S.Contact.write(e,this.member),e.writeBool(this.pstnNotice),e.writeInt(this.state)},function(e){this.member=S.Contact.read(e,this.member),this.pstnNotice=e.readBool(),this.state=e.readInt()},14,!1),c.defineSequence(S,"InvitedMembersHelper","Conference.InvitedMember",!1),S.INVITE_TYPE=c.defineEnum([["TP_CALL",0],["TP_SMS",1],["TP_EMAIL",2]]),c.defineDictionary(S,"InvitedMembersDict","InvitedMembersDictHelper","Conference.INVITE_TYPE.__helper","Conference.InvitedMembersHelper",!1,void 0,void 0,i.ArrayUtil.equals),c.defineDictionary(S,"HistoryMembers","HistoryMembersHelper","Ice.ShortHelper","Conference.Member",!1,void 0,void 0,i.HashMap.compareEquals),c.defineDictionary(S,"HistoryMemberNames","HistoryMemberNamesHelper","Ice.ShortHelper","Ice.StringHelper",!1,void 0,void 0),c.defineDictionary(S,"StatusDict","StatusDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),c.defineDictionary(S,"BroadCastDict","BroadCastDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Object.defineProperty(S,"LD_MEMBER_LOCAL",{value:1}),Object.defineProperty(S,"LD_MEMBER_VIEWER",{value:2}),Object.defineProperty(S,"LD_MEMBER_ALL",{value:3}),S.LDPrize=c.defineStruct(function(e,t){this.prizeName=void 0!==e?e:"",this.prizeCnt=void 0!==t?t:0},!0,function(e){e.writeString(this.prizeName),e.writeInt(this.prizeCnt)},function(e){this.prizeName=e.readString(),this.prizeCnt=e.readInt()},5,!1),S.LuckyDrawCfg=c.defineStruct(function(e,t,n,i){this.memberType=void 0!==e?e:0,this.cdTime=void 0!==t?t:0,this.isAutoDraw=void 0!==n&&n,this.prizes=void 0!==i?i:new S.LDPrize},!0,function(e){e.writeInt(this.memberType),e.writeInt(this.cdTime),e.writeBool(this.isAutoDraw),S.LDPrize.write(e,this.prizes)},function(e){this.memberType=e.readInt(),this.cdTime=e.readInt(),this.isAutoDraw=e.readBool(),this.prizes=S.LDPrize.read(e,this.prizes)},14,!1),S.LuckyDrawMember=c.defineStruct(function(e,t,n){this.name=void 0!==e?e:"",this.contact=void 0!==t?t:"",this.memberType=void 0!==n?n:0},!0,function(e){e.writeString(this.name),e.writeString(this.contact),e.writeInt(this.memberType)},function(e){this.name=e.readString(),this.contact=e.readString(),this.memberType=e.readInt()},6,!1),c.defineSequence(S,"LuckyDrawMembersHelper","Conference.LuckyDrawMember",!1),S.LDMembersCNT=c.defineStruct(function(e,t){this.memberLocalCnt=void 0!==e?e:0,this.memberViewerCnt=void 0!==t?t:0},!0,function(e){e.writeInt(this.memberLocalCnt),e.writeInt(this.memberViewerCnt)},function(e){this.memberLocalCnt=e.readInt(),this.memberViewerCnt=e.readInt()},8,!0),S.LuckyResult=c.defineStruct(function(e,t,n){this.prize=void 0!==e?e:new S.LDPrize,this.annouceTime=void 0!==t?t:0,this.res=void 0!==n?n:null},!0,function(e){S.LDPrize.write(e,this.prize),e.writeInt(this.annouceTime),S.LuckyDrawMembersHelper.write(e,this.res)},function(e){this.prize=S.LDPrize.read(e,this.prize),this.annouceTime=e.readInt(),this.res=S.LuckyDrawMembersHelper.read(e)},10,!1),S.VoteState=c.defineStruct(function(e,t,n,i,r){this.id=void 0!==e?e:"",this.voteOwner=void 0!==t?t:0,this.state=void 0!==n?n:0,this.voteInfo=void 0!==i?i:"",this.memberVotes=void 0!==r?r:null},!1,function(e){e.writeString(this.id),e.writeShort(this.voteOwner),e.writeInt(this.state),e.writeString(this.voteInfo),S.StringStringMapHelper.write(e,this.memberVotes)},function(e){this.id=e.readString(),this.voteOwner=e.readShort(),this.state=e.readInt(),this.voteInfo=e.readString(),this.memberVotes=S.StringStringMapHelper.read(e)},9,!1),S.meetingAttr=c.defineStruct(function(e,t,n){this.value=void 0!==e?e:"",this.lastModifyUserID=void 0!==t?t:"",this.lastModifyTs=void 0!==n?n:0},!0,function(e){e.writeString(this.value),e.writeString(this.lastModifyUserID),e.writeInt(this.lastModifyTs)},function(e){this.value=e.readString(),this.lastModifyUserID=e.readString(),this.lastModifyTs=e.readInt()},6,!1),c.defineDictionary(S,"MeetingAttrsMap","MeetingAttrsMapHelper","Ice.StringHelper","Conference.meetingAttr",!1,void 0,void 0,i.HashMap.compareEquals),c.defineDictionary(S,"UserAttrsMap","UserAttrsMapHelper","Ice.StringHelper","Conference.MeetingAttrsMapHelper",!1,void 0,void 0,i.HashMap.compareEquals),c.defineSequence(S,"stringSeqHelper","Ice.StringHelper",!1),S.ConferenceSession=c.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceSession","::Ice::Object"],-1,void 0,void 0,!1),S.ConferenceSessionPrx=c.defineProxy(i.ObjectPrx,S.ConferenceSession.ice_staticId,void 0),c.defineOperations(S.ConferenceSession,S.ConferenceSessionPrx,{keepAlive:[,,,1,,,[["Conference.StatusDictHelper"]],,[o.ConferenceError],,],exit:[,,,1,,,[[7]],,,,],setAppStatus:[,,,1,,,[[1]],,[o.ConferenceError],,],changeNickname:[,,,1,,[7],[[2],[7]],,[o.ConferenceError],,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],getContacts:[,,,1,,["Conference.ContactTreeHelper"],,,[o.ConferenceError],,],applyDemoActor:[,,,1,,,,,[o.ConferenceError],,],applyAssistantActor:[,,,1,,,,,[o.ConferenceError],,],getOption:[,,,1,,[3],,,[o.ConferenceError],,],getMyDetail:[,,,1,,[S.Contact],,,[o.ConferenceError],,],getInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],setAgenda:[,,,1,,,[[7]],,[o.ConferenceError],,],setSubject:[,,,1,,,[[7]],,[o.ConferenceError],,],getPSTNNumber:[,,,1,,[7],,,[o.ConferenceError],,],setPSTNNumber:[,,,1,,,[[7],[1]],,[o.ConferenceError],,],generatePIN:[,,,1,,[7],,,,,],cancelPIN:[,,,1,,,,,,,],changeMemberRights:[,,,1,,,[["Conference.ChangedRightsSeqHelper"]],,[o.ConferenceError],,],getAllMemberRights:[,,,1,,["Conference.MemberRightsHelper"],,,[o.ConferenceError],,],changeOption:[,,,1,,,[[3]],,[o.ConferenceError],,],setDemoActor:[,,,1,,,[[2]],,[o.ConferenceError],,],setHostActor:[,,,1,,,[[2],[7]],,[o.ConferenceError],,],setPSTNHostActor:[,,,1,,,[[S.ContactIdType]],,[o.ConferenceError],,],getPSTNHostActor:[,,,1,,[S.ContactIdType],,,[o.ConferenceError],,],allowDemoActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],setAssistantActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],getInviteMembers:[,,,1,,["Conference.InvitedMembersDictHelper"],,,[o.ConferenceError],,],getSelfInviteInfo:[,,,1,,[S.InvitedMember],,,[o.ConferenceError],,],addPSTNInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],modifyPSTNInvitee:[,,,1,,,[[S.INVITE_TYPE.__helper],[S.Contact]],,,,],smsInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],callInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],emailInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],removeInvitee:[,,,1,,,[[S.INVITE_TYPE.__helper],[S.Contact]],,[o.ConferenceError],,],cancelCall:[,,,1,,,[[S.ContactIdType]],,,,],callCustomerService:[,,,1,,,,,[o.ConferenceError],,],sendFeedback:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],kickout:[,,,1,,,[[2]],,[o.ConferenceError],,],lockRoom:[,,,1,,,[[1]],,[o.ConferenceError],,],beginConference:[,,,1,,[S.ContactIdType],[[S.Contact]],,[o.ConferenceError],,],endConference:[,,,1,,,,,[o.ConferenceError],,],toggleRoomLock:[,,,1,,,,,[o.ConferenceError],,],broadcastMemberCount:[,,,1,,,,,[o.ConferenceError],,],getMemberCount:[,,,1,,[3],,,[o.ConferenceError],,],getBalance:[,,,1,,,,,[o.ConferenceError],,],cancelCountdown:[,,,1,,,,,[o.ConferenceError],,],getHistoryMembers:[,,,1,,["Conference.HistoryMembersHelper"],[["Ice.ShortSeqHelper"]],,[o.ConferenceError],,],getHistoryMemberNames:[,,,1,,["Conference.HistoryMemberNamesHelper"],,,[o.ConferenceError],,],cancelAutoEnd:[,,,1,,,,,[o.ConferenceError],,],netDetectResults:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],getUserStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,[o.ConferenceError],,],start1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],stop1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],setWDT1v1SubMeetingMode:[,,,1,,,[[3]],,,,],reportIVRStatus:[,,,1,,,[[1]],,,,],startSvrBroadcast:[,,,1,,,[[7]],,[o.ConferenceError],,],startBroadCast:[,,,1,,,,,[o.ConferenceError],,],stopBroadCast:[,,,1,,,,,[o.ConferenceError],,],getBroadCastCfg:[,,,1,,[7],,,[o.ConferenceError],,],getBroadCastUrl:[,,,1,,["Conference.BroadCastDictHelper"],,,,,],enableBroadCastPlayback:[,,,1,,,,,[o.ConferenceError],,],disableBroadCastPlayback:[,,,1,,,[[3]],,[o.ConferenceError],,],setLuckyDrawCfg:[,,,1,,,[[S.LuckyDrawCfg]],,[o.ConferenceError],,],joinLuckyDrawMembers:[,,,1,,,[["Conference.LuckyDrawMembersHelper"],[3]],,[o.ConferenceError],,],clearLuckyDrawMembers:[,,,1,,,[[3]],,[o.ConferenceError],,],queryLuckyDrawMembers:[,,,1,,["Conference.LuckyDrawMembersHelper"],[[3],[2],[3]],,,,],announceLuckyDrawResult:[,,,1,,,,,[o.ConferenceError],,],getLuckyDrawCfg:[,,,1,,[S.LuckyDrawCfg],,,[o.ConferenceError],,],getLuckyDrawMembersStatus:[,,,1,,[S.LDMembersCNT],,,[o.ConferenceError],,],startSvrRecord:[,,,1,,,[[7]],,[o.ConferenceError],,],updateSvrRecCfg:[,,,1,,,[[7]],,[o.ConferenceError],,],stopSvrRecord:[,,,1,,,,,[o.ConferenceError],,],setSvrRecordState:[,,,1,,,[[S.REC_STATE.__helper],[3]],,[o.ConferenceError],,],setSvrRecordFileState:[,,,1,,,[[7]],,,,],setAppUILocked:[,,,1,,,[[3]],,[o.ConferenceError],,],setMcuPrivTaskState:[,,,1,,,[[3]],,[o.ConferenceError],,],beginVote:[,,,1,,,[[7]],,[o.ConferenceError],,],endVote:[,,,1,,,,,[o.ConferenceError],,],publishVoteResult:[,,,1,,,[[7]],,[o.ConferenceError],,],commitVote:[,,,1,,,[[7]],,[o.ConferenceError],,],getVoteState:[,,,1,,[S.VoteState],,,[o.ConferenceError],,],terminalMsg:[,,,1,,,[[7],[7],[3],[1]],,,,],updateSCEP:[,,,1,,,[[7]],,,,],updateSDKToken:[,,,1,,[3],[[7]],,,,],getMeetingAllAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],,,[o.ConferenceError],,],getMeetingAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delMeetingAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearMeetingAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],getUserAttrs:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],getUserAttrsWithKey:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"],["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delUserAttrs:[,,,1,,,[[7],["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearAllUserAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],clearUserAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],startShare:[,,,1,,,[[7]],,[o.ConferenceError],,],stopShare:[,,,1,,,[[7]],,[o.ConferenceError],,]}),Object.defineProperty(S,"SVR_NOTIFY_BALANCE_LESS",{value:1}),S.ConferenceCallback=c.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceCallback","::Ice::Object"],-1,void 0,void 0,!1),S.ConferenceCallbackPrx=c.defineProxy(i.ObjectPrx,S.ConferenceCallback.ice_staticId,void 0),c.defineOperations(S.ConferenceCallback,S.ConferenceCallbackPrx,{entered:[,,,,,,[[S.Member]],,,,],left:[,,,,,,[[2],[2],[7],[7]],,,,],actorChanged:[,,,,,,[[2],[2],[0]],,,,],nicknameChanged:[,,,,,,[[2],[2],[7]],,,,],optionChanged:[,,,,,,[[3]],,,,],rightChanged:[,,,,,,[[S.ChangedRights]],,,,],roomStateChanged:[,,,,,,[[1]],,,,],inviteStateChanged:[,,,,,,[[S.INVITE_TYPE.__helper],[S.InvitedMember]],,,,],conferenceBegan:[,,,,,,,,,,],conferenceEnded:[,,,,,,[[S.Contact],[7]],,,,],memberCount:[,,,,,,[[3]],,,,],confirmAutoEnd:[,,,,,,[[3]],,,,],autoEndCancelled:[,,,,,,,,,,],roomKnocked:[,,,,,,[[S.Contact],[7]],,,,],agendaUpdated:[,,,,,,[[7]],,,,],subjectUpdated:[,,,,,,[[7]],,,,],notifyApplyDemo:[,,,,,,[[2]],,,,],notifyApplyRejected:[,,,,,,[[2],[2]],,,,],serverNotify:[,,,,,,[[3]],,,,],serverNotifyMsg:[,,,,,,[[7]],,,,],updateAppStatus:[,,,,,,[["Ice.ShortSeqHelper"],["Ice.ShortSeqHelper"]],,,,],notifyAssistantChanged:[,,,,,,[[2],[2],[1]],,,,],notifyNetDetectResults:[,,,,,,[[2],[3],[1]],,,,],notifyReportStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,,,],exeCmd:[,,,1,,[7],[[7]],,,,],notifyStart1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],notifyStop1v1SubMeeting:[,,,,,,[[2]],,,,],notifyStart1v1SubMeetingRslt:[,,,,,,[[2],[1]],,,,],setWDT1v1SubMeetingMode:[,,,,,,[[2],[3]],,,,],notifyIVRStatus:[,,,,,,[[2],[1]],,,,],notifyStartSvrBroadcast:[,,,,,,[[2],[7]],,,,],notifyStartBroadCast:[,,,,,,[[2]],,,,],notifyStopBroadCast:[,,,,,,[[2]],,,,],notifyWebViewerNum:[,,,,,,[[3]],,,,],notifyBroadCastStartPush:[,,,,,,[["Conference.BroadCastDictHelper"]],,,,],notifyBroadCastStopPush:[,,,,,,,,,,],notifyBroadCastPlayback:[,,,,,,[[7]],,,,],notifyBroadCastPlaybackStop:[,,,,,,[[7]],,,,],notifypayback:[,,,,,,,,,,],notifySwtichLiveAppElements:[,,,,,,[[3],[2]],,,,],notifyThumbUp:[,,,,,,[[3],[3],[7]],,,,],notifyLuckyDrawCfg:[,,,,,,[[S.LuckyDrawCfg]],,,,],notifyLDMembersStatus:[,,,,,,[[S.LDMembersCNT]],,,,],notifyLuckyDrawResult:[,,,,,,[[S.LuckyResult]],,,,],notifySvrRecordStateChanged:[,,,,,,[[2],[S.REC_STATE.__helper],[3]],,,,],notifySvrRecordCfgChanged:[,,,,,,[[2],[7]],,,,],notifySvrRecordFileState:[,,,,,,[[7]],,,,],notifySvrBroadcastCfgChanged:[,,,,,,[[2],[7]],,,,],notifyAppUILocked:[,,,,,,[[3]],,,,],notifyBeginVote:[,,,,,,[[2],[7],[7]],,,,],notifyEndVote:[,,,,,,[[2]],,,,],notifyPublishVoteResult:[,,,,,,[[2],[7]],,,,],notifyCommitVote:[,,,,,,[[2],[7]],,,,],notifyTerminalMsg:[,,,,,,[[7],[7],[3],[3]],,,,],notifySCEPChanged:[,,,,,,[[2],[7]],,,,],notifyMeetingAttrsChanged:[,,,,,,[["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyUserAttrsChanged:[,,,,,,[[7],["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyShareStateChanged:[,,,,,,[[7]],,,,]}),n.Conference=S}("undefined"!=typeof global&&void 0!==global.process?module:void 0,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Conference","Control/PublicTypes"]).Conference,c=i.Slice;s.lockQuesError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::lockQuesError",void 0,void 0,!1,!1),s.delQuesError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::delQuesError",void 0,void 0,!1,!1),s.quesNotExistError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::quesNotExistError",void 0,void 0,!1,!1),s.modifyQuesTypeError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::modifyQuesTypeError",void 0,void 0,!1,!1),s.QuesType=c.defineStruct(function(e,t,n){this.typeID=void 0!==e?e:"",this.name=void 0!==t?t:"",this.deleted=void 0!==n&&n},!0,function(e){e.writeString(this.typeID),e.writeString(this.name),e.writeBool(this.deleted)},function(e){this.typeID=e.readString(),this.name=e.readString(),this.deleted=e.readBool()},3,!1),s.QuesState=c.defineEnum([["Question_NotReply",0],["Question_Replying",1],["Question_NotPublic",2],["Question_Publiced",3],["Question_Deleted",4]]),s.QuesAsk=c.defineStruct(function(e,t,n,i,r){this.typeID=void 0!==e?e:"",this.asktime=void 0!==t?t:0,this.termID=void 0!==n?n:0,this.content=void 0!==i?i:"",this.nickname=void 0!==r?r:""},!0,function(e){e.writeString(this.typeID),e.writeInt(this.asktime),e.writeShort(this.termID),e.writeString(this.content),e.writeString(this.nickname)},function(e){this.typeID=e.readString(),this.asktime=e.readInt(),this.termID=e.readShort(),this.content=e.readString(),this.nickname=e.readString()},9,!1),s.QuesDeal=c.defineStruct(function(e,t,n,i,r,o,c,a){this.state=void 0!==e?e:s.QuesState.Question_NotReply,this.replyCon=void 0!==t?t:"",this.replyTermId=void 0!==n?n:0,this.replyTime=void 0!==i?i:0,this.publishTermID=void 0!==r?r:0,this.publishTime=void 0!==o?o:0,this.delTermID=void 0!==c?c:0,this.delTime=void 0!==a?a:0},!0,function(e){s.QuesState.__write(e,this.state),e.writeString(this.replyCon),e.writeShort(this.replyTermId),e.writeInt(this.replyTime),e.writeShort(this.publishTermID),e.writeInt(this.publishTime),e.writeShort(this.delTermID),e.writeInt(this.delTime)},function(e){this.state=s.QuesState.__read(e),this.replyCon=e.readString(),this.replyTermId=e.readShort(),this.replyTime=e.readInt(),this.publishTermID=e.readShort(),this.publishTime=e.readInt(),this.delTermID=e.readShort(),this.delTime=e.readInt()},20,!1),s.QuesInf=c.defineStruct(function(e,t,n){this.quesID=void 0!==e?e:0,this.ask=void 0!==t?t:new s.QuesAsk,this.deal=void 0!==n?n:new s.QuesDeal},!0,function(e){e.writeInt(this.quesID),s.QuesAsk.write(e,this.ask),s.QuesDeal.write(e,this.deal)},function(e){this.quesID=e.readInt(),this.ask=s.QuesAsk.read(e,this.ask),this.deal=s.QuesDeal.read(e,this.deal)},33,!1),c.defineSequence(s,"QuesListHelper","Conference.QuesInf",!1),c.defineSequence(s,"QuesTypeListHelper","Conference.QuesType",!1),s.AnsQueCallback=c.defineObject(void 0,i.Object,void 0,0,["::Conference::AnsQueCallback","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQueCallbackPrx=c.defineProxy(i.ObjectPrx,s.AnsQueCallback.ice_staticId,void 0),c.defineOperations(s.AnsQueCallback,s.AnsQueCallbackPrx,{askQuesNotify:[,,,,,,[[3],[s.QuesAsk]],,[o.ConferenceError],,],lockQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],replyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],modifyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQuesNotify:[,,,,,,[[3],[2]],,[o.ConferenceError],,],delAllQuesNotify:[,,,,,,[[2]],,[o.ConferenceError],,],publicQuesNotify:[,,,,,,[[3],[1],[2]],,[o.ConferenceError],,],quesTypeChangeNotify:[,,,,,,[[3],[7]],,[o.ConferenceError],,],modifyQuesTypeNotify:[,,,,,,[[2],["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBroadCastQuesNotify:[,,,,,,[[1]],,[o.ConferenceError],,]}),s.AnsQuesCtrl=c.defineObject(void 0,i.Object,void 0,0,["::Conference::AnsQuesCtrl","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQuesCtrlPrx=c.defineProxy(i.ObjectPrx,s.AnsQuesCtrl.ice_staticId,void 0),c.defineOperations(s.AnsQuesCtrl,s.AnsQuesCtrlPrx,{askQues:[,,,1,,[3],[[s.QuesAsk]],,[o.ConferenceError],,],lockQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],replyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],publicQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],modifyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQues:[,,,1,,,[[3]],,[o.ConferenceError],,],delAllQues:[,,,1,,,,,[o.ConferenceError],,],quesTypeChange:[,,,1,,,[[3],[7]],,[o.ConferenceError],,],getQuesList:[,,,1,,["Conference.QuesListHelper"],,,[o.ConferenceError],,],getQuesType:[,,,1,,["Conference.QuesTypeListHelper"],,,[o.ConferenceError],,],modifyQuesType:[,,,1,,,[["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBoradCastQues:[,,,1,,,[[1]],,[o.ConferenceError],,]}),n.Conference=s}("undefined"!=typeof global&&void 0!==global.process?module:void 0,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,c=i.Slice;o.IMFont=c.defineStruct(function(e,t){this.color=void 0!==e?e:0,this.size=void 0!==t?t:0},!0,function(e){e.writeInt(this.color),e.writeByte(this.size)},function(e){this.color=e.readInt(),this.size=e.readByte()},5,!0),o.InIMMsgInfo=c.defineStruct(function(e,t,n,i,r){this.targetTermId=void 0!==e?e:0,this.targetNickname=void 0!==t?t:"",this.font=void 0!==n?n:new o.IMFont,this.msg=void 0!==i?i:"",this.sendTime=void 0!==r?r:0},!0,function(e){e.writeShort(this.targetTermId),e.writeString(this.targetNickname),o.IMFont.write(e,this.font),e.writeString(this.msg),e.writeInt(this.sendTime)},function(e){this.targetTermId=e.readShort(),this.targetNickname=e.readString(),this.font=o.IMFont.read(e,this.font),this.msg=e.readString(),this.sendTime=e.readInt()},13,!1),o.OutIMMsgInfo=c.defineStruct(function(e,t,n,i){this.index=void 0!==e?e:0,this.srcTermId=void 0!==t?t:0,this.srcNickname=void 0!==n?n:"",this.inMsg=void 0!==i?i:new o.InIMMsgInfo},!0,function(e){e.writeInt(this.index),e.writeShort(this.srcTermId),e.writeString(this.srcNickname),o.InIMMsgInfo.write(e,this.inMsg)},function(e){this.index=e.readInt(),this.srcTermId=e.readShort(),this.srcNickname=e.readString(),this.inMsg=o.InIMMsgInfo.read(e,this.inMsg)},20,!1),c.defineSequence(o,"outMsgListHelper","Conference.OutIMMsgInfo",!1),c.defineSequence(o,"termIDListHelper","Ice.ShortHelper",!0),o.IMCallback=c.defineObject(void 0,i.Object,void 0,0,["::Conference::IMCallback","::Ice::Object"],-1,void 0,void 0,!1),o.IMCallbackPrx=c.defineProxy(i.ObjectPrx,o.IMCallback.ice_staticId,void 0),c.defineOperations(o.IMCallback,o.IMCallbackPrx,{receiveIMMsg:[,,,,,,[[o.OutIMMsgInfo]],,,,],receiveMultiIMMsg:[,,,,,,[["Conference.outMsgListHelper"]],,,,],notifyIMForbidStatus:[,,,,,,[[2],[2],[1]],,,,],notifyClearIMMsg:[,,,,,,[[2]],,,,],notifyDeleteIMMsg:[,,,,,,[[3]],,,,]}),o.IMSession=c.defineObject(void 0,i.Object,void 0,0,["::Conference::IMSession","::Ice::Object"],-1,void 0,void 0,!1),o.IMSessionPrx=c.defineProxy(i.ObjectPrx,o.IMSession.ice_staticId,void 0),c.defineOperations(o.IMSession,o.IMSessionPrx,{getIMMsgCount:[,,,1,,[3],,,,,],getLastMsg:[,,,1,,["Conference.outMsgListHelper"],[[3]],,[r.ConferenceError],,],getLastNMsg:[,,,1,,["Conference.outMsgListHelper"],[[3],[3]],,[r.ConferenceError],,],sendIMMsg:[,,,1,,,[[o.InIMMsgInfo]],,[r.ConferenceError],,],deleteIMMsg:[,,,1,,,[[3]],,[r.ConferenceError],,],getIMForbidList:[,,,1,,["Conference.termIDListHelper"],,,[r.ConferenceError],,],setIMForbidStatus:[,,,1,,,[[2],[1]],,[r.ConferenceError],,],clearIMMsg:[,,,1,,,,,[r.ConferenceError],,],passIMMsg:[,,,1,,[1],[[3]],,[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,c=i.Slice;o.NoResourceForMIC=c.defineUserException(function(e,t,n){r.ConferenceError.call(this,e,t,n)},r.ConferenceError,"Conference::NoResourceForMIC",void 0,void 0,!1,!1),o.StartRecordError=c.defineUserException(function(e,t,n){r.ConferenceError.call(this,e,t,n)},r.ConferenceError,"Conference::StartRecordError",void 0,void 0,!1,!1),o.PlayBackGroundMusicFail=c.defineUserException(function(e,t,n){r.ConferenceError.call(this,e,t,n)},r.ConferenceError,"Conference::PlayBackGroundMusicFail",void 0,void 0,!1,!1),c.defineSequence(o,"MusicListHelper","Ice.StringHelper",!1),c.defineDictionary(o,"TerminalEnergy","TerminalEnergyHelper","Ice.ShortHelper","Ice.IntHelper",!0,void 0,void 0),c.defineSequence(o,"deviceLstHelper","Ice.StringHelper",!1),o.remoteAudio=c.defineStruct(function(e,t,n,i,r,o,c,a){this.inputDevice=void 0!==e?e:"",this.outputDevice=void 0!==t?t:"",this.bMicBoost=void 0!==n&&n,this.hiLevelEC=void 0!==i?i:0,this.outputDType=void 0!==r?r:0,this.echoDelay=void 0!==o?o:0,this.outputVolume=void 0!==c?c:0,this.inputVolume=void 0!==a?a:0},!0,function(e){e.writeString(this.inputDevice),e.writeString(this.outputDevice),e.writeBool(this.bMicBoost),e.writeInt(this.hiLevelEC),e.writeInt(this.outputDType),e.writeInt(this.echoDelay),e.writeInt(this.outputVolume),e.writeInt(this.inputVolume)},function(e){this.inputDevice=e.readString(),this.outputDevice=e.readString(),this.bMicBoost=e.readBool(),this.hiLevelEC=e.readInt(),this.outputDType=e.readInt(),this.echoDelay=e.readInt(),this.outputVolume=e.readInt(),this.inputVolume=e.readInt()},23,!1),o.remoteAudioInf=c.defineStruct(function(e,t,n){this.inputDLst=void 0!==e?e:null,this.outputDLst=void 0!==t?t:null,this.remoteInf=void 0!==n?n:new o.remoteAudio},!0,function(e){o.deviceLstHelper.write(e,this.inputDLst),o.deviceLstHelper.write(e,this.outputDLst),o.remoteAudio.write(e,this.remoteInf)},function(e){this.inputDLst=o.deviceLstHelper.read(e),this.outputDLst=o.deviceLstHelper.read(e),this.remoteInf=o.remoteAudio.read(e,this.remoteInf)},25,!1),o.AudioCallback=c.defineObject(void 0,i.Object,void 0,0,["::Conference::AudioCallback","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCallbackPrx=c.defineProxy(i.ObjectPrx,o.AudioCallback.ice_staticId,void 0),c.defineOperations(o.AudioCallback,o.AudioCallbackPrx,{updateStatus:[,,,,,,[[2],[2],[o.ASTATUS.__helper]],,,,],updateVoiceEnergy:[,,,,,,[["Conference.TerminalEnergyHelper"]],,,,],updateSpeaker:[,,,,,,[[2]],,,,],closeAll:[,,,,,,[[2]],,,,],playBackgroundMusic:[,,,,,,[[2],[1]],,,,],notifyVoiceHowling:[,,,,,,[[2],[1]],,,,],notifyVoiceNoise:[,,,,,,[[2],[1]],,,,],getRemoteAudioInfNotify:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,],remoteAudioSetNotify:[,,,,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],notifyLanLessMicOpen:[,,,,,,,,,,]}),o.AudioCtrl=c.defineObject(void 0,i.Object,void 0,0,["::Conference::AudioCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCtrlPrx=c.defineProxy(i.ObjectPrx,o.AudioCtrl.ice_staticId,void 0),c.defineOperations(o.AudioCtrl,o.AudioCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],askForMic:[,,,1,,,,,[r.ConferenceError],,],openMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeAll:[,,,1,,,,,[r.ConferenceError],,],setVoiceEnergy:[,,,1,,,[[3]],,[r.ConferenceError],,],pstnSwitchMicStatus:[,,,1,,,,,[r.ConferenceError],,],startRecord:[,,,1,,,,,[r.ConferenceError],,],isRecording:[,,,1,,[1],,,[r.ConferenceError],,],stopRecord:[,,,1,,,,,[r.ConferenceError],,],playApplause:[,,,1,,,,,[r.ConferenceError],,],getMusicList:[,,,1,,["Conference.MusicListHelper"],,,[r.ConferenceError],,],getPlayBGMusic:[,,,1,,[7],,,[r.ConferenceError],,],startBGMusic:[,,,1,,,[[7],[3]],,[r.ConferenceError],,],stopPlayBGMusic:[,,,1,,,,,[r.ConferenceError],,],setPlayBGMusicVolumn:[,,,1,,,[[3]],,[r.ConferenceError],,],getPlayBGMusicVolumn:[,,,1,,[3],,,[r.ConferenceError],,],voiceHowling:[,,,1,,,[[1]],,,,],voiceNoise:[,,,1,,,[[1]],,,,],remoteAudioSet:[,,,1,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],getRemoteAudioInf:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,c=i.Slice;Object.defineProperty(o,"FPS_LOW",{value:-1}),Object.defineProperty(o,"FPS_NOR",{value:0}),Object.defineProperty(o,"FPS_HI",{value:1}),Object.defineProperty(o,"VEDIO_LD",{value:-1}),Object.defineProperty(o,"VEDIO_SD",{value:0}),Object.defineProperty(o,"VEDIO_HD",{value:1}),Object.defineProperty(o,"VEDIO_UD",{value:2}),o.VideoSetting=c.defineStruct(function(e,t,n,i,r,o){this.mutiCam=void 0!==e&&e,this.openCamIDs=void 0!==t?t:null,this.denoise=void 0!==n&&n,this.deinterlace=void 0!==i&&i,this.fpsType=void 0!==r?r:0,this.videType=void 0!==o?o:0},!0,function(e){e.writeBool(this.mutiCam),i.ShortSeqHelper.write(e,this.openCamIDs),e.writeBool(this.denoise),e.writeBool(this.deinterlace),e.writeInt(this.fpsType),e.writeInt(this.videType)},function(e){this.mutiCam=e.readBool(),this.openCamIDs=i.ShortSeqHelper.read(e),this.denoise=e.readBool(),this.deinterlace=e.readBool(),this.fpsType=e.readInt(),this.videType=e.readInt()},12,!1),o.UsrCamID=c.defineStruct(function(e,t){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0},!0,function(e){e.writeShort(this.termID),e.writeShort(this.camID)},function(e){this.termID=e.readShort(),this.camID=e.readShort()},4,!0),c.defineSequence(o,"UsrCamIDListHelper","Conference.UsrCamID",!0),o.UsrCamSize=c.defineStruct(function(e,t,n){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0,this.VIDEO_SS_value=void 0!==n?n:0},!0,function(e){e.writeShort(this.termID),e.writeShort(this.camID),e.writeInt(this.VIDEO_SS_value)},function(e){this.termID=e.readShort(),this.camID=e.readShort(),this.VIDEO_SS_value=e.readInt()},8,!0),c.defineSequence(o,"UsrCamSizeListHelper","Conference.UsrCamSize",!0),Object.defineProperty(o,"ZOOM_TELE",{value:2}),Object.defineProperty(o,"ZOOM_WIDE",{value:3}),Object.defineProperty(o,"ZOOM_STOP",{value:0}),Object.defineProperty(o,"PAN_TILT_DIR_UP",{value:1}),Object.defineProperty(o,"PAN_TILT_DIR_DOWN",{value:2}),Object.defineProperty(o,"PAN_TILT_DIR_LEFT",{value:3}),Object.defineProperty(o,"PAN_TILT_DIR_RIGHT",{value:4}),Object.defineProperty(o,"PAN_TILT_DIR_STOP",{value:5}),o.VideoCallback=c.defineObject(void 0,i.Object,void 0,0,["::Conference::VideoCallback","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCallbackPrx=c.defineProxy(i.ObjectPrx,o.VideoCallback.ice_staticId,void 0),c.defineOperations(o.VideoCallback,o.VideoCallbackPrx,{notifyAllowVideoWall:[,,,,,,[[1],[2]],,,,],updateStatus:[,,,,,,[[2],[o.VSTATUS.__helper],[2]],,,,],notifyOpenVideo:[,,,,,,[[2]],,,,],startVideoByManager:[,,,,,,,,[r.ConferenceError],,],notifyEnableVideo:[,,,,,,[[2],[1],[2]],,,,],updateFocusWindow:[,,,,,,[[o.WINDOW_MODE.__helper],[2]],,,,],updateVLayout:[,,,,,,[[o.VIDEOLAYOUTMODE.__helper],[2]],,,,],updateVLayout2:[,,,,,,[[3],[2]],,,,],updateMainVideoShowMode:[,,,,,,[[3],[2]],,,,],updateVideoListMode:[,,,,,,[[7],[2]],,,,],enableUpload:[,,,,,,[[2],[1]],,,,],enableUpload2:[,,,,,,[[2],[3]],,,,],generateIFrame:[,,,,,,[[2]],,,,],notifyRefuseOpenVideo:[,,,,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],,,[r.ConferenceError],,],setCamera:[,,,,,,[[o.VideoSetting],[2]],,[r.ConferenceError],,],setCameraById:[,,,,,,[[o.UsrCamID],[2]],,[r.ConferenceError],,],notifyVideoPolling:[,,,,,,[[2],[1],[3]],,[r.ConferenceError],,],notifyPollingVideo:[,,,,,,[[2],["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],notifyVideoList:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifyUpdateAllCameraInfos:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifySetOpenedCameraNumber:[,,,,,,[[2],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],notifyStartAdjustDirection:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStartAdjustZoom:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStopAdjustDirection:[,,,,,,[[o.UsrCamID]],,,,],notifyStopAdjustZoom:[,,,,,,[[o.UsrCamID]],,,,]}),o.VideoCtrl=c.defineObject(void 0,i.Object,void 0,0,["::Conference::VideoCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCtrlPrx=c.defineProxy(i.ObjectPrx,o.VideoCtrl.ice_staticId,void 0),c.defineOperations(o.VideoCtrl,o.VideoCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],allowVideoWall:[,,,1,,,[[1]],,[r.ConferenceError],,],startVideo:[,,,1,,,,,[r.ConferenceError],,],stopVideo:[,,,1,,,,,[r.ConferenceError],,],reqOpenVideo:[,,,1,,,[[2]],,[r.ConferenceError],,],startVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],stopVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],enableVideo:[,,,1,,,[[1]],,[r.ConferenceError],,],setFocusWindow:[,,,1,,,[[o.WINDOW_MODE.__helper],[2]],,[r.ConferenceError],,],batchSubscribeVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"],[1]],,[r.ConferenceError],,],batchSubscribeVideo2:[,,,1,,,[["Conference.UsrCamSizeListHelper"]],,[r.ConferenceError],,],subscribeFocusWindow:[,,,1,,,[[1]],,[r.ConferenceError],,],subscribeFocusWindow2:[,,,1,,,[[3]],,[r.ConferenceError],,],setVLayout:[,,,1,,,[[o.VIDEOLAYOUTMODE.__helper]],,[r.ConferenceError],,],setVLayout2:[,,,1,,,[[3]],,[r.ConferenceError],,],setMainVideoShowMode:[,,,1,,,[[3]],,[r.ConferenceError],,],setVideoListMode:[,,,1,,,[[7]],,,,],refuseOpenVideo:[,,,1,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],[[2]],,[r.ConferenceError],,],setCamera:[,,,1,,,[[2],[o.VideoSetting]],,[r.ConferenceError],,],setCameraById:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],setVideoPolling:[,,,1,,,[[1],[3]],,[r.ConferenceError],,],updatePollingVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],updateVideoList:[,,,1,,,[[7]],,[r.ConferenceError],,],getVideoPollingState:[,,,1,,[1],,[["Conference.UsrCamIDListHelper"],[3]],[r.ConferenceError],,],updateAllCameraInfos:[,,,1,,,[[7]],,[r.ConferenceError],,],setOpenedCameraNumber:[,,,1,,,[["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],startAdjustDirection:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],startAdjustZoom:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],stopAdjustDirection:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],stopAdjustZoom:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,c=i.Slice;Object.defineProperty(o,"SSST_SHARING",{value:1}),Object.defineProperty(o,"SSST_MARKING",{value:2}),Object.defineProperty(o,"SSST_PAUSECTRL",{value:4}),Object.defineProperty(o,"SSRE_SOMEONE_REQ",{value:1}),Object.defineProperty(o,"SSRE_REJECT",{value:2}),o.AlreadySharedException=c.defineUserException(function(e,t,n,i){r.ConferenceError.call(this,e,t,i),this.sharer=void 0!==n?n:0},r.ConferenceError,"Conference::AlreadySharedException",function(e){e.writeShort(this.sharer)},function(e){this.sharer=e.readShort()},!1,!1),o.ScreenShareInfo=c.defineStruct(function(e,t,n,i,r,o,c){this.scrSviceProxy=void 0!==e?e:"",this.authKey=void 0!==t?t:"",this.allowCtrlReq=void 0!==n&&n,this.state=void 0!==i?i:0,this.sharer=void 0!==r?r:0,this.controller=void 0!==o?o:0,this.allowOtherMark=void 0!==c&&c},!0,function(e){e.writeString(this.scrSviceProxy),e.writeString(this.authKey),e.writeBool(this.allowCtrlReq),e.writeByte(this.state),e.writeShort(this.sharer),e.writeShort(this.controller),e.writeBool(this.allowOtherMark)},function(e){this.scrSviceProxy=e.readString(),this.authKey=e.readString(),this.allowCtrlReq=e.readBool(),this.state=e.readByte(),this.sharer=e.readShort(),this.controller=e.readShort(),this.allowOtherMark=e.readBool()},9,!1),o.MarkData=c.defineStruct(function(e,t,n){this.termid=void 0!==e?e:0,this.color=void 0!==t?t:0,this.mousePosSeq=void 0!==n?n:null},!0,function(e){e.writeShort(this.termid),e.writeInt(this.color),i.ByteSeqHelper.write(e,this.mousePosSeq)},function(e){this.termid=e.readShort(),this.color=e.readInt(),this.mousePosSeq=i.ByteSeqHelper.read(e)},7,!1),c.defineSequence(o,"MarkDataSeqHelper","Conference.MarkData",!1),o.ScreenShareCtrl=c.defineObject(void 0,i.Object,void 0,0,["::Conference::ScreenShareCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareCtrlPrx=c.defineProxy(i.ObjectPrx,o.ScreenShareCtrl.ice_staticId,void 0),c.defineOperations(o.ScreenShareCtrl,o.ScreenShareCtrlPrx,{getScreenShareInfo:[,,,1,,[o.ScreenShareInfo],,,[r.ConferenceError],,],startScreenShare:[,,,1,,,,,[r.ConferenceError],,],stopScreenShare:[,,,1,,,,,[r.ConferenceError],,],setCtrlReqState:[,,,1,,,[[1]],,[r.ConferenceError],,],requestCtrlRight:[,,,1,,,,,[r.ConferenceError],,],cancelCtrlReq:[,,,1,,,,,[r.ConferenceError],,],rejectCtrlReq:[,,,1,,,[[2],[0]],,[r.ConferenceError],,],giveCtrlRight:[,,,1,,,[[2]],,[r.ConferenceError],,],releaseCtrlRight:[,,,1,,,,,[r.ConferenceError],,],ctrlMsg:[,,,1,,,[["Ice.ByteSeqHelper"]],,[r.ConferenceError],,],tmpSetRemoteCtrlState:[,,,1,,,[[1]],,[r.ConferenceError],,],requestMarked:[,,,1,,,,,[r.ConferenceError],,],cancelMarkedReq:[,,,1,,,,,[r.ConferenceError],,],startMarked:[,,,1,,,,,[r.ConferenceError],,],stopMarked:[,,,1,,,,,[r.ConferenceError],,],enableOtherMarked:[,,,1,,,[[1]],,[r.ConferenceError],,],askForNewIFrame:[,,,1,,,[[3]],,[r.ConferenceError],,],getAllMarkData:[,,,1,,["Conference.MarkDataSeqHelper"],,,[r.ConferenceError],,],sendMarkData:[,,,1,,,[[o.MarkData]],,[r.ConferenceError],,],clearAllMarks:[,,,1,,,,,[r.ConferenceError],,],setIndicator:[,,,1,,,[["Conference.StringStringMapHelper"]],,,,]}),o.ScreenShareClient=c.defineObject(void 0,i.Object,void 0,0,["::Conference::ScreenShareClient","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareClientPrx=c.defineProxy(i.ObjectPrx,o.ScreenShareClient.ice_staticId,void 0),c.defineOperations(o.ScreenShareClient,o.ScreenShareClientPrx,{notifyStartScreenShare:[,,,,,,[[o.ScreenShareInfo]],,,,],notifyStopScreenShare:[,,,,,,[[2]],,,,],notifyCtrlReqState:[,,,,,,[[2],[1]],,[r.ConferenceError],,],notifyRequestCtrlRight:[,,,,,,[[2]],,,,],notifyCancelCtrlReq:[,,,,,,[[2]],,,,],notifyRejectCtrlReq:[,,,,,,[[2],[2],[0]],,,,],notifyGiveCtrlRight:[,,,,,,[[2],[2]],,,,],notifyReleaseCtrlRight:[,,,,,,[[2]],,,,],notifyCtrlMsg:[,,,,,,[[2],["Ice.ByteSeqHelper"]],,,,],notifyTmpSetRemoteCtrlState:[,,,,,,[[2],[1]],,,,],notifyRequestMarked:[,,,,,,[[2]],,,,],notifyCancelMarkedReq:[,,,,,,[[2]],,,,],notifyStartMarked:[,,,,,,[[2]],,,,],notifyStopMarked:[,,,,,,[[2]],,,,],notifyEnableOtherMarked:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,[[3]],,,,],notifyMarkData:[,,,,,,[[o.MarkData]],,,,],notifyClearAllMarks:[,,,,,,,,,,],notifyIndicator:[,,,,,,[[2],["Conference.StringStringMapHelper"]],,,,]}),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,c=i.Slice,a=r.module("Conference");a.SameTimeStartMediaError=c.defineUserException(function(e,t,n){o.ConferenceError.call(this,e,t,n)},o.ConferenceError,"Conference::SameTimeStartMediaError",void 0,void 0,!1,!1),a.MEDIA_STATE=c.defineEnum([["MEDIA_START",0],["MEDIA_PAUSE",1],["MEDIA_STOP",2]]),a.MediaInfo=c.defineStruct(function(e,t,n){this.termid=void 0!==e?e:0,this.state=void 0!==t?t:a.MEDIA_STATE.MEDIA_START,this.mediaName=void 0!==n?n:""},!0,function(e){e.writeShort(this.termid),a.MEDIA_STATE.__write(e,this.state),e.writeString(this.mediaName)},function(e){this.termid=e.readShort(),this.state=a.MEDIA_STATE.__read(e),this.mediaName=e.readString()},4,!1),a.MediaCallback=c.defineObject(void 0,i.Object,void 0,0,["::Conference::MediaCallback","::Ice::Object"],-1,void 0,void 0,!1),a.MediaCallbackPrx=c.defineProxy(i.ObjectPrx,a.MediaCallback.ice_staticId,void 0),c.defineOperations(a.MediaCallback,a.MediaCallbackPrx,{notifyStartPlayMedia:[,,,,,,[[a.MediaInfo]],,,,],notifyStopPlayMedia:[,,,,,,[[2]],,,,],notifyPausePlayMedia:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,,,,,],notifySubscribeMedia:[,,,,,,[[1]],,,,]}),a.MediaCtrl=c.defineObject(void 0,i.Object,void 0,0,["::Conference::MediaCtrl","::Ice::Object"],-1,void 0,void 0,!1),a.MediaCtrlPrx=c.defineProxy(i.ObjectPrx,a.MediaCtrl.ice_staticId,void 0),c.defineOperations(a.MediaCtrl,a.MediaCtrlPrx,{getMediaInfo:[,,,1,,[a.MediaInfo],,,[o.ConferenceError],,],startPlayMedia:[,,,1,,,[[7]],,[o.ConferenceError],,],stopPlayMedia:[,,,1,,,,,[o.ConferenceError],,],pausePlayMedia:[,,,1,,,[[1]],,[o.ConferenceError],,],subscribeMedia:[,,,1,,,[[1]],,[o.ConferenceError],,]}),n.Conference=a}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),a=t("Control/PublicTypes").Conference,o=i.Slice;a.WB_BAKIMG_TYPE=o.defineEnum([["WB_BAKIMG_NULL",0],["WB_BAKIMG_EMF",1],["WB_BAKIMG_JPG",2],["WB_BAKIMG_HTML",3]]),a.WB_ELEMENT_ZPOS=o.defineEnum([["WB_ELEMENT_ZTOP",0],["WB_ELEMENT_ZBOTTOM",1]]),a.ElementID=o.defineStruct(function(e,t){this.ownerID=void 0!==e?e:0,this.ID=void 0!==t?t:0},!0,function(e){e.writeShort(this.ownerID),e.writeShort(this.ID)},function(e){this.ownerID=e.readShort(),this.ID=e.readShort()},4,!0),o.defineSequence(a,"ElementIDSeqHelper","Conference.ElementID",!0),a.ElementPos=o.defineStruct(function(e,t,n){this.eID=void 0!==e?e:new a.ElementID,this.left=void 0!==t?t:0,this.top=void 0!==n?n:0},!0,function(e){a.ElementID.write(e,this.eID),e.writeInt(this.left),e.writeInt(this.top)},function(e){this.eID=a.ElementID.read(e,this.eID),this.left=e.readInt(),this.top=e.readInt()},12,!0),o.defineSequence(a,"ElementPosSeqHelper","Conference.ElementPos",!0),a.ElementData=o.defineStruct(function(e,t,n,i,r,o,c){this.eID=void 0!==e?e:new a.ElementID,this.orderId=void 0!==t?t:0,this.left=void 0!==n?n:0,this.top=void 0!==i?i:0,this.type=void 0!==r?r:0,this.noused=void 0!==o?o:0,this.data=void 0!==c?c:null},!0,function(e){a.ElementID.write(e,this.eID),e.writeInt(this.orderId),e.writeInt(this.left),e.writeInt(this.top),e.writeInt(this.type),e.writeInt(this.noused),i.ByteSeqHelper.write(e,this.data)},function(e){this.eID=a.ElementID.read(e,this.eID),this.orderId=e.readInt(),this.left=e.readInt(),this.top=e.readInt(),this.type=e.readInt(),this.noused=e.readInt(),this.data=i.ByteSeqHelper.read(e)},25,!1),o.defineSequence(a,"ElementSeqHelper","Conference.ElementData",!1),a.IndicatorData=o.defineStruct(function(e,t,n,i,r,o){this.termId=void 0!==e?e:0,this.pageNo=void 0!==t?t:0,this.x=void 0!==n?n:0,this.y=void 0!==i?i:0,this.msg=void 0!==r?r:"",this.lifeSec=void 0!==o?o:0},!0,function(e){e.writeInt(this.termId),e.writeInt(this.pageNo),e.writeInt(this.x),e.writeInt(this.y),e.writeString(this.msg),e.writeByte(this.lifeSec)},function(e){this.termId=e.readInt(),this.pageNo=e.readInt(),this.x=e.readInt(),this.y=e.readInt(),this.msg=e.readString(),this.lifeSec=e.readByte()},18,!1),o.defineSequence(a,"IndicatorDataSeqHelper","Conference.IndicatorData",!1),a.PageData=o.defineStruct(function(e,t,n,i){this.pageNo=void 0!==e?e:0,this.imgType=void 0!==t?t:a.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,this.imgResourceID=void 0!==n?n:"",this.elementList=void 0!==i?i:null},!0,function(e){e.writeInt(this.pageNo),a.WB_BAKIMG_TYPE.__write(e,this.imgType),e.writeString(this.imgResourceID),a.ElementSeqHelper.write(e,this.elementList)},function(e){this.pageNo=e.readInt(),this.imgType=a.WB_BAKIMG_TYPE.__read(e),this.imgResourceID=e.readString(),this.elementList=a.ElementSeqHelper.read(e)},7,!1),o.defineSequence(a,"PageDataSeqHelper","Conference.PageData",!1),a.WhiteBoardData=o.defineStruct(function(e,t){this.descData=void 0!==e?e:new a.WhiteBoardDescribe,this.pageDataList=void 0!==t?t:null},!0,function(e){a.WhiteBoardDescribe.write(e,this.descData),a.PageDataSeqHelper.write(e,this.pageDataList)},function(e){this.descData=a.WhiteBoardDescribe.read(e,this.descData),this.pageDataList=a.PageDataSeqHelper.read(e)},38,!1),o.defineSequence(a,"WhiteBoardDataSeqHelper","Conference.WhiteBoardData",!1),o.defineDictionary(a,"PageToDatas","PageToDatasHelper","Ice.IntHelper","Conference.PageData",!1,void 0,void 0,i.HashMap.compareEquals),a.WBMaxError=o.defineUserException(function(e,t,n){r.ConferenceError.call(this,e,t,n)},r.ConferenceError,"Conference::WBMaxError",void 0,void 0,!1,!1),a.WBNotExistError=o.defineUserException(function(e,t,n){r.ConferenceError.call(this,e,t,n)},r.ConferenceError,"Conference::WBNotExistError",void 0,void 0,!1,!1),a.WBElementNoExistError=o.defineUserException(function(e,t,n){r.ConferenceError.call(this,e,t,n)},r.ConferenceError,"Conference::WBElementNoExistError",void 0,void 0,!1,!1),a.WhiteBoardCtrl=o.defineObject(void 0,i.Object,void 0,0,["::Conference::WhiteBoardCtrl","::Ice::Object"],-1,void 0,void 0,!1),a.WhiteBoardCtrlPrx=o.defineProxy(i.ObjectPrx,a.WhiteBoardCtrl.ice_staticId,void 0),o.defineOperations(a.WhiteBoardCtrl,a.WhiteBoardCtrlPrx,{setContainerSize:[,,,1,,,[[3],[3]],,[r.ConferenceError],,],create:[,,,1,,,[[a.WhiteBoardDescribe]],,[r.ConferenceError],,],importPage:[,,,1,,,[[a.TabID],["Conference.PageDataSeqHelper"]],,[r.ConferenceError],,],close:[,,,1,,,[[a.TabID]],,[r.ConferenceError],,],changeName:[,,,1,,,[[a.TabID],[7]],,[r.ConferenceError],,],changeScale:[,,,1,,,[[a.TabID],[a.WB_SCALE_TYPE.__helper]],,[r.ConferenceError],,],changeRatote:[,,,1,,,[[a.TabID],[a.WB_ROTATE_TYPE.__helper]],,[r.ConferenceError],,],setCurrentPage:[,,,1,,,[[a.TabID],[3],[3],[3]],,[r.ConferenceError],,],showThumPage:[,,,1,,,[[a.TabID],[1]],,[r.ConferenceError],,],addElement:[,,,1,,,[[a.TabID],[3],[a.ElementData]],,[r.ConferenceError],,],addElementEx:[,,,1,,,[[a.TabID],[3],["Conference.ElementSeqHelper"]],,[r.ConferenceError],,],moveElement:[,,,1,,,[[a.TabID],[3],["Conference.ElementPosSeqHelper"]],,[r.ConferenceError],,],modifyElement:[,,,1,,,[[a.TabID],[3],[a.ElementData]],,[r.ConferenceError],,],delElement:[,,,1,,,[[a.TabID],[3],["Conference.ElementIDSeqHelper"]],,[r.ConferenceError],,],setElementZPos:[,,,1,,,[[a.TabID],[3],[a.WB_ELEMENT_ZPOS.__helper]],,[r.ConferenceError],,],setIndicator:[,,,1,,,[[a.TabID],[a.IndicatorData]],,[r.ConferenceError],,],setHotspot:[,,,1,,,[[a.TabID],[3],[3],[3]],,[r.ConferenceError],,],queryIndicator:[,,,1,,["Conference.IndicatorDataSeqHelper"],[[a.TabID]],,[r.ConferenceError],,],queryAllBoardList:[,,,1,,["Conference.WhiteBoardDescribeSeqHelper"],,,[r.ConferenceError],,],queryElementByIDs:[,,,1,,["Conference.PageToDatasHelper"],[[a.TabID],["Ice.IntSeqHelper"]],,[r.ConferenceError],,],queryPageElementByIDs:[,,,1,,["Conference.ElementSeqHelper"],[[a.TabID],[3],["Conference.ElementIDSeqHelper"]],,[r.ConferenceError],,],setMarkTerms:[,,,1,,,[[a.TabID],[1],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,]}),a.WhiteBoardCallback=o.defineObject(void 0,i.Object,void 0,0,["::Conference::WhiteBoardCallback","::Ice::Object"],-1,void 0,void 0,!1),a.WhiteBoardCallbackPrx=o.defineProxy(i.ObjectPrx,a.WhiteBoardCallback.ice_staticId,void 0),o.defineOperations(a.WhiteBoardCallback,a.WhiteBoardCallbackPrx,{notifySetContainerSize:[,,,,,,[[3],[3],[2]],,,,],notifyCreate:[,,,,,,[[a.WhiteBoardDescribe],[2]],,,,],notifyImportPage:[,,,,,,[[a.TabID],["Conference.PageDataSeqHelper"],[2]],,,,],notifyClose:[,,,,,,[[a.TabID],[2]],,,,],notifyChangeName:[,,,,,,[[a.TabID],[7],[2]],,,,],notifyChangeScale:[,,,,,,[[a.TabID],[a.WB_SCALE_TYPE.__helper],[2]],,,,],notifyChangeRotate:[,,,,,,[[a.TabID],[a.WB_ROTATE_TYPE.__helper],[2]],,,,],notifySetCurrentPage:[,,,,,,[[a.TabID],[3],[3],[3],[2]],,,,],notifyShowThumPage:[,,,,,,[[a.TabID],[1],[2]],,,,],notifyAddElement:[,,,,,,[[a.TabID],[3],[a.ElementData],[2]],,,,],notifyAddElementEx:[,,,,,,[[a.TabID],[3],["Conference.ElementSeqHelper"],[2]],,,,],notifyMoveElement:[,,,,,,[[a.TabID],[3],["Conference.ElementPosSeqHelper"],[2]],,,,],notifyModifyElement:[,,,,,,[[a.TabID],[3],[a.ElementData],[2]],,,,],notifyDelElement:[,,,,,,[[a.TabID],[3],["Conference.ElementIDSeqHelper"],[2]],,,,],notifySetElementZPos:[,,,,,,[[a.TabID],[3],[a.WB_ELEMENT_ZPOS.__helper],[2]],,,,],notifySetIndicator:[,,,,,,[[a.TabID],[a.IndicatorData],[2]],,,,],notifySetHotspot:[,,,,,,[[a.TabID],[3],[3],[3],[2]],,,,],notifySetMarkTerms:[,,,,,,[[a.TabID],[1],["Ice.ShortSeqHelper"]],,,,]}),n.Conference=a}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,c=i.Slice;o.SyncCtrlCallback=c.defineObject(void 0,i.Object,void 0,0,["::Conference::SyncCtrlCallback","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlCallbackPrx=c.defineProxy(i.ObjectPrx,o.SyncCtrlCallback.ice_staticId,void 0),c.defineOperations(o.SyncCtrlCallback,o.SyncCtrlCallbackPrx,{notifySetCurrentTab:[,,,,,,[[o.TabID],[o.TabID],[2]],,,,],notifySetFullScreen:[,,,,,,[[1],[2]],,,,],notifySetPrivTabInfo:[,,,,,,[[7],[2]],,,,],notifySetSyncMode:[,,,,,,[[o.SYNCMODE.__helper],[2]],,,,]}),o.SyncCtrl=c.defineObject(void 0,i.Object,void 0,0,["::Conference::SyncCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlPrx=c.defineProxy(i.ObjectPrx,o.SyncCtrl.ice_staticId,void 0),c.defineOperations(o.SyncCtrl,o.SyncCtrlPrx,{setCurrentTab:[,,,1,,,[[o.TabID],[o.TabID]],,[r.ConferenceError],,],setFullScreen:[,,,1,,,[[1]],,[r.ConferenceError],,],setPrivTabInfo:[,,,1,,,[[7]],,[r.ConferenceError],,],setSyncMode:[,,,1,,,[[o.SYNCMODE.__helper]],,[r.ConferenceError],,],saveLastTabValue:[,,,1,,,[[2]],,[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process&&module,"undefined"!=typeof global&&void 0!==global.process?require:Ice.__require,"undefined"!=typeof global&&void 0!==global.process?exports:this),function(){for(var o=0,e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16.7-(n-o)),r=window.setTimeout(function(){e(n+i)},i);return o=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){if(void 0!==window.RTCPeerConnection){test_isvp8="",test_isH264="";try{window.loginConnection=new RTCPeerConnection({iceServers:[{urls:"stun:121.42.156.84:3478"}]});window.loginConnection.createOffer(function(e){(window.baseOffer=e).sdp.includes("H264")&&e.sdp.includes("VP8")?window.rtc_codecs="VP8;H264":e.sdp.includes("H264")?window.rtc_codecs="H264":e.sdp.includes("VP8")?window.rtc_codecs="VP8":window.rtc_codecs=""},function(e){console.error(e),window.rtc_codecs=""},{offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1})}catch(e){console.error(e),console.log(JSON.stringify({name:e.name,message:e.message})),window.rtc_codecs=""}}}(),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){}function n(){return r.apply(this instanceof t&&e?this:e,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),r=this;return t.prototype=this.prototype,n.prototype=new t,n}),window.Cr={},window.CRVideo={},window.Cr.__init=!1,Cr._ua=function(){var e=window,t=document,n=navigator,i="Shockwave Flash",r="application/x-shockwave-flash",o=void 0!==t.getElementById&&void 0!==t.getElementsByTagName&&void 0!==t.createElement,c=n.userAgent.toLowerCase(),a=n.platform.toLowerCase(),s=/win/.test(a||c),l=/mac/.test(a||c),d=!!/webkit/.test(c)&&parseFloat(c.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),u="Microsoft Internet Explorer"===n.appName,f=[0,0,0],h=null;if(void 0!==n.plugins&&"object"===_typeof2(n.plugins[i]))(h=n.plugins[i].description)&&void 0!==n.mimeTypes&&n.mimeTypes[r]&&n.mimeTypes[r].enabledPlugin&&(u=!(plugin=!0),h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(void 0!==e.ActiveXObject)try{var p=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");p&&(h=p.GetVariable("$version"))&&(u=!0,h=h.split(" ")[1].split(","),f=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)])}catch(e){throw e}return{w3:o,pv:f,wk:d,ie:u,win:s,mac:l}}(),Cr.CbProxy=function(e){this.name=e,this.callback=null},Cr.CbProxy.prototype.call=function(e){try{this.callback&&"function"==typeof this.callback&&this.callback.apply(null,e)}catch(e){throw e}},Cr.MsgInfo=function(e){this.type=e.type,this.index=e.index,this.msg=e.msg,this.head=e.head,this.sendTime=e.sendTime,this.targetNickname=e.targetNickname,this.targetTermId=e.targetTermId,this.srcNickname=e.srcNickname,this.srcTermId=e.srcTermId,this.ishost=e.ishost},Cr.MeetInfo=function(e){this.termId=e.termId,this.nickname=e.nickname,this.userId=e.userId,this.bindId=e.bindId,this.openedCamIDs=e.openedCamIDs,this.activeMembers=e.activeMembers,this.myDetail=e.myDetail,this.serverTime=e.serverTime,this.isBegan=e.isBegan,this.countdown=e.countdown,this.mainVideoTermID=e.mainVideoTermID,this.srvRecordState=e.srvRecordState,this.srvRecordCfg=e.srvRecordCfg,this.wbDescibes=e.wbDescibes,this.ServerUTCTime=e.ServerUTCTime,this.bAllowWall=e.bAllowWall,this.bFull=e.bFull,this.bRoomLocked=e.bRoomLocked,this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab,this.option=e.option,this.lastElemValue=e.lastElemValue,this.lastTabValue=e.lastTabValue,this.confInfo=e.confInfo},Cr.parseMemberInfo=function(e){var t=e.extProperty,n=t.get(Conference.MINFO_OPENEDCAMIDS);if(null!=n){n=n.split(";");for(var i=0;i<n.length;i++)n[i]=+n[i];e.defaultCam=n[0],e.openedCamIDs=n.slice(1)}void 0!==t.get(Conference.MINFO_ALLCAMS)&&(e.allCams=t.get(Conference.MINFO_ALLCAMS).split("\n").slice(0,-1)),e.userId=t.get(Conference.CLIETN_PRIV_DAT),e.platform=t.get(Conference.CLINET_PLATFORM),e.sdk_ver=t.get(Conference.CLINET_SDK_VER),e.slice_ver=t.get(Conference.SLICE_VER),e.iswifi=t.get(Conference.CLINET_ISWIFI),e.privRole=t.get("priv_role")||"others"},Cr.Quesask=function(e){this.typeID=e.typeID,this.asktime=e.asktime,this.termID=e.termID,this.content=e.content,this.nickname=e.nickname},Cr_Question_State={NotReply:0,Replying:1,NotPublic:2,Publiced:3,Deleted:4},Cr.QuesDeal=function(e){this.state=e.state._value,this.replyCon=e.replyCon,this.replyTermId=e.replyTermId,this.replyTime=e.replyTime,this.publishTermID=e.publishTermID,this.publishTime=e.publishTime,this.delTermID=e.delTermID,this.delTime=e.delTime},Cr.QuesInf=function(e){this.quesID=e.quesID,this.ask=new Cr.Quesask(e.ask),this.deal=new Cr.QuesDeal(e.deal)},Cr.ScreenShareInfo=function(e){this.scrSviceProxy=e.scrSviceProxy,this.authKey=e.authKey,this.allowCtrlReq=e.allowCtrlReq,this.state=e.state,this.sharer=e.sharer,this.controller=e.controller,this.allowOtherMark=e.allowOtherMark},Cr.MediaInfo=function(e){this.termid=e.termid,this.MEDIA_STATE=e.MEDIA_STATE,this.mediaName=e.mediaName},Cr.ElementID=function(e){this.ownerID=e.ownerID,this.ID=e.ID},Cr.ElementData=function(e){this.eID=e.eID,this.orderId=e.orderId,this.left=e.left,this.top=e.top,this.type=e.type,this.noused=e.noused,this.data=e.data},Cr.AsyncResult=function(){},Cr.AsyncResult.prototype.then=function(e){return this.__child=new Cr.AsyncResult,this.__complete=e,this.__child},Cr.AsyncResult.prototype.complete=function(e){var t=function(){this.next(e),this.__parent&&"function"==typeof this.__parent.next&&this.__parent.next(e)}.bind(this);setTimeout(t,0)},Cr.AsyncResult.prototype.next=function(e){if(this.__complete&&"function"==typeof this.__complete){var t=this.__complete.apply(this,e);t&&this.__child&&(t.__parent=this.__child)}},Cr.AsyncResult2As=function(e,t){this.id=e,this.proxy=t},Cr.AsyncResult2As.prototype.complete=function(e){e.unshift(this.id),this.proxy.callback.apply(this.proxy,e)},Cr.Swf={__callbackId_generator:0,__generateCallbackId:function(){return Cr.Swf.__callbackId_generator++},__callbackAsyncDict:{},__registerCallbackAsync:function(e,t){if(Cr.Swf.__callbackAsyncDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__callbackAsyncDict[e]=t},asyncAsCallback:function(){if(!(1<=arguments.length))throw"swf callback error:arguments deficient";for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n=e.shift(),i=Cr.Swf.__callbackAsyncDict[n];if(!i)throw"swf callback error:async not exist";i.complete(e)},callJs:function(){if(2<=arguments.length){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];if(cmd=e.shift(),id=e.shift(),cmdObj=Cr.Swf.__asCallbackCmdDict[cmd],cmdObj){var n=cmdObj.fun;cmdObj.proxy;n.call(null,e)}}},__asCallbackCmdDict:{},addAsCallback:function(e,t,n){if(Cr.Swf.__asCallbackCmdDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__asCallbackCmdDict[e]={fun:t,proxy:n}}},Cr.crmt=null,Cr.Utils={generate_uuid:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},setCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},getCookie:function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);return n?unescape(n[2]):void 0},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var n=Utils.getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},Uint8ToString:function(e){for(var t=[],n=0;n<e.length;n+=32768)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return t.join("")},Uint8ToBase64:function(e){for(var t,n=0,i=e.length,r="";n<i;)t=e.subarray(n,Math.min(n+32768,i)),r+=String.fromCharCode.apply(null,t),n+=32768;return btoa(r)},compare:function(r){return function(e,t){var n=e[r],i=t[r];return n<i?-1:i<n?1:0}},deepCopy:function(e){var t={};for(var n in e)t[n]="object"===_typeof2(e[n])?deepCoyp(e[n]):e[n];return t},chat2html:function(e,t,n){var i="",r="",o="";if(0<=e.indexOf("0x10x4"))0<=(i=e.split("0x10x4")[1]).indexOf("0x1")&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl;else if(0<=e.indexOf("0x10x5")){0<=(i=e.split("0x10x5")[1]).indexOf("0x1")&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl}else if(0<=e.indexOf("0x10x6")){0<=(i=e.split("0x10x6")[1]).indexOf("0x1")&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl}else{null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signB=Cr.Utils.utf8ByteToUnicodeStr([2]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._captureRegExp=new RegExp(Cr._sign+Cr._signB+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g")),i=(i=(i=(i=(i=(i=(i=(i=(i=(i=e.replace(/<br\/>/g,"\n")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(Cr._imgRegExp,'<img  src="$1"></img>')).replace(Cr._captureRegExp,"");var c=Cr._headimgRegExp.exec(i);if(c)o=c[1];i=i.replace(Cr._headimgRegExp,"");for(var a=(16777215&t).toString(16),s=6-a.length,l=0;l<s;l++)a="0"+a;i='<p style="color:#'+a+";font-size:"+n+'">'+i+"</p>",r=0}return[r,o,i]},html2chat:function(e){return null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signB=Cr.Utils.utf8ByteToUnicodeStr([2]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._captureRegExp=new RegExp(Cr._sign+Cr._signB+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g")),[e=(e=(e=(e=e.replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\/\>/gi,Cr._sign+Cr._signA+":$1"+Cr._sign)).replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\>.*?\<\/s*imgs*\>/gi,Cr._sign+Cr._signA+":$1"+Cr._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\/\>/gi,Cr._sign+Cr._sign+":/$1"+Cr._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\>.*?\<\/s*imgs*\>/gi,Cr._sign+Cr._sign+":/$1"+Cr._sign)]},ask2html:function(e){null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"));var t=e.replace(/<br\/>/g,"\n");t=(t=(t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(Cr._imgRegExp,'<img  src="$1"></img>');var n=Cr._headimgRegExp.exec(t);if(n)var i=n[1];return[i,t=t=t.replace(Cr._headimgRegExp,"")]},utf8ByteToUnicodeStr:function(e){for(var t="",n=0;n<e.length;){var i=e[n],r=0;i>>>7==0?(t+=String.fromCharCode(e[n]),n+=1):252==(252&i)?(r=(3&e[n])<<30,r|=(63&e[n+1])<<24,r|=(63&e[n+2])<<18,r|=(63&e[n+3])<<12,r|=(63&e[n+4])<<6,r|=63&e[n+5],t+=String.fromCharCode(r),n+=6):248==(248&i)?(r=(7&e[n])<<24,r|=(63&e[n+1])<<18,r|=(63&e[n+2])<<12,r|=(63&e[n+3])<<6,r|=63&e[n+4],t+=String.fromCharCode(r),n+=5):240==(240&i)?(r=(15&e[n])<<18,r|=(63&e[n+1])<<12,r|=(63&e[n+2])<<6,r|=63&e[n+3],t+=String.fromCharCode(r),n+=4):224==(224&i)?(r=(31&e[n])<<12,r|=(63&e[n+1])<<6,r|=63&e[n+2],t+=String.fromCharCode(r),n+=3):192==(192&i)?(r=(63&e[n])<<6,r|=63&e[n+1],t+=String.fromCharCode(r),n+=2):(t+=String.fromCharCode(e[n]),n+=1)}return t},base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,r,o,c,a,s="",l=0;for(e=this._utf8_encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,o=(3&t)<<4|(n=e.charCodeAt(l++))>>4,c=(15&n)<<2|(i=e.charCodeAt(l++))>>6,a=63&i,isNaN(n)?c=a=64:isNaN(i)&&(a=64),s=s+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(c)+this._keyStr.charAt(a);return s},decode:function(e){var t,n,i,r,o,c,a="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)t=this._keyStr.indexOf(e.charAt(s++))<<2|(r=this._keyStr.indexOf(e.charAt(s++)))>>4,n=(15&r)<<4|(o=this._keyStr.indexOf(e.charAt(s++)))>>2,i=(3&o)<<6|(c=this._keyStr.indexOf(e.charAt(s++))),a+=String.fromCharCode(t),64!=o&&(a+=String.fromCharCode(n)),64!=c&&(a+=String.fromCharCode(i));return a=this._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=0,r=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):191<i&&i<224?(r=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&c3),n+=3);return t}},parse_url:function(e,t){for(var n=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i=this.php_js&&this.php_js.ini||{},r=i["phpjs.parse_url.mode"]&&i["phpjs.parse_url.mode"].local_value||"php",o={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=o[r].exec(e),a={},s=14;s--;)c[s]&&(a[n[s]]=c[s]);if(t)return a[t.replace("PHP_URL_","").toLowerCase()];if("php"!==r){var l=i["phpjs.parse_url.queryKey"]&&i["phpjs.parse_url.queryKey"].local_value||"queryKey";o=/(?:^|&)([^&=]*)=?([^&]*)/g,a[l]={},a[n[12]].replace(o,function(e,t,n){t&&(a[l][t]=n)})}return delete a.source,a},log:function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);window.console&&window.console.crlog.apply(window.console,e)}},CR_NOERR=0,CR_UNKNOWERR=1,CR_INNER_ERR=3,CR_MEETPARAM_ERR=5,CR_ERR_DATA=6,CR_ANCTPSWD_ERR=7,CR_SERVER_EXCEPTION=8,CR_NETWORK_INITFAILED=200,CR_NO_SERVERINFO=201,CR_NOSERVER_RSP=202,CR_CREATE_CONN_FAILED=203,CR_SOCKETEXCEPTION=204,CR_NOTAVAILABLESERVER=205,CR_MEETNOTEXIST=800,CR_AUTHERROR=801,CR_MEMBEROVERFLOWERROR=802,CR_RESOURCEALLOCATEERROR=803,CR_MEETOFFLINE=804,CR_MEMBER_ALREADY_IN_MEET=805,CR_CONCURRENCY_OVER=806,CR_MEET_IS_OPEN_ING=807,CR_CONTAINSSENSITIVEWORDS=900,CR_NOT_CHAT_PERMIT=901,CR_LUCKYDRAWNOTEXISTS=2001,CR_LUCKYDRAWCFGFAILS=2002,CR_JOINLUCKYDRAWFAILS=2003,CR_ANNOUCELUCKYDRAWFAILS=2004,CRVideo_ERR_DATA=6,CRVideo_ANCTPSWD_ERR=7,CRVideo_SERVER_EXCEPTION=8,CRVideo_CRVideoSDK_USER_BEEN_KICKOUT=10,CRVideo_NETWORK_INITFAILED=200,CRVideo_NO_SERVERINFO=201,CRVideo_NOSERVER_RSP=202,CRVideo_CREATE_CONN_FAILED=203,CRVideo_SOCKETEXCEPTION=204,CRVideo_SOCKETTIMEOUT=205,CRVideo_FORCEDCLOSECONNECTION=206,CRVideo_CONNECTIONLOST=207,CRVideo_QUE_ID_INVALID=400,CRVideo_QUE_NOUSER=401,CRVideo_QUE_USER_CANCELLED=402,CRVideo_QUE_SERVICE_NOT_START=403,CRVideo_ALREADY_OTHERQUE=404,CRVideo_INVALID_CALLID=600,CRVideo_ERR_CALL_EXIST=601,CRVideo_ERR_BUSY=602,CRVideo_ERR_OFFLINE=603,CRVideo_ERR_NOANSWER=604,CRVideo_ERR_USER_NOT_FOUND=605,CRVideo_ERR_REFUSE=606,CRVideo_MEETNOTEXIST=800,CRVideo_AUTHERROR=801,CRVideo_MEMBEROVERFLOWERROR=802,CRVideo_RESOURCEALLOCATEERROR=803,CRVideo_MEETOFFLINE=804,CRVideo_WEB_OCX_NOTINSTALLED=CR_THIRDPARTYLIVEISON=1001,CRVideo_WEB_BROWER_NOTUPPORTED=CR_LISTLIVEISON=1002,CRVideo_OCX_VERSION_NOTUPPORTED=CR_CLIENTLIVEISON=1003;var PhoneFormat={PCED_NO_ERR:CRVideo_NOERR=0,PCED_ILLEGAL_CHAR:CRVideo_UNKNOWERR=1,PCED_INVALID_LEN:CRVideo_OUTOF_MEM=2,PCED_INVALID_NUM:CRVideo_INNER_ERR=3,PCED_NO_AREA_CODE:CRVideo_MISMATCHCLIENTVER=4,PCED_ILLEGAL_EXT:CRVideo_MEETPARAM_ERR=5,result:"",IsLegalChar:function(e){for(var t=e.length,n=0;n<t;n++){var i=e.charAt(n);if((i<"0"||"9"<i)&&"-"!=i&&"+"!=i&&"*"!=i&&"#"!=i)return!1}return!0},isChinaMobile:function(e){return!(e.length<6)&&("8"==e.charAt(2)&&"6"==e.charAt(3)&&"1"==e.charAt(4)&&"2"<e.charAt(5))},CoverToStandardFormat:function(e){PhoneFormat.result=e.concat(),PhoneFormat.result=PhoneFormat.result.replace("＋","+"),PhoneFormat.result=PhoneFormat.result.replace("－","-");var t=!1;if(!PhoneFormat.IsLegalChar(PhoneFormat.result))return PhoneFormat.PCED_ILLEGAL_CHAR;if(PhoneFormat.result.length<3)return PhoneFormat.PCED_INVALID_LEN;if("9"==PhoneFormat.result.charAt(0)&&"5"==PhoneFormat.result.charAt(1)&&(PhoneFormat.result="0086"+PhoneFormat.result),"+"==PhoneFormat.result.charAt(0)){if("0"==PhoneFormat.result.charAt(1))return PhoneFormat.PCED_INVALID_NUM;PhoneFormat.result="00"+PhoneFormat.result.substr(2)}else"0"==PhoneFormat.result.charAt(0)&&"0"==PhoneFormat.result.charAt(1)||(PhoneFormat.result="0086"+PhoneFormat.result,t=!0);if(-1!=PhoneFormat.result.indexOf("+")&&((i=PhoneFormat.result.match(/-/g))&&2<i.length))return PhoneFormat.PCED_INVALID_NUM;if(PhoneFormat.result.length<6)return PhoneFormat.PCED_INVALID_LEN;if("86"==PhoneFormat.result.substr(2,2)){var n=!0;if("0"==PhoneFormat.result.charAt(4)&&(n=!1,PhoneFormat.result=PhoneFormat.result.substr(0,4)+PhoneFormat.result.substr(5)),PhoneFormat.isChinaMobile(PhoneFormat.result))return-1!=PhoneFormat.result.indexOf("-")?PhoneFormat.PCED_INVALID_NUM:15!=PhoneFormat.result.length?PhoneFormat.PCED_INVALID_LEN:PhoneFormat.PCED_NO_ERR;var i,r=PhoneFormat.result.substr(4,3),o=0;if("400"==r||"800"==r)return-1!=(o=PhoneFormat.result.indexOf("-"))?7==o&&11==o&&16==PhoneFormat.result.length?(PhoneFormat.result=PhoneFormat.result.substr(0,o)+PhoneFormat.result.substr(o+1),PhoneFormat.PCED_NO_ERR):PhoneFormat.PCED_INVALID_NUM:14!=PhoneFormat.result.length?PhoneFormat.PCED_INVALID_LEN:PhoneFormat.PCED_NO_ERR;if(t&&n)return PhoneFormat.PCED_NO_AREA_CODE;if("0"==PhoneFormat.result.charAt(4))return PhoneFormat.PCED_INVALID_NUM;if("-"==PhoneFormat.result.charAt(6)?PhoneFormat.result=PhoneFormat.result.substr(0,6)+PhoneFormat.result.substr(7):"-"==PhoneFormat.result.charAt(7)&&(PhoneFormat.result=PhoneFormat.result.substr(0,7)+PhoneFormat.result.substr(8)),(i=PhoneFormat.result.match(/-/g))&&0<i.length&&(r=PhoneFormat.result.substr(PhoneFormat.result.indexOf("-")+1),1<i.lengt||32<PhoneFormat.result.length))return PhoneFormat.PCED_ILLEGAL_EXT}return 64<PhoneFormat.result.length?PhoneFormat.PCED_INVALID_LEN:PhoneFormat.PCED_NO_ERR},CoverToDisplayFormat:function(e){var t=PhoneFormat.CoverToStandardFormat(e);if(t!=PhoneFormat.PCED_NO_ERR)return t;if(PhoneFormat.result=PhoneFormat.result.substr(2),PhoneFormat.result="+"+PhoneFormat.result,"8"!=PhoneFormat.result.charAt(1)||"6"!=PhoneFormat.result.charAt(2))return PhoneFormat.PCED_NO_ERR;if(PhoneFormat.result=PhoneFormat.result.substr(3),"1"==PhoneFormat.result.charAt(0)&&"2"<PhoneFormat.result.charAt(1))return PhoneFormat.PCED_NO_ERR;var n=PhoneFormat.result.substr(0,3);return"400"==n||"800"==n||"9"==PhoneFormat.result.charAt(0)&&"5"==PhoneFormat.result.charAt(1)||(PhoneFormat.result="0"+PhoneFormat.result),PhoneFormat.PCED_NO_ERR}},CR_InitRslt=new Cr.CbProxy("CR_InitRslt"),CR__LoginRslt=new Cr.CbProxy("CR__LoginRslt"),CR__RefreshSessionRslt=new Cr.CbProxy("CR__RefreshSessionRslt"),CR__KeepAliveRslt=new Cr.CbProxy("CR__KeepAliveRslt"),CR__ExitRslt=new Cr.CbProxy("CR__ExitRslt"),CR__GetActiveMembersRslt=new Cr.CbProxy("CR__GetActiveMembersRslt"),CR__EndConferenceRslt=new Cr.CbProxy("CR__EndConferenceRslt"),CR__GetLastMsgRslt=new Cr.CbProxy("CR__GetLastMsgRslt"),CR__GetLastNMsgRslt=new Cr.CbProxy("CR__GetLastNMsgRslt"),CR__UserLeftMeet=new Cr.CbProxy("CR__UserLeftMeet"),CR__UserEnter=new Cr.CbProxy("CR__UserEnter"),CR__MeetEnded=new Cr.CbProxy("CR__MeetEnded"),CR__NotifyStartBroadCast=new Cr.CbProxy("CR__NotifyStartBroadCast"),CR__NotifyStopBroadCast=new Cr.CbProxy("CR__NotifyStopBroadCast"),CR__NotifyBroadCastStartPush=new Cr.CbProxy("CR__NotifyBroadCastStartPush"),CR__NotifyBroadCastStopPush=new Cr.CbProxy("CR__NotifyBroadCastStopPush"),CR__GetBroadCastUrlRslt=new Cr.CbProxy("CR__GetBroadCastUrlRslt"),CR__RightChanged=new Cr.CbProxy("CR__RightChanged"),CR__AskQuesRslt=new Cr.CbProxy("CR__AskQuesRslt"),CR__GetQuesListRslt=new Cr.CbProxy("CR__GetQuesListRslt"),CR__AskQuesNotify=new Cr.CbProxy("CR__AskQuesNotify"),CR__LockQuesNotify=new Cr.CbProxy("CR__LockQuesNotify"),CR__ReplyQuesNotify=new Cr.CbProxy("CR__ReplyQuesNotify"),CR__ModifyQuesNotify=new Cr.CbProxy("CR__ModifyQuesNotify"),CR__DelQuesNotify=new Cr.CbProxy("CR__DelQuesNotify"),CR__DelAllQuesNotify=new Cr.CbProxy("CR__DelAllQuesNotify"),CR__PublicQuesNotify=new Cr.CbProxy("CR__PublicQuesNotify"),CR__QuesTypeChangeNotify=new Cr.CbProxy("CR__QuesTypeChangeNotify"),CR__ModifyQuesTypeNotify=new Cr.CbProxy("CR__ModifyQuesTypeNotify"),CR__SetBroadCastQuesNotify=new Cr.CbProxy("CR__SetBroadCastQuesNotify"),CR__NotifyPlayBackStartPush=new Cr.CbProxy("CR__NotifyPlayBackStartPush"),CR__GetIMMsgCountRslt=new Cr.CbProxy("CR__GetIMMsgCountRslt"),CR__Notifypayback=new Cr.CbProxy("CR__Notifypayback"),CR__NotifyBroadCastPlaybackStop=new Cr.CbProxy("CR__NotifyBroadCastPlaybackStop"),CR__NotifySwtichLiveAppElements=new Cr.CbProxy("CR__NotifySwtichLiveAppElements"),CR__NotifyThumbUp=new Cr.CbProxy("CR__NotifyThumbUp"),CR__NotifyLuckyDrawCfg=new Cr.CbProxy("CR__NotifyLuckyDrawCfg"),CR__GetLuckyDrawCfgRslt=new Cr.CbProxy("CR__GetLuckyDrawCfgRslt"),CR__JoinLuckyDrawMembersRslt=new Cr.CbProxy("CR__JoinLuckyDrawMembersRslt"),CR__NotifyLDMembersStatus=new Cr.CbProxy("CR__NotifyLDMembersStatus"),CR__NotifyNickNameChanged=new Cr.CbProxy("CR__NotifyNickNameChanged"),CR__NotifyLuckyDrawResult=new Cr.CbProxy("CR__NotifyLuckyDrawResult"),CR__AskForMicRslt=new Cr.CbProxy("CR__AskForMicRslt"),CR__OpenMicExRslt=new Cr.CbProxy("CR__OpenMicExRslt"),CR__CloseMicExRslt=new Cr.CbProxy("CR__CloseMicExRslt"),CR__AudioAllocRaw=new Cr.CbProxy("CR__AudioAllocRaw"),CR__AudioAllocRawExt=new Cr.CbProxy("CR__AudioAllocRawExt"),CR__AudioAllocRawExt2=new Cr.CbProxy("CR__AudioAllocRawExt2"),CR__VideoAllocRaw=new Cr.CbProxy("CR__VideoAllocRaw"),CR__VideoAllocRawExt=new Cr.CbProxy("CR__VideoAllocRawExt"),CR__VideoAllocRawExt2=new Cr.CbProxy("CR__VideoAllocRawExt2"),CR__ModifyPeerAddr=new Cr.CbProxy("CR__ModifyPeerAddr"),CR__ModifyPeerAddrExt=new Cr.CbProxy("CR__ModifyPeerAddrExt"),CR__NotifyRTMPStreamPublishFinished=new Cr.CbProxy("CR__NotifyRTMPStreamPublishFinished"),CR__EnableSendScreen2Internet=new Cr.CbProxy("CR__EnableSendScreen2Internet"),CR__DisableSendScreen2Internet=new Cr.CbProxy("CR__DisableSendScreen2Internet"),CR__EnableSendFilm2Internet=new Cr.CbProxy("CR__EnableSendFilm2Internet"),CR__DisableSendFilm2Internet=new Cr.CbProxy("CR__DisableSendFilm2Internet"),CR__Free=new Cr.CbProxy("CR__Free"),CR__NotifyAllowVideoWall=new Cr.CbProxy("CR__NotifyAllowVideoWall"),CR__NotifyOpenVideo=new Cr.CbProxy("CR__NotifyOpenVideo"),CR__StartVideoByManager=new Cr.CbProxy("CR__StartVideoByManager"),CR__NotifyEnableVideo=new Cr.CbProxy("CR__NotifyEnableVideo"),CR__UpdateFocusWindow=new Cr.CbProxy("CR__UpdateFocusWindow"),CR__UpdateVLayout=new Cr.CbProxy("CR__UpdateVLayout"),CR__UpdateVLayout2=new Cr.CbProxy("CR__UpdateVLayout2"),CR__UpdateMainVideoShowMode=new Cr.CbProxy("CR__UpdateMainVideoShowMode"),CR__UpdateVideoListMode=new Cr.CbProxy("CR__UpdateVideoListMode"),CR__EnableUpload=new Cr.CbProxy("CR__EnableUpload"),CR__EnableUpload2=new Cr.CbProxy("CR__EnableUpload2"),CR__GenerateIFrame=new Cr.CbProxy("CR__GenerateIFrame"),CR__NotifyRefuseOpenVideo=new Cr.CbProxy("CR__NotifyRefuseOpenVideo"),CR__NotifyVideoPolling=new Cr.CbProxy("CR__NotifyVideoPolling"),CR__NotifyPollingVideo=new Cr.CbProxy("CR__NotifyPollingVideo"),CR__NotifyVideoList=new Cr.CbProxy("CR__NotifyVideoList"),CR__NotifyStartAdjustDirection=new Cr.CbProxy("CR__NotifyStartAdjustDirection"),CR__NotifyStartAdjustZoom=new Cr.CbProxy("CR__NotifyStartAdjustZoom"),CR__NotifyStopAdjustDirection=new Cr.CbProxy("CR__NotifyStopAdjustDirection"),CR__NotifyStopAdjustZoom=new Cr.CbProxy("CR__NotifyStopAdjustZoom"),CR__AllowVideoWallRslt=new Cr.CbProxy("CR__AllowVideoWallRslt"),CR__StartVideoExRslt=new Cr.CbProxy("CR__StartVideoExRslt"),CR__EnableVideoRslt=new Cr.CbProxy("CR__EnableVideoRslt"),CR__SetFocusWindowRslt=new Cr.CbProxy("CR__SetFocusWindowRslt"),CR__BatchSubscribeVideoRslt=new Cr.CbProxy("CR__BatchSubscribeVideoRslt"),CR__SubscribeFocusWindowRslt=new Cr.CbProxy("CR__SubscribeFocusWindowRslt"),CR__SubscribeFocusWindow2Rslt=new Cr.CbProxy("CR__SubscribeFocusWindow2Rslt"),CR__SetVLayoutRslt=new Cr.CbProxy("CR__SetVLayoutRslt"),CR__SetMainVideoShowModeRslt=new Cr.CbProxy("CR__SetMainVideoShowModeRslt"),CR__SetVideoListModeRslt=new Cr.CbProxy("CR__SetVideoListModeRslt"),CR__RefuseOpenVideoRslt=new Cr.CbProxy("CR__RefuseOpenVideoRslt"),CR__GetVideoSettingRslt=new Cr.CbProxy("CR__GetVideoSettingRslt"),CR__SetCameraRslt=new Cr.CbProxy("CR__SetCameraRslt"),CR__SetCameraByIdRslt=new Cr.CbProxy("CR__SetCameraByIdRslt"),CR__SetVideoPollingRslt=new Cr.CbProxy("CR__SetVideoPollingRslt"),CR__UpdatePollingVideoRslt=new Cr.CbProxy("CR__UpdatePollingVideoRslt"),CR__UpdateVideoListRslt=new Cr.CbProxy("CR__UpdateVideoListRslt"),CR__GetVideoPollingStateRslt=new Cr.CbProxy("CR__GetVideoPollingStateRslt"),CR__StartAdjustDirectionRslt=new Cr.CbProxy("CR__StartAdjustDirectionRslt"),CR__StartAdjustZoomRslt=new Cr.CbProxy("CR__StartAdjustZoomRslt"),CR__StopAdjustDirectionRslt=new Cr.CbProxy("CR__StopAdjustDirectionRslt"),CR__VideoResolutionReportRslt=new Cr.CbProxy("CR__VideoResolutionReportRslt"),CR__SetVoiceEnergyRslt=new Cr.CbProxy("CR__SetVoiceEnergyRslt"),CR__PstnSwitchMicStatusRslt=new Cr.CbProxy("CR__PstnSwitchMicStatusRslt"),CR__StartRecordRslt=new Cr.CbProxy("CR__StartRecordRslt"),CR__IsRecordingRslt=new Cr.CbProxy("CR__IsRecordingRslt"),CR__StopRecordRslt=new Cr.CbProxy("CR__StopRecordRslt"),CR__PlayApplauseRslt=new Cr.CbProxy("CR__PlayApplauseRslt"),CR__GetMusicListRslt=new Cr.CbProxy("CR__GetMusicListRslt"),CR__GetPlayBGMusicRslt=new Cr.CbProxy("CR__GetPlayBGMusicRslt"),CR__StartBGMusicRslt=new Cr.CbProxy("CR__StartBGMusicRslt"),CR__StopPlayBGMusicRslt=new Cr.CbProxy("CR__StopPlayBGMusicRslt"),CR__SetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__SetPlayBGMusicVolumnRslt"),CR__GetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__GetPlayBGMusicVolumnRslt"),CR__VoiceHowlingRslt=new Cr.CbProxy("CR__VoiceHowlingRslt"),CR__VoiceNoiseRslt=new Cr.CbProxy("CR__VoiceNoiseRslt"),CR__RemoteAudioSetRslt=new Cr.CbProxy("CR__RemoteAudioSetRslt"),CR__GetRemoteAudioInfRslt=new Cr.CbProxy("CR__GetRemoteAudioInfRslt"),CR__NotifyCtrlReqState=new Cr.CbProxy("CR__NotifyCtrlReqState"),CR__NotifySetContainerSize=new Cr.CbProxy("CR__NotifySetContainerSize"),CR__NotifyCreate=new Cr.CbProxy("CR__NotifyCreate"),CR__NotifyImportPage=new Cr.CbProxy("CR__NotifyImportPage"),CR__NotifyClose=new Cr.CbProxy("CR__NotifyClose"),CR__NotifyChangeName=new Cr.CbProxy("CR__NotifyChangeName"),CR__NotifyChangeScale=new Cr.CbProxy("CR__NotifyChangeScale"),CR__NotifyChangeRotate=new Cr.CbProxy("CR__NotifyChangeRotate"),CR__NotifySetCurrentPage=new Cr.CbProxy("CR__NotifySetCurrentPage"),CR__NotifyShowThumPage=new Cr.CbProxy("CR__NotifyShowThumPage"),CR__NotifyAddElement=new Cr.CbProxy("CR__NotifyAddElement"),CR__NotifyAddElementEx=new Cr.CbProxy("CR__NotifyAddElementEx"),CR__NotifyMoveElement=new Cr.CbProxy("CR__NotifyMoveElement"),CR__NotifyModifyElement=new Cr.CbProxy("CR__NotifyModifyElement"),CR__NotifyDelElement=new Cr.CbProxy("CR__NotifyDelElement"),CR__NotifySetElementZPos=new Cr.CbProxy("CR__NotifySetElementZPos"),CR__NotifySetIndicator=new Cr.CbProxy("CR__NotifySetIndicator"),CR__NotifySetHotspot=new Cr.CbProxy("CR__NotifySetHotspot"),CR__NotifySetMarkTerms=new Cr.CbProxy("CR__NotifySetMarkTerms"),CR__SetContainerSizeRslt=new Cr.CbProxy("CR__SetContainerSizeRslt"),CR__CreateRslt=new Cr.CbProxy("CR__CreateRslt"),CR__ImportPageRslt=new Cr.CbProxy("CR__ImportPageRslt"),CR__CloseRslt=new Cr.CbProxy("CR__CloseRslt"),CR__ChangeNameRslt=new Cr.CbProxy("CR__ChangeNameRslt"),CR__ChangeScaleRslt=new Cr.CbProxy("CR__ChangeScaleRslt"),CR__ChangeRatoteRslt=new Cr.CbProxy("CR__ChangeRatoteRslt"),CR__SetCurrentPageRslt=new Cr.CbProxy("CR__SetCurrentPageRslt"),CR__ShowThumPageRslt=new Cr.CbProxy("CR__ShowThumPageRslt"),CR__AddElementRslt=new Cr.CbProxy("CR__AddElementRslt"),CR__AddElementExRslt=new Cr.CbProxy("CR__AddElementExRslt"),CR__MoveElementRslt=new Cr.CbProxy("CR__MoveElementRslt"),CR__ModifyElementRslt=new Cr.CbProxy("CR__ModifyElementRslt"),CR__DelElementRslt=new Cr.CbProxy("CR__DelElementRslt"),CR__SetElementZPosRslt=new Cr.CbProxy("CR__SetElementZPosRslt"),CR__SetIndicatorRslt=new Cr.CbProxy("CR__SetIndicatorRslt"),CR__SetHotspotRslt=new Cr.CbProxy("CR__SetHotspotRslt"),CR__QueryIndicatorRslt=new Cr.CbProxy("CR__QueryIndicatorRslt"),CR__QueryAllBoardListRslt=new Cr.CbProxy("CR__QueryAllBoardListRslt"),CR__QueryElementByIDsRslt=new Cr.CbProxy("CR__QueryElementByIDsRslt"),CR__QueryPageElementByIDsRslt=new Cr.CbProxy("CR__QueryPageElementByIDsRslt"),CR__SetMarkTermsRslt=new Cr.CbProxy("CR__SetMarkTermsRslt");function CR__Init(e,t){try{Cr._proxy=new Cr.LHProxy(t),Cr._proxy.init().then(function(e,t){Cr._proxy.registeredCallback("conferenceEnded",function(e){CR__MeetEnded.call(e)}),Cr._proxy.registeredCallback("entered",function(e){CR__UserEnter.call(e)}),Cr._proxy.registeredCallback("left",function(e){CR__UserLeftMeet.call(e)}),Cr._proxy.registeredCallback("notifyStartBroadCast",function(){CR__NotifyStartBroadCast.call()}),Cr._proxy.registeredCallback("notifyStopBroadCast",function(){CR__NotifyStopBroadCast.call()}),Cr._proxy.registeredCallback("notifyBroadCastStartPush",function(){CR__NotifyBroadCastStartPush.call()}),Cr._proxy.registeredCallback("notifyBroadCastStopPush",function(){CR__NotifyBroadCastStopPush.call()}),Cr._proxy.registeredCallback("rightChanged",function(e){CR__RightChanged.call(e)}),Cr._proxy.registeredCallback("askQuesNotify",function(e){id=e[0],askQue=e[1],CR__AskQuesNotify.call([id,new Cr.Quesask(askQue)])}),Cr._proxy.registeredCallback("lockQuesNotify",function(e){id=e[0],queDeal=e[1],CR__LockQuesNotify.call([id,new Cr.QuesDeal(queDeal)])}),Cr._proxy.registeredCallback("replyQuesNotify",function(e){id=e[0],queDeal=e[1],CR__ReplyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])}),Cr._proxy.registeredCallback("modifyQuesNotify",function(e){id=e[0],queDeal=e[1],CR__ModifyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])}),Cr._proxy.registeredCallback("delQuesNotify",function(e){id=e[0],termId=e[1],CR__DelQuesNotify.call([id,termId])}),Cr._proxy.registeredCallback("delAllQuesNotify",function(e){termId=e[0],CR__DelAllQuesNotify.call([termId])}),Cr._proxy.registeredCallback("publicQuesNotify",function(e){id=e[0],bPublic=e[1],termId=e[2],CR__PublicQuesNotify.call([id,bPublic,termId])}),Cr._proxy.registeredCallback("quesTypeChangeNotify",function(e){id=e[0],typeID=e[1],CR__QuesTypeChangeNotify.call([termId])}),Cr._proxy.registeredCallback("modifyQuesTypeNotify",function(e){termId=e[0],quesType=e[1],CR__ModifyQuesTypeNotify.call([termId])}),Cr._proxy.registeredCallback("setBroadCastQuesNotify",function(e){bEnable=e[0],CR__SetBroadCastQuesNotify.call([bEnable])}),Cr._proxy.registeredCallback("notifyPlayBackStartPush",function(e){url=e[0],CR__NotifyPlayBackStartPush.call([url])}),Cr._proxy.registeredCallback("notifypayback",function(e){CR__Notifypayback.call()}),Cr._proxy.registeredCallback("notifyBroadCastPlaybackStop",function(e){url=e[0],CR__NotifyBroadCastPlaybackStop.call([url])}),Cr._proxy.registeredCallback("notifySwtichLiveAppElements",function(e){ele=e[0],status=e[1],CR__NotifySwtichLiveAppElements.call([ele,status])}),Cr._proxy.registeredCallback("notifyThumbUp",function(e){num=e[0],total=e[1],info=e[2],CR__NotifyThumbUp.call([num,total,info])}),Cr._proxy.registeredCallback("notifyLuckyDrawCfg",function(e){CR__NotifyLuckyDrawCfg.call(e)}),Cr._proxy.registeredCallback("notifyLDMembersStatus",function(e){CR__NotifyLDMembersStatus.call(e)}),Cr._proxy.registeredCallback("notifyNicknameChanged",function(e){CR__NotifyNickNameChanged.call(e)}),Cr._proxy.registeredCallback("notifyLuckyDrawResult",function(e){CR__NotifyLuckyDrawResult.call(e)}),Cr._proxy.registeredCallback("ModifyPeerAddr",function(e){CR__ModifyPeerAddr.call(e)}),Cr._proxy.registeredCallback("ModifyPeerAddrExt",function(e){CR__ModifyPeerAddrExt.call(e)}),Cr._proxy.registeredCallback("AudioAllocRaw",function(e){CR__AudioAllocRaw.call(e)}),Cr._proxy.registeredCallback("AudioAllocRawExt",function(e){CR__AudioAllocRawExt.call(e)}),Cr._proxy.registeredCallback("VideoAllocRaw",function(e){CR__VideoAllocRaw.call(e)}),Cr._proxy.registeredCallback("VideoAllocRawExt",function(e){CR__VideoAllocRawExt.call(e)}),Cr._proxy.registeredCallback("VideoAllocRawExt2",function(e){CR__VideoAllocRawExt2.call(e)}),Cr._proxy.registeredCallback("NotifyRTMPStreamPublishFinished",function(e){CR__NotifyRTMPStreamPublishFinished.call(e)}),Cr._proxy.registeredCallback("EnableSendScreen2Internet",function(e){CR__EnableSendScreen2Internet.call(e)}),Cr._proxy.registeredCallback("DisableSendScreen2Internet",function(e){CR__DisableSendScreen2Internet.call(e)}),Cr._proxy.registeredCallback("EnableSendFilm2Internet",function(e){CR__EnableSendFilm2Internet.call(e)}),Cr._proxy.registeredCallback("DisableSendFilm2Internet",function(e){CR__DisableSendFilm2Internet.call(e)}),Cr._proxy.registeredCallback("Free",function(e){CR__Free.call(e)}),Cr._proxy.registeredCallback("notifyAllowVideoWall",function(e){CR__NotifyAllowVideoWall.call(e)}),Cr._proxy.registeredCallback("startVideoByManager",function(e){CR__StartVideoByManager.call(e)}),Cr._proxy.registeredCallback("notifyEnableVideo",function(e){CR__NotifyEnableVideo.call(e)}),Cr._proxy.registeredCallback("updateFocusWindow",function(e){CR__UpdateFocusWindow.call(e)}),Cr._proxy.registeredCallback("updateVLayout",function(e){CR__UpdateVLayout.call(e)}),Cr._proxy.registeredCallback("updateVLayout2",function(e){CR__UpdateVLayout2.call(e)}),Cr._proxy.registeredCallback("updateMainVideoShowMode",function(e){CR__UpdateMainVideoShowMode.call(e)}),Cr._proxy.registeredCallback("updateVideoListMode",function(e){CR__UpdateVideoListMode.call(e)}),Cr._proxy.registeredCallback("enableUpload",function(e){CR__EnableUpload.call(e)}),Cr._proxy.registeredCallback("enableUpload2",function(e){CR__EnableUpload2.call(e)}),Cr._proxy.registeredCallback("generateIFrame",function(e){CR__GenerateIFrame.call(e)}),Cr._proxy.registeredCallback("notifyRefuseOpenVideo",function(e){CR__NotifyRefuseOpenVideo.call(e)}),Cr._proxy.registeredCallback("getVideoSetting",function(e){CR__GetVideoSetting.call(e)}),Cr._proxy.registeredCallback("setCamera",function(e){CR__SetCamera.call(e)}),Cr._proxy.registeredCallback("setCameraById",function(e){CR__SetCameraById.call(e)}),Cr._proxy.registeredCallback("notifyVideoPolling",function(e){CR__NotifyVideoPolling.call(e)}),Cr._proxy.registeredCallback("notifyPollingVideo",function(e){CR__NotifyPollingVideo.call(e)}),Cr._proxy.registeredCallback("notifyVideoList",function(e){CR__NotifyVideoList.call(e)}),Cr._proxy.registeredCallback("notifyStartAdjustDirection",function(e){CR__NotifyStartAdjustDirection.call(e)}),Cr._proxy.registeredCallback("notifyStartAdjustZoom",function(e){CR__NotifyStartAdjustZoom.call(e)}),Cr._proxy.registeredCallback("notifyStopAdjustDirection",function(e){CR__NotifyStopAdjustDirection.call(e)}),Cr._proxy.registeredCallback("notifyStopAdjustZoom",function(e){CR__NotifyStopAdjustZoom.call(e)}),Cr._proxy.registeredCallback("notifyCtrlReqState",function(e){var t=e[0],n=e[1];CR__NotifyCtrlReqState.call(t,n)}),Cr._proxy.registeredCallback("notifyRequestCtrlRight",function(e){}),Cr._proxy.registeredCallback("notifyCancelCtrlReq",function(e){}),Cr._proxy.registeredCallback("notifyRejectCtrlReq",function(e){}),Cr._proxy.registeredCallback("notifyGiveCtrlRight",function(e){}),Cr._proxy.registeredCallback("notifyReleaseCtrlRight",function(e){}),Cr._proxy.registeredCallback("notifyCtrlMsg",function(e){}),Cr._proxy.registeredCallback("notifyTmpSetRemoteCtrlState",function(e){}),Cr._proxy.registeredCallback("notifyRequestMarked",function(e){}),Cr._proxy.registeredCallback("notifyCancelMarkedReq",function(e){}),Cr._proxy.registeredCallback("notifyStartMarked",function(e){}),Cr._proxy.registeredCallback("notifyStopMarked",function(e){}),Cr._proxy.registeredCallback("notifyEnableOtherMarked",function(e){}),Cr._proxy.registeredCallback("notifyScMakeIFrame",function(e){}),Cr._proxy.registeredCallback("notifyMarkData",function(e){}),Cr._proxy.registeredCallback("notifyClearAllMarks",function(e){}),Cr._proxy.registeredCallback("notifyIndicator",function(e){}),Cr._proxy.registeredCallback("notifySetContainerSize",function(e){CR__NotifySetContainerSize.call(e)}),Cr._proxy.registeredCallback("notifyCreate",function(e){CR__NotifyCreate.call(e)}),Cr._proxy.registeredCallback("notifyImportPage",function(e){CR__NotifyImportPage.call(e)}),Cr._proxy.registeredCallback("notifyClose",function(e){CR__NotifyClose.call(e)}),Cr._proxy.registeredCallback("notifyChangeName",function(e){CR__NotifyChangeName.call(e)}),Cr._proxy.registeredCallback("notifyChangeScale",function(e){CR__NotifyChangeScale.call(e)}),Cr._proxy.registeredCallback("notifyChangeRotate",function(e){CR__NotifyChangeRotate.call(e)}),Cr._proxy.registeredCallback("notifySetCurrentPage",function(e){CR__NotifySetCurrentPage.call(e)}),Cr._proxy.registeredCallback("notifyShowThumPage",function(e){CR__NotifyShowThumPage.call(e)}),Cr._proxy.registeredCallback("notifyAddElement",function(e){CR__NotifyAddElement.call(e)}),Cr._proxy.registeredCallback("notifyAddElementEx",function(e){CR__NotifyAddElementEx.call(e)}),Cr._proxy.registeredCallback("notifyMoveElement",function(e){CR__NotifyMoveElement.call(e)}),Cr._proxy.registeredCallback("notifyModifyElement",function(e){CR__NotifyModifyElement.call(e)}),Cr._proxy.registeredCallback("notifyDelElement",function(e){CR__NotifyDelElement.call(e)}),Cr._proxy.registeredCallback("notifySetElementZPos",function(e){CR__NotifySetElementZPos.call(e)}),Cr._proxy.registeredCallback("notifySetIndicator",function(e){CR__NotifySetIndicator.call(e)}),Cr._proxy.registeredCallback("notifySetHotspot",function(e){CR__NotifySetHotspot.call(e)}),Cr._proxy.registeredCallback("notifySetMarkTerms",function(e){CR__NotifySetMarkTerms.call(e)}),CR_InitRslt.call([e,t])})}catch(e){Cr.Utils.log(e),CR_InitRslt.call([CR_INNER_ERR,"sdk内部错误"])}}function CR__UnInit(){try{Cr.communicator&&Cr.communicator.shutdown(),Cr.communicator=null,Cr._connection&&Cr._connection.destroy(0),Cr._connection=null,Cr._adapter&&Cr._adapter.destroy(),Cr._adapter=null,Cr._routerPrx&&Cr._routerPrx.destroySession(),Cr._routerPrx=null}catch(e){return CR_INNER_ERR}}function CR__Login(e,t,n,i,r){Cr._proxy._loinging||Cr._proxy.login(e,t,n,i,r).then(function(e,t,n){console.crlog("[MEET] loginRslt: ".concat(e)),0==e&&"flash"==Cr._proxy._type?CR__LoginRslt.call([e,t,new Cr.MeetInfo(n)]):CR__LoginRslt.call([e,t,n])})}function CR__RefreshSession(n){Cr._proxy&&Cr._proxy.refreshSession().then(function(e,t){CR__RefreshSessionRslt.call([e,t,n])})}function CR__KeepAlive(e,n){void 0===e&&(e=0),Cr._proxy&&Cr._proxy.keepAlive(e).then(function(e,t){CR__KeepAliveRslt.call([e,t,n])})}function CR__Exit(e){void 0===e&&(e=""),Cr._proxy&&Cr._proxy.exit(e).then(function(e,t){CR__ExitRslt.call([e,t])})}function CR__GetActiveMembers(){Cr._proxy.getActiveMembers().then(function(e,t,n){0==e?CR__GetActiveMembersRslt.call([e,t,n]):CR__GetActiveMembersRslt.call([e,t])})}function CR__EndConference(){Cr._proxy.endConference().then(function(e,t){CR__EndConferenceRslt.call([e,t])})}function CR__SendIMMsg(e,t,n,i,r,o,c){Cr._proxy.SendIMMsg(e,t,n,i,r).then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCIMMsg.ICECallback).sendIMMsgRslt.apply(e,n.concat([c]))})}function CR__GetIMMsgCount(){Cr._proxy.getIMMsgCount().then(function(e,t,n){0==e?CR__GetIMMsgCountRslt.call([e,t,n]):CR__GetIMMsgCountRslt.call([e,t])})}function CR__GetLastMsg(e){Cr._proxy.getLastMsg(e).then(function(e,t,n){0==e?CR__GetLastMsgRslt.call([e,t,n]):CR__GetLastMsgRslt.call([e,t])})}function CR__GetLastNMsg(e,t){Cr._proxy.getLastNMsg(e,t).then(function(e,t,n){0==e?CR__GetLastNMsgRslt.call([e,t,n]):CR__GetLastNMsgRslt.call([e,t])})}function CR__GetBroadCastUrl(){Cr._proxy.getBroadCastUrl().then(function(e,t,n){0==e?CR__GetBroadCastUrlRslt.call([e,t,n]):CR__GetBroadCastUrlRslt.call([e,t])})}function CR__AskQues(e,t,n,i,r,o){Cr._proxy.askQues(e,t,n,i,r,o).then(function(e,t,n){0==e?CR__AskQuesRslt.call([e,t,n]):CR__AskQuesRslt.call([e,t])})}function CR__GetQuesList(){Cr._proxy.getQuesList().then(function(e,t,n){0==e?CR__GetQuesListRslt.call([e,t,n]):CR__GetQuesListRslt.call([e,t])})}function CR__GetLuckyDrawCfg(){Cr._proxy.getLuckyDrawCfg().then(function(e,t,n){0==e?CR__GetLuckyDrawCfgRslt.call([e,t,n]):CR__GetLuckyDrawCfgRslt.call([e,t])})}function CR__JoinLuckyDrawMembers(e,t){Cr._proxy.joinLuckyDrawMembers(e,t).then(function(e,t){CR__JoinLuckyDrawMembersRslt.call([e,t])})}function CR__StartSvrRecord(e){Cr._proxy.startSvrRecord(e).then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCRecord.ICECallback.startSvrRecordRslt).call.apply(e,[CRRTCRecord].concat(n))})}function CR__UpdateSvrRecCfg(e){Cr._proxy.updateSvrRecCfg(e).then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCRecord.ICECallback.updateSvrRecCfgRslt).call.apply(e,[CRRTCRecord].concat(n))})}function CR__StopSvrRecord(){Cr._proxy.stopSvrRecord().then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCRecord.ICECallback.stopSvrRecordRslt).call.apply(e,[CRRTCRecord].concat(n))})}function CR__TerminalMsg(e,t,n,i,r){Cr._proxy.terminalMsg(e,t,n,i).then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCTermMsg.ICECallback).terminalMsgRslt.apply(e,n.concat([r]))})}function CR__AllowVideoWall(e){Cr._proxy.allowVideoWall(e).then(function(e,t){CR__AllowVideoWallRslt.call([e,t])})}function CR__StartVideoEx(e){Cr._proxy.startVideoEx(e).then(function(e,t){CR__StartVideoExRslt.call([e,t])})}function CR__EnableVideo(e){Cr._proxy.enableVideo(e).then(function(e,t){CR__EnableVideoRslt.call([e,t])})}function CR__SetFocusWindow(e,t){Cr._proxy.setFocusWindow(e,t).then(function(e,t){CR__SetFocusWindowRslt.call([e,t])})}function CR__BatchSubscribeVideo(e,t){Cr._proxy.batchSubscribeVideo(e,t).then(function(e,t){CR__BatchSubscribeVideoRslt.call([e,t])})}function CR__SubscribeFocusWindow(e){Cr._proxy.subscribeFocusWindow(e).then(function(e,t){CR__SubscribeFocusWindowRslt.call([e,t])})}function CR__SubscribeFocusWindow2(e){Cr._proxy.subscribeFocusWindow2(e).then(function(e,t){CR__SubscribeFocusWindow2Rslt.call([e,t])})}function CR__SetVLayout(e){Cr._proxy.setVLayout(e).then(function(e,t){CR__SetVLayoutRslt.call([e,t])})}function CR__SetMainVideoShowMode(e){Cr._proxy.setMainVideoShowMode(e).then(function(e,t){CR__SetMainVideoShowModeRslt.call([e,t])})}function CR__SetVideoListMode(e){Cr._proxy.setVideoListMode(e).then(function(e,t){CR__SetVideoListModeRslt.call([e,t])})}function CR__RefuseOpenVideo(e){Cr._proxy.refuseOpenVideo(e).then(function(e,t){CR__RefuseOpenVideoRslt.call([e,t])})}function CR__GetVideoSetting(e){Cr._proxy.getVideoSetting(e).then(function(e,t){CR__GetVideoSettingRslt.call([e,t])})}function CR__SetCamera(e,t){Cr._proxy.setCamera(e,t).then(function(e,t){CR__SetCameraRslt.call([e,t])})}function CR__SetCameraById(e){Cr._proxy.setCameraById(e).then(function(e,t){CR__SetCameraByIdRslt.call([e,t])})}function CR__SetVideoPolling(e,t){Cr._proxy.setVideoPolling(e,t).then(function(e,t){CR__SetVideoPollingRslt.call([e,t])})}function CR__UpdatePollingVideo(e){Cr._proxy.updatePollingVideo(e).then(function(e,t){CR__UpdatePollingVideoRslt.call([e,t])})}function CR__UpdateVideoList(e){Cr._proxy.updateVideoList(e).then(function(e,t){CR__UpdateVideoListRslt.call([e,t])})}function CR__GetVideoPollingState(e,t){Cr._proxy.getVideoPollingState(e,t).then(function(e,t){CR__GetVideoPollingStateRslt.call([e,t])})}function CR__StartAdjustDirection(e,t){Cr._proxy.startAdjustDirection(e,t).then(function(e,t){CR__StartAdjustDirectionRslt.call([e,t])})}function CR__StartAdjustZoom(e,t){Cr._proxy.startAdjustZoom(e,t).then(function(e,t){CR__StartAdjustZoomRslt.call([e,t])})}function CR__StopAdjustDirection(e){Cr._proxy.stopAdjustDirection(e).then(function(e,t){CR__StopAdjustDirectionRslt.call([e,t])})}function CR__StopAdjustZoom(e){Cr._proxy.stopAdjustZoom(e).then(function(e,t){CR__StopAdjustZoomRslt.call([e,t])})}function CR__VideoResolutionReport(e,t,n){Cr._proxy.VideoResolutionReport(e,t,n).then(function(e,t){CR__VideoResolutionReportRslt.call([e,t])})}function CR__SetAudioDeviceStatus(e){Cr._proxy.setAudioDeviceStatus(e).then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCAudio.ICECallback.setAudioDeviceStatusRslt).call.apply(e,[CRRTCAudio].concat(n))})}function CR__AskForMic(){Cr._proxy.askForMic().then(function(e,t){CR__AskForMicRslt.call([e,t])})}function CR__OpenMicEx(e){Cr._proxy.openMicEx(e).then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCAudio.ICECallback.openMicExRslt).call.apply(e,[CRRTCAudio].concat(n))})}function CR__CloseMicEx(e){Cr._proxy.closeMicEx(e).then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCAudio.ICECallback.closeMicExRslt).call.apply(e,[CRRTCAudio].concat(n))})}function CR__CloseAll(){Cr._proxy.closeAll().then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCAudio.ICECallback.closeAllRslt).call.apply(e,[CRRTCAudio].concat(n))})}function CR__SetVoiceEnergy(e){Cr._proxy.setVoiceEnergy(e).then(function(e,t){CR__SetVoiceEnergyRslt.call([e,t])})}function CR__PstnSwitchMicStatus(){Cr._proxy.pstnSwitchMicStatus().then(function(e,t){CR__PstnSwitchMicStatusRslt.call([e,t])})}function CR__StartRecord(){Cr._proxy.startRecord().then(function(e,t){CR__StartRecordRslt.call([e,t])})}function CR__IsRecording(){Cr._proxy.isRecording().then(function(e,t){CR__IsRecordingRslt.call([e,t])})}function CR__StopRecord(){Cr._proxy.isRecording().then(function(e,t){CR__StopRecordRslt.call([e,t])})}function CR__PlayApplause(){Cr._proxy.playApplause().then(function(e,t){CR__PlayApplauseRslt.call([e,t])})}function CR__GetMusicList(){Cr._proxy.getMusicList().then(function(e,t){CR__GetMusicListRslt.call([e,t])})}function CR__GetPlayBGMusic(){Cr._proxy.getPlayBGMusic().then(function(e,t){CR__GetPlayBGMusicRslt.call([e,t])})}function CR__StartBGMusic(e,t){Cr._proxy.startBGMusic(e,t).then(function(e,t){CR__StartBGMusicRslt.call([e,t])})}function CR__StopPlayBGMusic(){Cr._proxy.stopPlayBGMusic().then(function(e,t){CR__StopPlayBGMusicRslt.call([e,t])})}function CR__SetPlayBGMusicVolumn(e){Cr._proxy.setPlayBGMusicVolumn(e).then(function(e,t){CR__SetPlayBGMusicVolumnRslt.call([e,t])})}function CR__GetPlayBGMusicVolumn(){Cr._proxy.getPlayBGMusicVolumn().then(function(e,t){CR__GetPlayBGMusicVolumnRslt.call([e,t])})}function CR__VoiceHowling(e){Cr._proxy.voiceHowling(e).then(function(e,t){CR__VoiceHowlingRslt.call([e,t])})}function CR__VoiceNoise(e){Cr._proxy.voiceNoise(e).then(function(e,t){CR__VoiceNoiseRslt.call([e,t])})}function CR__RemoteAudioSet(e,t){Cr._proxy.remoteAudioSet(e,t).then(function(e,t){CR__RemoteAudioSetRslt.call([e,t])})}function CR__GetRemoteAudioInf(e){Cr._proxy.getRemoteAudioInf(e).then(function(e,t){CR__GetRemoteAudioInfRslt.call([e,t])})}function CR__SetContainerSize(e,t){Cr._proxy.setContainerSize(e,t).then(function(e,t){CR__SetContainerSizeRslt.call([e,t])})}function CR__Create(e){Cr._proxy.create(e).then(function(e,t){CR__CreateRslt.call([e,t])})}function CR__ImportPage(e,t){Cr._proxy.importPage(e,t).then(function(e,t){CR__ImportPageRslt.call([e,t])})}function CR__Close(e){Cr._proxy.close(e).then(function(e,t){CR__CloseRslt.call([e,t])})}function CR__ChangeName(e,t){Cr._proxy.changeName(e,t).then(function(e,t){CR__ChangeNameRslt.call([e,t])})}function CR__ChangeScale(e,t){Cr._proxy.changeScale(e,t).then(function(e,t){CR__ChangeScaleRslt.call([e,t])})}function CR__ChangeRatote(e,t){Cr._proxy.changeRatote(e,t).then(function(e,t){CR__ChangeRatoteRslt.call([e,t])})}function CR__SetCurrentPage(e,t,n,i){Cr._proxy.setCurrentPage(e,t,n,i).then(function(e,t){CR__SetCurrentPageRslt.call([e,t])})}function CR__ShowThumPage(e,t){Cr._proxy.showThumPage(e,t).then(function(e,t){CR__ShowThumPageRslt.call([e,t])})}function CR__AddElement(e,t,n){Cr._proxy.addElement(e,t,n).then(function(e,t){CR__AddElementRslt.call([e,t])})}function CR__AddElementEx(e,t,n){Cr._proxy.addElementEx(e,t,n).then(function(e,t){CR__AddElementExRslt.call([e,t])})}function CR__MoveElement(e,t,n){Cr._proxy.moveElement(e,t,n).then(function(e,t){CR__MoveElementRslt.call([e,t])})}function CR__ModifyElement(e,t,n){Cr._proxy.modifyElement(e,t,n).then(function(e,t){CR__ModifyElementRslt.call([e,t])})}function CR__DelElement(e,t,n){Cr._proxy.delElement(e,t,n).then(function(e,t){CR__DelElementRslt.call([e,t])})}function CR__SetElementZPos(e,t,n){Cr._proxy.setElementZPos(e,t,n).then(function(e,t){CR__SetElementZPosRslt.call([e,t])})}function CR__SetIndicator(e,t){Cr._proxy.setIndicator(e,t).then(function(e,t){CR__SetIndicatorRslt.call([e,t])})}function CR__SetHotspot(e,t,n,i){Cr._proxy.setHotspot(e,t,n,i).then(function(e,t){CR__SetHotspotRslt.call([e,t])})}function CR__QueryIndicator(e){Cr._proxy.queryIndicator(e).then(function(e,t,n){0==e?CR__QueryIndicatorRslt.call([e,t,n]):CR__QueryIndicatorRslt.call([e,t])})}function CR__QueryAllBoardList(){Cr._proxy.queryAllBoardList().then(function(e,t,n){0==e?CR__QueryAllBoardListRslt.call([e,t,n]):CR__QueryAllBoardListRslt.call([e,t])})}function CR__QueryElementByIDs(e,t){Cr._proxy.queryElementByIDs(e,t).then(function(e,t,n){0==e?CR__QueryElementByIDsRslt.call([e,t,n]):CR__QueryElementByIDsRslt.call([e,t])})}function CR__QueryPageElementByIDs(e,t,n){Cr._proxy.queryPageElementByIDs(e,t,n).then(function(e,t,n){0==e?CR__QueryPageElementByIDsRslt.call([e,t,n]):CR__QueryPageElementByIDsRslt.call([e,t])})}function CR__SetMarkTerms(e,t,n){Cr._proxy.setMarkTerms(e,t,n).then(function(e,t){CR__SetMarkTermsRslt.call([e,t])})}function CR__Kickout(e){Cr._proxy.kickout(e).then(function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=CRRTCMember.ICECallback.kickoutRslt).call.apply(e,[CRRTCMember].concat(n))})}function CR__ChangeNickname(e,t){Cr._proxy.changeNickname(e,t).then(function(){var e;(e=CRRTCMember.ICECallback).changeNicknameRslt.apply(e,arguments)})}Cr.LHProxy=function(e){this.__config=e,!this.__config||"ws"!=this.__config.protocol&&"wss"!=this.__config.protocol?this._protocol="wss":this._protocol=this.__config.protocol,this._type="html5",this._logining=!1,Cr.__init=!0},Cr.LHProxy.prototype.init=function(){var e=new Cr.AsyncResult;CR_NOERR;return this.callbackDict={},this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),this._initData.properties.setProperty("Ice.ThreadPool.Client.Serialize","1"),this._initData.properties.setProperty("Ice.ThreadPool.Server.Serialize","1"),e.complete([CR_NOERR,""]),e},Cr.LHProxy.prototype.registeredCallback=function(e,t){if(this.callbackDict[e])throw"已经存在的注册对象";this.callbackDict[e]=t},Cr.LHProxy.prototype.unregisterCallback=function(e,t){this.callbackDict[e]=null,delete this.callbackDict[e]},Cr.LHProxy.prototype.callCallback=function(e,t){var n=this.callbackDict[e];if(n&&"function"==typeof n)try{n.call(null,t)}catch(e){console.crlog("[SDK][Error] ".concat(e)),console.error(e)}},Cr.LHProxy.prototype.initCon=function(){try{this._communicator&&(this._communicator.destroy(),this._communicator=null),this._connection&&(this._connection.destroy(0),this._connection=null),this._adapter&&(this._adapter.destroy(),this._adapter=null),this._routerPrx&&(this._routerPrx.destroySession(),this._routerPrx=null)}catch(e){console.crlog("[RTC] ice Init fail.!")}},Cr.LHProxy.prototype.login=function(e,M,D,x,A){var s=this,l=function(P,s){console.crlog("[Access] Connect to access server: ".concat(P.acssvr[0],", isResmAccess: ").concat(s||!1)),CRVideo.accessSvr=P.acssvr[1],CRVideo.accessNo=P.acssvr[0],this._routerPrx=P.routerPrx,console.crlog("[Resm] this._routerPrx createSession()"),this._routerPrx.createSession("N"+Cr.crmt.MEET[0],"").then(function(e){return this._session=e,console.crlog("[Resm] this._routerPrx.getCategoryForClient()"),this._routerPrx.getCategoryForClient()}.bind(this)).then(function(e){var i=this;if(this._category=e,console.crlog("[Resm] this._communicator.setDefaultRouter(this._routerPrx)"),this._communicator.setDefaultRouter(this._routerPrx),s)return console.crlog('[Resm] _communicator.createObjectAdapterWithRouter("CallbackAdapter", "this._routerPrx")'),this._communicator.createObjectAdapterWithRouter("CallbackAdapter",this._routerPrx);console.crlog("[Resm] Resm.AccessMPrx uncheckedCast...");var t=Resm.AccessMPrx.uncheckedCast(this._communicator.stringToProxy("d0/AccessM")),n=Cr.crmt.DOMAIN,r=Cr.crmt.MEET[0],o=Cr.crmt.MYPUBIP,c=Ice.generateUUID(),a=new Resm.NetworkResult;return CRVideo.availableSvrs.forEach(function(e){var t=new Resm.NetworkStatus;t.latency=Math.floor(e.delay/4),t.lostRate=0,a.set(e.acssvr[0],t)}),console.crlog("[Resm] NetworkResult: ".concat(JSON.stringify(a))),console.crlog("[Resm] Resm locate".concat(JSON.stringify({domain:n,confID:r,publicIP:o,uuid:c}))),t.locate(n,r,a,o,c).then(function(t){if(console.crlog("[Resm] Got resm accessNo: ".concat(t)),+t==+CRVideo.bestNetworkAccessSvr.acssvr[0])return console.crlog('[Resm] _communicator.createObjectAdapterWithRouter("CallbackAdapter", "this._routerPrx")'),i._communicator.createObjectAdapterWithRouter("CallbackAdapter",i._routerPrx);var n=!1;return CRVideo.availableSvrs.forEach(function(e){if(e.acssvr[0]==t)return l(e,n=!0),!1}),n?void 0:(l(CRVideo.bestNetworkAccessSvr,!0),!1)}).exception(function(e){return console.crlog("[Resm] Resm locate fail!"),console.crlog(e),this._communicator.createObjectAdapterWithRouter("CallbackAdapter",this._routerPrx)}.bind(this))}.bind(this)).then(function(e){if(!e)return!1;this._adapter=e;var t="c"+Cr.crmt.MEET[0]+"/ConferenceRoom  @ c"+Cr.crmt.MEET[0]+"-ReplicaConfCtrlAdapters",n=Conference.ConferenceRoomPrx.uncheckedCast(this._communicator.stringToProxy(t)),i=new Conference.LoginRequest;i.confId=Cr.crmt.MEET[0],i.confKey=Cr.crmt.MEET[1],i.termId=M||0,D?(i.memberId=D.id,i.memberType=D.type,i.nickname=D.nickname,i.priv_dat=D.userId):(i.memberId=Cr.crmt.ACNT[0],i.memberType=Cr.crmt.ACNT[1],i.nickname=Cr.crmt.ACNT[3]),i.accessNo=P.acssvr[0],i.callbacks=new Ice.HashMap,i.extProperty=new Ice.HashMap,i.extProperty.set(Conference.CLINET_PCID,x);var r=CRVideo.sdkver.split(".");(1<r[0]||7<r[1])&&i.extProperty.set("h5sdk_ver",CRVideo.sdkver),D?i.extProperty.set(Conference.CLIETN_PRIV_DAT,D.userId):i.extProperty.set(Conference.CLIETN_PRIV_DAT,Cr.crmt.ACNT[3]);var o=/macintosh|mac os x/i.test(navigator.userAgent),c=/windows|win32/i.test(navigator.userAgent),a=/linux/i.test(navigator.userAgent),s=-1<navigator.userAgent.indexOf("Android")||-1<navigator.userAgent.indexOf("Adr"),l="";!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?l=Conference.PLATFORMTYPE_IOS:o?l=Conference.PLATFORMTYPE_MAC:c?l=Conference.PLATFORMTYPE_WIN32:s?l=Conference.PLATFORMTYPE_ANDROID:a&&(l=Conference.PLATFORMTYPE_LINUX);var d=Conference.DEVICETYPE_WEBRTC;i.extProperty.set(Conference.CLINET_PLATFORM,l),i.extProperty.set(Conference.CLINET_BROWSER_INFO,CRBrowser.curBrowserCfg.platform),i.extProperty.set(Conference.CLINET_OPENID,A),i.extProperty.set(Conference.CLINET_WEBRTC_CODECS,window.rtc_codecs),i.extProperty.set(Conference.CLINET_DEVICETYPE,d);var u=new Ice.Identity;u.name="ConferenceCallback",u.category=this._category,this._conferenceReceptor=new ConferenceReceptor,this._conferenceReceptor.setProxy(this),this._adapter.add(this._conferenceReceptor,u);var f=Conference.ConferenceCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(u));i.callbacks.set("ConferenceCallback",f);var h=new Ice.Identity;h.name="IMCallback",h.category=this._category,this._chatReceptor=new ChatReceptor,this._chatReceptor.setProxy(this),this._adapter.add(this._chatReceptor,h);var p=Conference.IMCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(h));i.callbacks.set("IMCallback",p);var _=new Ice.Identity;_.name="AnsQueCallback",_.category=this._category,this._ansQueReceptor=new AnsQueReceptor,this._ansQueReceptor.setProxy(this),this._adapter.add(this._ansQueReceptor,_);var C=Conference.AnsQueCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(_));i.callbacks.set("AnsQueCallback",C);var g=new Ice.Identity;g.name="VideoCallback",g.category=this._category,this._videoReceptor=new VideoReceptor,this._videoReceptor.setProxy(this),this._adapter.add(this._videoReceptor,g);var R=Conference.VideoCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(g));i.callbacks.set("VideoCallback",R);var m=new Ice.Identity;m.name="AudioCallback",m.category=this._category,this._audioReceptor=new AudioReceptor,this._audioReceptor.setProxy(this),this._adapter.add(this._audioReceptor,m);var I=Conference.AudioCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(m));i.callbacks.set("AudioCallback",I);var y=new Ice.Identity;y.name="MS.MSClient",y.category=this._category,this._mSClientI=new MSClientI,this._mSClientI.setProxy(this),this._adapter.add(this._mSClientI,y);var v=MS.MSClientPrx.uncheckedCast(this._adapter.createDirectProxy(y));i.callbacks.set("MS.MSClient",v);var S=new Ice.Identity;S.name="ScreenShareClient",S.category=this._category,this._screenShareReceptor=new ScreenShareReceptor,this._screenShareReceptor.setProxy(this),this._adapter.add(this._screenShareReceptor,S);var E=Conference.ScreenShareClientPrx.uncheckedCast(this._adapter.createDirectProxy(S));i.callbacks.set("ScreenShareClient",E);var b=new Ice.Identity;b.name="MediaCallback",b.category=this._category,this._mediaReceptor=new MediaReceptor,this._mediaReceptor.setProxy(this),this._adapter.add(this._mediaReceptor,b);var w=Conference.MediaCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(b));i.callbacks.set("MediaCallback",w);var T=new Ice.Identity;T.name="WhiteBoardCallback",T.category=this._category,this._whiteBoardReceptor=new WhiteBoardReceptor,this._whiteBoardReceptor.setProxy(this),this._adapter.add(this._whiteBoardReceptor,T);var O=Conference.WhiteBoardCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(T));return i.callbacks.set("WhiteBoardCallback",O),n.login(i)}.bind(this)).then(function(e){if(e){var t={};t.termId=e.termId,t.activeMembers=e.activeMembers,t.myDetail=e.myDetail,t.serverTime=1e3*e.ServerUTCTime-(new Date).getTime(),t.isBegan=e.isBegan,t.countdown=e.countdown,t.mainVideoTermID=e.mainVideoTermID,t.wbDescibes=e.wbDescibes,t.ServerUTCTime=e.ServerUTCTime,t.bAllowWall=e.bAllowWall,t.bFull=e.bFull,t.bRoomLocked=e.bRoomLocked,t.curMainTab=e.curMainTab,t.option=e.option,t.lastElemValue=e.lastElemValue,t.lastTabValue=e.lastTabValue;for(var n=e.confInfo.keys(),i={},r=0;r<n.length;r++)i[n[r]]=e.confInfo.get(n[r]);for(var o in t.confInfo=i,t.activeMembers){var c=t.activeMembers[o];Cr.parseMemberInfo(c),c.termId==t.termId&&(t.nickname=c.nickname,t.userId=c.userId,t.bindId=c.bindId,t.openedCamIDs=c.openedCamIDs)}this._conferenceRequest=Conference.ConferenceSessionPrx.uncheckedCast(e.modules.get("ConferenceSession")),this._chatRequest=Conference.IMSessionPrx.uncheckedCast(e.modules.get("IMSession")),this._ansQuesCtrl=Conference.AnsQuesCtrlPrx.uncheckedCast(e.modules.get("AnsQuesCtrl")),this._videoCtrl=Conference.VideoCtrlPrx.uncheckedCast(e.modules.get("VideoCtrl")),this._audioCtrl=Conference.AudioCtrlPrx.uncheckedCast(e.modules.get("AudioCtrl")),this._clientReport=MS.ClientReportPrx.uncheckedCast(e.modules.get("MS.ClientReport")),this._screenShareCtrl=Conference.ScreenShareCtrlPrx.uncheckedCast(e.modules.get("ScreenShareCtrl")),this._mediaCtrl=Conference.MediaCtrlPrx.uncheckedCast(e.modules.get("MediaCtrl")),this._whiteBoardCtrl=Conference.WhiteBoardCtrlPrx.uncheckedCast(e.modules.get("WhiteBoardCtrl")),this._logining=!1,window.loginConnection&&window.loginConnection.close(),window.loginConnection=null,CR__LoginRslt.call([CR_NOERR,"",new Cr.MeetInfo(t)]),console.crlog("[RTC] Access server login consuming: ".concat((new Date).getTime()-Cr.AccessLoginStartTime,"ms")),setTimeout(function(){console.crlog("[Resm] Finally using accessNo: ".concat(CRVideo.accessNo)),CRVideo.availableSvrs.forEach(function(t){+t.acssvr[0]!=+CRVideo.accessNo&&t.routerPrx.ice_getConnection().then(function(e){console.crlog("[Resm] Close access connection: ".concat(t.acssvr[0])),e.close()})})},5e3)}}.bind(this)).exception(function(e){var t=e.toString();if(console.crlog(t),e instanceof Conference.ConferencePrepareError||e instanceof Conference.ConferenceLoginRetry)return CRVideo.reEnterMeetTimes||(CRVideo.reEnterMeetTimes=1),void(CRVideo.reEnterMeetTimes<10?(console.crlog("[ICE] ReEnter meeting:".concat(CRVideo.reEnterMeetTimes)),CRVideo.reEnterMeetTimes++,CRVideo.loginWebMeeting()):o.complete([CR_INNER_ERR,e.toString()]));this._logining=!1,e instanceof Ice.SocketException?o.complete([CR_SOCKETEXCEPTION,"socket错误"]):e instanceof Conference.MemberAlreadyInCanTryVisitor||e instanceof Conference.MemberAlreadyInMeet?o.complete([CR_MEMBER_ALREADY_IN_MEET,"用户已存在"]):e instanceof Conference.MemberOverflowError||e instanceof Glacier2.CannotCreateSessionException?o.complete([CR_CONCURRENCY_OVER,"并发数超出"]):e instanceof Conference.ConferencePrepareError?o.complete([CR_MEET_IS_OPEN_ING,"会议正在启动中"]):e instanceof Conference.BalanceLessError?o.complete([805,"余额不足"]):e.id&&"ConferenceRoom"==e.id.name?o.complete([CR_MEETNOTEXIST,"房间不存在或已结束"]):o.complete([1,e.toString()])}.bind(this))}.bind(this),i=function(){Ice.Promise.try2(function(){this._communicator=Ice.initialize(this._initData),CRVideo.communicatorIc=this._communicator,c=Cr.crmt.ACSSVR,new Promise(function(i,t){var r;CRVideo.availableSvrs=[],c.forEach(function(e,t){var a,n;(a=e,n=t,console.crlog("[Resm] Ping 第 ".concat(n+1," 台服务器：").concat(JSON.stringify(a))),new Promise(function(n,t){var e=a[3];if(-1<e.indexOf("sig")){var i=parseInt(e.split("/sig/")[0]);e="/sig/"+e.split("/sig/")[1];var r="s"+a[0]+"/Access:"+s._protocol+" -r "+e+" -h "+a[1]+" -p "+i+" -t 5000";console.crlog("[RTC] StringToProxy: ".concat(r));var o=Glacier2.RouterPrx.uncheckedCast(s._communicator.stringToProxy(r))}else{i=parseInt(a[3])+4;var c="s"+a[0]+"/Access:"+s._protocol+" -h "+a[1]+" -p "+i+" -t 5000";console.crlog("[RTC] StringToProxy: ".concat(c)),o=Glacier2.RouterPrx.uncheckedCast(s._communicator.stringToProxy(c))}d=(new Date).getTime(),o.ice_ping().then(function(){var e=(new Date).getTime()-d,t=this._protocol+"://"+a[1]+":"+i;console.crlog("[RTC] Finish ping(".concat(a[1],") 耗时：").concat(e,"ms, report:").concat(Math.floor(e/4))),n({url:t,delay:e,routerPrx:o,acssvr:a})}.bind(s)).exception(function(e){console.crlog("[RTC] Finish ping(".concat(a[1],") Bad Network!")),t({url:url,delay:-1,acssvr:a})}.bind(s))})).then(function(e){CRVideo.availableSvrs.push(e),CRVideo.availableSvrs.length==c.length&&(clearInterval(r),i(CRVideo.availableSvrs))})});var n=200;!function e(){r=setTimeout(function(){0<CRVideo.availableSvrs.length?i(CRVideo.availableSvrs):n<=15e3?(n+=200,clearTimeout(r),e()):t()},200)}()}).then(function(e){e.forEach(function(e){CRVideo.bestNetworkAccessSvr||-1==e.delay?CRVideo.bestNetworkAccessSvr.delay>e.delay&&-1!=e.delay&&(CRVideo.bestNetworkAccessSvr=e):CRVideo.bestNetworkAccessSvr=e}),CRVideo.bestNetworkAccessSvr?l(CRVideo.bestNetworkAccessSvr):(console.crlog("Login to access fail, have not available access server!"),o.complete([CR_NOTAVAILABLESERVER,"没有可用服务器"]))}).catch(function(){console.crlog("Login to access fail, have not available access server!"),o.complete([CR_NOTAVAILABLESERVER,"没有可用服务器"])})}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),this._logining=!1,o.complete([CR_UNKNOWERR,"未知错误"])}.bind(this))}.bind(this),r=function(e){Cr.crmt={};var t=atob(e.substr(5)).split("\n");for(var n in t){var i=t[n].match(/-(\w+?)=(\S+)/);null!=i&&3==i.length&&(Cr.crmt[i[1]]=i[2],console.crlog("[RTC] parseCrmt: ".concat(n,":").concat(i[1]," ").concat(i[2])))}for(var r=Cr.crmt.ACNT.split(";"),o=r[3].match(/../g),c=new ArrayBuffer(o.length),a=new DataView(c),s=[],l=0;l<o.length;l++)a.setUint8(l,parseInt(o[l],16)),s[l]=a.getUint8(l);var d=Cr.Utils.utf8ByteToUnicodeStr(s);r[3]=d,Cr.crmt.ACNT=r,Cr.crmt.MEET=Cr.crmt.MEET.split(";"),1==CRVideo.isHttp&&(Cr.crmt.ACSSVR=Cr.crmt.ACSSVR.replace("50008:ali8.cloudroom.com:2698:443/sig/2063","50008:ali8.cloudroom.com:2698:80/sig/2063"));var u=Cr.crmt.ACSSVR.split(";"),f=[];for(l=0;l<u.length;l++)""!=u[l]&&f.push(u[l].split(":"));Cr.crmt.ACSSVR=f}.bind(this);console.crlog("[RTC] Access login begain...");var o=new Cr.AsyncResult,t=Cr.Utils.base64;try{this._logining=!0;var d=0,c=null;if(CRVideo.bestNetworkAccessSvr=null,Cr.AccessLoginStartTime=(new Date).getTime(),this.initCon(),Cr.crmt)Ice.Promise.try2(function(){i()}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),o.complete([CR_UNKNOWERR,"未知错误"])}.bind(this));else{var n=t.decode(e),a="".concat(CRVideo.protocol,"//").concat(CRVideo.webServerAddr,"/servlet/getWebrtcAccKey");n="".concat(n,"\r\n-PRODUCT=win32_net"),n="".concat(n,"\r\n-JSCLIENT=").concat(Conference.DEVICETYPE_WEBRTC);var u="crmt:"+t.encode(n).replace(/\r\n/g,"");Ice.Promise.try2(function(){var n=this;console.crlog("[Access] Web request:".concat(a,", data: crmt:******")),CRVideo.ajax({type:"POST",url:a,data:u,dataType:"text",success:function(e,t){"success"==t?-1!=e.indexOf("erro:")?(n._logining=!1,-1!=e.indexOf("erro:2")?o.complete([CR_MEETNOTEXIST,e]):o.complete([CR_INNER_ERR,e])):(r(e),i()):(n._logining=!1,o.complete([CR_NOSERVER_RSP,"服务器没有响应"]))},error:function(){CRVideo_EnterMeetingRslt.callback(202,CRVideo.enterMeetingCookie)}})}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),this._logining=!1,o.complete([CR_UNKNOWERR,"未知错误"])}.bind(this))}}catch(e){o.complete([CR_INNER_ERR,e.toString()])}return o},Cr.LHProxy.prototype.refreshSession=function(){var t=new Cr.AsyncResult;try{this._routerPrx.refreshSession().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.keepAlive=function(e){var t=new Cr.AsyncResult;try{statusDict=new Ice.HashMap,statusDict.set("w",e.toString()),this._conferenceRequest.keepAlive(statusDict).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.exit=function(e){var t=new Cr.AsyncResult;try{this._conferenceRequest.exit(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getActiveMembers=function(){var i=new Cr.AsyncResult;try{statusDict=new Ice.HashMap,this._conferenceRequest.getActiveMembers().then(function(e){for(var t in e){var n=e[t].extProperty.get(Conference.MINFO_OPENEDCAMIDS);null!=n&&(n=n.split(";")[0]),e[t].openedCamIDs=n}i.complete([CR_NOERR,"",e])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.endConference=function(){var t=new Cr.AsyncResult;try{statusDict=new Ice.HashMap,this._conferenceRequest.endConference().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.SendIMMsg=function(e,t,n,i,r){var o=new Cr.AsyncResult;try{var c=new Ice.Context;c._fwd="z";var a=new Conference.InIMMsgInfo;a.targetTermId=e,a.targetNickname=t,a.font=n,a.msg=Cr.Utils.html2chat(i),a.sendTime=r,this._chatRequest.sendIMMsg(a,c).then(function(){o.complete([CR_NOERR,""])}.bind(this)).exception(function(e){e instanceof Conference.ContainsSensitiveWords?o.complete([CR_CONTAINSSENSITIVEWORDS,"包含了敏感词"]):e instanceof Conference.NotPermitError?o.complete([CR_NOT_CHAT_PERMIT,"没有聊天权限"]):o.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){o.complete([CR_INNER_ERR,e.toString()])}return o},Cr.LHProxy.prototype.getIMMsgCount=function(){var t=new Cr.AsyncResult;try{this._chatRequest.getIMMsgCount().then(function(e){t.complete([CR_NOERR,"",e])}.bind(this)).exception(function(e){t.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getLastMsg=function(e){var a=new Cr.AsyncResult;try{var t=new Ice.Context;t._fwd="z",this._chatRequest.getLastMsg(e,t).then(function(e){var t=[];for(var n in e){var i=e[n],r=i.srcNickname.split("\0"),o=Cr.Utils.chat2html(i.inMsg.msg,i.inMsg.font.color,i.inMsg.font.size),c={type:o[0],index:i.index,msg:o[2],head:o[1],sendTime:i.inMsg.sendTime,targetNickname:i.inMsg.targetNickname,targetTermId:i.inMsg.targetTermId,srcNickname:r[0],srcTermId:i.srcTermId,ishost:1<r.length};t.push(new Cr.MsgInfo(c))}a.complete([CR_NOERR,"",t])}.bind(this)).exception(function(e){a.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){a.complete([CR_INNER_ERR,e.toString()])}return a},Cr.LHProxy.prototype.getLastNMsg=function(e,t){var a=new Cr.AsyncResult;try{var n=new Ice.Context;n._fwd="z",this._chatRequest.getLastNMsg(e,t,n).then(function(e){var t=[];for(var n in e){var i=e[n],r=i.srcNickname.split("\0"),o=Cr.Utils.chat2html(i.inMsg.msg,i.inMsg.font.color,i.inMsg.font.size),c={type:o[0],index:i.index,msg:o[2],head:o[1],sendTime:i.inMsg.sendTime,targetNickname:i.inMsg.targetNickname,targetTermId:i.inMsg.targetTermId,srcNickname:r[0],srcTermId:i.srcTermId,ishost:1<r.length};t.push(new Cr.MsgInfo(c))}a.complete([CR_NOERR,"",t]),Cr.Utils.log("[RTC] It takes time to get chat history:"+((new Date).getTime()-Cr.AccessLoginStartTime))}.bind(this)).exception(function(e){a.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){a.complete([CR_INNER_ERR,e.toString()])}return a},Cr.LHProxy.prototype.getBroadCastUrl=function(){var n=new Cr.AsyncResult;try{this._conferenceRequest.getBroadCastUrl().then(function(e){var t={rtmp:e.get(Conference.BOARDCAST_RTMP),hls:e.get(Conference.BOARDCAST_HLS)};n.complete([CR_NOERR,"",t])}).exception(function(e){n.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)})}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.askQues=function(e,t,n,i,r,o){var c=new Cr.AsyncResult;try{var a=new Conference.QuesAsk;a.typeID=e,a.asktime=t,a.termID=n,i&&""!=i&&(r='<headimg src="'+i+'"/>'+ +r),a.content=r,a.nickname=o,this._ansQuesCtrl.askQues(a).then(function(e){c.complete([CR_NOERR,"",e])}).exception(function(e){c.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)})}catch(e){c.complete([CR_INNER_ERR,e.toString()])}return c},Cr.LHProxy.prototype.getQuesList=function(){var i=new Cr.AsyncResult;try{this._ansQuesCtrl.getQuesList().then(function(e){for(var t in quesList=[],e){var n=e[t];quesList.push(new Cr.QuesInf(n))}i.complete([CR_NOERR,"",quesList])}).exception(function(e){i.complete([CR_UNKNOWERR,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)})}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.getLuckyDrawCfg=function(){var n=new Cr.AsyncResult;try{this._conferenceRequest.getLuckyDrawCfg().then(function(e){var t=e;n.complete([CR_NOERR,"",t])}).exception(function(e){n.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.joinLuckyDrawMembers=function(e,t){var n=new Cr.AsyncResult;try{this._conferenceRequest.joinLuckyDrawMembers(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.startSvrRecord=function(e){var t=new Cr.AsyncResult;try{this._conferenceRequest.startSvrRecord(e).then(function(){t.complete([CR_NOERR])}).exception(function(e){t.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.updateSvrRecCfg=function(e){var t=new Cr.AsyncResult;try{this._conferenceRequest.updateSvrRecCfg(e).then(function(){t.complete([CR_NOERR,""])}).exception(function(e){t.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.stopSvrRecord=function(){var t=new Cr.AsyncResult;try{this._conferenceRequest.stopSvrRecord().then(function(){t.complete([CR_NOERR,""])}).exception(function(e){t.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.terminalMsg=function(e,t,n,i){var r=new Cr.AsyncResult;try{this._conferenceRequest.terminalMsg(e,t,n,i).then(function(){r.complete([CR_NOERR,""])}).exception(function(e){r.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){r.complete([CR_INNER_ERR,e.toString()])}return r},Cr.LHProxy.prototype.allowVideoWall=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.allowVideoWall(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.enableVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.enableVideo(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setFocusWindow=function(e,t){var n=new Cr.AsyncResult,i=Conference.WINDOW_MODE[e];try{this._videoCtrl.setFocusWindow(i,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.batchSubscribeVideo=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.batchSubscribeVideo(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.subscribeFocusWindow=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.subscribeFocusWindow(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.subscribeFocusWindow2=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.subscribeFocusWindow2(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setVLayout=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setVLayout(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setMainVideoShowMode=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setMainVideoShowMode(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setVideoListMode=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setVideoListMode(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.refuseOpenVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.refuseOpenVideo(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getVideoSetting=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.getVideoSetting(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setCamera=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.setCamera(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.setCameraById=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setCameraById(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setVideoPolling=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.setVideoPolling(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.updatePollingVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.updatePollingVideo(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.updateVideoList=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.updateVideoList(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getVideoPollingState=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.getVideoPollingState(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.startAdjustDirection=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.startAdjustDirection(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.startAdjustZoom=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.startAdjustZoom(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.stopAdjustDirection=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.stopAdjustDirection(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.stopAdjustDirection=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.stopAdjustDirection(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.VideoResolutionReport=function(e,t,n){var i=new Cr.AsyncResult;try{this._clientReport.VideoResolutionReport(e,t,n).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.setAudioDeviceStatus=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setDeviceStatus(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.askForMic=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.askForMic().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.askForMic=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.askForMic().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.openMicEx=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.openMicEx(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.closeMicEx=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.closeMicEx(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.closeAll=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.closeAll().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setVoiceEnergy=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setVoiceEnergy(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.pstnSwitchMicStatus=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.pstnSwitchMicStatus().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.startRecord=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.startRecord().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.isRecording=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.isRecording().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.stopRecord=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.stopRecord().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.playApplause=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.playApplause().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getMusicList=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.getMusicList().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getPlayBGMusic=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusic().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.startBGMusic=function(e,t){var n=new Cr.AsyncResult;try{this._audioCtrl.startBGMusic(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.stopPlayBGMusic=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.stopPlayBGMusic().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setPlayBGMusicVolumn=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setPlayBGMusicVolumn(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.getPlayBGMusicVolumn=function(){var t=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusicVolumn().then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.voiceHowling=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceHowling(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.voiceNoise=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceNoise(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.remoteAudioSet=function(e,t){var n=new Cr.AsyncResult;try{this._audioCtrl.remoteAudioSet(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.getRemoteAudioInf=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.getRemoteAudioInf(e).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.setContainerSize=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.setContainerSize(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.create=function(e){var t=new Cr.AsyncResult;wID=e.wID,wType=e.wType,docType=e.docType,name=e.name,docName=e.docName,width=e.width,height=e.height,scaleType=e.scaleType,rotation=e.rotation,pageCount=e.pageCount,curPage=e.curPage,animID=e.animID,animFrames=e.animFrames,showThum=e.showThum,bAll=e.bAll,allowTerms=e.allowTerms;var n=new Conference.TabID(wID.termID,wID.localID),i=new Conference.WhiteBoardDescribe(n,wType,docType,name,docName,width,height,scaleType,rotation,pageCount,curPage,animID,animFrames,showThum,bAll,allowTerms);try{this._whiteBoardCtrl.create(i).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.importPage=function(e,t){for(var n=new Cr.AsyncResult,i=[],r=new Conference.TabID(e.termID,e.localID),o=0;o<t.length;o++){var c=t[o].pageNo,a=t[o].imgType,s=t[o].imgResourceID,l=t[o].elementList;i[o]=new Conference.PageData(c,a,s,l)}try{this._whiteBoardCtrl.importPage(r,i).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.close=function(e){var t=new Cr.AsyncResult,n=new Conference.TabID(e.termID,e.localID);try{this._whiteBoardCtrl.close(n).then(function(){t.complete([CR_NOERR,""])}.bind(this)).exception(function(e){t.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.changeName=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.changeName(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.changeScale=function(e,t){var n=new Cr.AsyncResult,i=new Conference.WB_SCALE_TYPE(t);try{this._whiteBoardCtrl.changeScale(e,i).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.changeRatote=function(e,t){var n=new Cr.AsyncResult,i=new Conference.WB_ROTATE_TYPE(t);try{this._whiteBoardCtrl.changeRatote(e,i).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.setCurrentPage=function(e,t,n,i){var r=new Cr.AsyncResult;try{this._whiteBoardCtrl.setCurrentPage(e,t,n,i).then(function(){r.complete([CR_NOERR,""])}.bind(this)).exception(function(e){r.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){r.complete([CR_INNER_ERR,e.toString()])}return r},Cr.LHProxy.prototype.showThumPage=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.showThumPage(e,t).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.addElement=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.ElementID(n.eID.ownerID,n.eID.ID),o=new Conference.ElementData(r,n.orderId,n.left,n.top,n.type,n.noused,n.data);try{this._whiteBoardCtrl.addElement(e,t,o).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.addElementEx=function(e,t,n){for(var i=new Cr.AsyncResult,r=[],o=0;o<n.length;o++){var c=new Conference.ElementID(n[o].eID.ownerID,n[o].eID.ID);r.push(new Conference.ElementData(c,element[o].orderId,element[o].left,element[o].top,element[o].type,element[o].noused,element[o].data))}try{this._whiteBoardCtrl.addElementEx(e,t,r).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.moveElement=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.ElementPos(n);try{this._whiteBoardCtrl.moveElement(e,t,r).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.modifyElement=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.ElementID(n.eID.ownerID,n.eID.ID),o=new Conference.ElementData(r,n.orderId,n.left,n.top,n.type,n.noused,n.data);try{this._whiteBoardCtrl.modifyElement(e,t,o).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.delElement=function(e,t,n){for(var i=new Cr.AsyncResult,r=[],o=0;o<n.length;o++)r.push(new Conference.ElementID(n[o].ownerID,n[o].ID));try{this._whiteBoardCtrl.delElement(e,t,r).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.setElementZPos=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.WB_ELEMENT_ZPOS(n);try{this._whiteBoardCtrl.setElementZPos(e,t,r).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.setIndicator=function(e,t){var n=new Cr.AsyncResult,i=new Conference.IndicatorData(t);try{this._whiteBoardCtrl.setIndicator(e,i).then(function(){n.complete([CR_NOERR,""])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.setHotspot=function(e,t,n,i){var r=new Cr.AsyncResult;try{this._whiteBoardCtrl.setHotspot(e,t,n,i).then(function(){r.complete([CR_NOERR,""])}.bind(this)).exception(function(e){r.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){r.complete([CR_INNER_ERR,e.toString()])}return r},Cr.LHProxy.prototype.queryIndicator=function(e){var i=new Cr.AsyncResult;try{this._whiteBoardCtrl.queryIndicator(e).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push(new Conference.IndicatorData(e[n]));i.complete([CR_NOERR,"",t])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.queryAllBoardList=function(){var i=new Cr.AsyncResult;try{this._whiteBoardCtrl.queryAllBoardList().then(function(e){for(var t=[],n=0;n<e.length;n++)t.push(new Conference.WhiteBoardDescribe(e[n]));i.complete([CR_NOERR,"",t])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.queryElementByIDs=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.queryElementByIDs(e,t).then(function(e){var t=e.values()[0];n.complete([CR_NOERR,"",t])}.bind(this)).exception(function(e){n.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.LHProxy.prototype.queryPageElementByIDs=function(e,t,n){for(var i=new Cr.AsyncResult,r=[],o=0;o<describeSeq.length;o++)r.push(new Conference.ElementID(n[o]));try{this._whiteBoardCtrl.queryPageElementByIDs(e,t,r).then(function(e){for(var t=0;t<describeSeq.length;t++)r.push(new Conference.ElementID(n[t].ownerID,n[t].ID));i.complete([CR_NOERR,"",[]])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.setMarkTerms=function(e,t,n){for(var i=new Cr.AsyncResult,r=[],o=0;o<describeSeq.length;o++)r.push(new Conference.ElementID(eIds[o].ownerID,eIds[o].ID));try{this._whiteBoardCtrl.setMarkTerms(e,t,n).then(function(){i.complete([CR_NOERR,""])}.bind(this)).exception(function(e){i.complete([CR_SOCKETEXCEPTION,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([CR_INNER_ERR,e.toString()])}return i},Cr.LHProxy.prototype.kickout=function(e){var t=new Cr.AsyncResult;try{this._conferenceRequest.kickout(e).then(function(){t.complete([CR_NOERR,""])}).exception(function(e){t.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){t.complete([CR_INNER_ERR,e.toString()])}return t},Cr.LHProxy.prototype.changeNickname=function(e,t){var n=new Cr.AsyncResult;try{this._conferenceRequest.changeNickname(e,t).then(function(){n.complete([CR_NOERR,""])}).exception(function(e){n.complete([CR_UNKNOWERR,"未知错误"])})}catch(e){n.complete([CR_INNER_ERR,e.toString()])}return n},Cr.conferenceRequest=function(n){for(var e=arguments.length,r=new Array(1<e?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return new Promise(function(i,t){try{var e;(e=Cr._proxy._conferenceRequest)[n].apply(e,r).then(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i(t)}).exception(function(e){console.crlog("[RTC] conferenceRequest fail: "+e.toString()),t(window.CRVideo_ERR_DEF.UNKNOWERR)})}catch(e){console.crlog("[RTC] conferenceRequest error: "+e.toString()),t(window.CRVideo_ERR_DEF.UNKNOWERR)}})};var _CRIceReqClass=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"SetVideoDeviceStatus",value:function(e){console.crlog("[Video] CRICEAPI.SetVideoDeviceStatus(".concat(e,")")),Cr.iceReq("_videoCtrl","setDeviceStatus",e).then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(CRRTCVideo,[e])})}},{key:"UpdateAllCameraInfos",value:function(e){console.crlog("[Video] CRICEAPI.UpdateAllCameraInfos(".concat(e,")")),Cr.iceReq("_videoCtrl","updateAllCameraInfos",e).then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(CRRTCVideo,[e])})}},{key:"StartVideo",value:function(){console.crlog("[Video] CRICEAPI.StartVideo()"),Cr.iceReq("_videoCtrl","startVideo").then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.startVideoRslt.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.startVideoRslt.apply(CRRTCVideo,[e])})}},{key:"StopVideo",value:function(){console.crlog("[Video] CRICEAPI.StopVideo()"),Cr.iceReq("_videoCtrl","stopVideo").then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.stopVideoRslt.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.stopVideoRslt.apply(CRRTCVideo,[e])})}},{key:"ReqOpenVideo",value:function(e){console.crlog("[Video] CRICEAPI.ReqOpenVideo(".concat(e,")")),Cr.iceReq("_videoCtrl","reqOpenVideo",e).then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(CRRTCVideo,[e])})}},{key:"StartVideoEx",value:function(e){console.crlog("[Video] CRICEAPI.StartVideoEx(".concat(e,")")),Cr.iceReq("_videoCtrl","startVideoEx",e).then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.startVideoExRslt.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.startVideoExRslt.apply(CRRTCVideo,[e])})}},{key:"StopVideoEx",value:function(e){console.crlog("[Video] CRICEAPI.StopVideoEx(".concat(e,")")),Cr.iceReq("_videoCtrl","stopVideoEx",e).then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.stopVideoExRslt.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.stopVideoExRslt.apply(CRRTCVideo,[e])})}},{key:"SetOpenedCameraNumber",value:function(e){console.crlog("[Video] CRICEAPI.SetOpenedCameraNumber(".concat(JSON.stringify(e),")")),Cr.iceReq("_videoCtrl","setOpenedCameraNumber",e).then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(CRRTCVideo,[e])})}},{key:"BatchSubscribeVideo2",value:function(e,t,n){console.crlog("[Video] CRICEAPI.BatchSubscribeVideo2(".concat(e,",").concat(t,",").concat(n,"})"));var i=[new Conference.UsrCamSize(Number(e),Number(t),Number(n))],r=new Ice.Context;r._fwd="z",Cr.iceReq("_videoCtrl","batchSubscribeVideo2",i,r).then(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(CRRTCVideo,e)}).catch(function(e){CRRTCVideo&&CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(CRRTCVideo,[e])})}},{key:"GetScreenShareInfo",value:function(){console.crlog("[Screen] CRICEAPI.GetScreenShareInfo()"),Cr.iceReq("_screenShareCtrl","getScreenShareInfo").then(function(e){CRRTCScreen&&CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(CRRTCScreen,e)}).catch(function(e){CRRTCScreen&&CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(CRRTCScreen,[e])})}},{key:"StartScreenShare",value:function(){console.crlog("[Screen] CRICEAPI.StartScreenShare()"),Cr.iceReq("_screenShareCtrl","startScreenShare").then(function(e){CRRTCScreen&&CRRTCScreen.ICECallback.startScreenShareRslt.apply(CRRTCScreen,e)}).catch(function(e){CRRTCScreen&&CRRTCScreen.ICECallback.startScreenShareRslt.apply(CRRTCScreen,[e])})}},{key:"StopScreenShare",value:function(){console.crlog("[Screen] CRICEAPI.StopScreenShare()"),Cr.iceReq("_screenShareCtrl","stopScreenShare").then(function(e){CRRTCScreen&&CRRTCScreen.ICECallback.stopScreenShareRslt.apply(CRRTCScreen,e)}).catch(function(e){CRRTCScreen&&CRRTCScreen.ICECallback.stopScreenShareRslt.apply(CRRTCScreen,[e])})}},{key:"StartPlayMedia",value:function(e){console.crlog("[Media] CRICEAPI.StartPlayMedia(".concat(e,")")),Cr.iceReq("_mediaCtrl","startPlayMedia",e).then(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.startPlayMediaRslt.apply(CRRTCMedia,e)}).catch(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.startPlayMediaRslt.apply(CRRTCMedia,[e])})}},{key:"StopPlayMedia",value:function(){console.crlog("[Media] CRICEAPI.StopPlayMedia()"),Cr.iceReq("_mediaCtrl","stopPlayMedia").then(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(CRRTCMedia,e)}).catch(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(CRRTCMedia,[e])})}},{key:"GetMediaInfo",value:function(){console.crlog("[Media] CRICEAPI.GetMediaInfo()"),Cr.iceReq("_mediaCtrl","getMediaInfo").then(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.getMediaInfoRslt.apply(CRRTCMedia,e)}).catch(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.getMediaInfoRslt.apply(CRRTCMedia,[e])})}},{key:"PausePlayMedia",value:function(e){console.crlog("[Media] CRICEAPI.PausePlayMedia(".concat(e,")")),Cr.iceReq("_mediaCtrl","pausePlayMedia",e).then(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(CRRTCMedia,e)}).catch(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(CRRTCMedia,[e])})}},{key:"SubscribeMedia",value:function(e){console.crlog("[Media] CRICEAPI.SubscribeMedia(".concat(e,")")),Cr.iceReq("_mediaCtrl","subscribeMedia",e).then(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.subscribeMediaRslt.apply(CRRTCMedia,e)}).catch(function(e){CRRTCMedia&&CRRTCMedia.ICECallback.subscribeMediaRslt.apply(CRRTCMedia,[e])})}}]),e}();window.CRICEAPI=new _CRIceReqClass,Cr.iceReq=function(n,r){for(var e=arguments.length,o=new Array(2<e?e-2:0),t=2;t<e;t++)o[t-2]=arguments[t];return new Promise(function(i,t){try{var e;console.crlog("[ICE] Ice Request: ".concat(n,", ").concat(r,", ").concat(JSON.stringify.apply(JSON,o))),(e=Cr._proxy[n])[r].apply(e,o).then(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.unshift(0),i(t)}).exception(function(e){console.crlog("[RTC] conferenceRequest fail: "+e.toString()),t(window.CRVideo_ERR_DEF.UNKNOWERR)})}catch(e){console.crlog("[RTC] conferenceRequest error: "+e.toString()),t(window.CRVideo_ERR_DEF.UNKNOWERR)}})},CRVideo.CbProxy=function(e){this.name=e,this.callback=function(){"CRVideo_MicEnergyUpdate"!=e&&console.crlog("(CMD) received undefined callback: "+e)}};var CRVideo_NotifyMainVideoChanged=new CRVideo.CbProxy("CRVideo_NotifyMainVideoChanged"),CRVideo_NotifyMainVideoModeChanged=new CRVideo.CbProxy("CRVideo_NotifyMainVideoModeChanged"),CRVideo_ShakeHandRslt=new CRVideo.CbProxy("CRVideo_ShakeHandRslt"),CRVideo_NotifyCmdData=new CRVideo.CbProxy("CRVideo_NotifyCmdData"),CRVideo_UserLeftMeeting=new CRVideo.CbProxy("CRVideo_UserLeftMeeting"),CRVideo_UserEnterMeeting=new CRVideo.CbProxy("CRVideo_UserEnterMeeting"),CRVideo_MeetingDropped=new CRVideo.CbProxy("CRVideo_MeetingDropped"),CRVideo_NotifyMeetEnded=new CRVideo.CbProxy("CRVideo_NotifyMeetEnded"),CRVideo_DestroyMeetingRslt=new CRVideo.CbProxy("CRVideo_DestroyMeetingRslt"),CRVideo_StopMeetingRslt=new CRVideo.CbProxy("CRVideo_StopMeetingRslt"),CRVideo_MeetingStopped=new CRVideo.CbProxy("CRVideo_MeetingStopped"),CRVideo_SendCmdRslt=new CRVideo.CbProxy("CRVideo_SendCmdRslt"),CRVideo_SendBufferRslt=new CRVideo.CbProxy("CRVideo_SendBufferRslt"),CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),CRVideo_SendFileRslt=new CRVideo.CbProxy("CRVideo_SendFileRslt"),CRVideo_CancelSendRslt=(CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),new CRVideo.CbProxy("CRVideo_CancelSendRslt")),CRVideo_NotifyBufferData=new CRVideo.CbProxy("CRVideo_NotifyBufferData"),CRVideo_NotifyFileData=new CRVideo.CbProxy("CRVideo_NotifyFileData"),CRVideo_NotifyCancelSend=new CRVideo.CbProxy("CRVideo_NotifyCancelSend"),CRVideo_NotifyInitBoards=new CRVideo.CbProxy("CRVideo_NotifyInitBoards"),CRVideo_NotifyInitBoardPageDat=new CRVideo.CbProxy("CRVideo_NotifyInitBoardPageDat"),CRVideo_NotifyCreateBoard=new CRVideo.CbProxy("CRVideo_NotifyCreateBoard"),CRVideo_NotifyCloseBoard=new CRVideo.CbProxy("CRVideo_NotifyCloseBoard"),CRVideo_NotifyBoardBkImage=new CRVideo.CbProxy("CRVideo_NotifyBoardBkImage"),CRVideo_NotifyAddBoardElement=new CRVideo.CbProxy("CRVideo_NotifyAddBoardElement"),CRVideo_NotifyModifyBoardElement=new CRVideo.CbProxy("CRVideo_NotifyModifyBoardElement"),CRVideo_NotifyDelBoardElement=new CRVideo.CbProxy("CRVideo_NotifyDelBoardElement"),CRVideo_NotifyMouseHotSpot=new CRVideo.CbProxy("CRVideo_NotifyMouseHotSpot");function sdkDebug(){var c=this;c.num=0,c.logFilename="sdkDebug.log",c.output="",this.getLog=function(){return c.output},this.clear=function(){c.output=""},this.downloadLog=function(){var e="data:text/plain;charset=utf-8,",t=c.getLog();e+=encodeURIComponent(t);var n=document.createElement("a");n.href=e,n.target="_blank",n.download=c.logFilename,document.body.appendChild(n),n.click(),n.remove()},this.log=function(e,t,n){var i="";t=t||"INF";if(null!=e)if("object"==("undefined"==typeof object?"undefined":_typeof2(object)))var r=JSON.stringify(e);else r=e;var o=new Date;i+=c.formatTimestamp(o),i+="["+t+"] ",i+=r,c.output+=i+"\n",c.num++,256==c.num&&(c.num=0),500<(c.output.length/1024).toFixed(2)&&CRVideo_UploadingLog()},this.formatTimestamp=function(e){e.getFullYear();var t=e.getDate();return"["+("0"+(e.getMonth()+1)).slice(-2)+"-"+t+" "+Number(e.getHours())+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+":"+e.getMilliseconds()+"] "}}CRVideo.logAry=[],CRVideo.browserInfo="";var sdkLog=new sdkDebug;console.crlog=function(e,t,n){return function(e,t,n){console.log(e),sdkLog.log(e,t,n)}},CRVideo_EnableLog2File=function(e,t,n){CRVideo.isUploadLog=e,console.crlog=e&&t?function(e,t,n){console.log(e),sdkLog.log(e,t,n)}:e?sdkLog.log:t?console.log:function(){},n||(console.crlog("[LOG] Enable upload log: "+e),console.crlog("[LOG] Enable console log debug: "+t))},CRVideo_EnableLog2File(!0,!0,1),CRVideo.browserInfo=getBrowser();var CRVideo_StartLogReport=function(e,t){CRVideo.isUploadLog=1,CRVideo.logServer=t,CRVideo_UploadingReport()},CRVideo_StopLogReport=function(){CRVideo.isUploadLog=0},CRVideo_UploadingReport=function e(t){CRVideo_UploadingLog(t),CRVideo.logReportTimer&&clearTimeout(CRVideo.logReportTimer),CRVideo.logReportTimer=setTimeout(function(){e()},3e4)},CRVideo_UploadingLog=function(e,t){var n=sdkLog.getLog();if(t&&(n+=t.type+":"+t.info),sdkLog.clear(),0!=CRVideo.isUploadLog){var i=new Date,r=i.getFullYear(),o=i.getMonth()+1;o=String(o<10?"0"+o:o);var c=i.getDate();c=String(c<10?"0"+c:c);var a=CRVideo.LoginParam.user_id;4<a.length&&a.substr(4),e&&e;var s=JSON.parse(window.sessionStorage.getItem("CRVideo.LOCAL_KEY_logName"));if(s&&s.account==CRVideo.LoginParam.account&&s.user_id==CRVideo.LoginParam.user_id&&s.logMonth==o&&s.logDay==c&&s.browserInfo==CRVideo.browserInfo)var l="".concat(CRVideo.LoginParam.account,"/").concat(r,"-").concat(o,"-").concat(c,"/").concat(CRVideo.LoginParam.user_id,"_").concat(s.logUUID,"_webrtc_").concat(CRVideo.browserInfo,".log");else l="".concat(CRVideo.LoginParam.account,"/").concat(r,"-").concat(o,"-").concat(c,"/").concat(CRVideo.LoginParam.user_id,"_").concat(CRVideo.logUUID,"_webrtc_").concat(CRVideo.browserInfo,".log");var d=new TextEncoder("utf-8").encode(n),u=new Zlib.Deflate(d).compress();console.crlog("[LOG] Log uploading =====> "+l),CRVideo.webLogDetail(0,l,u);var f={account:CRVideo.LoginParam.account,user_id:CRVideo.LoginParam.user_id,logUUID:CRVideo.logUUID,browserInfo:CRVideo.browserInfo,logMonth:o,logDay:c};window.sessionStorage.setItem("CRVideo.LOCAL_KEY_logName",JSON.stringify(f))}};function getBrowser(){var e="";if(navigator.userAgent.match(/AppleWebKit.*Mobile.*/)){e=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)?"android":"mobile";var t=navigator.userAgent.toLowerCase();if("micromessenger"==t.match(/MicroMessenger/i))return e+"_WX";if("qq"==t.match(/QQ/i))return e+"_qq";if(0<t.indexOf("liebao"))return e+"_leibao";if(null!=t.match(/ubrowser/))return e+"_uc";if(0<t.indexOf("chrome")||0<t.indexOf("crios"))return e+"_chrome";if(0<t.indexOf("safari"))return e+"_safari"}else{var n=navigator.userAgent,i=-1<n.indexOf("Opera"),r=-1<n.indexOf("compatible")&&-1<n.indexOf("MSIE")&&!i,o=-1<n.indexOf("Firefox"),c=-1<n.indexOf("Safari"),a=-1<n.indexOf("Chrome");if(o)return"PC_FF";if(i)return"PC_Opera";if(a){return function(e,t){var n=navigator.mimeTypes;for(var i in n)if(n[i][e]==t)return!0;return!1}("type","application/vnd.chromium.remoting-viewer")?"PC_360":"pc_chrome"}if(c)return"PC_Safari";if(r)return"IE"}}window.onerror=function(e,t,n,i,r){var o="\n出错的文件："+t;o+="\n出错的代码行号："+n,CRVideo_UploadingLog("",{type:"Error",info:o+="\n错误的详细信息："+r}),console.error(o)},CRVideo.sdkver="2.3.0.6",CRVideo.sdkInfo="SDK Ver: ".concat(CRVideo.sdkver,", Last modified: Victor 2021.04.20 15:30"),console.crlog("[SDK] ".concat(CRVideo.sdkInfo)),console.crlog("[SDK] ".concat(navigator.userAgent)),setTimeout(function(){console.crlog("[WEBRTC] WebRTC codecs: ".concat(window.rtc_codecs))},2e3),CRVideo.isSDKConsole=!0,CRVideo.isUploadLog=!0,CRVideo.maxBps_screen=1600,CRVideo.maxBps_media=2e3,CRVideo.screenFps=5,CRVideo.isHttp=!1,CRVideo.isCallSer=!0,CRVideo.MSProtocol=1,CRVideo.isWebRTC=!0;var CRVideo_GetSDKVersion=function(){return CRVideo.sdkver},CRVideo_WriteLog=function(e){console.crlog("[App] ".concat(e))},CRVideo_SetSDKParams=function(e){console.crlog("[SDK] CRVideo_SetSDKParams:".concat(JSON.stringify(e))),void 0!==e&&(CRVideo.isSDKConsole=!1!==e.isSDKConsole,CRVideo.isUploadLog=!1!==e.isUploadLog,e.screenSendBW&&(CRVideo.maxBps_screen=+e.screenSendBW),e.mediaSendBW&&(CRVideo.maxBps_media=+e.mediaSendBW),e.screenFps&&(CRVideo.screenFps=+e.screenFps),e.isHttp&&(CRVideo.isHttp=!0,CRVideo.protocol="http:"),CRVideo.isCallSer=!1!==e.isCallSer,void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol),CRVideo.isWebRTC=!1!==e.isWebRTC,console.crlog("[InitMgr] Set isUploadLog:".concat(CRVideo.isUploadLog,",isSDKConsole:").concat(CRVideo.isSDKConsole,", on init sdk!")),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole)),console.crlog("[InitMgr] Set isUploadLog:".concat(CRVideo.isUploadLog,",isSDKConsole:").concat(CRVideo.isSDKConsole,", on init sdk!")),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole)},CRVideo_Init=function(o){return console.crlog("[InitMgr] CRVideo_Init(".concat(JSON.stringify(o),")")),new Promise(function(r,t){(0==CRBrowser.curBrowserCfg.support&&("999"==CRBrowser.curBrowserCfg.minVer&&t(8005),t(8006)),CRVideo.isWebRTC)?navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(console.crlog("[InitMgr] First enumerateDevices on init..."),navigator.mediaDevices.enumerateDevices().then(function(e){var t=[],n=[],i=[];e.forEach(function(e){"audioinput"==e.kind?n.push(e):"audiooutput"==e.kind?i.push(e):"videoinput"==e.kind&&t.push(e)}),console.crlog("[InitMgr] Video input devices: ".concat(JSON.stringify(t))),console.crlog("[InitMgr] Audio input devices: ".concat(JSON.stringify(n))),console.crlog("[InitMgr] Audio output devices: ".concat(JSON.stringify(i))),0===t.length&&0===n.length||(0===t.length||n.length),void 0!==o&&(CRVideo.isSDKConsole=!1!==o.isSDKConsole,CRVideo.isUploadLog=!1!==o.isUploadLog,o.screenSendBW&&(CRVideo.maxBps_screen=+o.screenSendBW),o.mediaSendBW&&(CRVideo.maxBps_media=+o.mediaSendBW),o.screenFps&&(CRVideo.screenFps=+o.screenFps),o.isHttp&&(CRVideo.isHttp=!0,CRVideo.protocol="http:"),CRVideo.isCallSer=!1!==o.isCallSer,void 0!==o.MSProtocol&&(CRVideo.MSProtocol=+o.MSProtocol)),console.crlog("[InitMgr] Set isUploadLog:".concat(CRVideo.isUploadLog,",isSDKConsole:").concat(CRVideo.isSDKConsole,", on init sdk!")),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),r(0)}).catch(function(e){throw console.crlog("[InitMgr] Enumerate devices fail! ".concat(e)),t(8003),e})):(console.crlog("[InitMgr] Init sdk fail, navigator.mediaDevices.enumerateDevices API not found!"),window.location.protocol&&"http:"==window.location.protocol&&console.crlog('[InitMgr][Error] The current page protocal is "HTTP", You should use "HTTPS" protocol!'),window.location.protocol&&"http:"==window.location.protocol&&console.error('The current page protocal is "HTTP", You should use "HTTPS" protocol!'),t(8004)):(CRVideo.isWebRTC=!1,console.crlog("[InitMgr] Init sdk success when isWebRTC false!"),r(0))})},CRVideo_SetServerAddr=function(e){e=e.replace(/\s*/g,"");try{console.crlog("[InitMgr] CRVideo_SetServerAddr(".concat(e,")"))}catch(e){throw e}CRVideo.webServerAddr=e};function _ReplaceObjParam(e,t,n){var i={};for(var r in e)i[r]=r!==t?e[r]:n;return i}!function(t){var e=function(){function e(){_classCallCheck(this,e),this.initData(),this.getPlatform(),this.getBrowser(),console.crlog("[Browser] UA: ".concat(this.ua)),console.crlog("[Browser] Browser: ".concat(JSON.stringify(this.curBrowserCfg)))}return _createClass(e,[{key:"initData",value:function(){this.ua=t.navigator.userAgent,this.curBrowserCfg={name:"",minVer:null,ver:null,support:!1,platform:"unknown",isMobile:!1},this.supportVer={Windows_Chrome:58,Windows_Edg:80,Windows_Edge:999,Windows_OPR:70,Windows_Firefox:78,Windows_QQBrowser:10,Android_Chrome:58,Mac_Safari:12,Mac_Chrome:69,iOS_Safari:12,iOS_14_Chrome:69,iOS_14_QQBrowser:11,iOS_14_MicroMessenger:7,iOS_14_uniApp:1}}},{key:"getPlatform",value:function(){if((this.ua.match(/AppleWebKit.*Mobile.*/)||this.ua.includes("Android"))&&(this.curBrowserCfg.isMobile=!0),this.ua.includes("Windows")&&(this.curBrowserCfg.platform="Windows"),this.ua.includes("Macintosh")&&(this.curBrowserCfg.platform="Mac"),this.ua.includes("Android")&&(this.curBrowserCfg.platform="Android"),/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(this.curBrowserCfg.platform="iOS"),"iOS"==this.curBrowserCfg.platform){var e=this.ua.split(" like Mac OS X")[0].split(" OS ")[1].split("_")||null;e&&13<e[0]&&(this.curBrowserCfg.platform="iOS_".concat(e[0]))}}},{key:"getBrowser",value:function(){this.curBrowserCfg.isMobile?("Android"==this.curBrowserCfg.platform&&this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),"iOS"!=this.curBrowserCfg.platform&&"iOS_14"!=this.curBrowserCfg.platform||(this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0],this.curBrowserCfg.platform="iOS"),this.ua.includes("CriOS/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("CriOS/")[1].split(".")[0]),this.ua.includes("MQQBrowser/")&&(this.curBrowserCfg.name="QQBrowser",this.curBrowserCfg.ver=+this.ua.split("MQQBrowser/")[1].split(".")[0]),this.ua.includes("MicroMessenger/")&&(this.curBrowserCfg.name="MicroMessenger",this.curBrowserCfg.ver=+this.ua.split("MicroMessenger/")[1].split(".")[0]),this.ua.includes("uni-app")&&(this.curBrowserCfg.name="uniApp",this.curBrowserCfg.ver=1))):("Mac"==this.curBrowserCfg.platform&&this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0]),this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),/(Edg|Edge)/i.test(this.ua)&&(this.ua.includes("Edg/")?(this.curBrowserCfg.name="Edg",this.curBrowserCfg.ver=+this.ua.split("Edg/")[1].split(".")[0]):this.ua.includes("Edge/")&&(this.curBrowserCfg.name="Edge",this.curBrowserCfg.ver=+this.ua.split("Edge/")[1].split(".")[0])),this.ua.includes("Firefox/")&&(this.curBrowserCfg.name="Firefox",this.curBrowserCfg.ver=+this.ua.split("Firefox/")[1].split(".")[0]));var e="".concat(this.curBrowserCfg.platform,"_").concat(this.curBrowserCfg.name);console.crlog("[Browser] ".concat(e," ").concat(this.curBrowserCfg.ver)),this.curBrowserCfg.minVer=this.supportVer[e]||999,this.curBrowserCfg.ver>=this.curBrowserCfg.minVer&&(this.curBrowserCfg.support=!0),console.crlog("[Browser] Support: ".concat(this.curBrowserCfg.support))}}]),e}();t.CRBrowser=new e}(window,Ice,CRVideo),function(a,d){function u(e,i,t,r){var n="".concat(d.protocol,"//").concat(d.webServerAddr,"/servlet/getJsCallServerInfo"),o=_objectSpread({RequestId:a.Ice.generateUUID(),OEMKey:"CLOUDROOM",MgrSDKVer:d.sdkver,PRODUCT:"H5",APPIDMode:CRVideo.APPIDMode},e),c={};c=_ReplaceObjParam(o,"UserPswd","******"),c=_ReplaceObjParam(c,"Token","******"),c=_ReplaceObjParam(c,"CustomPswd","******"),console.crlog("[Login] WebAPI request url: "+n+", data:"+JSON.stringify(c)),d.ajax({url:n,type:"get",timeout:3e4,data:o,success:function(t){if(console.crlog("[Login] WebAPI, /servlet/getJsCallServerInfo result: "+JSON.stringify(t)),a.postCmd.CallServerInfo=t,d.webLoginOAuth=e,d.callServerLoginOAuth=i,void 0!==t.RspCode&&0==t.RspCode){console.crlog("[Login] CR.isHttp: ".concat(d.isHttp)),1==d.isHttp&&(t.callSvrList=t.callSvrList.replace("ali9.cloudroom.com:543/sig/","ali9.cloudroom.com:80/sig/"),t.callSvrList=t.callSvrList.replace("crlab.cloudroom.com:543/sig/","crlab.cloudroom.com:80/sig/"));var n=-1;!function e(){d.callserverExiting?(console.crlog("[Login] callserver exiting.... waiting...."),n=setTimeout(function(){e()},500)):(console.crlog("[Login] callserver exiting complete...."),clearInterval(n),s(t,r))}()}else l(t,r)},error:function(e){console.crlog("[Login] GetJsCallServerInfo API request fail:"),console.log(e),l({RspCode:11e3,RspDesc:"Server not responding..!"},r)}})}var i,r,s=function(e,t){console.crlog("[Login] GetCallServerInfoSuccess..."),e.Data&&e.APPIDMode?(CRVideo.APPIDMode=+e.APPIDMode,CRVideo.multiProject=e.Data):CRVideo.APPIDMode=0,void 0!==e.TokenTime&&0!==e.TokenTime&&o(e.TokenTime),e.stunServerAddr&&""!=e.stunServerAddr?-1<e.stunServerAddr.indexOf(";")?d.stunList=e.stunServerAddr.split(";")[0]:d.stunList=e.stunServerAddr:-1<window.location.href.indexOf("cloudroom")?d.stunList="47.104.128.57:30000":d.stunList="".concat(d.webServerAddr,":2699");var n=[];n=0==d.MSProtocol?["turn:"+d.stunList+"?transport=udp","turn:"+d.stunList+"?transport=tcp"]:1==d.MSProtocol?["turn:"+d.stunList+"?transport=udp"]:["turn:"+d.stunList+"?transport=tcp"],d.rtcCfg={iceServers:[{credential:"cloudroom",username:"cloudroom",urls:n}],iceTransportPolicy:"relay"};var i=_.cloneDeep(d.rtcCfg);if(i.iceServers[0].credential="******",i.iceServers[0].username="******",console.crlog("[Login] WebRTC RTCPeerConnection cfg: ".concat(JSON.stringify(i))),d.loginAuthFlag=1,d.isCallSer)a.postCmd.IceCruxCreate(t);else{try{console.crlog("[Login] CRVideo_LoginSuccess.callback(".concat(d.LoginParam.user_id,", ").concat(t,")"))}catch(e){}CRVideo_LoginSuccess.callback(d.LoginParam.user_id,t)}e.uploadUrl&&a.postCmd.IceLogCreate()},l=function(e,t){try{console.crlog("[Login] Login authentication failed, RspCode:".concat(e.RspCode," --- RspDesc:").concat(e.RspDesc)),console.crlog("[Login] CRVideo_LoginFail.callback(".concat(WEB_SDK_ERR(e.RspCode),",").concat(t,")"))}catch(e){}CRVideo_LoginFail.callback(WEB_SDK_ERR(e.RspCode),t)},o=function(e){console.crlog("[Login] Update webAPI Token Expire Time: "+e),clearTimeout(i),clearTimeout(r);var t=30<e?1e3*(e-30):0;function n(){console.crlog("[Login] !!!Token Expire!!!"),d.ic&&(clearTimeout(d.HandShark),console.crlog("[Login] CallServer destroy connection..."),d.destroyCruxConnect(),d.LineOffHandler(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT)),d.isMeeting&&(console.crlog("[Login] Token失效，退出会议！CRVideo_ExitMeeting('token失效')"),CRVideo_ExitMeeting("token失效"))}console.crlog("[Login] Token剩余有效期：".concat(t/1e3+30," 秒")),2147483647<t||(i=setTimeout(function(){r=setTimeout(n,1e3*(30<t?30:e)),console.crlog("[Login] CRVideo_NotifyTokenWillExpire.callback()"),CRVideo_NotifyTokenWillExpire.callback()},t))};d.LineOffHandler=function(e){console.crlog("[CMD] line off .... ".concat(e)),d.callserverCastPrx?(d.callserverCastPrx=null,console.crlog("[Login] CRVideo_LineOff.callback(".concat(e,")")),CRVideo_LineOff.callback(e)):18==e&&(d.loginAuthFlag=0,d.webLoginOAuth={},console.crlog("[Login] CRVideo_LineOff.callback(".concat(e,")")),CRVideo_LineOff.callback(e))},d.__LoginCallserver=function(){var e=CRVideo.LoginParam.cookie,t=CRBrowser.curBrowserCfg,n=_objectSpread(_objectSpread({OEMKey:"CLOUDROOM",SDKVersion:CRVideo.sdkver,cmd:"Login"},CRVideo.callServerLoginOAuth),{},{deviceType:"".concat(t.platform,"_").concat(t.name),language:"zh_CN",module:"CallServer",productType:"h5sdk",userID:CRVideo.LoginParam.user_id,userName:CRVideo.LoginParam.nick_name}),i=_ReplaceObjParam(n,"crPswd","******");try{console.crlog("[Login] WebCMD:".concat(JSON.stringify(i),", cookie:").concat(e))}catch(e){}d.webSendcmd(n,e)},a.CRVideo_Login=function(e,t,n,i,r,o){try{console.crlog("[Login] CRVideo_Login(".concat(e,",'******',").concat(n,",").concat(i,",").concat(r,",").concat(o,")"))}catch(e){}if(""!==n&&void 0!==n&&""!==i&&void 0!==i){d.crpswdmd5=t,d.loginCookie=o,d.LoginParam={account:e,psw:t,nick_name:n,user_id:i,CustomID:i,CustomPswd:r||"",cookie:o};try{console.crlog("[Login] Login param: ".concat(JSON.stringify(a._ReplaceObjParam(d.LoginParam,"psw","******"))))}catch(e){}u(r?{UserName:e,UserPswd:t,CustomID:i,CustomPswd:r||""}:{UserName:e,UserPswd:t},{crAcnt:e,crPswd:t},0,o)}else CRVideo_LoginFail.callback(5,o)},a.CRVideo_LoginByToken=function(e,t,n,i,r){try{console.crlog("[Login] CRVideo_LoginByToken('******',".concat(t,",").concat(n,",").concat(i,",").concat(r,")"))}catch(e){}var o,c;try{var a=e.split(".")[1],s=!!a&&Cr.Utils.base64.decode(a).replace(/\0/g,"");o=JSON.parse(s)}catch(e){console.crlog("[Login] token本地解析失败"),console.crlog(e);try{console.crlog("[Login] CRVideo_LoginFail.callback(1,".concat(r,");"))}catch(e){}return void CRVideo_LoginFail.callback(1,r)}d.LoginParam={account:o.appID,nick_name:t,user_id:n,CustomID:n,CustomPswd:i||"",cookie:r||""},c=i?{Token:e,CustomID:n,CustomPswd:i||""}:{Token:e};var l={crToken:e};try{console.crlog("[Login] Login param: ".concat(JSON.stringify(d.LoginParam)))}catch(e){}u(c,l,0,r)},a.CRVideo_UpdateToken=function(t){console.crlog("[Login] CRVideo_UpdateToken('******')");var e="".concat(d.protocol,"//").concat(d.webServerAddr,"/servlet/HandToken"),n={ClientVer:"",Language:"",RequestId:a.Ice.generateUUID(),MgrSDKVer:d.sdkver,OEMKey:"CLOUDROOM",PRODUCT:"H5",Token:t},i=_ReplaceObjParam(n,"Token","******");try{console.crlog("[Login] WebAPI UpdateToken: url: "+e+" ,data: "+JSON.stringify(i))}catch(e){}d.ajax({url:e,data:{_data_:JSON.stringify(n)},dataType:"jsonp",jsonp:"callback",success:function(e){if(console.crlog("[Login] WebAPI UpdateToken result: "+JSON.stringify(e)),0==e.RspCode){e.TokenTime&&o(e.TokenTime);try{console.crlog("[Login] CRVideo_UpdateTokenRslt.callback(".concat(CRVideo_ERR_DEF.NOERR,")"))}catch(e){}CRVideo_UpdateTokenRslt.callback(CRVideo_ERR_DEF.NOERR),d.webLoginOAuth={Token:t},d.callServerLoginOAuth={crToken:t}}else{try{console.crlog("[Login] CRVideo_UpdateTokenRslt.callback(".concat(CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED,")"))}catch(e){}CRVideo_UpdateTokenRslt.callback(CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED)}},error:function(){try{console.crlog("[Login] CRVideo_UpdateTokenRslt.callback(".concat(CRVideo_ERR_DEF.NOSERVER_RSP,")"))}catch(e){}CRVideo_UpdateTokenRslt.callback(CRVideo_ERR_DEF.NOSERVER_RSP)}})},a.CRVideo_Logout=function(){if(d.loginAuthFlag=0,d.webLoginOAuth={},console.crlog("[Login] CRVideo_Logout()"),clearInterval(d.resetAdapterTimer),d.isCallSer){d.callserverExiting=!0,setTimeout(function(){d.callserverExiting=!1},3e3);var e={cmd:"Logout",module:"CallServer",sessionID:d.sessionID};try{console.crlog("[Login] WebCMD:".concat(JSON.stringify(e),",cookie:").concat(cookie))}catch(e){}d.webSendcmd(e),d.CallID="",d.HandErrTimes=0,d.KEEPLIVE_COMMIT=!1}},d.loginCallback={Login:function(e,t,n){try{console.crlog("[Login] CRVideo_Login -- CMDCallback --\x3e Login: ".concat(JSON.stringify(e)))}catch(e){}0==e.RspCode?(console.crlog("[Login] CallServer login success!"),d.sessionID=e.sessionID,console.crlog("[Login] CRVideo_LoginSuccess.callback(".concat(e.userID,", ").concat(n,")")),CRVideo_LoginSuccess.callback(e.userID,n),console.crlog("[Login] CallServer sessionID: "+e.sessionID),console.crlog("[Login] Begain ShakeHand, CRVideo_ShakeHand"),a.CRVideo_ShakeHand()):(console.crlog("[Login] CallServer login fail!"),console.crlog("[Login] CRVideo_LoginFail.callback(".concat(ICE_SDK_ERR(e.RspDesc),",").concat(n,")")),CRVideo_LoginFail.callback(ICE_SDK_ERR(e.RspDesc),n))},Logout:function(e){if(0==e.RspCode)console.crlog("[Login] Callserver logout success..."),setTimeout(function(){CRVideo_UploadingLog()},1e3),setTimeout(function(){d.destroyCruxConnect()},1e3);else{console.crlog("[Login] Callserver logout fail...");try{console.crlog("[Login] ".concat(JSON.stringify(e)))}catch(e){}}},ServerKickoutUser:function(){d.HandErrTimes=0,clearTimeout(d.HandShark),d.LineOffHandler(CRVideo_ERR_DEF.SDK_USER_BEEN_KICKOUT)}},a.CRVideo_LineOff=new d.CbProxy("CRVideo_LineOff"),a.CRVideo_LoginSuccess=new d.CbProxy("CRVideo_LoginSuccess"),a.CRVideo_LoginFail=new d.CbProxy("CRVideo_LoginFail"),a.CRVideo_NotifyTokenWillExpire=new d.CbProxy("CRVideo_NotifyTokenWillExpire"),a.CRVideo_UpdateTokenRslt=new d.CbProxy("CRVideo_UpdateTokenRslt"),a.CRVideo_LogoutSuccess=new CRVideo.CbProxy("CRVideo_LogoutSuccess"),a.CRVideo_LogoutFail=new CRVideo.CbProxy("CRVideo_LogoutFail")}(window,CRVideo),function(a,s){s.QueList=[],s.queStateList=[],s.queuingID=null,s.queuingInfo={},s.queuingTimer=null,s.queServiceArr=[],s.mycallInfo={},a.CRVideo_InitQueueDat=function(e){try{console.crlog("[QueueMgr] CRVideo_InitQueueDat(".concat(e,")"))}catch(e){}var t={cmd:"GetServiceData",module:"Queue",sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(t),", cookie:").concat(e))}catch(e){}s.webSendcmd(t,e)},a.CRVideo_GetAllQueueInfo=function(){try{console.crlog("[QueueMgr] CRVideo_GetAllQueueInfo()")}catch(e){}var t=[];return s.QueList.forEach(function(e){t.push({queID:+e.queID,prio:+e.prio,name:e.name,desc:e.desc})}),t},a.CRVideo_RefreshAllQueueStatus=function(e){try{e||console.crlog("[QueueMgr] CRVideo_RefreshAllQueueStatus(".concat(e,")"))}catch(e){}var t=s.QueList.length;try{e||console.crlog("[QueueMgr] All queue list length: ".concat(t))}catch(e){}for(var n=0;n<t;n++){var i=s.QueList[n];a.CRVideo_GetQueueStatus(i.queID,"RefreshAllQueueStatus",e)}},a.CRVideo_GetQueueStatus=function(e,t,n){try{n||console.crlog("[QueueMgr] CRVideo_GetQueueStatus(".concat(e,",").concat(t,",").concat(n,")"))}catch(e){}var i={cmd:"GetQueueStatus",module:"Queue",queID:e=parseInt(e),sessionID:s.sessionID};try{n||console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i)))}catch(e){}s.webSendcmd(i,t,n)},a.CRVideo_StartService=function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_StartService(".concat(e,",").concat(t,",").concat(n,")"))}catch(e){}t=null==t?0:t;var i={cmd:"AgentEnter",module:"Queue",queID:e=parseInt(e),priority:t,sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i),", cookie: ").concat(n))}catch(e){}s.webSendcmd(i,n)},a.CRVideo_StopService=function(e,t){try{console.crlog("[QueueMgr] CRVideo_StopService(".concat(e,",").concat(t,")"))}catch(e){}var n={cmd:"AgentLeave",module:"Queue",queID:e=parseInt(e),sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(n),", cookie: ").concat(t))}catch(e){}s.webSendcmd(n,t)},a.CRVideo_AcceptAssignUser=function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_AcceptAssignUser(".concat(e,",").concat(t,",").concat(n,")"))}catch(e){}var i={accept:1,cmd:"AssignResponse",module:"Queue",queID:+e,userID:t,sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i),", cookie: ").concat(n))}catch(e){}s.webSendcmd(i,n)},a.CRVideo_RejectAssignUser=function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_RejectAssignUser(".concat(e,",").concat(t,",").concat(n,")"))}catch(e){}var i={accept:0,cmd:"AssignResponse",module:"Queue",queID:+e,userID:t,sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i),", cookie: ").concat(n))}catch(e){}s.webSendcmd(i,n)},a.CRVideo_ReqAssignUser=function(e){try{console.crlog("[QueueMgr] CRVideo_ReqAssignUser(".concat(e,")"))}catch(e){}var t={cmd:"RequestUser",module:"Queue",sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(t),", cookie: ").concat(e))}catch(e){}s.webSendcmd(t,e)},a.CRVideo_GetServingQueues=function(){var t=[];return s.queServiceArr.forEach(function(e){t.push(e)}),t},a.CRVideo_StartQueuing=function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_StartQueuing(".concat(e,",").concat(JSON.stringify(t),",").concat(n,")"))}catch(e){}s.queuingID=parseInt(e);var i={cmd:"UserEnter",module:"Queue",queID:parseInt(e),sessionID:s.sessionID,usrExDat:t};try{console.crlog("[QueueMgr] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){}s.webSendcmd(i,n)},a.CRVideo_StopQueuing=function(e){try{console.crlog("[QueueMgr] CRVideo_StopQueuing(".concat(e,")"))}catch(e){}var t={cmd:"UserLeave",module:"Queue",queID:+s.queuingID,sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD:".concat(JSON.stringify(t),",cookie:").concat(e))}catch(e){}s.webSendcmd(t,e),s.queuingID=null},a.CRVideo_GetUserServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetUserServiceStatus()");var e={cmd:"GetUserServiceStatus",module:"Queue",sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD:".concat(JSON.stringify(e)))}catch(e){}s.webSendcmd(e)},a.CRVideo_GetAgentServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetAgentServiceStatus()");var e={cmd:"GetAgentServiceStatus",module:"Queue",sessionID:s.sessionID};try{console.crlog("[QueueMgr] WebCMD:".concat(JSON.stringify(e)))}catch(e){}s.webSendcmd(e)},a.CRVideo_GetQueuingInfo=function(){var e=s.queuingInfo;return console.crlog("[QueueMgr] CRVideo_GetQueuingInfo(), returnVal: ".concat(JSON.stringify(e))),e},a.CRVideo_GetSessionInfo=function(){var e={callID:s.mycallInfo.callID||"",peerID:s.mycallInfo.peerID||"",peerName:s.mycallInfo.peerName||"",bCallAccepted:s.mycallInfo.bCallAccepted||0,duration:s.mycallInfo.duration||0,meetingID:s.mycallInfo.meetingID||null,meetingPswd:s.mycallInfo.meetingPswd||""};return console.crlog("[QueueMgr] CRVideo_GetSessionInfo(), returnVal: ".concat(JSON.stringify(e))),e},s.queCallback={GetServiceData:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_InitQueueDat -- CMDCallback --\x3e GetServiceData: ".concat(JSON.stringify(e)))}catch(e){}0===e.RspCode&&(s.QueList=e.ques,a.CRVideo_GetUserServiceStatus(),a.CRVideo_GetAgentServiceStatus());try{console.crlog("[QueueMgr] CRVideo_InitQueueDatRslt.callback(".concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}a.CRVideo_InitQueueDatRslt.callback(ICE_SDK_ERR(e.RspCode),n)},GetQueueStatus:function(e,t,n,i){try{i||console.crlog("[QueueMgr] CRVideo_GetQueueStatus -- CMDCallback --\x3e GetQueueStatus: ".concat(JSON.stringify(e)))}catch(e){}if(0===e.RspCode){s.queStateList.length;for(var r=!1,o=e.status,c=0;c<s.queStateList.length;c++){s.queStateList[c].queID!=o.queID||(s.queStateList[c]=o,r=!0)}r||s.queStateList.push(o)}try{i||console.crlog("[QueueMgr] CRVideo_GetQueueStatusRslt.callback(".concat(JSON.stringify(e.status),",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}a.CRVideo_GetQueueStatusRslt.callback(e.status,ICE_SDK_ERR(e.RspCode),n)},AgentEnter:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_StartService -- CMDCallback --\x3e AgentEnter: ".concat(JSON.stringify(e)))}catch(e){}0===e.RspCode&&(s.queServiceArr.push(t.queID),console.crlog("[QueueMgr] queServiceArr: ".concat(JSON.stringify(s.queServiceArr))));try{console.crlog("[QueueMgr] CRVideo_StartServiceRslt.callback(".concat(t.queID,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_StartServiceRslt.callback(t.queID,ICE_SDK_ERR(e.RspCode),n)},AgentLeave:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_StopService -- CMDCallback --\x3e AgentLeave: ".concat(JSON.stringify(e)))}catch(e){}0===e.RspCode&&(s.queServiceArr.splice(s.queServiceArr.findIndex(function(e){return e==t.queID}),1),console.crlog("[QueueMgr] queServiceArr: ".concat(JSON.stringify(s.queServiceArr))));try{console.crlog("[QueueMgr] CRVideo_StopServiceRslt.callback(".concat(t.queID,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_StopServiceRslt.callback(t.queID,ICE_SDK_ERR(e.RspCode),n)},AssignResponse:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_AcceptAssignUser、CRVideo_RejectAssignUser -- CMDCallback --\x3e AssignResponse: ".concat(JSON.stringify(e)))}catch(e){}try{console.crlog("[QueueMgr] CRVideo_ResponseAssignUserRslt.callback(".concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_ResponseAssignUserRslt.callback(ICE_SDK_ERR(e.RspCode),n)},RequestUser:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_ReqAssignUser -- CMDCallback --\x3e RequestUser: ".concat(JSON.stringify(e)))}catch(e){}var i={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog("[QueueMgr] CRVideo_ReqAssignUserRslt.callback(".concat(ICE_SDK_ERR(e.RspCode),",").concat(JSON.stringify(i),",").concat(n,")"))}catch(e){}CRVideo_ReqAssignUserRslt.callback(ICE_SDK_ERR(e.RspCode),i,n)},UserEnter:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_StartQueuing -- CMDCallback --\x3e UserEnter: ".concat(JSON.stringify(e)))}catch(e){}var i=e.RspCode;0==i&&(s.queuingInfo={queID:t.queID,position:+e.position,queuingTime:0},s.queuingTimer=setInterval(function(){s.queuingInfo.queuingTime++},1e3));try{console.crlog("[QueueMgr] CRVideo_StartQueuingRslt.callback(".concat(ICE_SDK_ERR(i),",").concat(n,")"))}catch(e){}a.CRVideo_StartQueuingRslt.callback(ICE_SDK_ERR(i),n);try{console.crlog("[QueueMgr] CRVideo_QueuingInfoChanged.callback(".concat(JSON.stringify(s.queuingInfo),")"))}catch(e){}a.CRVideo_QueuingInfoChanged.callback(s.queuingInfo)},UserLeave:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_StopQueuing -- CMDCallback --\x3e UserLeave: ".concat(JSON.stringify(e)))}catch(e){}var i=e.RspCode;if(0==i){s.queuingInfo={queID:t.queID,position:-1,queuingTime:0};try{console.crlog("[QueueMgr] Clear Interval: queuingTimer")}catch(e){}clearInterval(s.queuingTimer)}try{console.crlog("[QueueMgr] CRVideo_StopQueuingRslt.callback(".concat(ICE_SDK_ERR(i),",").concat(n,")"))}catch(e){}CRVideo_StopQueuingRslt.callback(ICE_SDK_ERR(i),n)},GetUserServiceStatus:function(e){try{console.crlog("[QueueMgr] CRVideo_GetUserServiceStatus -- CMDCallback --\x3e GetUserServiceStatus: ".concat(JSON.stringify(e)))}catch(e){}0==e.RspCode&&(s.mycallInfo.callID=e.callInfo.callID,s.mycallInfo.peerID=e.callInfo.peerID,s.mycallInfo.peerName=e.callInfo.peerName,s.mycallInfo.bCallAccepted=e.callInfo.callState,s.mycallInfo.duration=e.callInfo.duration,s.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,s.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,s.mycallInfo.position=void 0!==e.position?e.position:null,s.mycallInfo.queID=void 0!==e.queID?e.queID:null,s.mycallInfo.wait_time=void 0!==e.wait_time?e.wait_time:null)},GetAgentServiceStatus:function(e){try{console.crlog("[QueueMgr] CRVideo_GetAgentServiceStatus -- CMDCallback --\x3e GetAgentServiceStatus: ".concat(JSON.stringify(e)))}catch(e){}0==e.RspCode&&(s.mycallInfo.callID=e.callInfo.callID,s.mycallInfo.peerID=e.callInfo.peerID,s.mycallInfo.peerName=e.callInfo.peerName,s.mycallInfo.bCallAccepted=e.callInfo.callState,s.mycallInfo.duration=e.callInfo.duration,s.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,s.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,s.mycallInfo.queIDs=void 0!==e.queIDs?e.queIDs:null)},NotifyQueueStatus:function(e){try{console.crlog("[QueueMgr] CRVideo_QueueStatusChanged.callback(".concat(JSON.stringify(e.status),")"))}catch(e){}CRVideo_QueueStatusChanged.callback(e.status)},AssignUser:function(e){var t={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog("[QueueMgr] CRVideo_AutoAssignUser.callback(".concat(JSON.stringify(t),")"))}catch(e){}CRVideo_AutoAssignUser.callback(t)},AssignCancel:function(e){try{console.crlog("[QueueMgr] CRVideo_CancelAssignUser.callback(".concat(e.queID,",").concat(e.userID,")"))}catch(e){}CRVideo_CancelAssignUser.callback(e.queID,e.userID)},NotifyPosition:function(e){var t={queID:e.status.queID,agent_num:e.status.agent_num,wait_num:e.status.wait_num,srv_num:e.status.srv_num},n={queID:e.status.queID,position:e.position,queuingTime:e.wait_time};try{console.crlog("[QueueMgr] CRVideo_QueueStatusChanged.callback(".concat(JSON.stringify(t),")"))}catch(e){}CRVideo_QueueStatusChanged.callback(t);try{console.crlog("[QueueMgr] CRVideo_QueuingInfoChanged.callback(".concat(JSON.stringify(n),")"))}catch(e){}CRVideo_QueuingInfoChanged.callback(n)}},a.CRVideo_InitQueueDatRslt=new s.CbProxy("CRVideo_InitQueueDatRslt"),a.CRVideo_GetQueueStatusRslt=new s.CbProxy("CRVideo_GetQueueStatusRslt"),a.CRVideo_StartServiceRslt=new s.CbProxy("CRVideo_StartServiceRslt"),a.CRVideo_StopServiceRslt=new s.CbProxy("CRVideo_StopServiceRslt"),a.CRVideo_ResponseAssignUserRslt=new s.CbProxy("CRVideo_ResponseAssignUserRslt"),a.CRVideo_ReqAssignUserRslt=new CRVideo.CbProxy("CRVideo_ReqAssignUserRslt"),a.CRVideo_StartQueuingRslt=new s.CbProxy("CRVideo_StartQueuingRslt"),a.CRVideo_StopQueuingRslt=new s.CbProxy("CRVideo_StopQueuingRslt"),a.CRVideo_AutoAssignUser=new s.CbProxy("CRVideo_AutoAssignUser"),a.CRVideo_CancelAssignUser=new s.CbProxy("CRVideo_CancelAssignUser"),a.CRVideo_QueueStatusChanged=new s.CbProxy("CRVideo_QueueStatusChanged"),a.CRVideo_QueuingInfoChanged=new s.CbProxy("CRVideo_QueuingInfoChanged")}(window,CRVideo),function(i,o,c){i.CRVideo_SetDNDStatus=function(e,t){try{console.crlog("[CallMgr] CRVideo_SetDNDStatus(".concat(+e,",").concat(t,")"))}catch(e){}var n={cmd:"ClientCustomStatusUpdate",module:"CallServer",customStatus:+e,sessionID:o.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(n),",cookie:").concat(t))}catch(e){}o.webSendcmd(n,t)},i.CRVideo_StartUserStatusNotify=function(e){try{console.crlog("[CallMgr] CRVideo_StartUserStatusNotify(".concat(e,")"))}catch(e){}var t={cmd:"StartStatusPush",module:"CallServer",sessionID:o.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(t),",cookie:").concat(e))}catch(e){}o.webSendcmd(t,e)},i.CRVideo_StopUserStatusNotify=function(e){try{console.crlog("[CallMgr] CRVideo_StartUserStatusNotify(".concat(e,")"))}catch(e){}var t={cmd:"StopStatusPush",module:"CallServer",sessionID:o.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(t),",cookie:").concat(e))}catch(e){}o.webSendcmd(t,e)},i.CRVideo_GetUserStatus=function(e){try{console.crlog("[CallMgr] CRVideo_GetUserStatus()")}catch(e){}var t={cmd:"GetUserStatus",module:"CallServer",sessionID:o.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(t),",cookie:").concat(e))}catch(e){}o.webSendcmd(t,e)},i.CRVideo_GetOneUserStatus=function(e,t){try{console.crlog("[CallMgr] CRVideo_GetUserStatus(".concat(e,",").concat(t,")"))}catch(e){}var n={cmd:"GetUserStatus",module:"CallServer",userID:e,sessionID:o.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(n),",cookie:").concat(t))}catch(e){}o.webSendcmd(n,t)},i.CRVideo_Call=function(e,t,n,i){try{console.crlog("[CallMgr] CRVideo_Call(".concat(e,",").concat(JSON.stringify(t),",").concat(n,",").concat(i))}catch(e){}var r={callID:c.generateUUID(),called:e,calledOEMKey:"CLOUDROOM",calledType:0,cmd:"ClientCall",meeting:{ID:t.ID,pswd:t.pswd,pubMeetUrl:t.pubMeetUrl,subject:t.subject},module:"CallServer",sessionID:o.sessionID,usrExDat:n||""};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(r),",cookie:").concat(i))}catch(e){}o.webSendcmd(r,i)},i.CRVideo_AcceptCall=function(e,t,n,i){try{console.crlog("[CallMgr] CRVideo_AcceptCall(".concat(e,",").concat(JSON.stringify(t),",").concat(n,",").concat(i,")"))}catch(e){}console.crlog("[CallMgr] Meet ID："+t.ID),console.crlog("[CallMgr] Meet pubMeetUrl:"+t.pubMeetUrl),o.pubMeetUrl=t.pubMeetUrl;var r={callID:o.CallID=e,cmd:"ClientAccept",meeting:t,module:"CallServer",sessionID:o.sessionID,usrExDat:n||""};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(r),",cookie:").concat(i))}catch(e){}o.webSendcmd(r,i)},i.CRVideo_RejectCall=function(e,t,n){try{console.crlog("[CallMgr] CRVideo_RejectCall(".concat(JSON.stringify(e,t,n),")"))}catch(e){}var i={callID:e,sessionID:o.sessionID,cmd:"ClientDecline",module:"CallServer",declineReason:"ClientDecline"};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){}o.webSendcmd(i,n)},i.CRVideo_HangupCall=function(e,t,n){try{console.crlog("[CallMgr] CRVideo_HangupCall(".concat(e,",").concat(t,",").concat(n,")"))}catch(e){}var i={callID:e,sessionID:o.sessionID,cmd:"ClientReleaseCall",module:"CallServer",usrExDat:t||""};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){throw e}o.webSendcmd(i)},i.CRVideo_HungupCall=function(e,t,n){CRVideo_HangupCall(e,t,n)},o.callSvrCallback={ClientCustomStatusUpdate:function(e,t,n){try{console.crlog("[Queue] CRVideo_SetDNDStatus -- CMDCallback --\x3e ClientCustomStatusUpdate: ".concat(JSON.stringify(e)))}catch(e){}if(0===e.RspCode){try{console.crlog("[CallMgr] CRVideo_SetDNDStatusSuccess.callback(".concat(n,")"))}catch(e){}i.CRVideo_SetDNDStatusSuccess.callback(n)}else{try{console.crlog("[CallMgr] CRVideo_SetDNDStatusFail.callback(".concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}i.CRVideo_SetDNDStatusFail.callback(ICE_SDK_ERR(e.RspCode),n)}},StartStatusPush:function(e,t,n){try{console.crlog("[Queue] CRVideo_StartUserStatusNotify -- CMDCallback --\x3e StartStatusPush: ".concat(JSON.stringify(e)))}catch(e){}try{console.crlog("[CallMgr] CRVideo_StartUserStatusNotifyRslt.callback(".concat(ICE_SDK_ERR(e.RspCode),", ").concat(n,")"))}catch(e){}CRVideo_StartUserStatusNotifyRslt.callback(ICE_SDK_ERR(e.RspCode),n)},StopStatusPush:function(e,t,n){try{console.crlog("[Queue] CRVideo_StopUserStatusNotify -- CMDCallback --\x3e StopStatusPush: ".concat(JSON.stringify(e)))}catch(e){}try{console.crlog("[CallMgr] CRVideo_StopUserStatusNotifyRslt.callback(".concat(ICE_SDK_ERR(e.RspCode),", ").concat(n,")"))}catch(e){}CRVideo_StopUserStatusNotifyRslt.callback(ICE_SDK_ERR(e.RspCode),n)},GetUserStatus:function(e,t,n){try{console.crlog("[Queue] CRVideo_GetUserStatus -- CMDCallback --\x3e GetUserStatus: ".concat(JSON.stringify(e)))}catch(e){}if(0===e.RspCode){var i=JSON.parse(JSON.stringify(e.userStatus));try{console.crlog("[CallMgr] CRVideo_GetUserStatusSuccess.callback(".concat(JSON.stringify(i),", ").concat(n,")"))}catch(e){}CRVideo_GetUserStatusSuccess.callback(i,n)}else{try{console.crlog("[CallMgr] CRVideo_GetUserStatusFail.callback(".concat(ICE_SDK_ERR(e.RspCode),", ").concat(n,")"))}catch(e){}CRVideo_GetUserStatusFail.callback(ICE_SDK_ERR(e.RspCode),n)}},ClientCall:function(e,t,n){var i=t.callID;try{console.crlog("[CallMgr] CRVideo_Call -- CMDCallback --\x3e ClientCall: ".concat(JSON.stringify(e)))}catch(e){}if(0==e.RspCode){try{console.crlog("[CallMgr] CRVideo_CallSuccess.callback(".concat(i,", ").concat(n,");"))}catch(e){}CRVideo_CallSuccess.callback(i,n)}else{try{console.crlog("[CallMgr] CRVideo_CallFail.callback(".concat(i," ").concat(ICE_SDK_ERR(e.RspCode),", ").concat(n,");"))}catch(e){}CRVideo_CallFail.callback(i,ICE_SDK_ERR(e.RspCode),n)}},ClientAccept:function(e,t,n){try{console.crlog("[CallMgr] CRVideo_AcceptCall -- CMDCallback --\x3e AcceptCall: ".concat(JSON.stringify(e)))}catch(e){}var i=t.callID;if(0==e.RspCode){try{console.crlog("[CallMgr] CRVideo_AcceptCallSuccess.callback(".concat(i,",").concat(n,")"))}catch(e){}CRVideo_AcceptCallSuccess.callback(i,n)}else{try{console.crlog("[CallMgr] CRVideo_AcceptCallFail.callback(".concat(i,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_AcceptCallFail.callback(i,ICE_SDK_ERR(e.RspCode),n)}},ClientDecline:function(e,t,n){try{console.crlog("[CallMgr] CRVideo_RejectCall -- CMDCallback --\x3e ClientDecline: ".concat(JSON.stringify(e)))}catch(e){}var i=t.callID;if(0==e.RspCode){try{console.crlog("[CallMgr] CRVideo_RejectCallSuccess.callback(".concat(i,",").concat(n,")"))}catch(e){}CRVideo_RejectCallSuccess.callback(i,n)}else{try{console.crlog("[CallMgr] CRVideo_RejectCallFail.callback(".concat(i,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_RejectCallFail.callback(i,ICE_SDK_ERR(e.RspCode),n)}},ClientReleaseCall:function(e,t,n){try{console.crlog("[CallMgr] CRVideo_HangupCall -- CMDCallback --\x3e ClientReleaseCall: ".concat(JSON.stringify(e)))}catch(e){}var i=t.callID;if(0==e.RspCode){try{console.crlog("[CallMgr] CRVideo_HangupCallSuccess.callback(".concat(i,",").concat(n,")"))}catch(e){}CRVideo_HangupCallSuccess.callback(i,n)}else{try{console.crlog("[CallMgr] CRVideo_HangupCallFail.callback(".concat(i,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_HangupCallFail.callback(i,ICE_SDK_ERR(e.RspCode),n)}},ServerPushUserStatus:function(e){var t={userID:e.usersStatus.userID,userStatus:e.usersStatus.userStatus,DNDType:e.usersStatus.isDND};try{console.crlog("[CallMgr] CRVideo_NotifyUserStatus.callback(".concat(JSON.stringify(t),")"))}catch(e){}CRVideo_NotifyUserStatus.callback(t)},ServerAccept:function(e){var t={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl},n=e.callID,i=e.usrExDat;o.CallID=n;try{console.crlog("[CallMgr] CRVideo_NotifyCallAccepted.callback(".concat(n,",").concat(t,",").concat(i,")"))}catch(e){}CRVideo_NotifyCallAccepted.callback(n,t,i)},ServerDecline:function(e){var t=e.callID,n=e.usrExDat,i=1;switch(e.declineReason){case"NoAnswer":i=604;break;case"Refuse":i=606}try{console.crlog("[CallMgr] CRVideo_NotifyCallRejected.callback(".concat(t,",").concat(i,",").concat(n,")"))}catch(e){}CRVideo_NotifyCallRejected.callback(t,i,n)},ServerCall:function(e){var t={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl},n=e.callID,i=e.caller,r=e.usrExDat;o.CallID=n;try{console.crlog("[CallMgr] CRVideo_NotifyCallIn.callback(".concat(n,",").concat(t,",").concat(i,",").concat(r,")"))}catch(e){}CRVideo_NotifyCallIn.callback(e.callID,e.meeting,e.caller,e.usrExDat)},ServerReleaseCall:function(e){var t=e.callID,n=e.usrExDat;o.CallID="";try{console.crlog("[CallMgr] CRVideo_NotifyCallHangup.callback(".concat(t,",").concat(n,")"))}catch(e){}CRVideo_NotifyCallHangup.callback(t,n),CRVideo_NotifyCallHungup.callback(t,n)},ServerCancelCall:function(e){var t=e.callID,n=e.usrExDat;o.CallID="";try{console.crlog("[CallMgr] CRVideo_NotifyCallHangup.callback(".concat(t,",").concat(n,")"))}catch(e){}CRVideo_NotifyCallHangup.callback(t,n),CRVideo_NotifyCallHungup.callback(t,n)}},i.CRVideo_SetDNDStatusSuccess=new o.CbProxy("CRVideo_SetDNDStatusSuccess"),i.CRVideo_SetDNDStatusFail=new o.CbProxy("CRVideo_SetDNDStatusFail"),i.CRVideo_StartUserStatusNotifyRslt=new o.CbProxy("CRVideo_StartUserStatusNotifyRslt"),i.CRVideo_StopUserStatusNotifyRslt=new o.CbProxy("CRVideo_StopUserStatusNotifyRslt"),i.CRVideo_GetUserStatusSuccess=new o.CbProxy("CRVideo_GetUserStatusSuccess"),i.CRVideo_GetUserStatusFail=new o.CbProxy("CRVideo_GetUserStatusFail"),i.CRVideo_CallSuccess=new o.CbProxy("CRVideo_CallSuccess"),i.CRVideo_CallFail=new o.CbProxy("CRVideo_CallFail"),i.CRVideo_AcceptCallSuccess=new CRVideo.CbProxy("CRVideo_AcceptCallSuccess"),i.CRVideo_AcceptCallFail=new CRVideo.CbProxy("CRVideo_AcceptCallFail"),i.CRVideo_RejectCallSuccess=new CRVideo.CbProxy("CRVideo_RejectCallSuccess"),i.CRVideo_RejectCallFail=new CRVideo.CbProxy("CRVideo_RejectCallFail"),i.CRVideo_HangupCallSuccess=new CRVideo.CbProxy("CRVideo_HangupCallSuccess"),i.CRVideo_HangupCallFail=new CRVideo.CbProxy("CRVideo_HangupCallFail"),i.CRVideo_NotifyUserStatus=new o.CbProxy("CRVideo_NotifyUserStatus"),i.CRVideo_NotifyCallIn=new CRVideo.CbProxy("CRVideo_NotifyCallIn"),i.CRVideo_NotifyCallAccepted=new o.CbProxy("CRVideo_NotifyCallAccepted"),i.CRVideo_NotifyCallHangup=new CRVideo.CbProxy("CRVideo_NotifyCallHangup"),i.CRVideo_NotifyCallHungup=new CRVideo.CbProxy("CRVideo_NotifyCallHungup"),i.CRVideo_NotifyCallRejected=new CRVideo.CbProxy("CRVideo_NotifyCallRejected")}(window,CRVideo,Ice),function(o,c,a){var e=function(){function e(){_classCallCheck(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){}},{key:"initIceCallback",value:function(){var e=this;this.ICECallback={invite:function(){e.notifyInviteIn.apply(e,arguments)},cancelInvite:function(){e.notifyInviteCanceled.apply(e,arguments)},acceptInvite:function(){e.notifyInviteAccepted.apply(e,arguments)},rejectInvite:function(){e.notifyInviteRejected.apply(e,arguments)},inviteResult:function(){console.log(JSON.stringify.apply(JSON,arguments))}}}},{key:"initSDKInterface",value:function(){var i=this;o.CRVideo_Invite=function(e,t,n){try{console.crlog("[Invite] CRVideo_Invite(".concat(JSON.stringify(e,t,n),")"))}catch(e){console.error(e)}return i.invite(e,t,n)},o.CRVideo_AcceptInvite=function(e,t,n){try{console.crlog("[Invite] CRVideo_AcceptInvite(".concat(JSON.stringify(e,t,n),")"))}catch(e){console.error(e)}return i.acceptInvite(e,t,n)},o.CRVideo_RejectInvite=function(e,t,n){try{console.crlog("[Invite] CRVideo_RejectInvite(".concat(JSON.stringify(e,t,n),")"))}catch(e){console.error(e)}return i.rejectInvite(e,t,n)},o.CRVideo_CancelInvite=function(e,t,n){try{console.crlog("[Invite] CRVideo_CancelInvite(".concat(JSON.stringify(e,t,n),")"))}catch(e){console.error(e)}return i.cancelInvite(e,t,n)}}},{key:"invite",value:function(e,t,n){var i=a.generateUUID(),r={module:"CallServer",cmd:"invite",inviteID:i,invitedUserID:e,usrExtDat:t||""};try{console.crlog("[Invite] WebCMD:".concat(JSON.stringify(r),",cookie:").concat(n))}catch(e){}return c.callServerSendCMD(r).then(function(e){try{console.crlog("[Invite] CRVideo_Invite -- CMDRslt --\x3e invite: ".concat(JSON.stringify(e)))}catch(e){}if(0!==e.RspCode)return console.crlog("[Invite] CRVideo_InviteFail.callback(".concat(i,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")")),void o.CRVideo_InviteFail.callback(i,ICE_SDK_ERR(e.RspCode),n);console.crlog("[Invite] CRVideo_InviteSuccess.callback(".concat(i,",").concat(n,")")),o.CRVideo_InviteSuccess.callback(i,n)}),i}},{key:"acceptInvite",value:function(t,e,n){var i={module:"CallServer",cmd:"acceptInvite",inviteID:t,usrExtDat:e||""};try{console.crlog("[Invite] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){}c.callServerSendCMD(i).then(function(e){try{console.crlog("[Invite] CRVideo_AcceptInvite -- CMDRslt --\x3e acceptInvite: ".concat(JSON.stringify(e)))}catch(e){}if(0!==e.RspCode)return console.crlog("[Invite] CRVideo_AcceptInviteFail.callback(".concat(t,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")")),void o.CRVideo_AcceptInviteFail.callback(t,ICE_SDK_ERR(e.RspCode),n);console.crlog("[Invite] CRVideo_AcceptInviteSuccess.callback(".concat(t,",").concat(n,")")),o.CRVideo_AcceptInviteSuccess.callback(t,n)})}},{key:"rejectInvite",value:function(t,e,n){var i={module:"CallServer",cmd:"rejectInvite",inviteID:t,usrExtDat:e||""};try{console.crlog("[Invite] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){}c.callServerSendCMD(i).then(function(e){try{console.crlog("[Invite] CRVideo_RejectInvite -- CMDRslt --\x3e rejectInvite: ".concat(JSON.stringify(e)))}catch(e){}if(0!==e.RspCode)return console.crlog("[Invite] CRVideo_RejectInviteFail.callback(".concat(t,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")")),void o.CRVideo_RejectInviteFail.callback(t,ICE_SDK_ERR(e.RspCode),n);console.crlog("[Invite] CRVideo_RejectInviteSuccess.callback(".concat(t,",").concat(n,")")),o.CRVideo_RejectInviteSuccess.callback(t,n)})}},{key:"cancelInvite",value:function(t,e,n){var i={module:"CallServer",cmd:"cancelInvite",inviteID:t,usrExtDat:e||""};try{console.crlog("[Invite] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){}c.callServerSendCMD(i).then(function(e){try{console.crlog("[Invite] CRVideo_CancelInvite -- CMDRslt --\x3e cancelInvite: ".concat(JSON.stringify(e)))}catch(e){}if(0!==e.RspCode)return console.crlog("[Invite] CRVideo_CancelInviteFail.callback(".concat(t,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")")),void o.CRVideo_CancelInviteFail.callback(t,ICE_SDK_ERR(e.RspCode),n);console.crlog("[Invite] CRVideo_CancelInviteSuccess.callback(".concat(t,",").concat(n,")")),o.CRVideo_CancelInviteSuccess.callback(t,n)})}},{key:"notifyInviteIn",value:function(e){var t=e.inviteID,n=e.inviterUserID,i=e.usrExtDat;console.crlog("[Invite] CRVideo_NotifyInviteIn.callback(".concat(t,",").concat(n,",").concat(i,")")),o.CRVideo_NotifyInviteIn.callback(t,n,i)}},{key:"notifyInviteCanceled",value:function(e){var t=e.inviteID,n=ICE_SDK_ERR(e.failCode),i=e.usrExtDat;console.crlog("[Invite] CRVideo_NotifyInviteCanceled.callback(".concat(t,",").concat(n,",").concat(i,")")),o.CRVideo_NotifyInviteCanceled.callback(t,n,i)}},{key:"notifyInviteAccepted",value:function(e){var t=e.inviteID,n=e.usrExtDat;console.crlog("[Invite] CRVideo_NotifyInviteAccepted.callback(".concat(t,",").concat(n,")")),o.CRVideo_NotifyInviteAccepted.callback(t,n)}},{key:"notifyInviteRejected",value:function(e){var t=e.inviteID,n=ICE_SDK_ERR(e.failCode),i=e.usrExtDat;console.crlog("[Invite] CRVideo_NotifyInviteRejected.callback(".concat(t,",").concat(n,",").concat(i,")")),o.CRVideo_NotifyInviteRejected.callback(t,n,i)}}]),e}();o._crInviteClass=e,o.CRRTCInvite=new o._crInviteClass,o.CRVideo_InviteSuccess=new c.CbProxy("CRVideo_InviteSuccess"),o.CRVideo_InviteFail=new c.CbProxy("CRVideo_InviteFail"),o.CRVideo_AcceptInviteSuccess=new c.CbProxy("CRVideo_AcceptInviteSuccess"),o.CRVideo_AcceptInviteFail=new c.CbProxy("CRVideo_AcceptInviteFail"),o.CRVideo_RejectInviteSuccess=new c.CbProxy("CRVideo_RejectInviteSuccess"),o.CRVideo_RejectInviteFail=new c.CbProxy("CRVideo_RejectInviteFail"),o.CRVideo_CancelInviteSuccess=new c.CbProxy("CRVideo_CancelInviteSuccess"),o.CRVideo_CancelInviteFail=new c.CbProxy("CRVideo_CancelInviteFail"),o.CRVideo_NotifyInviteIn=new c.CbProxy("CRVideo_NotifyInviteIn"),o.CRVideo_NotifyInviteAccepted=new c.CbProxy("CRVideo_NotifyInviteAccepted"),o.CRVideo_NotifyInviteRejected=new c.CbProxy("CRVideo_NotifyInviteRejected"),o.CRVideo_NotifyInviteCanceled=new c.CbProxy("CRVideo_NotifyInviteCanceled")}(window,CRVideo,Ice),function(p,_,C){p.CRVideo_CreateMeeting=function(e,i){try{console.crlog("[MeetMgr] CRVideo_CreateMeeting(".concat(JSON.stringify(e),",").concat(i,")"))}catch(e){throw e}var t="".concat(_.protocol,"//").concat(_.webServerAddr,"/servlet/ClientCreateNetMeet"),r=!!e&&e.meetSubject||"H5_SDK_REGULAR_ROOM",n=!!e&&e.needPswd||0,o=!!e&&e.isRegular||1,c=_objectSpread({RequestId:C.generateUUID(),MeetSubject:encodeURI(r),IsRegular:o,NeedPswd:n},_.webLoginOAuth),a={};a=p._ReplaceObjParam(c,"UserPswd","******"),a=p._ReplaceObjParam(a,"Token","******"),console.crlog("[MeetMgr] WebAPI request url: "+t+", data:"+JSON.stringify(a)),_.meetSubject=r,_.ajax({url:t,timeout:3e4,data:c,dataType:"jsonp",jsonp:"CallBack",success:function(e){var t;if(p._ReplaceObjParam(e,"CRMTStr","******"),t=p._ReplaceObjParam(e,"MeetPswd","******"),console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request success, result: "+JSON.stringify(t)),0==e.RspCode){var n={ID:e.MeetID,pswd:e.MeetPswd,subject:r,pubMeetUrl:e.PublicUrl};_.pubMeetUrl=n.publicUrl,p.postCmd.meetJson=n,console.crlog("[MeetMgr] CreateMeetingSuccess! meetID: "+n.ID);try{console.crlog("[MeetMgr] CRVideo_CreateMeetingSuccess.callback(".concat(JSON.stringify(p._ReplaceObjParam(n,"pswd","******")),",").concat(i,")"))}catch(e){throw e}p.CRVideo_CreateMeetingSuccess.callback(n,i)}else{console.crlog("[MeetMgr] CreateMeetingFail! ResJson: ".concat(JSON.stringify(e)));try{console.crlog("[MeetMgr] CRVideo_CreateMeetingFail.callback(".concat(WEB_SDK_ERR(e.RspCode),",").concat(i,")"))}catch(e){throw e}p.CRVideo_CreateMeetingFail.callback(WEB_SDK_ERR(e.RspCode),i)}},error:function(){console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request fail!");try{console.crlog("[MeetMgr] CRVideo_CreateMeetingFail.callback(202,".concat(i,")"))}catch(e){throw e}p.CRVideo_CreateMeetingFail.callback(202,i)}})},p.CRVideo_EnterMeeting2=function(e,t,n,i){console.crlog("[MeetMgr] CRVideo_EnterMeeting2(".concat(e,",").concat(t,",").concat(n,",").concat(i,")")),CRVideo_EnterMeeting(e,"",t,n,i)},p.CRVideo_EnterMeeting=function(l,d,u,f,h){function t(){var e={};try{e=JSON.parse(sessionStorage.getItem("CRWebRTCSDK_UserHistory"))}catch(e){throw e}var r=[];if(e)if(null==(r=e[l]))(e={})[l]=[],sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(e));else{var t=r.find(function(e){return e.userId==u&&e.timestamp}),n=(new Date).getTime();if(t&&t.timestamp&&t.timestamp+15e5>n){_.meetingID=+l,_.LIVE_INFO={},_.LIVE_INFO.dataStr=t.dataStr;var i=setInterval(function(){_.meetingExiting?console.crlog("[MeetMgr] meeting exiting.... waiting...."):(console.crlog("[MeetMgr] meeting exiting complete......"),clearInterval(i),_.initweb())},100);return}}else(e={})[l]=[],sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(e));var o="".concat(_.protocol,"//").concat(_.webServerAddr,"/servlet/joinMeetingAPI");console.crlog("[MeetMgr] CR.EnterMeeting begin： "+l);var c=_objectSpread({ClientVer:_.sdkver,OEMKey:"CLOUDROOM",PRODUCT:"H5SDK",RequestId:C.generateUUID(),MeetID:l,MeetPswd:d,NickName:encodeURI(f),UserType:4,MeetWay:0},_.webLoginOAuth),a={};a=p._ReplaceObjParam(c,"UserPswd","******"),a=p._ReplaceObjParam(a,"Token","******"),a=p._ReplaceObjParam(a,"MeetPswd","******"),console.crlog("[MeetMgr] WebAPI request url: "+o+", data:"+JSON.stringify(a));var s={_data_:JSON.stringify(c)};_.ajax({url:o,timeout:3e4,data:s,dataType:"jsonp",jsonp:"jsoncallback",success:function(e){if(console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request success, result: "+JSON.stringify(e)),0==e.RspCode){_.meetingID=+l,_.LIVE_INFO={},_.LIVE_INFO.dataStr=e.CRMTStr.replace(/CRMT[\.|\w]{0,}:/,"");var t=JSON.parse(sessionStorage.getItem("CRWebRTCSDK_UserHistory"));r=t[l];var n={userId:u,nickname:f,dataStr:_.LIVE_INFO.dataStr,timestamp:(new Date).getTime(),termId:null,detail:"",userCode:"",openId:""};r.push(n),t[l]=r,sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(t));var i=setInterval(function(){_.meetingExiting?console.crlog("[MeetMgr] meeting exiting.... waiting...."):(console.crlog("[MeetMgr] meeting exiting complete......"),clearInterval(i),_.initweb())},100)}else console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.callback(".concat(WEB_SDK_ERR(e.RspCode),",").concat(h,")")),CRVideo_EnterMeetingRslt.callback(WEB_SDK_ERR(e.RspCode),h)},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request fail!"),console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.callback(202,".concat(h,")")),CRVideo_EnterMeetingRslt.callback(202,h)}})}console.crlog("[MeetMgr] CRVideo_EnterMeeting(".concat(l,",***,").concat(u,",").concat(f,",").concat(h,")")),_.enterMeetingCookie=h,_.destroyMeetingConnect(),_.leftMeetingFun(),1===_.loginAuthFlag?(window.CRRTCIMMsg.initData(),window.CRRTCTermMsg.initData(),window.CRRTCAudio.initData(),window.CRRTCVideo.initData(),window.CRRTCLocalVideo.initData(),window.CRRTCRemoteVideo.initData(),window.CRRTCUI.initData(),window.CRRTCRecord.initData(),window.CRRTCScreen.initData(),window.CRRTCMedia.initData(),_.isWebRTC?navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(console.crlog("[MeetMgr] EnumerateDevices on enterMeeting..."),navigator.mediaDevices.enumerateDevices().then(function(e){console.crlog("[MeetMgr] EnumerateDevices success:".concat(JSON.stringify(e))),_.updateDevicesList(e),t()}).catch(function(e){throw console.crlog("navigator.mediaDevices.enumerateDevices error: ".concat(e)),console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.callback(8003,".concat(h,")")),CRVideo_EnterMeetingRslt.callback(8003,h),e})):(console.crlog("[MeetMgr] navigator.mediaDevices is undefined!!! protocal: ".concat(window.location.protocol)),console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.callback(8004,".concat(h,")")),CRVideo_EnterMeetingRslt.callback(8004,h)):t()):CRVideo_EnterMeetingRslt.callback(7,h)},p.CRVideo_DestroyMeeting=function(e,t,n){console.crlog("[MeetMgr] CRVideo_DestroyMeeting(".concat(e,",").concat(t,",").concat(n,")"));var i="".concat(_.protocol,"//").concat(_.webServerAddr,"/api/servlet/closeConf"),r=_objectSpread({RequestId:C.generateUUID(),MeetID:e,OEMKey:"CLOUDROOM",ClientVer:""},_.webLoginOAuth),o={};o=_ReplaceObjParam(r,"UserPswd","******"),o=_ReplaceObjParam(o,"Token","******"),console.crlog("[MeetMgr] WebAPI request url: "+i+", data:"+JSON.stringify(o));var c={_data_:JSON.stringify(r)};_.ajax({url:i,timeout:3e4,data:c,dataType:"jsonp",jsonp:"jsoncallback",success:function(e){console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request success: "+JSON.stringify(e)),n?(console.crlog("[MeetMgr] CRVideo_StopMeetingRslt.callback(".concat(WEB_SDK_ERR(e.RspCode),",").concat(t,")")),CRVideo_StopMeetingRslt.callback(WEB_SDK_ERR(e.RspCode),t)):(console.crlog("[MeetMgr] CRVideo_DestroyMeetingRslt.callback(".concat(WEB_SDK_ERR(e.RspCode),",").concat(t,")")),CRVideo_DestroyMeetingRslt.callback(WEB_SDK_ERR(e.RspCode),t))},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request fail!"),n?(console.crlog("[MeetMgr] CRVideo_StopMeetingRslt.callback(202,".concat(t,")")),CRVideo_StopMeetingRslt.callback(202,t)):(console.crlog("[MeetMgr] CRVideo_DestroyMeetingRslt.callback(202,".concat(t,")")),CRVideo_DestroyMeetingRslt.callback(202,t))}})},p.CRVideo_StopMeeting=function(e,t){console.crlog("[MeetMgr] CRVideo_StopMeeting(".concat(e,",").concat(t,")")),p.CRVideo_DestroyMeeting(e,t,!0)},p.CRVideo_CreateMeetingSuccess=new _.CbProxy("CRVideo_CreateMeetingSuccess"),p.CRVideo_CreateMeetingFail=new _.CbProxy("CRVideo_CreateMeetingFail"),p.CRVideo_EnterMeetingRslt=new _.CbProxy("CRVideo_EnterMeetingRslt")}(window,CRVideo,Ice),CRVideo.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)},CRVideo.ic=null,CRVideo.webServerAddr=null,CRVideo.proxy=null,CRVideo.logproxy=null,CRVideo.queuingID=null,CRVideo.sessionID=null,CRVideo.cookie="",CRVideo.MeetInfoObj=null,CRVideo.CallID="",CRVideo.HandErrTimes=0,CRVideo.loginAuthFlag=0,CRVideo.meetSubject="test",CRVideo.IceAddr=null,CRVideo.protocol="https:",CRVideo.logServer=null,CRVideo.logUUID="";var postCmd={config:{HandSharkTime:1e4}};(function(o,c){function a(){return this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.ACM.Server","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),Ice.initialize(this._initData)}function n(){console.crlog("[Callsvr] destroy Crux Connect on IceCruxCreate..."),l();var e,t,n=o.CallServerInfo,i=n.callSvrList,r=new Array;r=-1<n.callSvrList.indexOf(";")?i.split(";")[0]:i,(e=0==CRVideo.isHttp?Cr.Utils.parse_url("https://"+r):Cr.Utils.parse_url("http://"+r))?(t=0==CRVideo.isHttp?"jserver:wss":"jserver:ws",s.crux=a(),e.path&&(t+=" -r "+e.path),e.host&&(t+=" -h "+e.host),e.port?t+=" -p "+e.port:0==CRVideo.isHttp?t+=" -p 443":t+=" -p 80",console.crlog("[Callsvr] "+t),CRVideo.proxy=s.crux.stringToProxy(t),c.ic=s.crux,CRVideo_SetAdapter().then(CRVideo.__LoginCallserver).catch(function(e){CRVideo_LoginFail.callback(204,CRVideo.LoginParam.cookie)})):console.error("[Callsvr] error: jserver parseUrl")}var s={},i=["Ice::ConnectionLostException","Ice::ConnectFailedException"],l=function(){s.crux&&s.crux.destroy&&(clearTimeout(c.HandShark),console.crlog("[Callsvr] Websockt destroy Crux connect..."),s.crux.destroy(),clearInterval(c.resetAdapterTimer),c.callserverCastPrx=null,setTimeout(function(){c.callserverExiting=!1},100))},d=function(){s.Log&&s.Log.destroy&&(console.crlog("[Callsvr] Websockt destroy Log connect..."),s.Log.destroy(),c.logproxy=null)};o.IceCruxCreate=n,c.destroyCruxConnect=l,o.IceLogCreate=function(){console.crlog("[Callsvr] destroy Log Connect on IceLogCreate..."),d();var e=o.CallServerInfo,t=e.uploadUrl.split(";")[0]?e.uploadUrl.split(";")[0]:e.uploadUrl.split(";")[1];if("https:"==CRVideo.protocol)var n=Cr.Utils.parse_url("https://"+t);else n=Cr.Utils.parse_url("http://"+t);if(n){if(0==CRVideo.isHttp)var i="Log.ClientLogServer:wss";else i="Log.ClientLogServer:ws";n.path&&(i+=" -r "+n.path),n.host&&(i+=" -h "+n.host),n.port?i+=" -p "+n.port:0==CRVideo.isHttp?i+=" -p 443":i+=" -p 80",console.crlog("[Callsvr] logserver: "+i),s.Log=a(),CRVideo.logproxy=s.Log.stringToProxy(i),CRVideo_LoggerAdapter();var r="";window.sessionStorage&&((r=window.sessionStorage.getItem("logUUID"))||(r=Ice.generateUUID(),window.sessionStorage.setItem("logUUID",r))),c.logUUID=r,null==CRVideo.isUploadLog&&(CRVideo.isUploadLog=0),c.logIceConnect=s.Log,CRVideo_UploadingReport()}else console.error("[Callsvr] error: ClientLogServer parseUrl")},c.destroyLogConnect=d,o.destroyLogConnect=d,o.resetCruxConnect=function(e){var t=e.toString();i.find(function(e){return-1!=t.indexOf(e)})&&(console.crlog("[Callsvr] callserver loginAgain..."),n())},o.errorLoginAgain=i})(postCmd,CRVideo),CRVideo.ajax=function(t){var n=t.dataType||"json",e=t.type||"get",i=t.data||{};if("jsonp"==n){var r=document.getElementsByTagName("body")[0],o=t.url||"",c="CRjsonp_"+(new Date).getTime();t.jsonp?i[t.jsonp]=c:i.callback=c;var a="";for(var s in i)a+=encodeURIComponent(s)+"="+encodeURIComponent(i[s])+"&";o+="?"+a;var l=document.createElement("script");l.src=o,r.appendChild(l),window[c]=function(){t.success&&t.success.apply(this,arguments),r.removeChild(l),window[c]=null,delete window[c]},l.onerror=function(){t.error&&t.error.apply(this,arguments),console.error("[Callsvr] server error:"+o),r.removeChild(l),window[c]=null,delete window[c]}}else{if(xhr=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"GET"==e||"get"==e){var d=function(e){if("string"==typeof e)return e;var t=[];for(var n in e){var i=encodeURIComponent(e[n]);t.push(n+"="+i)}return t.join("&")}(i);o=t.url+"?"+d;try{xhr.open(e,o,null==t.async||t.async),xhr.send(null)}catch(e){t.error&&t.error(xhr)}}else if("POST"==e||"post"==e){d=function(e){if("string"==typeof e)return e;var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}(i);try{xhr.open(e,t.url,null==t.async||t.async),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),xhr.send(d)}catch(e){t.error&&t.error(xhr)}}xhr.onreadystatechange=function(){if(4==xhr.readyState)if(200==xhr.status&&t.success)if("text"==n)t.success(xhr.responseText,"success");else{try{var e=JSON.parse(xhr.responseText)}catch(e){throw CRVideo_LoginFail.callback(202,CRVideo.LoginParam.cookie),e}t.success(e||xhr.responseText)}else t.error&&t.error(xhr)}}};var _CRVideo_CmdCallback={NotifyQueueStatus:CRVideo.queCallback.NotifyQueueStatus,NotifyPosition:CRVideo.queCallback.NotifyPosition,AssignUser:CRVideo.queCallback.AssignUser,AssignCancel:CRVideo.queCallback.AssignCancel,ServerAccept:CRVideo.callSvrCallback.ServerAccept,ServerDecline:CRVideo.callSvrCallback.ServerDecline,ServerCall:CRVideo.callSvrCallback.ServerCall,ServerPushUserStatus:CRVideo.callSvrCallback.ServerPushUserStatus,ServerReleaseCall:CRVideo.callSvrCallback.ServerReleaseCall,ServerCancelCall:CRVideo.callSvrCallback.ServerCancelCall,ServerKickoutUser:CRVideo.loginCallback.ServerKickoutUser,invite:CRRTCInvite.ICECallback.invite,acceptInvite:CRRTCInvite.ICECallback.acceptInvite,rejectInvite:CRRTCInvite.ICECallback.rejectInvite,cancelInvite:CRRTCInvite.ICECallback.cancelInvite,inviteResult:CRRTCInvite.ICECallback.inviteResult},_CRVideo_webSendCmdRes={Login:CRVideo.loginCallback.Login,GetServiceData:CRVideo.queCallback.GetServiceData,GetQueueStatus:CRVideo.queCallback.GetQueueStatus,UserEnter:CRVideo.queCallback.UserEnter,UserLeave:CRVideo.queCallback.UserLeave,AgentEnter:CRVideo.queCallback.AgentEnter,AgentLeave:CRVideo.queCallback.AgentLeave,AssignResponse:CRVideo.queCallback.AssignResponse,StartStatusPush:CRVideo.callSvrCallback.StartStatusPush,StopStatusPush:CRVideo.callSvrCallback.StopStatusPush,GetUserStatus:CRVideo.callSvrCallback.GetUserStatus,GetUserServiceStatus:CRVideo.queCallback.GetUserServiceStatus,GetAgentServiceStatus:CRVideo.queCallback.GetAgentServiceStatus,ClientCustomStatusUpdate:CRVideo.callSvrCallback.ClientCustomStatusUpdate,RequestUser:CRVideo.queCallback.RequestUser,ClientCall:CRVideo.callSvrCallback.ClientCall,ClientAccept:CRVideo.callSvrCallback.ClientAccept,ClientDecline:CRVideo.callSvrCallback.ClientDecline,ClientReleaseCall:CRVideo.callSvrCallback.ClientReleaseCall,Logout:CRVideo.loginCallback.Logout,ShakeHand:function(e,t,n){0==e.RspCode?CRVideo_ShakeHandRslt.callback(e,n):console.crlog("[Callsvr] CRVideo_ShakeHandRslt"+e.RspCode)}},bufferHandler={data:{sendTask:[]},receive:function(e,t,n){var i=0,r=t[i++],o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],c=CRUtils.Uint8ArrToChar(t.slice(i,i+=o));if(0===r){console.crlog("[Callsvr] Received bufferData, received header data...");var a=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],s=CRUtils.Uint8ArrToChar(t.slice(i,i+=a)),l=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++];this.data[c]={type:r,fileName:s,dataSize:l,dataBurst:[]}}else if(1===r){this.isStarting||(console.crlog("[Callsvr] Received bufferData, start to recive part data..."),this.isStarting=!0);var d=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],u=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],f=Array.prototype.concat.apply([],t.slice(i,u+i));this.data[c].type=r,this.data[c].dataBurst.push({start:d,length:u,data:f})}else if(2===r){console.crlog("[Callsvr] Received bufferData, transmit finished...");var h=this.data[c].dataBurst;h.sort(function(e,t){return e.start-t.start});var p=0,_=[];console.crlog("[Callsvr] Received bufferData, start to concat...");for(var C=0;C<h.length;C++)p+=h[C].length,_=_.concat(h[C].data);if(_=CRUtils.Uint8ArrToChar(_),p===this.data[c].dataSize)try{console.crlog("[Callsvr] CRVideo_NotifyBufferData.callback(".concat(e.sourceUserId,",bufferData)")),CRVideo_NotifyBufferData.callback(e.sourceUserId,_)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},receiveFile:function(e,t,n){var i=0,r=t[i++],o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],c=CRUtils.Uint8ArrToChar(t.slice(i,i+=o));if(0===r){console.crlog("[Callsvr] Received fileData, received header data...");var a=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],s=CRUtils.Uint8ArrToChar(t.slice(i,i+=a)).split("\\").pop(),l=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++];this.data[c]={type:r,fileName:s,dataSize:l,dataBurst:[]}}else if(1===r){this.isStarting||(console.crlog("[Callsvr] Received fileData, start to recive part data..."),this.isStarting=!0);var d=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],u=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],f=Array.prototype.concat.apply([],t.slice(i,u+i));this.data[c].type=r,this.data[c].dataBurst.push({start:d,length:u,data:f})}else if(2===r){console.crlog("[Callsvr] Received fileData, transmit finished...");var h=this.data[c].dataBurst;h.sort(function(e,t){return e.start-t.start});var p=0,_=[];console.crlog("[Callsvr] Received fileData, start to concat...");for(var C=0;C<h.length;C++)p+=h[C].length,_=_.concat(h[C].data);if(p===this.data[c].dataSize)try{this.writeFile(e.sourceUserId,new Uint8Array(_).buffer,this.data[c].fileName,c)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},writeFile:function(e,t,n){var i=CRUtils.getFileType(n),r=new Blob([t]);window.URL.createObjectURL(r);console.crlog("[Callsvr] Recevied file success, fileName: ".concat(n,", fileType: ").concat(i,", size: ").concat(parseInt(r.size/1024),"KB")),console.crlog("[Callsvr] CRVideo_NotifyFileData.callback(".concat(e,", ").concat(t,", ").concat(n,")")),CRVideo_NotifyFileData.callback(e,t,n)},sendFile:function(e,t,n,i,l){var d=102400,u=n,f=CRUtils.splitCutArr(u,d),r=u.length,o=CRUtils.charToUint8Arr(t),c=o.length,h=new CommonU8,a=h.create(0,8+o.length),s=a.length-8-o.length;a[s++]=(4278190080&c)>>24,a[s++]=(16711680&c)>>16,a[s++]=(65280&c)>>8,a[s++]=255&c;for(var p=0;p<o.length;p++)a[s++]=o[p];a[s++]=(4278190080&r)>>24,a[s++]=(16711680&r)>>16,a[s++]=(65280&r)>>8,a[s++]=255&r;var _={cmd:"SendFile",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};function C(e){bufferHandler.data.sendTask.forEach(function(e){e.uuid==i&&(e.state=3)}),console.crlog("[Callsvr] CRVideo_SendFileRslt.callback(".concat(i,",1,").concat(l,")")),CRVideo_SendFileRslt.callback(i,e||1,l)}bufferHandler.data.sendTask.forEach(function(e){e.uuid==i&&(e.state=1)}),CRVideo.webSendBuffer(_,a,function(a,e){if(0===e){var o=0;s(a)}else C(e);function s(t,e){if(e&&0!==e)C(e);else{var n=bufferHandler.data.sendTask.find(function(e){return e.uuid==t}),i=f.shift();if(i)1==n.state?(function(e,t){var n=e*d,i=f.length?d:u.length%d,r=h.create(1,8+i),o=r.length-(8+i);r[o++]=(4278190080&n)>>24,r[o++]=(16711680&n)>>16,r[o++]=(65280&n)>>8,r[o++]=255&n,r[o++]=(4278190080&i)>>24,r[o++]=(16711680&i)>>16,r[o++]=(65280&i)>>8,r[o++]=255&i;for(var c=0;c<t.length;c++)r[o++]=t[c];CRVideo_SendProgress.callback(a,n,u.length,l),CRVideo.webSendBuffer(_,r,s,a,l)}(o,i),o++):(console.crlog("[Callsvr] CRVideo_SendFileRslt.callback(".concat(t,",1199,").concat(l,")")),CRVideo_SendFileRslt.callback(t,1199,l));else{var r=h.create(2,0);CRVideo.webSendBuffer(_,r,function(t,e){0===e?(bufferHandler.data.sendTask.forEach(function(e){e.uuid==t&&(e.state=2)}),console.crlog("[Callsvr] CRVideo_SendFileRslt.callback(".concat(t,",0,").concat(l,")")),CRVideo_SendFileRslt.callback(t,0,l)):C(e)},t,l)}}}},i,l)}};function Utf8ArrayToStr(e){var t,n,i,r,o,c;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],c=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&c)<<0)}return t}var CmdI=Ice.Class(SendCmd.Cmd,{sendCmd_async:function(e,t){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var n=JSON.parse(t),i=n.cmd;n.module;if(null!=i){console.crlog("[Callsvr] Received cmd callback:".concat(i," --\x3e ").concat(JSON.stringify(n)));try{_CRVideo_CmdCallback[i](n)}catch(e){throw console.crlog(e),console.error(e),e}}},sendBuffer_async:function(e,t,n){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var i=JSON.parse(t);if("SendCMD"==i.cmd){var r=Utf8ArrayToStr(n);console.crlog("[Callsvr] CRVideo_NotifyCmdData.callback(".concat(i.sourceUserId,", ").concat(r,");")),CRVideo_NotifyCmdData.callback(i.sourceUserId,r)}else"SendBuffer"==i.cmd?bufferHandler.receive(i,n,e):"SendFile"==i.cmd&&bufferHandler.receiveFile(i,n,e)}}),LoggerI=Ice.Class(LogSpace.ClientLogServer,{log:function(e){console.crlog("[Callsvr] log:"+e)},logFatal:function(e){console.crlog("[Callsvr] logFatal:"+e)},usrReport:function(e){console.crlog("[Callsvr] usrReport:"+e)},logDetail:function(e){console.crlog("[Callsvr] logDetail:"+e)}}),_resetCruxConnectTimes=0,CRVideo_SetAdapter=function(){return new Promise(function(t,n){Ice.Promise.try2(function(){SendCmd.CmdPrx.checkedCast(CRVideo.proxy).then(function(e){CRVideo.callserverCastPrx=e,console.crlog("[Callsvr] Ice set adapter success!"),CRVideo.ic.createObjectAdapter("").then(function(e){(CRVideo.cruxAdapter=e).add(new CmdI,CRVideo.ic.stringToIdentity("jclient")),e.activate();var t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)}),t()}).exception(function(e){console.crlog("[Callsvr] !!!Callserver checkedCast fail. is: "+e),n()})}).exception(function(e){n(),console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(CRVideo.destroyCruxConnect).finally(function(){process.exit(1)})})})};function CommonU8(){this.uuid=Ice.generateUUID(),this.CommonArray=[],this.init()}CRVideo_LoggerAdapter=function(){Ice.Promise.try2(function(){CRVideo.ServerLogger=LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then(function(n){CRVideo.logIceConnect.createObjectAdapter("").then(function(e){CRVideo.logServerPrx=n,(CRVideo.logServerAdapter=e).add(new LoggerI,Ice.stringToIdentity("jclient"));var t=CRVideo.logServerPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] log ice_getCachedConnection is null!"),!1;t.setAdapter(e)})})}).exception(function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(postCmd.destroyLogConnect).finally(function(){process.exit(1)})})},CommonU8.prototype.init=function(){var e=0,t=this.uuid.length;this.CommonArray[e++]=0,this.CommonArray[e++]=(4278190080&t)>>24,this.CommonArray[e++]=(16711680&t)>>16,this.CommonArray[e++]=(65280&t)>>8,this.CommonArray[e++]=255&t;for(var n=new TextEncoder("utf-8").encode(this.uuid),i=0;i<t;i++)this.CommonArray[e++]=n[i]},CommonU8.prototype.create=function(e,t){for(var n=new Uint8Array(this.CommonArray.length+t),i=0;i<this.CommonArray.length;i++)n[i]=this.CommonArray[i];return n[0]=e,n},CommonU8.prototype.getUUID=function(){return this.uuid};var CRVideo_SendBuffer=function(e,t,l){function d(e){bufferHandler.data.sendTask.forEach(function(e){e.uuid==r&&(e.state=3)}),console.crlog("[Callsvr] CRVideo_SendBuffer finished： "+JSON.stringify(_)),CRVideo_SendBufferRslt.callback(r,e||1,l)}var u=102400,f=new TextEncoder("utf-8").encode(t.toString()),h=function(e,t){for(var n=0,i=[];n<e.length;)i.push(e.slice(n,n+=t));return i}(f,u),n=f.length,p=new CommonU8,i=p.create(0,8),r=p.getUUID();bufferHandler.data.sendTask.push({uuid:r,state:0});var o=i.length-8;i[o++]=i[o++]=i[o++]=i[o++]=0,i[o++]=(4278190080&n)>>24,i[o++]=(16711680&n)>>16,i[o++]=(65280&n)>>8,i[o++]=255&n;var _={cmd:"SendBuffer",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};return bufferHandler.data.sendTask.forEach(function(e){e.uuid==r&&(e.state=1)}),CRVideo.webSendBuffer(_,i,function(a,e){if(0===e){var r=0;s(a)}else d(e);function s(t){var e=bufferHandler.data.sendTask.find(function(e){return e.uuid==t}),n=h.shift();if(n)1==e.state?(function(e,t){var n=e*u,i=h.length?u:f.length%u,r=p.create(1,8+i),o=r.length-(8+i);r[o++]=(4278190080&n)>>24,r[o++]=(16711680&n)>>16,r[o++]=(65280&n)>>8,r[o++]=255&n,r[o++]=(4278190080&i)>>24,r[o++]=(16711680&i)>>16,r[o++]=(65280&i)>>8,r[o++]=255&i;for(var c=0;c<t.length;c++)r[o++]=t[c];CRVideo_SendProgress.callback(a,n,f.length,l),CRVideo.webSendBuffer(_,r,function(e,t){0===t?s(e):d(t)},a,l)}(r,n),r++):(console.crlog("[Callsvr] CRVideo_SendBufferRslt.callback(".concat(t,",1199,").concat(l,")")),CRVideo_SendBufferRslt.callback(t,1199,l));else{var i=p.create(2,0);CRVideo.webSendBuffer(_,i,function(t,e){0===e?(bufferHandler.data.sendTask.forEach(function(e){e.uuid==t&&(e.state=2)}),CRVideo_SendBufferRslt.callback(t,0,l)):d(e)},t,l)}}},r,l),r},CRVideo_SendFile=function(n,e,i){console.crlog("[Callsvr] CRVideo_SendFile(".concat(n,",").concat(e.name,")"));var r=Ice.generateUUID();try{var o=e.name,c=new FileReader;c.readAsArrayBuffer(e),c.onload=function(e){var t=new Int8Array(c.result);bufferHandler.data.sendTask.push({uuid:r,state:0}),bufferHandler.sendFile(n,o,t,r,i)}}catch(e){throw console.crlog("[Callsvr] [error] ".concat(e)),e}return r},CRVideo_SendCmd=function(e,t,n){try{console.crlog("[Callsvr] CRVideo_SendCmd(".concat(e,",").concat(t,",").concat(n,")"))}catch(e){throw e}var i={cmd:"SendCMD",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e},r=new TextEncoder("utf-8").encode(t.toString()),o=Ice.generateUUID();return CRVideo.webSendBuffer(i,r,CRVideo_SendCmdRslt.callback,o,n),o},CRVideo_CancelSend=function(t){bufferHandler.data.sendTask.forEach(function(e){e.uuid==t&&(e.state=0)})};CRVideo.webSendBuffer=function(t,e,n,i,r){Ice.Promise.try2(function(){CRVideo.callserverCastPrx&&(CRVideo.ic.createObjectAdapter("").then(function(e){(CRVideo.cruxAdapter=e).add(new CmdI,CRVideo.ic.stringToIdentity("jclient")),e.activate();var t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)}),CRVideo.callserverCastPrx.sendBuffer(JSON.stringify(t),e).then(function(e){void 0!==n&&n(i,CRVideo_ERR_DEF.NOERR,r);t.cmd}).exception(function(e){var t=e.reason;void 0!==n&&(t.includes("not found")?n(i,CRVideo_ERR_DEF.SENDDATA_TARGETINVALID,r):n(i,CRVideo_ERR_DEF.UNKNOWERR,r)),console.crlog("[Callsvr] ex = "+e),console.error(e),console.crlog("[Callsvr] reason = "+e.reason)}))}).exception(function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(CRVideo.destroyCruxConnect).finally(function(){process.exit(1)})})},CRVideo.webSendcmd=function(i,r,o){var c=i.cmd;i.module;CRVideo.callserverCastPrx&&CRVideo.callserverCastPrx.sendCmd(JSON.stringify(i)).then(function(e){var t=CRVideo.callserverCastPrx.ice_getCachedConnection();null!=t?t.setAdapter(CRVideo.cruxAdapter):console.crlog("[Callsvr] callserver ice_getCachedConnection is null!");var n=JSON.parse(e);0!=n.RspCode&&console.crlog("[Callsvr] !!!error. sendcmdName: "+c+", RspCode: "+n.RspCode+", RspDesc: "+n.RspDesc),_CRVideo_webSendCmdRes[c]&&_CRVideo_webSendCmdRes[c](n,i,r,o)}).exception(function(e){console.crlog("[Callsvr] !!!Callserver send cmd uncheckedCast fail. error: ".concat(e.error,", reason: ").concat(e.reason)),3!==e.error&&1006!==e.error||CRVideo.LineOffHandler(204),console.error(e),_CRVideo_webSendCmdRes[c]&&_CRVideo_webSendCmdRes[c]({RspCode:204},i,r,o)})},CRVideo.webLogDetail=function(t,n,i){Ice.Promise.try2(function(){LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then(function(e){e.logDetail(t,n,i).then(function(e){console.crlog("[LOG] Log uploading success!")})}).exception(function(e){console.crlog("[LOG] !!! log checkedCast fail. is: "+e),-1!=postCmd.errorLoginAgain.indexOf(e.toString())&&postCmd.IceLogCreate()})}).exception(function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try(function(){CRVideo.destroyCruxConnect}).finally(function(){process.exit(1)})})},CRVideo_ShakeHand=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){if(clearTimeout(CRVideo.HandShark),CRVideo.HandShark=setTimeout(CRVideo_ShakeHand,postCmd.config.HandSharkTime),120<CRVideo.HandErrTimes)CRVideo.HandErrTimes=0,console.crlog("[Callsvr] HandErrTimes error: Abnormal dropped!!!!!"),CRVideo.LineOffHandler(CRVideo_ERR_DEF.SOCKETEXCEPTION);else{var e={},t=(new Date).getTime();e=CRVideo.CallID?{cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID,callID:CRVideo.CallID}:{cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID},CRVideo.webSendcmd(e,t),CRVideo.HandErrTimes=CRVideo.HandErrTimes+1}}),CRVideo_ShakeHandRslt.callback=function(e,t){var n=(new Date).getTime()-t;0==e.RspCode?(console.crlog("[Callserver] Callserver shakeHand success, delay: ".concat(n,"ms")),CRVideo.HandErrTimes=CRVideo.HandErrTimes-1):console.crlog("[Callserver] Callserver shakeHand fail: ".concat(JSON.stringify(e),","))},CRVideo.callServerSendCMD=function(i){return new Promise(function(t,n){Ice.Promise.try2(function(){if(CRVideo.callserverCastPrx){var e=JSON.stringify(Object.assign(i,{sessionID:CRVideo.sessionID}));CRVideo.callserverCastPrx.sendCmd(e).then(function(e){t(JSON.parse(e))}).exception(function(e){console.crlog("[Callserver] SendCMD Fail, cmd: ".concat(i.cmd)),console.crlog(e),e&&3===e.error?CRVideo.LineOffHandler(204):n(e)})}else console.crlog("[Callserver] Did not login callserver!"),n("[Callserver] Did not login callserver!")}).exception(function(e){console.crlog(e.toString()),n("[Error] Callserver connect Fail, ".concat(e.toString())),Ice.Promise.try(function(){})})})},function(f,e,n){var r=function(){function t(e){_classCallCheck(this,t),this._id=n.generateUUID(),this._height="100%",this._width="100%",this._left="0px",this._top="0px",this._handler=null,this.initDOM(e)}return _createClass(t,[{key:"initDOM",value:function(){var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._handler=e;var t=document.createElement("div");t.style.position="absolute",t.style.left="20px",t.style.top="20px",t.style.padding="0 10px",t.style.height="30px",t.style.lineHeight="30px",t.style.color="#fff",t.style.fontSize="12px",t.style.zIndex="2",t.style.fontWeight="800",t.style.backgroundColor="rgb(0, 0, 0)",t.style.borderRadius="15px",t.style.filter="alpha(opacity:50)",t.style.display="none",this._handler.appendChild(t),this._nicknameEle=t;var n=document.createElement("video");n.style.width="100%",n.style.height="100%",n.autoplay=!0,n.muted=!0,n.playsInline=!0,n.playsinline=!0,"iOS"!=CRBrowser.curBrowserCfg.platform&&"iOS_14"!=CRBrowser.curBrowserCfg.platform||(n.controls=!0),this._handler.appendChild(n),this._videoEle=n}},{key:"id",value:function(e){if(void 0===e)return this._id;this._id=e}},{key:"height",value:function(e){if(void 0===e)return this._handler.style.height;this._handler.style.height=e}},{key:"width",value:function(e){if(void 0===e)return this._handler.style.width;this._handler.style.width=e}},{key:"left",value:function(e){if(void 0===e)return this._handler.style.left;this._handler.style.left=e}},{key:"top",value:function(e){if(void 0===e)return this._handler.style.top;this._handler.style.top=e}},{key:"handler",value:function(){return this._handler}},{key:"show",value:function(){this._handler.style.display="block","video"==this.type&&CRRTCRemoteVideo.updateSubscribeVideo()}},{key:"hide",value:function(){this._handler.style.display="none","video"==this.type&&CRRTCRemoteVideo.updateSubscribeVideo()}},{key:"isPicEmpty",value:function(){}},{key:"setNickNameStyle",value:function(e){try{console.crlog("[UI] Container:".concat(this._id,", setNickNameStyle(").concat(JSON.stringify(e),")"))}catch(e){throw e}this.nickNameStyle=e;var t=this._nicknameEle;if(null!=t&&e&&"object"==_typeof2(e))for(var n in e)t.style[n]=e[n]}},{key:"setNickNameContent",value:function(e){console.crlog("[UI] Container:".concat(this._id,", setNickNameContent(").concat(e,")"));var t=this._nicknameEle;null!=t&&(t.innerHTML=e),this.nickNameContent=e}},{key:"setVisibleNickName",value:function(e){try{console.crlog("[UI] Container:".concat(this._id,", setVisibleNickName(").concat(e,")"))}catch(e){throw e}var t=this._nicknameEle;t.style.display=e?"block":"none"}},{key:"setVideoProp",value:function(e){try{var t=this._videoEle;if(e)for(var n in e)if("style"==n)for(var i in e[n])t.style[i]=e[n][i];else t[n]=e[n]}catch(e){throw e}}},{key:"dblClickFullScreen",value:function(e){var t=this._videoEle,n=!1;return void 0!==e?e&&0==t.controls?(t.ondblclick=function(){this.webkitRequestFullScreen&&0==t.controls?this.webkitRequestFullScreen():this.mozRequestFullScreen&&0==t.controls?this.mozRequestFullScreen():this.msRequestFullScreen&&0==t.controls&&this.msRequestFullScreen()},n=!0):e?t.controls&&(n=!1):(t.ondblclick=null,n=!1):n=!!t.ondblclick,n}},{key:"savePic",value:function(e){var t="png";if(e){switch(e){case-1<e.indexOf(".png"):t="png";break;case-1<e.indexOf(".jpg"):t="jpg";break;case-1<e.indexOf(".jpeg"):t="jpeg";break;case-1<e.indexOf(".bmp"):t="bmp";break;case-1<e.indexOf(".gif"):t="gif";break;default:t="png"}var n=this._videoEle,i=f.canvas=document.createElement("canvas");i.width=n.videoWidth,i.height=n.videoHeight,i.getContext("2d").drawImage(n,0,0,i.width,i.height);for(var r=i.toDataURL("image/"+t).split(","),o=r[0].match(/:(.*?);/)[1],c=atob(r[1]),a=c.length,s=new Uint8Array(a);a--;)s[a]=c.charCodeAt(a);var l=new Blob([s],{type:o}),d=f.URL.createObjectURL(l),u=document.createElement("a");u.style.display="none",u.href=d,u.download=e,document.body.appendChild(u),u.click(),setTimeout(function(){document.body.removeChild(u),f.URL.revokeObjectURL(d)},1e3)}}},{key:"savePicToBase64",value:function(e,t){var n=this._videoEle,i=f.canvas=document.createElement("canvas");return i.width=t&&t.width?t.width:n.videoWidth,i.height=t&&t.height?t.height:n.videoHeight,i.getContext("2d").drawImage(n,0,0,i.width,i.height),i.toDataURL("image/"+e)}},{key:"keepAspectRatio",value:function(){}}]),t}(),o=function(){_inherits(i,r);var n=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=n.call(this))._videoID=-1,t.type="video",t}return _createClass(i,[{key:"getVideoID",value:function(){return this._videoID}},{key:"clear",value:function(){console.crlog("[UI] Container:".concat(this._id,", clear()")),this._videoEle&&(this._videoEle.srcObject=null)}},{key:"setVideo",value:function(t,e){var n=this;void 0===e&&(e=-1),console.crlog("[UI] Video Container:".concat(this._id,", setVideo(").concat(t,",").concat(e,")")),this._userID=t,this._videoID=e;var i=CRVideo.allMemberInfo.find(function(e){return e.userId==t});this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=i?i.nickname:t,CRRTCUI.videoContainerList.find(function(e){return e._id==n._id})||CRRTCUI.videoContainerList.push(this),t==CRVideo.userInfo.userId?CRRTCLocalVideo.refreshLocalContainerSrc(this):(i&&i.defaultCam&&(-1===e?CRRTCRemoteVideo.updateConnectList(i.termId,i.defaultCam,this):CRRTCRemoteVideo.updateConnectList(i.termId,e,this),CRRTCRemoteVideo.updateSubscribeVideo()),CRRTCRemoteVideo.refreshContainerSrc(this))}},{key:"destroy",value:function(){var t=this;console.crlog("[UI] Video Container:".concat(this._id,", destroy()")),this._videoEle=null,this._handler=null;var e=CRRTCUI.videoContainerList.findIndex(function(e){return e._id==t._id});-1!==e&&(console.crlog("[UI] UserID:".concat(this._userID,", container:").concat(this._id," be destroyed...")),CRRTCUI.videoContainerList.splice(e,1),CRRTCRemoteVideo.updateSubscribeVideo())}}]),i}(),c=function(){_inherits(n,r);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).type="screen",e}return _createClass(n,[{key:"setVideo",value:function(t){var n=this;console.crlog("[UI] Screen Container:".concat(this._id,", setVideo(").concat(t,")")),this._userID=t;var e=CRVideo.allMemberInfo.find(function(e){return e.userId==t});this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=e?e.nickname:t,CRRTCUI.screenContainerList.find(function(e){return e._id==n._id})||CRRTCUI.screenContainerList.push(this),CRRTCScreen.refreshContainerSrc()}}]),n}(),a=function(){_inherits(n,r);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).type="media",e}return _createClass(n,[{key:"setVideo",value:function(t){console.crlog("[UI] Media Container:".concat(this._id,", setVideo(").concat(t,")")),this._userID=t;var e=CRVideo.allMemberInfo.find(function(e){return e.userId==t});this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=e?e.nickname:t,CRRTCUI.mediaContainer=this,CRRTCMedia.refreshContainerSrc()}}]),n}(),t=function(){function e(){_classCallCheck(this,e),console.crlog("[UI] Init UIMgr..."),this.initData(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){this.videoContainerList=[],this.screenContainerList=[],this.mediaContainer=null}},{key:"initSDKInterface",value:function(){f.CRVideo_CreatVideoObj=function(e){try{console.crlog("[UI] CRVideo_CreatVideoObj(".concat(JSON.stringify(e),")"))}catch(e){throw e}var t=new o,n=t._videoEle;try{if(e)for(var i in e)if("style"==i)for(var r in e[i])n.style[r]=e[i][r];else n[i]=e[i]}catch(e){throw e}return t},f.CRVideo_CreatScreenShareObj=function(e){try{console.crlog("[UI] CRVideo_CreatScreenShareObj(".concat(JSON.stringify(e),")"))}catch(e){throw e}var t=new c,n=t._videoEle;try{if(e)for(var i in e)if("style"==i)for(var r in e[i])n.style[r]=e[i][r];else n[i]=e[i]}catch(e){throw e}return t},f.CRVideo_CreatMediaObj=function(e){try{console.crlog("[UI] CRVideo_CreatMediaObj(".concat(JSON.stringify(e),")"))}catch(e){throw e}var t=new a,n=(CRRTCMedia.container=t)._videoEle;n.muted=!1,n.volume=1e-6,n.removeAttribute("autoplay");try{if(e)for(var i in e)if("style"==i)for(var r in e[i])n.style[r]=e[i][r];else n[i]=e[i]}catch(e){throw e}return t}}}]),e}();f.__crUIClass=t,f.CRRTCUI=new __crUIClass}(window,CRVideo,Ice),function(r,c,s){var e=function(){function e(){_classCallCheck(this,e),console.crlog("[Aduio] Init AudioMgr..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){this.localAudioStream=null,this.localAudioTracks=[],this.audioMSID=11e4,this.audioPeerConnections=[],this.audioInput=[],this.audioOutput=[],this.audioCfg={micID:1,speakerID:1,speakerPause:!1}}},{key:"initIceCallback",value:function(){var a=this;this.ICECallback={AudioAllocRawExt2_async:function(e,t,n,i){console.crlog("[Audio] ICE Notify: AudioAllocRawExt2_async, params:".concat(JSON.stringify({asParam:t,strParams:n}))),"1"==(n=n.get("mediashare"))?CRRTCMedia.audioAllocRawExt2(e,t,n,i):a.audioAllocRawExt2(e,t.shareListen)},updateVoiceEnergy:function(e){var t=e._head._key,n=e._head._value,i=null,r=0;s.allMemberInfo.forEach(function(e){e.termId==t&&(i=e.userId,r=e.voiceEnergy||0,e.voiceEnergy=n)}),i&&CRVideo_MicEnergyUpdate.callback(i,r,n)},audioUpdateStatus:function(e,t,n){console.crlog("[Audio] ICE Notify: audioUpdateStatus, params:".concat(JSON.stringify({terminalID:t,status:n,opId:e})));var i,r,o,c={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4};s.allMemberInfo.forEach(function(e){e.termId==t&&(i=e.userId,r=e.audioStatus,e.audioStatus=n.name,e.userId==s.userInfo.userId&&"ACLOSE"===n.name&&a.isEnableAudioTrack(!1),(o=e.audioStatus)!==r&&console.crlog("[Audio] CRVideo_AudioStatusChanged.callback(".concat(i,",").concat(c[r],",").concat(c[o],")")),o!==r&&CRVideo_AudioStatusChanged.callback(i,c[r],c[o]))})},updateSpeaker:function(e){console.crlog("[Audio] ICE Notify: updateSpeaker, params:".concat(JSON.stringify({terminalID:e})))},closeAll:function(e){console.crlog("[Audio] ICE Notify: closeAll, params:".concat(JSON.stringify({operatorID:e}))),r.CRVideo_CloseMic(s.userInfo.userId)},playBackgroundMusic:function(e,t){console.crlog("[Audio] ICE Notify: playBackgroundMusic, params:".concat(JSON.stringify({operatorID:e,sPlay:t})))},notifyVoiceHowling:function(e,t){console.crlog("[Audio] ICE Notify: notifyVoiceHowling, params:".concat(JSON.stringify({termid:e,bHowling:t})))},notifyVoiceNoise:function(e,t){console.crlog("[Audio] ICE Notify: notifyVoiceNoise, params:".concat(JSON.stringify({termid:e,bNoising:t})))},getRemoteAudioInfNotify:function(e,t){try{console.crlog("[Audio] ICE Notify: getRemoteAudioInfNotify, params:".concat(JSON.stringify({cb:e,reqTermID:t})))}catch(e){throw e}e.ice_response(),e.isResponsed=!0},remoteAudioSetNotify:function(e,t){console.crlog("[Audio] ICE Notify: remoteAudioSetNotify, params:".concat(JSON.stringify({opeTermId:e,rAudio:t})))},notifyLanLessMicOpen:function(){console.crlog("[Audio] ICE Notify: notifyLanLessMicOpen, params:null")},openMicExRslt:function(e,t){console.crlog("[Audio] ICE Callback --\x3e openMicExRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t})))},closeMicExRslt:function(e,t){console.crlog("[Audio] ICE Callback --\x3e closeMicExRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t})))},setAudioDeviceStatusRslt:function(e,t){console.crlog("[Audio] ICE Callback --\x3e setAudioDeviceStatusRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t})))},closeAllRslt:function(e,t){console.crlog("[Audio] ICE Callback --\x3e closeAllRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t})))}}}},{key:"initSDKInterface",value:function(){var n=this;r.CRVideo_OpenMic=function(e){console.crlog("[Audio] CRVideo_OpenMic(".concat(e,")")),n.openMicEx(e)},r.CRVideo_CloseMic=function(e){console.crlog("[Audio] CRVideo_CloseMic(".concat(e,")")),n.closeMicEx(e)},r.CRVideo_PlaySpeaker=function(){console.crlog("[Audio] CRVideo_PlaySpeaker()"),document.querySelector("#CRSDKAudioPlayer").play(),document.querySelector("#CRSDKAudioPlayer").isPaused=!1,document.querySelector("#CRSDKAudioPlayer").paused||console.crlog("[Audio] Audio elememt is playing...")},r.CRVideo_PauseSpeaker=function(){console.crlog("[Audio] CRVideo_PauseSpeaker()"),n.audioCfg.speakerPause=!0,document.querySelector("#CRSDKAudioPlayer").pause(),document.querySelector("#CRSDKAudioPlayer").isPaused=!0,document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is paused...")},r.CRVideo_GetAudioMicNames=function(){var t=[];n.audioInput.forEach(function(e){t.push({micID:e.id,micName:e.name})});try{console.crlog("[Audio] CRVideo_GetAudioMicNames(), return:".concat(JSON.stringify(t)))}catch(e){throw e}return t},r.CRVideo_GetAudioSpkNames=function(){var t=[];n.audioOutput.forEach(function(e){t.push({speakerID:e.id,speakerName:e.name})});try{console.crlog("[Audio] CRVideo_GetAudioSpkNames(), return:".concat(JSON.stringify(t)))}catch(e){throw e}return t},r.CRVideo_SetAudioCfg=function(e){console.crlog("[Audio] CRVideo_SetAudioCfg(".concat(JSON.stringify(e),")")),n.setAudioCfg(e)},r.CRVideo_GetAudioCfg=function(){var e=n.audioCfg;return console.crlog("[Audio] CRVideo_GetAudioCfg(), return:".concat(JSON.stringify(e))),e},r.CRVideo_GetMicEnergy=function(t){var n=null;return s.allMemberInfo.forEach(function(e){e.userId==t&&(n=void 0===e.voiceEnergy?null:e.voiceEnergy)}),console.crlog("[Audio] CRVideo_GetMicEnergy(".concat(t,"), return: ").concat(n)),n},r.CRVideo_GetAudioStatus=function(e){var t=n.getAudioStatus(e);return console.crlog("[Audio] CRVideo_GetAudioStatus(".concat(e,"), return:").concat(t)),t},r.CRVideo_SetAllAudioClose=function(){console.crlog("[Audio] CRVideo_SetAllAudioClose()"),CR__CloseAll()}}},{key:"createAudioElement",value:function(){console.crlog("[Audio] Do create audio element...");var i=this;s.changyiweb||function(e){if(!(t=e.document.getElementById("CRSDKAudioPlayer"))){var t,n=e.document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex="99999",n.style.display="none",n.id="CRSDKAudioBox",(t=e.document.createElement("audio")).autoplay=!0,t.controls=!0,t.id="CRSDKAudioPlayer",n.appendChild(t),e.document.body.appendChild(n),i.setAudioCfg(i.audioCfg)}}(r)}},{key:"audioAllocRawExt2",value:function(e,t){var n=this;console.crlog("[Audio] AudioAllocRawExt2, isRecvonly: ".concat(t)),setTimeout(function(){e.isResponsed||e.ice_response()},2e4);var i={};if(i.msid=this.audioMSID++,i.cb=e,i.candidates=[],i.connection=null,i.remoteStream=null,i.offer=null,i.answer=null,i.isFree=!1,this.audioPeerConnections.push(i),console.crlog("[Audio] Start to create audio connection, MSID: ".concat(i.msid)),t)i.type="recvonly",this.setPeerConnection(i,e);else{i.type="sendrecv",i.micID=this.audioCfg.micID;var r=this.audioInput.find(function(e){return e.id===n.audioCfg.micID}).deviceId;this.localAudioStream&&this.localAudioTracks[0].micID===this.audioCfg.micID?(this.isEnableAudioTrack(!0),this.setPeerConnection(i,e)):this.getAudioStream(r&&!CRBrowser.curBrowserCfg.isMobile||!r.includes("default")?{audio:{deviceId:{exact:r}},video:!1}:{audio:!0,video:!1}).then(function(){n.setPeerConnection(i,e)})}}},{key:"setPeerConnection",value:function(n,i){var t=this,r="[Audio] MSID:".concat(n.msid," --");console.crlog("".concat(r," SetPeerConnection... >> ").concat(n.type," <<")),console.crlog("".concat(r," New RTCPeerConnection"));var o=new RTCPeerConnection(s.rtcCfg);if(n.connection=o,"recvonly"==n.type){var e={offerToReceiveAudio:!0,offerToReceiveVideo:!1};console.crlog("".concat(r," Audio RTCPeerConnection offerOptions: ").concat(JSON.stringify(e))),o.createOffer(e).then(function(e){n.offer=e,console.crlog("".concat(r," Audio RTCPeerConnection createOffer success! offer sdp: \r\n").concat(e.sdp)),t.offerSetLocalDescription(e)}).catch(function(e){console.crlog("[Audio][Error] MSID:".concat(n.msid," -- Audio RTCPeerConnection createOffer fail!")),console.error(e)})}else this.localAudioStream?o.addTrack?(console.crlog("[Audio] MSID:".concat(n.msid," -- Audio RTCPeerConnection addTrack")),o.addTrack(this.localAudioTracks[0],this.localAudioStream)):setTimeout(function(){console.crlog("[Audio] MSID:".concat(n.msid," -- Audio RTCPeerConnection dispatchEvent:negotiationneeded")),o.dispatchEvent(new Event("negotiationneeded"))},1e3):(console.crlog("[Audio][Error] MSID:".concat(n.msid," -- Audio RTCPeerConnection addTrack fail, no localAudioStream!")),console.error("[Audio][Error] MSID:".concat(n.msid," -- Audio RTCPeerConnection addTrack fail, no localAudioStream!"))),o.createOffer().then(function(e){n.offer=e,console.crlog("".concat(r," Audio RTCPeerConnection createOffer success! offer sdp: \r\n").concat(e.sdp)),t.offerSetLocalDescription(e)}).catch(function(e){console.crlog("[Audio][Error] MSID:".concat(n.msid," -- Audio RTCPeerConnection createOffer fail!")),console.error(e)});this.__proto__.offerSetLocalDescription=function(e){o.setLocalDescription(e).then(function(e){console.crlog("".concat(r," Audio RTCPeerConnection setLocalDescription success!")),o.waitingCandidateTimer=setTimeout(function(){i&&i.ice_response(),i.isResponsed=!0},1e4)}).catch(function(e){console.crlog("[Audio][Error] MSID:".concat(n.msid," -- Audio RTCPeerConnection setLocalDescription fail!")),console.error(e)})},o.onicecandidate=function(e){if(console.crlog("".concat(r," Audio RTCPeerConnection onicecandidate, canditate:").concat(JSON.stringify(e.candidate))),e.candidate)if(n.candidates.push(e.candidate),n.candidates.length<=1){console.crlog("".concat(r," Audio RTCPeerConnection canditates:\r\n").concat(JSON.stringify(n.candidates))),console.crlog("".concat(r," Audio RTCPeerConnection ice gathering completed!")),clearTimeout(o.waitingCandidateTimer);var t=new c.HashMap;t.set("sdp",n.offer.sdp),t.set("icecandidate",JSON.stringify(n.candidates)),console.crlog("".concat(r," ice_response -- MSID:").concat(n.msid)),i&&i.ice_response(n.msid,t),i.isResponsed=!0}else console.crlog("The user maybe have two Network kard,the first candidates is:\r\n"+JSON.stringify(n.candidates)),console.crlog("The user maybe have two Network kard,the second candidates is：\r\n"+e.candidate.candidate);else 0===n.candidates.length&&(console.crlog("[Audio][Error] MSID:".concat(n.msid," -- Audio RTCPeerConnection ice gathering fail!")),console.error("[Audio][Error] MSID:".concat(n.msid," -- Audio RTCPeerConnection ice gathering fail!")))},o.onicecandidateerror=function(e){e.address,e.errorCode,e.errorText,e.hostCandidate},o.ontrack=function(e){console.crlog("".concat(r," Audio RTCPeerConnection ontrack"));var t=e.streams[0];console.crlog("".concat(r," Audio RTCPeerConnection got audio stream: ").concat(JSON.stringify({active:t.active,id:t.id}))),n.remoteStream=t,CRVideo_NotifyAudioStream.callback(t),document.getElementById("CRSDKAudioPlayer")?(console.crlog("".concat(r," Founded audio element success and set srcObject!")),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused&&CRVideo_PauseSpeaker()):console.crlog("[Audio][Error] MSID:".concat(n.msid," -- Can not find audio elemment, set srcObject fail!"))},o.onaddstream=function(e){console.crlog("".concat(r," Audio RTCPeerConnection onaddstream, stream: ").concat(!!e.stream&&JSON.stringify({active:e.stream.active,id:e.stream.id})))},o.onconnectionstatechange=function(e){console.crlog("".concat(r," Audio RTCPeerConnection onconnectionstatechange, connectionState: ").concat(e.currentTarget.connectionState))},o.ondatachannel=function(e){console.crlog("".concat(r," Audio RTCPeerConnection ondatachannel"))},o.oniceconnectionstatechange=function(e){console.crlog("".concat(r," Audio RTCPeerConnection oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState))},o.onicegatheringstatechange=function(e){console.crlog("".concat(r," Audio RTCPeerConnection onicegatheringstatechange, iceGatheringState: ").concat(e.currentTarget.iceGatheringState))},o.onnegotiationneeded=function(e){console.crlog("".concat(r," Audio RTCPeerConnection onnegotiationneeded"))},o.onremovestream=function(e){console.crlog("".concat(r," Audio RTCPeerConnection onremovestream"))},o.onsignalingstatechange=function(e){console.crlog("".concat(r," Audio RTCPeerConnection onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"modifyPeerAddrExt",value:function(e,t){console.crlog("[Audio] ModifyPeerAddrExt, MSID:".concat(t));var n="[Audio] MSID:".concat(t," --"),i=this.audioPeerConnections.find(function(e){return e.msid===t});void 0!==i?(console.crlog("".concat(n," Audio RTCPeerConnection got remote answer, answer.sdp:\r\n").concat(e.sdp)),i.answer=e,i.connection.setRemoteDescription(new RTCSessionDescription(e)).then(function(e){console.crlog("".concat(n," Audio RTCPeerConnection answer setRemoteDescription success!"))}).catch(function(e){console.crlog("[Audio][Error] MSID:".concat(i.msid," -- Audio RTCPeerConnection setRemoteDescription fail!")),console.error(e)})):console.crlog("[Audio][Error] Can not find MSID:".concat(t," corresponding connection object!!!"))}},{key:"getAudioStream",value:function(e){var i=this;return console.crlog("[Audio] Do get audio stream..."),new Promise(function(t,n){e=e||{audio:!0,video:!1},console.crlog("[Audio] Open or change mic, constraints: ".concat(JSON.stringify(e))),navigator.mediaDevices.getUserMedia(e).then(function(e){console.crlog("[Audio] Local audio getUserMedia success! ".concat(JSON.stringify({active:e.active,id:e.id}))),i.localAudioStream=e,i.localAudioTracks=e.getAudioTracks(),i.localAudioTracks[0].micID=i.audioCfg.micID,t()}).catch(function(e){console.crlog("[Audio][Error] Local audio getUserMedia fail! ".concat(e)),console.error(e),n()})})}},{key:"isEnableAudioTrack",value:function(t){this.localAudioTracks.forEach(function(e){t?console.crlog("[Audio] Enable local audio track!"):console.crlog("[Audio] Disable local audio track!"),e.enabled=t})}},{key:"stopAllAudioTrack",value:function(){console.crlog("[Audio] Do stop all audio track..."),this.localAudioTracks.forEach(function(e){"ended"!==e.readyState&&e.stop()}),this.localAudioTracks=[],this.localAudioStream=null}},{key:"closeAllPeerConnection",value:function(){console.crlog("[Audio] Do close all peerConnections..."),this.audioPeerConnections.forEach(function(e){e.connection&&e.connection.close()}),this.audioPeerConnections=[]}},{key:"openMicEx",value:function(e){var t=r.userIdToTermId(e);if(e==s.userInfo.userId&&0===this.audioInput.length)return console.crlog("[Audio][Error] CRVideo_OpenMic fail, no mic devices!"),void console.error("[Audio][Error] CRVideo_OpenMic fail, no mic devices!");t&&console.crlog("[Audio] CR__OpenMicEx(".concat(t,")")),t&&CR__OpenMicEx(t)}},{key:"closeMicEx",value:function(e){var t=r.userIdToTermId(e);e==s.userInfo.userId&&this.isEnableAudioTrack(!1),t&&console.crlog("[Audio] CR__CloseMicEx(".concat(t,")")),t&&CR__CloseMicEx(t)}},{key:"audioMSIDFree",value:function(t){console.crlog("[Audio] Audio MSID free, MSID:".concat(t));var e=this.audioPeerConnections.findIndex(function(e){return e.msid===t});-1!=e&&this.audioPeerConnections.splice(e,1),t===this.audioMSID-1&&0<this.audioPeerConnections.length&&(console.crlog("[Audio] Fast on/off mic"),this.resetAudioPeerConnection(t))}},{key:"resetAudioPeerConnection",value:function(){console.crlog("[Audio] Do reset audio peerConnection...");var e=this.audioPeerConnections[0];if(console.crlog("[Audio] Current audio connection type: ".concat(e.type)),"recvonly"===e.type){var t=e.remoteStream;CRVideo_NotifyAudioStream.callback(t),document.getElementById("CRSDKAudioPlayer")?(console.crlog("[Audio] MSID:".concat(e.msid," -- Founded audio element success and set srcObject on free notify!")),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused&&CRVideo_PauseSpeaker()):console.crlog("[Audio][Error] MSID:".concat(e.msid," -- Can not find audio elemment, set srcObject fail on free notify!"))}else if(this.isEnableAudioTrack(!0),e.micID===this.audioCfg.micID){console.crlog("[Audio] Audio micID did not changed...");var n=e.remoteStream;CRVideo_NotifyAudioStream.callback(n),document.getElementById("CRSDKAudioPlayer")?(console.crlog("[Audio] MSID:".concat(e.msid," -- Founded audio element success and set srcObject on free notify!")),document.getElementById("CRSDKAudioPlayer").srcObject=n,document.getElementById("CRSDKAudioPlayer").isPaused&&CRVideo_PauseSpeaker()):console.crlog("[Audio][Error] MSID:".concat(e.msid," -- Can not find audio elemment, set srcObject fail on free notify!"))}else console.crlog("[Audio] Audio micID has changed, do setMicCfg now..."),this.setMicCfg(this.audioCfg.micID)}},{key:"uploadAudioDevicesStatus",value:function(e){console.crlog("[Audio] Do upload audio devices status..."),void 0===e&&console.crlog("[AudiocloseAllPeerConnectiongr] Audio input devices: ".concat(JSON.stringify(this.audioInput))),void 0===e?0<this.audioInput.length?(console.crlog("[Audio] CR__SetAudioDeviceStatus(true)"),CR__SetAudioDeviceStatus(!0)):(console.crlog("[Audio] CR__SetAudioDeviceStatus(false)"),CR__SetAudioDeviceStatus(!1)):e?(console.crlog("[Audio] CR__SetAudioDeviceStatus(true)"),CR__SetAudioDeviceStatus(!0)):(console.crlog("[Audio] CR__SetAudioDeviceStatus(false)"),CR__SetAudioDeviceStatus(!1))}},{key:"setAudioCfg",value:function(e){for(var t in e)this.audioCfg[t]=e[t];e.micID&&this.setMicCfg(+e.micID),e.speakerID&&this.setSpeakerCfg(+e.speakerID)}},{key:"setMicCfg",value:function(i){var r=this;console.crlog("[Audio] Do change mic device, micID:".concat(i)),this.audioInput.forEach(function(e){if(e.id===i){r.audioCfg.micID=i;var t=!1;r.localAudioTracks.forEach(function(e){1==e.enabled&&(t=!0)});var n=r.localAudioTracks;t&&r.getAudioStream({audio:{deviceId:{exact:e.deviceId}}}).then(function(){console.crlog("[Audio] Do stop old audio tracks..."),n.forEach(function(e){e.stop()}),r.uploadAudioDevicesStatus(!0)})}})}},{key:"setSpeakerCfg",value:function(t){var n=this;console.crlog("[Audio] Do change speaker device, speakerID:".concat(t));function e(e){t==n.audioOutput[e].id&&i&&i.setSinkId&&i.setSinkId(n.audioOutput[e].deviceId).then(function(){console.crlog("[Audio] Change speaker devices success, audio output device attached: ".concat(n.audioOutput[e].deviceId))}).catch(function(e){console.crlog("[Audio] Change speaker devices fail! ".concat(e.name));var t=e;"SecurityError"==e.name&&(t="You need to use HTTPS for selecting audio output"),console.error(t)})}for(var i=document.getElementById("CRSDKAudioPlayer"),r=0;r<this.audioOutput.length;r++)e(r)}},{key:"getAudioStatus",value:function(e){var t="AUNKNOWN";return t=s.findMemberInfo({use:"userId",want:"audioStatus",value:e})||t,r.CRVideo_ASTATUS[t]}}]),e}();r.__crAudioClass=e,r.CRRTCAudio=new r.__crAudioClass,r.CRVideo_AudioStatusChanged=new s.CbProxy("CRVideo_AudioStatusChanged"),r.CRVideo_NotifyAudioStream=new s.CbProxy("CRVideo_NotifyAudioStream"),r.CRVideo_MicEnergyUpdate=new s.CbProxy("CRVideo_MicEnergyUpdate")}(window,Ice,CRVideo),function(c,a,f){var e=function(){function e(){_classCallCheck(this,e),console.crlog("[Video] Init VideoMgr..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){this.VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4}}},{key:"initIceCallback",value:function(){this.ICECallback={notifyUpdateAllCameraInfos:function(i,r){console.crlog("[Video] ICE Notify: notifyUpdateAllCameraInfos, params:".concat(JSON.stringify({termID:i,camInfos:r}))),f.allMemberInfo.forEach(function(e){if(e.termId==i){var t=new RegExp("\n","g");console.crlog("[Video] TermID:".concat(i,", userID:").concat(e.userId,", updateAllCameraInfos: ").concat(r.replace(t,"|")));var n=r.split("\n").slice(0,-1);e.allCams=n}})},notifySetOpenedCameraNumber:this.notifySetOpenedCameraNumber,updateStatus:this.updateStatus,enableSendVideo2Internet:function(e){console.crlog("[Video] ICE Notify: enableSendVideo2Internet, params:".concat(JSON.stringify({camID:e}))),CRRTCLocalVideo.enableSendVideo2Internet(e)},disableSendVideo2Internet:function(e){console.crlog("[Video] ICE Notify: disableSendVideo2Internet, params:".concat(JSON.stringify({camID:e}))),CRRTCLocalVideo.disableSendVideo2Internet(e)},notifyOpenVideo:function(e){console.crlog("[Video] ICE Notify: notifyOpenVideo, params:".concat(JSON.stringify({operID:e}))),c.CRVideo_OpenVideo(f.userInfo.userId)},updateAllCameraInfosRlst:function(e){console.crlog("[Video] ICE Callback --\x3e updateAllCameraInfosRlst, params:".concat(JSON.stringify({errCode:e})))},startVideoRslt:function(e){console.crlog("[Video] ICE Callback --\x3e startVideoRslt, params:".concat(JSON.stringify({errCode:e})))},stopVideoRslt:function(e){console.crlog("[Video] ICE Callback --\x3e stopVideoRslt, params:".concat(JSON.stringify({errCode:e})))},reqOpenVideoRslt:function(e){console.crlog("[Video] ICE Callback --\x3e reqOpenVideoRslt, params:".concat(JSON.stringify({errCode:e})))},startVideoExRslt:function(e){console.crlog("[Video] ICE Callback --\x3e startVideoExRslt, params:".concat(JSON.stringify({errCode:e})))},stopVideoExRslt:function(e){console.crlog("[Video] ICE Callback --\x3e stopVideoExRslt, params:".concat(JSON.stringify({errCode:e})))},setVideoDeviceStatusRslt:function(e){console.crlog("[Video] ICE Callback --\x3e setVideoDeviceStatusRslt, params:".concat(JSON.stringify({errCode:e})))},setOpenedCameraNumberRslt:function(e){console.crlog("[Video] ICE Callback --\x3e setOpenedCameraNumberRslt, params:".concat(JSON.stringify({errCode:e})))},batchSubscribeVideo2Rslt:function(e){console.crlog("[Video] ICE Callback --\x3e batchSubscribeVideo2Rslt, params:".concat(JSON.stringify({errCode:e})))}}}},{key:"initSDKInterface",value:function(){var i=this;c.CRVideo_SetVideoCfg=function(e){console.crlog("[Video] CRVideo_SetVideoCfg(".concat(JSON.stringify(e),")")),CRRTCLocalVideo.setVideoCfg(e)},c.CRVideo_GetVideoCfg=function(){var e=CRRTCLocalVideo.videoCfg;return console.crlog("[Video] CRVideo_GetVideoCfg(), return: ".concat(e)),e},c.CRVideo_GetVideoStatus=function(e){var t=f.findMemberInfo({use:"userId",want:"videoStatus",value:e})||"VUNKNOWN",n=i.VSTATUS[t];return console.crlog("[Video] CRVideo_GetVideoStatus(".concat(e,"), return: ").concat(n)),n},c.CRVideo_GetDefaultVideo=function(t){var e;if(t==f.userInfo.userId)e=CRRTCLocalVideo.defaultCamID;else{var n=null;f.allMemberInfo.forEach(function(e){e.userId==t&&(n=null==e.defaultCam?-1:+e.defaultCam)}),e=null!=n?n:0}return console.crlog("[Video] CRVideo_GetDefaultVideo(".concat(t,"), return:").concat(e)),+e},c.CRVideo_SetDefaultVideo=function(e,t){try{console.crlog("[Video] CRVideo_SetDefaultVideo(".concat(e,",").concat(t,")")),t=+t}catch(e){throw e}e==f.userInfo.userId&&CRRTCLocalVideo.setDefaultVideo(t)},c.CRVideo_GetAllVideoInfo=function(n){var t=+f.findMemberInfo({use:"userId",want:"termId",value:n}),i=[];t&&t===f.userInfo.termId?CRRTCLocalVideo.videoInput.forEach(function(e){i.push({userID:n,videoID:e.id,videoName:e.name})}):f.allMemberInfo.forEach(function(e){e.termId==t&&e.allCams&&e.allCams.forEach(function(e){var t=e.split(";");i.push({userID:n,videoID:+t[0],videoName:t[1]})})});try{console.crlog("[Video] CRVideo_GetAllVideoInfo(".concat(n,"), return: ").concat(JSON.stringify(i)))}catch(e){throw e}return i},c.CRVideo_OpenVideo=function(e){if(console.crlog("[Video] CRVideo_OpenVideo(".concat(e,")")),e==f.userInfo.userId)0<CRRTCLocalVideo.videoInput.length?c.CRICEAPI.StartVideo():console.crlog("[Video] CRVideo_OpenVideo fail, no video devices!");else{var t=c.userIdToTermId(e);t&&c.CRICEAPI.ReqOpenVideo(t)}},c.CRVideo_CloseVideo=function(e){if(console.crlog("[Video] CRVideo_CloseVideo(".concat(e,")")),e==f.userInfo.userId)CRRTCLocalVideo.stopAllLocalVideoAndConnect(),c.CRICEAPI.StopVideo();else{var t=c.userIdToTermId(e);c.CRICEAPI.StopVideoEx(t)}},c.CRVideo_AddStreamCam=function(e,t){console.crlog("[Video] CRVideo_AddStreamCam([stream],".concat(t,")")),CRRTCLocalVideo.addStreamCam(e,t)},c.CRVideo_RemoveStreamVideo=function(t){console.crlog("[Video] CRVideo_RemoveStreamVideo(".concat(t,")"));var e=CRRTCLocalVideo.videoInput.findIndex(function(e){return e.id===t&&"streamCam"==e.kind});-1!=e&&CRRTCLocalVideo.videoInput.splice(e,1)},c.CRVideo_GetOpenedVideoIDs=function(e){var t=f.findMemberInfo({use:"userId",want:"openedCamIDs",value:e})||[];try{console.crlog("[Video] CRVideo_GetOpenedVideoIDs(".concat(e,"), return: ").concat(JSON.stringify(t)))}catch(e){throw e}return t},c.CRVideo_SetEnableMutiVideo=function(e,t){console.crlog("[Video] CRVideo_SetEnableMutiVideo(".concat(e,",").concat(t,")")),e==f.userInfo.userId&&CRRTCLocalVideo.setEnableMutiVideo(t)},c.CRVideo_GetEnableMutiVideo=function(e){var t=null;return e==f.userInfo.userId&&(t=CRRTCLocalVideo.multipleCams),console.crlog("[Video] CRVideo_GetEnableMutiVideo(".concat(e,"), return:").concat(returVal)),t}}},{key:"videoAllocRawExt2",value:function(e,t,n){var i=+t.cameraID,r=+t.srcTermID;console.crlog("[Video] TermID:".concat(r,", camID:").concat(i,", isSelf:").concat(n,", videoAllocRawExt2...")),setTimeout(function(){e.isResponsed||(e.ice_response(),e.isResponsed=!0)},2e4),n?CRRTCLocalVideo.videoAllocRawExt2(e,i):CRRTCRemoteVideo.videoAllocRawExt2(e,r,i)}},{key:"modifyPeerAddrExt",value:function(e,t,n,i){if(setTimeout(function(){t.isResponsed||(t.ice_response(),t.isResponsed=!0)},2e4),"localVideo"==e){var r={type:"answer",sdp:this.parseAnswerSDP("local",i.get("sdp"))};CRRTCLocalVideo.modifyPeerAddrExt(r,t,n)}else if("remoteVideo"==e){var o={type:"answer",sdp:this.parseAnswerSDP("remote",i.get("sdp"))};CRRTCRemoteVideo.modifyPeerAddrExt(o,t,n)}}},{key:"parseOfferSDP",value:function(e,t){var n=e;return"send"==t&&(n=n.replace("a=sendrecv","a=sendonly")),n}},{key:"parseAnswerSDP",value:function(e,t){var n=t.match(/c=IN IP4(.*?)\r\n/)?t.match(/c=IN IP4(.*?)\r\n/)[0]:"",i=t.match(/b=AS:(.*?)\r\n/)?t.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&2<t.split(n).length&&(t=t.replace("".concat(n).concat(i),"")),"local"==e&&(t=(t=t.replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n","")).replace(";profile-level-id=42001f","")),"remote"==e&&(t=t.replace("a=sendrecv","a=sendonly")),t}},{key:"notifySetOpenedCameraNumber",value:function(d,e){console.crlog("[Video] ICE Callback --\x3e notifySetOpenedCameraNumber, params:".concat(JSON.stringify({termID:d,camID:e})));var u=[];e.forEach(function(e){return u.push(parseInt(e))}),f.allMemberInfo.forEach(function(e){if(e.termId==d){console.crlog("[Video] NotifySetOpenedCameraNumber, termID:".concat(e.termId,", userID:").concat(e.userId,", camIDs:").concat(JSON.stringify(u)));var t=e.defaultCam||0,n=u[0],i=e.openedCamIDs||[],r=u.slice(1),o=!1;console.crlog("[Video] Old OpenedCams: ".concat(i)),console.crlog("[Video] Now OpenedCams: ".concat(r)),console.crlog("[Video] Old DefaultCam: ".concat(t)),console.crlog("[Video] Now DefaultCam: ".concat(n)),e.defaultCam=n,e.openedCamIDs=r;for(var c=[],a=[],s=0;s<r.length;s++)i.includes(r[s])||a.push(r[s]);for(var l=0;l<i.length;l++)r.includes(i[l])||c.push(i[l]);return(0<c.length||0<a.length)&&(o=!0),e.userId!==f.userInfo.userId&&c.forEach(function(t){CRRTCRemoteVideo.connectList.forEach(function(e){e.termID==d&&e.list.forEach(function(e){e.camID%1e4==t&&(console.crlog("[Video] MSID:".concat(e.msid,", termID:").concat(d,", camID:").concat(e.camID," video RTCConnection closed...")),e.connection&&e.connection.close())})})}),o&&(console.crlog("[Video] TermID:".concat(e.termId,", userID:").concat(e.userId,", opened cams changed, stoppedCams:").concat(JSON.stringify(c),", addedCams:").concat(JSON.stringify(a))),console.crlog("[Video] CRVideo_VideoDevChanged.callback(".concat(e.userId,")")),CRVideo_VideoDevChanged.callback(e.userId)),n!==t&&(console.crlog("[Video] TermID:".concat(e.termId,", userID:").concat(e.userId,", default camId changed:").concat(t," ----\x3e ").concat(n)),console.crlog("[Video] CRVideo_DefVideoChanged.callback(".concat(e.userId,",").concat(n,")")),CRVideo_DefVideoChanged.callback(e.userId,n)),void(d!==f.userInfo.termId&&CRRTCRemoteVideo.updateSubscribeVideo())}})}},{key:"updateStatus",value:function(t,e,n){var i=CRVideo.allMemberInfo.find(function(e){return e.termId==t});if(i){try{console.crlog("[Video] Video updateStatus, termID:".concat(t,", userID:").concat(i.userId,", status:").concat(e,", opID:").concat(n))}catch(e){throw e}var r=i.videoStatus||"VUNKNOWN";i.videoStatus=e.name,i.termId==f.userInfo.termId&&("VOPEN"==e.name?(CRRTCLocalVideo.uploadCurOpenedCamNumber(),CRRTCLocalVideo.getLocalCamStream()):"VCLOSE"==e.name&&CRRTCLocalVideo.stopAllLocalVideoAndConnect()),r!==e.name&&(console.crlog("[Video] CRVideo_VideoStatusChanged.callback(".concat(i.userId,",").concat(CRVideo_VSTATUS[r],",").concat(CRVideo_VSTATUS[e.name],")")),CRVideo_VideoStatusChanged.callback(i.userId,CRVideo_VSTATUS[r],CRVideo_VSTATUS[e.name]))}}}]),e}(),t=function(){function e(){_classCallCheck(this,e),console.crlog("[Video] Init LocalVideoMgr..."),this.initData()}return _createClass(e,[{key:"initData",value:function(){this.lastLocalVideoMSID=12e4,this.defaultCamID=1,this.videoCfg={size:2,fps:15,ratio:1},CRBrowser.curBrowserCfg.isMobile&&(this.videoCfg.ratio=3),this.multipleCams=!1,this.videoInput=[],this.streamCamID=50}},{key:"parseVideoHeight",value:function(e){var t=null;return 1==e?t={ideal:360,min:360}:2==e?t={ideal:480,min:360}:3==e?t={ideal:720,min:360}:4==e&&(t={ideal:1080,min:360}),t}},{key:"parseVideoWidth",value:function(e){var t=null;return 1==e?t={ideal:640}:2==e?t={ideal:848}:3==e?t={ideal:1280}:4==e&&(t={ideal:1920}),t}},{key:"parseVideoRatio",value:function(e){var t=null;switch(e){case 1:t={ideal:16/9};break;case 2:t={ideal:4/3};break;case 3:t={ideal:1};break;case 4:t={ideal:.75};break;case 5:t={ideal:9/16}}return t}},{key:"parseVideoConstraints",value:function(e,t){var n={};null==e&&(e=this.videoCfg),null==e.size&&(e.size=this.videoCfg.size);var i=this.parseVideoWidth(e.size);null!==i&&(n.width=i),null==e.fps&&(e.fps=this.videoCfg.fps),n.frameRate={ideal:e.fps},null==e.ratio&&(e.ratio=this.videoCfg.ratio);var r=this.parseVideoRatio(e.ratio);return null!==r&&(n.aspectRatio=r),void 0!==t&&(CRBrowser.curBrowserCfg.isMobile?n.facingMode={exact:t.includes("user")?"user":"environment"}:n.deviceId={ideal:t}),n}},{key:"getCurVideoCfg",value:function(c){var a=this;return new Promise(function(t,e){var n=c.getVideoTracks()[0];if(n&&n.getSettings){var i,r;!function e(){(i=n.getSettings()).height&&i.width?(clearTimeout(r),t(i)):r=setTimeout(function(){e()},100)}()}else{var o={width:a.parseVideoWidth(a.videoCfg.size),height:a.parseVideoHeight(a.videoCfg.size)};t(o)}})}},{key:"getMaxbps",value:function(){var e=1600;switch(this.videoCfg.size){case 1:e=6e5;break;case 2:e=8e5;break;case 3:e=12e5;break;case 4:e=16e5}return e}},{key:"setMaxbps",value:function(e){try{var t=e.getSenders()[0],n=t.getParameters(),i=this.getMaxbps();n.encodings[0].maxBitrate=i,console.crlog("[Video] LocalVideoConnection sender setParams, maxBitrate:".concat(i,"bps")),t.setParameters(n).then(function(e){console.crlog("[Video] LocalVideoConnection sender setParams, maxBitrate:".concat(i,", success!"))}).catch(function(e){throw console.crlog("[Video][Error] LocalVideoConnection sender setParams, maxBitrate:".concat(i,", fail! ").concat(e)),e})}catch(e){throw console.crlog("[Video][Error] ".concat(e)),e}}},{key:"setVideoCfg",value:function(e){var i=this,r={};if(void 0!==e.size&&(r.size=+e.size),void 0!==e.fps&&(r.fps=+e.fps),void 0!==e.ratio&&(r.ratio=+e.ratio),0!==Object.keys(r).length){for(var t in r)this.videoCfg[t]=r[t];this.videoInput.forEach(function(t){if(!t.locAttr&&t.stream&&t.stream.active){var e=i.parseVideoConstraints(r),n=t.stream.getVideoTracks()[0];console.crlog("[Video] Local camID:".concat(t.id," applyConstraints:").concat(JSON.stringify(e))),n.applyConstraints(e).then(function(){console.crlog("[Video] Local camID:".concat(t.id," applyConstraints success! Current settings:").concat(JSON.stringify(n.getSettings()))),t.connect&&t.connect.connection&&i.setMaxbps(t.connect.connection),t.connect2&&t.connect2.connection&&i.setMaxbps(t.connect2.connection)}).catch(function(e){throw console.crlog("[Video] Local camID:".concat(t.id," applyConstraints fail! ").concat(e)),e})}})}}},{key:"setDefaultVideo",value:function(t){var e=this.videoInput.find(function(e){return e.id==t}),n=CRUtils.findMemberInfo(f.userInfo.userId,"videoStatus");e&&(this.defaultCamID=t,this.multipleCams||"VOPEN"!=n||(this.stopAllLocalVideoAndConnect(),this.getLocalCamStream()),this.uploadCurOpenedCamNumber())}},{key:"stopAllLocalVideoAndConnect",value:function(){console.crlog("[Video] Do stop all local video track and connect..."),CRRTCUI.videoContainerList.forEach(function(e){e._userID==f.userInfo.userId&&e.clear()}),this.videoInput.forEach(function(e){e.connect.connection&&e.connect.connection.close(),e.connect2.connection&&e.connect2.connection.close(),e.connect.answer=null,e.connect.answer_cb=null,e.connect.candidate=[],e.connect.connection=null,e.connect.offer=null,e.connect.offer_cb=null,e.connect2.answer=null,e.connect2.answer_cb=null,e.connect2.candidate=[],e.connect2.connection=null,e.connect2.offer=null,e.connect2.offer_cb=null,c.videoResolutionReport(e.connect.msid,"video",0,0),c.videoResolutionReport(e.connect2.msid,"video",0,0),"streamCam"!==e.kind&&(e.stream&&e.stream.getVideoTracks()[0].stop(),e.connect.stream=null,e.connect2.stream=null,e.stream=null)})}},{key:"uploadAllCamInfo",value:function(){console.crlog("[Video] UploadAllCamInfo...");var t="";this.videoInput.forEach(function(e){t=t+e.id+";"+e.name+";0;0\n"}),t&&CRICEAPI.UpdateAllCameraInfos(t)}},{key:"uploadVideoDeviceStatus",value:function(){console.crlog("[Video] UploadVideoDeviceStatus..."),CRICEAPI.SetVideoDeviceStatus(0<this.videoInput.length)}},{key:"uploadCurOpenedCamNumber",value:function(){var t=this;console.crlog("[Video] UploadCurOpenedCamNumber...");var n=[this.defaultCamID];this.videoInput.forEach(function(e){e.disabled||!t.multipleCams&&(t.multipleCams||e.id!=t.defaultCamID)||n.push(e.id)}),CRICEAPI.SetOpenedCameraNumber(n)}},{key:"getLocalCamStream",value:function(){var n=this;console.crlog("[Video] getLocalCamStream..."),this.videoInput.forEach(function(t){if(t.disabled||"streamCam"===t.kind||t.stream&&t.stream.active||!n.multipleCams&&(n.multipleCams||t.id!=n.defaultCamID))"streamCam"==t.kind&&(t.connect.stream=t.stream,t.connect2.stream=t.stream,n.refreshLocalContainerSrc("",t));else{var e={audio:!1,video:CRBrowser.curBrowserCfg.isMobile?n.parseVideoConstraints(null,t.facingMode):n.parseVideoConstraints(null,t.deviceId)};console.crlog("[Video] local video camID:".concat(t.id," getUserMedia:").concat(JSON.stringify(e))),navigator.mediaDevices.getUserMedia(e).then(function(e){t.deviceId&&console.crlog("[Video] Local video camID:".concat(t.id,", deviceID:").concat(t.deviceId," getUserMedia success! stream:").concat(e.id)),t.facingMode&&console.crlog("[Video] Local video camID:".concat(t.id,", facingMode:").concat(t.facingMode," getUserMedia success! stream:").concat(e.id)),console.crlog("[Video] Local video camID:".concat(t.id," current settings:").concat(JSON.stringify(e.getVideoTracks()[0].getSettings()))),t.stream=e,t.connect.stream=e,t.connect2.stream=e,n.refreshLocalContainerSrc("",t)}).catch(function(e){throw t.deviceId&&console.crlog("[Video] Local video camID:".concat(t.id,", deviceID:").concat(t.deviceId," getUserMedia fail! ").concat(e)),t.facingMode&&console.crlog("[Video] Local video camID:".concat(t.id,", deviceID:").concat(t.facingMode," getUserMedia fail! ").concat(e)),e})}})}},{key:"refreshLocalContainerSrc",value:function(t,n){function i(e,t){if(e._userID==f.userInfo.userId&&(t.id==e._videoID||-1==e._videoID&&t.id==o.defaultCamID)){console.crlog("[Video] Refresh local videoContainer src..., containerID:".concat(e._id,", camID:").concat(t.id));var n=t.stream||null,i=n?n.id:null,r=n?n.active:null;console.crlog("[Video] Local video camID:".concat(t.id,", containerID:").concat(e._id,", set srcObject, stream:").concat(i,", active:").concat(r)),e._videoEle.srcObject=n,setTimeout(function(){r&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.play()},2e3)}}var o=this;t?this.videoInput.forEach(function(e){i(t,e)}):n?CRRTCUI.videoContainerList.forEach(function(e){i(e,n)}):(console.crlog("[Video] Refresh all local videoContainer src..."),CRRTCUI.videoContainerList.forEach(function(t){t._userID==f.userInfo.userId&&o.videoInput.forEach(function(e){i(t,e)})}))}},{key:"videoAllocRawExt2",value:function(e,t){var n=this.videoInput.find(function(e){return e.id==t%1e4});if(!n)return e.ice_response(),void(e.isResponsed=!0);t<=1e4?(n.connect.offer_cb=e,this.setLocalVideoConnection(n.connect)):1e4<t&&(n.connect2.offer_cb=e,this.setLocalVideoConnection(n.connect2))}},{key:"setLocalVideoConnection",value:function(i){var r="[Video] LocalVideoConnection, MSID:".concat(i.msid,", camID:").concat(i.camID,","),o=new RTCPeerConnection(f.rtcCfg);i.connection=o;var c=0;!function e(){if(1e4<c)return console.crlog("".concat(r," wait more than 10 s, but can not get local video stream!!!")),console.crlog("".concat(r," connectItem.offer_cb.ice_response()")),i.offer_cb&&i.offer_cb.ice_response(),void(i.offer_cb&&(i.offer_cb.isResponsed=!0));if(!i.stream)return console.crlog("".concat(r," the video stream could not be obtained, waiting 500ms...")),void setTimeout(function(){c+=500,e()},500);var t=i.stream;var n=i.stream.getVideoTracks()[0];o.addTrack&&"closed"!==o.signalingState?(console.crlog("".concat(r," addTrack(videoTrack, stream)")),o.addTrack(n,t)):setTimeout(function(){o.dispatchEvent(new Event("negotiationneeded"))},100);console.crlog("".concat(r," createOffer()"));o.createOffer().then(function(e){e.sdp=CRRTCVideo.parseOfferSDP(e.sdp,"send"),i.offer=e,console.crlog("".concat(r," createOffer success!\r\n").concat(e.sdp)),console.crlog("".concat(r," setLocalDescription(offer)")),o.setLocalDescription(e).then(function(e){console.crlog("".concat(r," setLocalDescription success!"))}).catch(function(e){throw console.crlog("".concat(r," setLocalDescription fail! ").concat(e)),e})}).catch(function(e){throw console.crlog("".concat(r," createOffer fail! ").concat(e)),e});o.onicecandidate=function(e){if(e.candidate){i.candidate.push(e.candidate);var t=new a.HashMap;t.set("sdp",i.offer.sdp),t.set("icecandidate",JSON.stringify(i.candidate)),console.crlog("".concat(r," onicecandidate, response candidates(").concat(i.candidate.length,"): ").concat(JSON.stringify(i.candidate))),console.crlog("".concat(r," offer_cb ice_response(").concat(i.msid,", HashMap)...")),i.offer_cb.ice_response(i.msid,t),i.offer_cb.isResponsed=!0}else console.crlog("".concat(r," onicecandidate! e.candidate == ").concat(e.candidate,"!"))};o.oniceconnectionstatechange=function(e){console.crlog("".concat(r," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),i&&i.iceConnectionState&&"completed"==i.iceConnectionState&&setTimeout(function(){console.crlog("".concat(r," answer_cb ice_response()...")),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0},500)};o.onconnectionstatechange=function(e){console.crlog("".concat(r," onconnectionstatechange, connectionState: ").concat(e.currentTarget.connectionState))};o.onsignalingstatechange=function(e){console.crlog("".concat(r," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}()}},{key:"modifyPeerAddrExt",value:function(e,t,n){var i;if(this.videoInput.forEach(function(e){e.connect.msid==n&&(i=e.connect),e.connect2.msid==n&&(i=e.connect2)}),i){var r="[Video] LocalVideoConnection, MSID:".concat(i.msid,", camID:").concat(i.camID,",");console.crlog("".concat(r," modifyPeerAddrExt, answerSDP:\r\n").concat(e.sdp)),i.answer_cb=t,i.answer=e,setTimeout(function(){i.answer_cb&&(console.crlog("".concat(r," answer_cb ice_response()...")),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)},500)}}},{key:"enableSendVideo2Internet",value:function(t){var i,r=this;if(this.videoInput.forEach(function(e){e.connect.camID==t&&(i=e.connect),e.connect2.camID==t&&(i=e.connect2)}),i){if(i&&"stable"==i.connection.signalingState)return;var o="[Video] LocalVideoConnection, MSID:".concat(i.msid,", camID:").concat(i.camID,",");console.crlog("[Video] ".concat(o," setRemoteDescription(answer)")),i.connection.setRemoteDescription(new RTCSessionDescription(i.answer)).then(function(){console.crlog("".concat(o," setRemoteDescription success!"));var e=i.connection.getSenders()[0],t=e.getParameters(),n=r.getMaxbps();t.encodings[0].maxBitrate=n,console.crlog("[Video] ".concat(o," sender setParams, maxBitrate:").concat(n,"bps")),e.setParameters(t).then(function(e){console.crlog("[Video] ".concat(o," sender setParams, maxBitrate:").concat(n,", success!"))}).catch(function(e){throw console.crlog("[Video][Error] ".concat(o," sender setParams, maxBitrate:").concat(n,", fail! ").concat(e)),e}),r.getCurVideoCfg(i.stream).then(function(e){e.width&&e.height&&c.videoResolutionReport(i.msid,"video",e.width,e.height)})}).catch(function(e){throw console.crlog("".concat(o," setRemoteDescription fail! ").concat(e)),e})}}},{key:"setEnableMutiVideo",value:function(e){var t=this,n=this.multipleCams;if(n!=e){this.multipleCams=e;var i=f.allMemberInfo.find(function(e){return e.userId==f.userInfo.userId});1==n?(i&&"VOPEN"==i.videoStatus&&this.uploadCurOpenedCamNumber(),this.videoInput.forEach(function(e){e.id!==t.defaultCamID&&e.stream&&e.stream.active&&(e.stream.getVideoTracks()[0].stop(),e.stream=null,e.connect.stream=null,e.connect2.stream=null)})):i&&"VOPEN"==i.videoStatus&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber())}}},{key:"stopAllLocalVideoTrack",value:function(){console.crlog("[Video] Do stop all local video track..."),this.videoInput.forEach(function(e){e.stream&&"streamCam"!==e.kind&&(e.stream.getVideoTracks()[0].stop(),e.stream=null)})}},{key:"addStreamCam",value:function(e,t){try{console.crlog("[Video] AddStreamCam -- stream --\x3e id:".concat(e.id,", active: ").concat(e.active))}catch(e){throw e}var n=this.streamCamID++,i=a.generateUUID(),r={};r.deviceId=i,r.name=t||i,r.kind="streamCam",r.id=n,r.disabled=!1,r.locAttr=null,r.stream=e,r.connect=new _ConnectItemClass(n,CRRTCLocalVideo.lastLocalVideoMSID++),r.connect2=new _ConnectItemClass(1e4+n,CRRTCLocalVideo.lastLocalVideoMSID++),this.videoInput.push(r),this.uploadAllCamInfo()}}]),e}(),n=function(){function e(){_classCallCheck(this,e),console.crlog("[Video] Init RemoteVideoMgr..."),this.initData()}return _createClass(e,[{key:"initData",value:function(){this.lastRemoteVideoMSID=22e4,this.remoteVideoSSVal=0,this.connectList=[],this.subscribedCamList=[]}},{key:"subscribeVideo",value:function(e,t,n){-1==t&&(t=f.findMemberInfo({want:"defaultCam",use:"termId",value:e})),c.CRICEAPI.BatchSubscribeVideo2(e,t,n)}},{key:"videoAllocRawExt2",value:function(e,t,n){var i=this.connectList.find(function(e){return e.termID==t});if(i){var r=i.list.find(function(e){return e.camID==n});r||(r=new s(n,this.lastRemoteVideoMSID++),i.list.push(r)),r.offer_cb=e,this.setRemoteVideoConnection(t,r)}else{var o=new l(t),c=new s(n,this.lastRemoteVideoMSID++);o.list.push(c),this.connectList.push(o),c.offer_cb=e,this.setRemoteVideoConnection(t,c)}}},{key:"modifyPeerAddrExt",value:function(o,c,a){console.crlog("[Video] MSID:".concat(a," modifyPeerAddrExt...")),this.connectList.forEach(function(e){var t=e.list.find(function(e){return e.msid==a});if(t){t.answer_cb=c,t.answer=o;var n=e.termID,i=f.allMemberInfo.find(function(e){return e.termId==n}),r="[Video] MSID:".concat(t.msid,", termID:").concat(n,", userID:").concat(i.userId,", camID:").concat(-1==t.camID?i.defaultCam:t.camID,", remoteVideoConnection");console.crlog("".concat(r," received answer sdp: \r\n").concat(o.sdp)),console.crlog("".concat(r," setRemoteDescription(answer)")),t.connection.setRemoteDescription(new RTCSessionDescription(o)).then(function(){console.crlog("".concat(r," setRemoteDescription success!"))}).catch(function(e){throw console.crlog("".concat(r," setRemoteDescription fail! ").concat(e)),e}),setTimeout(function(){console.crlog("".concat(r," answer_cb ice_response()...")),t.answer_cb.ice_response(),t.answer_cb.isResponsed=!0},500)}})}},{key:"setRemoteVideoConnection",value:function(t,n){var i=f.allMemberInfo.find(function(e){return e.termId==t}),r=new RTCPeerConnection(f.rtcCfg),o="[Video] MSID:".concat(n.msid,", termID:").concat(t,", userID:").concat(i.userId,", camID:").concat(n.camID,", remoteVideoConnection");n.connection=r;var e={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog("".concat(o," createOffer(").concat(JSON.stringify(e),")")),r.createOffer(e).then(function(e){e.sdp=CRRTCVideo.parseOfferSDP(e.sdp),console.crlog("".concat(o," createOffer success! offerSDP is:\r\n").concat(e.sdp)),n.offer=e,console.crlog("".concat(o," setLocalDescription(offer)")),r.setLocalDescription(e).then(function(){console.crlog("".concat(o," offer setLocalDescription success!"))}).catch(function(e){throw console.error("".concat(o," offer setLocalDescription fail! ").concat(e)),e})}).catch(function(e){throw console.crlog("".concat(o," createOffer fail! ").concat(e)),e}),r.onicecandidate=function(e){if(e.candidate&&!n.isResponsedCandidate){n.candidate.push(e.candidate);var t=new a.HashMap;t.set("sdp",n.offer.sdp),t.set("icecandidate",JSON.stringify(n.candidate)),console.crlog("".concat(o," onicecandidate, response candidates(").concat(n.candidate.length,"): ").concat(JSON.stringify(n.candidate))),console.crlog("".concat(o," offer_cb ice_response(").concat(n.msid,", HashMap)...")),n.offer_cb.ice_response(n.msid,t),n.offer_cb.isResponsed=!0,n.isResponsedCandidate=!0}else 0===n.candidate.length&&console.crlog("".concat(o," onicecandidate! null!"))},r.oniceconnectionstatechange=function(e){console.crlog("".concat(o," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),n&&n.iceConnectionState&&"completed"==n.iceConnectionState&&setTimeout(function(){console.crlog("".concat(o," answer_cb ice_response()...")),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0},500)},r.ontrack=function(e){console.crlog("".concat(o," ontrack!")),console.crlog("".concat(o,", video stream:").concat(e.streams[0].id)),n.stream=e.streams[0],CRVideo_NotifyVideoStream.callback(i.userId,e.streams[0]);try{return void CRRTCUI.videoContainerList.forEach(function(e){e._userID==i.userId&&(e._videoID==n.camID%1e4||-1==e._videoID&&n.camID%1e4==i.defaultCam)&&(console.crlog("".concat(o," containerID:").concat(e._id,", videoEle set srcObject...")),e._videoEle.srcObject=n.stream,setTimeout(function(){e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.play()},2e3))})}catch(e){throw console.error(e),e}},r.onconnectionstatechange=function(e){console.crlog("".concat(o," onconnectionstatechange, connectionState: ").concat(e.currentTarget.connectionState))},r.onsignalingstatechange=function(e){console.crlog("".concat(o," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"videoMSIDFree",value:function(r){this.connectList.forEach(function(i){i.list.forEach(function(t,e){if(t.msid==r){t.connection&&t.connection.close(),t.stream=null;var n=f.allMemberInfo.find(function(e){return e.termId==i.termID});CRRTCUI.videoContainerList.forEach(function(e){if(e._userID==n.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==n.defaultCam))try{e._videoEle.srcObject=null}catch(e){}}),i.list.splice(e,1)}})})}},{key:"updateSubscribeVideo",value:function(){var s=this;this.subcribeTimer&&clearTimeout(this.subcribeTimer),this.subcribeTimer=setTimeout(function(){console.crlog("[Video] UpdateSubscribeVideo...");var o=[],c=[];CRRTCUI.videoContainerList.forEach(function(t){var n=f.allMemberInfo.find(function(e){return e.userId==t._userID});if(n&&n.defaultCam&&n.termId!=f.userInfo.termId&&t._handler.parentNode&&"none"!=t._handler.style.display){var e=o.find(function(e){return e.termID==n.termId});e||(e={termID:n.termId,list:[]},o.push(e));var i=-1==t._videoID?n.defaultCam:t._videoID;!e.list.includes(i)&&n.openedCamIDs.includes(i)&&e.list.push(i)}});function a(e,t){var n=new Set(t);return e.filter(function(e){return!n.has(e)})}o.forEach(function(t){var n=[],e=s.subscribedCamList.find(function(e){return e.termID==t.termID}),i=f.allMemberInfo.find(function(e){return e.termId==t.termID});if(i)if(e){var r=a(t.list,e.list);r&&r.forEach(function(e){var t={termID:i.termId,camID:e,ssVal:s.remoteVideoSSVal};c.push(t),n.push(t)})}else t.list.forEach(function(e){var t={termID:i.termId,camID:e,ssVal:s.remoteVideoSSVal};c.push(t),n.push(t)})}),s.subscribedCamList.forEach(function(t){var n=[],e=o.find(function(e){return e.termID==t.termID}),i=f.allMemberInfo.find(function(e){return e.termId==t.termID});if(i)if(e){var r=a(t.list,e.list);r&&r.forEach(function(e){var t={termID:i.termId,camID:e,ssVal:255};c.push(t),n.push(t)})}else t.list.forEach(function(e){var t={termID:i.termId,camID:e,ssVal:255};c.push(t),n.push(t)})}),s.subscribedCamList=o,console.crlog("[Video] NewsubscribeVideo and unSubscribeVideo resArr: ".concat(JSON.stringify(c))),c.forEach(function(e){s.subscribeVideo(e.termID,e.camID,e.ssVal)})},100)}},{key:"updateConnectList",value:function(t,n,e){console.crlog("[Video] TermID:".concat(t,", camID:").concat(n,", containerID:").concat(e._id," updateConnectList..."));var i=this.connectList.find(function(e){return e.termID==t});if(i){i.list.find(function(e){return e.camID==n})||i.list.push(new s(n,this.lastRemoteVideoMSID++))}else{var r=new l(t);r.list.push(new s(n,this.lastRemoteVideoMSID++)),this.connectList.push(r)}}},{key:"refreshContainerSrc",value:function(o){o?(console.crlog("[Video] Do refresh remote video container src..., containerID:".concat(o._id)),this.connectList.forEach(function(t){var r=f.allMemberInfo.find(function(e){return e.termId==t.termID});t.list.forEach(function(e){var t,n,i;n=e,i=r,(t=o)._userID==i.userId&&(t._videoID==n.camID%1e4||-1==t._videoID&&n.camID%1e4==i.defaultCam)&&(n.stream&&n.stream.active&&console.crlog("[Video] TermID:".concat(i.termId,", userID:").concat(i.userId,", containerID:").concat(t._id," video set srcObject, stream:").concat(n.stream.id)),n.stream&&n.stream.active&&(t._videoEle.srcObject=n.stream),setTimeout(function(){t&&t._videoEle&&t._videoEle.srcObject&&t._videoEle.play()},2e3))})})):(console.crlog("[Video] Do refresh all remote video container src..."),this.connectList.forEach(function(t){var n=f.allMemberInfo.find(function(e){return e.termId==t.termID});t.list.forEach(function(t){CRRTCUI.videoContainerList.forEach(function(e){e._userID==n.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==n.defaultCam)&&(t.stream&&t.stream.active&&console.crlog("[Video] TermID:".concat(n.termId,", userID:").concat(n.userId,", containerID:").concat(e._id," video set srcObject, stream:").concat(t.stream.id)),t.stream&&t.stream.active&&(e._videoEle.srcObject=t.stream),setTimeout(function(){e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.play()},2e3))})})}))}},{key:"userLeftHandler",value:function(t){console.crlog("[Video] Do user left meet video handler...");var e=this.subscribedCamList.findIndex(function(e){return e.termID==t});this.subscribedCamList.splice(e,1);var n=this.connectList.findIndex(function(e){return e.termID==t});this.connectList.splice(n,1)}},{key:"closeAllRTCConnection",value:function(){console.crlog("[Video] Do close all remote video RTC connection..."),this.connectList.forEach(function(e){e.list.forEach(function(e){e.connection&&(e.connection.close(),e.connection=null)})})}}]),e}();c.__crVideoClass=e,c.__crLocalVideoClass=t,c.__crRemoteVideoClass=n,c.CRRTCVideo=new c.__crVideoClass,c.CRRTCLocalVideo=new c.__crLocalVideoClass,c.CRRTCRemoteVideo=new c.__crRemoteVideoClass,c.CRVideo_VideoStatusChanged=new f.CbProxy("CRVideo_VideoStatusChanged"),c.CRVideo_DefVideoChanged=new f.CbProxy("CRVideo_DefVideoChanged"),c.CRVideo_VideoDevChanged=new f.CbProxy("CRVideo_VideoDevChanged"),c.CRVideo_NotifyOpenVideo=new f.CbProxy("CRVideo_NotifyOpenVideo"),c.CRVideo_NotifyVideoStream=new f.CbProxy("CRVideo_NotifyVideoStream"),c.CRVideo_SetVideoCfgRslt=new f.CbProxy("CRVideo_SetVideoCfgRslt");var s=function e(t,n){_classCallCheck(this,e),this.camID=t,this.ssValue=0,this.msid=n,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidate=[],this.stream=null};c._ConnectItemClass=s;var l=function e(t){_classCallCheck(this,e),this.termID=t,this.list=[]}}(window,Ice,CRVideo),function(s,l,d){var e=function(){function e(){_classCallCheck(this,e),console.crlog("[Message] Init IMMsgMgr..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){}},{key:"initIceCallback",value:function(){var r=this;this.ICECallback={receiveIMMsg:function(e){console.crlog("[Message] ICE Notify: receiveIMMsg, params: ".concat(JSON.stringify({data:e}))),r.receiveIMMsg(e)},notifyIMForbidStatus:function(e,t,n){console.crlog("[Message] ICE Notify: notifyIMForbidStatus, params:".concat(JSON.stringify({operId:e,dstId:t,bForbid:n})))},notifyClearIMMsg:function(e){console.crlog("[Message] ICE Notify: notifyClearIMMsg, params:".concat(JSON.stringify({operId:e})))},notifyDeleteIMMsg:function(e){console.crlog("[Message] ICE Notify: notifyDeleteIMMsg, params:".concat(JSON.stringify({sn:e})))},sendIMMsgRslt:function(e,t,n,i){console.crlog("[Message] ICE Callback --\x3e sendIMMsgRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t,taskID:n,cookie:i}))),r.sendIMMsgRslt(e,t,n,i)}}}},{key:"initSDKInterface",value:function(){var i=this;s.CRVideo_SendIMMsg=function(e,t,n){return console.crlog("[Message] CRVideo_SendIMMsg(".concat(e,",").concat(t,",").concat(n,")")),i.sendIMMsg(e,t,n)}}},{key:"sendIMMsg",value:function(e,t,n){var i=32767,r="",o=new Conference.IMFont(4278190080,12),c=(new Date).getTime()/1e3;""!==t&&void 0!==t&&(i=d.findMemberInfo({use:"userId",want:"termId",value:t}),r=d.findMemberInfo({use:"userId",want:"nickname",value:t}));var a=l.generateUUID();try{console.crlog("[Message] CR__SendIMMsg(".concat(i,",").concat(r,",").concat(o,",").concat(e,",").concat(c,",").concat(a,",").concat(n,")"))}catch(e){throw e}return s.CR__SendIMMsg(i,r,o,e,c,a,n),a}},{key:"sendIMMsgRslt",value:function(e,t,n,i){var r=0;900==e||901==e?(r=1001,msg="信息包含敏感词"):3==e&&(send_IM_type=2,msg="没有聊天权限"),console.crlog("[Message] CRVideo_SendIMMsgRslt.callback(".concat(n,",").concat(r,",").concat(i,")")),s.CRVideo_SendIMMsgRslt.callback(n,r,i)}},{key:"receiveIMMsg",value:function(e){var t=e.inMsg,n=d.findMemberInfo({use:"termId",want:"userId",value:e.srcTermId}),i=t.msg,r=1e3*t.sendTime;console.crlog("[Message] CRVideo_NotifyIMmsg/CRVideo_NotifyIMMsg.callback(".concat(n,",").concat(i,",").concat(r,")")),s.CRVideo_NotifyIMmsg.callback(n,i,r),s.CRVideo_NotifyIMMsg.callback(n,i,r)}}]),e}(),t=function(){function e(){_classCallCheck(this,e),console.crlog("[Message] Init TerminalMsgMgr..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){}},{key:"initIceCallback",value:function(){var r=this;this.ICECallback={terminalMsgRslt:function(e,t,n){console.crlog("[Message] ICE Callback --\x3e terminalMsgRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t,cookie:n}))),r.terminalMsgRslt(e,t,n)},notifyTerminalMsg:function(e,t,n,i){console.crlog("[Message] ICE Callback --\x3e notifyTerminalMsg, params:".concat(JSON.stringify({moduleName:e,jsonMsg:t,dstTermID:n,srcTermId:i}))),r.notifyTerminalMsg(e,t,n,i)}}}},{key:"initSDKInterface",value:function(){var n=this;s.CRVideo_SendMeetingCustomMsg=function(e,t){console.crlog("[Message] CRVideo_SendMeetingCustomMsg(".concat(e,",").concat(t,")")),n.sendMeetingCustiomMsg(e,t)}}},{key:"sendMeetingCustiomMsg",value:function(e,t){var n="CloudroomMeetingSDK";console.crlog("[Message] CR__TerminalMsg(".concat(n,",").concat(e,",").concat("",",").concat(!0,",").concat(t,")")),s.CR__TerminalMsg(n,e,"",!0,t)}},{key:"terminalMsgRslt",value:function(e,t,n){console.crlog("[Message] CRVideo_SendMeetingCustomMsgRslt.callback(".concat(e,",").concat(n,")")),CRVideo_SendMeetingCustomMsgRslt.callback(e,n)}},{key:"notifyTerminalMsg",value:function(e,t,n,i){var r=d.findMemberInfo({use:"termId",want:"userId",value:i});"CloudroomMeetingSDK"==e&&(console.crlog("[Message] CRVideo_NotifyMeetingCustomMsg.callback(".concat(r,",").concat(t,")")),s.CRVideo_NotifyMeetingCustomMsg.callback(r,t))}}]),e}();s.__crIMMsgClass=e,s.__crTerminalMsgClass=t,s.CRRTCIMMsg=new s.__crIMMsgClass,s.CRRTCTermMsg=new s.__crTerminalMsgClass,s.CRVideo_SendIMMsgRslt=new d.CbProxy("CRVideo_SendIMMsgRslt"),s.CRVideo_NotifyIMmsg=new d.CbProxy("CRVideo_NotifyIMmsg"),s.CRVideo_NotifyIMMsg=new d.CbProxy("CRVideo_NotifyIMMsg"),s.CRVideo_NotifyMeetingCustomMsg=new d.CbProxy("CRVideo_NotifyMeetingCustomMsg"),s.CRVideo_SendMeetingCustomMsgRslt=new d.CbProxy("CRVideo_SendMeetingCustomMsgRslt")}(window,Ice,CRVideo),function(l,d,c){var e=function(){function e(){_classCallCheck(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){this.isSvrRecording=!1,this.MixersList=[],this.svrRecordStatus=0}},{key:"initIceCallback",value:function(){var c=this;this.ICECallback={notifySvrRecordStateChanged:function(e,t,n){console.crlog("[SvrRecord] ICE Notify: notifySvrRecordStateChanged, params:".concat(JSON.stringify({operatorID:e,state:t,err:n})));var i,r=t._value,o=d.findMemberInfo({use:"termId",want:"userId",value:e});switch(c.svrRecordStatus=r,t.name){case"NO_RECORD":i=0;break;case"STARTING":i=1;break;case"RECORDING":i=2;break;case"PAUSED":i=3;break;case"STOPPING":i=4;break;default:i=t._value}console.crlog("[SvrRecord] CRVideo_SvrMixerStateChanged/CRVideo_SvrRecordStateChanged.callback(".concat(i,",").concat(n,")")),CRVideo_SvrMixerStateChanged.callback(i,n,o),l.CRVideo_SvrRecordStateChanged.callback(i,n),setTimeout(function(){l.CRVideo_UploadingLog()},1e3)},notifySvrRecordCfgChanged:function(e,t){var n=JSON.parse(t);console.crlog("[SvrRecord] ICE Notify: notifySvrRecordCfgChanged, params:".concat(JSON.stringify({operatorID:e,svrConfig:n}))),console.crlog("[SvrRecord] CRVideo_SvrRecVideosChanged/CRVideo_SvrMixerCfgChanged.callback()"),l.CRVideo_SvrRecVideosChanged.callback(),l.CRVideo_SvrMixerCfgChanged.callback()},notifySvrRecordFileState:function(e){var t=JSON.parse(e);console.crlog("[SvrRecord] ICE Notify: notifySvrRecordFileState, params:".concat(JSON.stringify({State:t})));var n={errCode:t.errCode,state:t.state,duration:t.duration,fileSize:t.fileSize,fileName:t.fileName,id:t.id};console.crlog("[SvrRecord] CRVideo_NotifySvrRecordFileState.callback(".concat(JSON.stringify(t),")")),console.crlog("[SvrRecord] CRVideo_SvrMixerOutputInfo.callback(".concat(JSON.stringify(n),")")),l.CRVideo_NotifySvrRecordFileState.callback(t),l.CRVideo_SvrMixerOutputInfo.callback(n)},startSvrRecordRslt:function(e,t){console.crlog("[SvrRecord] ICE Callback --\x3e startSvrRecordRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t}))),0==e?(console.crlog("[SvrRecord] Start svrRecord success!"),c.isSvrRecording=!0):console.crlog("[SvrRecord] Start svrRecord fail! errCode:".concat(e,", errDesc:").concat(t))},updateSvrRecCfgRslt:function(e,t){console.crlog("[SvrRecord] ICE Callback --\x3e updateSvrRecCfgRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t})))},stopSvrRecordRslt:function(e,t){console.crlog("[SvrRecord] ICE Callback --\x3e stopSvrRecordRslt, params:".concat(JSON.stringify({errCode:e,errDesc:t})))}}}},{key:"initSDKInterface",value:function(){var s=this;l.CRVideo_StartSvrMixer=function(e,c,a){try{console.crlog("[SvrRecord] CRVideo_StartSvrMixer(MutiMixerCfgs, MutiMixerContents, MutiMixerOutputs)"),console.crlog("[SvrRecord] MutiMixerCfgs: ".concat(JSON.stringify(e))),console.crlog("[SvrRecord] MutiMixerContents: ".concat(JSON.stringify(c))),console.crlog("[SvrRecord] MutiMixerOutputs: ".concat(JSON.stringify(a)))}catch(e){console.error(e)}s.MixersList=[],e.forEach(function(t){var n,i,r={};if(r.id=t.id,r.recCfg={},r.contents=[],r.clientType=1,t.streamTypes=t.streamTypes?t.streamTypes:3,c.forEach(function(e){e.id===t.id&&(n=e.content)}),a.forEach(function(e){e.id==t.id&&(i=e.output)}),t.streamTypes&&3!=t.streamTypes){if(t.streamTypes&&1==t.streamTypes){var e=t.aCfg;e&&(r.recCfg.audioFormat=e.audioFormat||1,r.recCfg.channelType=e.channelType||1,r.recCfg.streamTypes=1),i&&i.forEach(function(e){0==e.type&&(r.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(r.recCfg.userNetDiskId=d.multiProject.userId))}),n&&(r.contents=s.fmtAudioContent(n)),s.MixersList.push(r)}}else{var o=t.cfg;o&&(r.recCfg.dstResolutionWidth=o.width||1280,r.recCfg.dstResolutionHeight=o.height||720,r.recCfg.fps=o.frameRate||20,r.recCfg.gop=o.gop||120,r.recCfg.maxBPS=o.bitRate||35e4,r.recCfg.qp=o.defaultQP||26,r.recCfg.streamTypes=3),i&&i.forEach(function(e){0==e.type?(r.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(r.recCfg.userNetDiskId=d.multiProject.userId)):1==e.type&&(r.recCfg.liveUrl=e.liveUrl)}),n&&(r.contents=s.fmtVideoContent(n)),s.MixersList.push(r)}});try{console.crlog("[MsgMgr] CR__StartSvrRecord(".concat(JSON.stringify(s.MixersList),")"))}catch(e){throw e}l.CR__StartSvrRecord(JSON.stringify(s.MixersList))},l.CRVideo_UpdateSvrMixerContent=function(e){try{console.crlog("[SvrRecord] CRVideo_UpdateSvrMixerContent(".concat(JSON.stringify(e),")"))}catch(e){console.error(e)}if(s.isSvrRecording){e.forEach(function(t){s.MixersList.forEach(function(e){e.id===t.id&&(3===e.recCfg.streamTypes&&(e.contents=s.fmtVideoContent(t.content)),1===e.recCfg.streamTypes&&(e.contents=s.fmtAudioContent(t.content)))})});try{console.crlog("[MsgMgr] CR__UpdateSvrRecCfg(".concat(JSON.stringify(s.MixersList),")"))}catch(e){throw e}l.CR__UpdateSvrRecCfg(JSON.stringify(s.MixersList))}else console.crlog("[SvrRecord] UpdateSvrMixercontent fail, is not recording!")},l.CRVideo_StopSvrMixer=function(){console.crlog("[SvrRecord] CRVideo_StopSvrMixer()"),s.isSvrRecording=!1,console.crlog("[MsgMgr] CR__StopSvrRecord()"),l.CR__StopSvrRecord()},l.CRVideo_GetSvrMixerState=function(){var e=s.svrRecordStatus||0;return console.crlog("[SvrRecord] CRVideo_GetSvrMixerState(), return: ".concat(e)),e}}},{key:"fmtAudioContent",value:function(e){var t=JSON.parse(JSON.stringify(e));return t.forEach(function(e){if(9==e.type){var t=d.findMemberInfo({use:"userId",want:"termId",value:e.param});e.param={termId:t}}}),t}},{key:"fmtVideoContent",value:function(e){var t=JSON.parse(JSON.stringify(e));return console.crlog("[SvrRecord] Format video content, user contents:".concat(JSON.stringify(t))),t.forEach(function(e){if(4==e.type)e.param={},e.param.resourceid=c.generateUUID();else if(0==e.type){var t,n,i,r;n=(t=e.param.camid.split("."))[t.length-1],t.length=t.length-1,i=t.join(".");var o=d.allMemberInfo.find(function(e){return e.userId==i});r=o&&o.termId?o.termId:"",e.param={},e.param.camId=+n,e.param.termId=r}else 7==e.type&&(e.param.resourceid=c.generateUUID())}),console.crlog("[SvrRecord] Format video content, new contents:".concat(JSON.stringify(t))),t}}]),e}();l.__crSvrRecordClass=e,l.CRRTCRecord=new l.__crSvrRecordClass,l.CRVideo_SvrRecordStateChanged=new d.CbProxy("CRVideo_SvrRecordStateChanged"),l.CRVideo_SvrRecVideosChanged=new d.CbProxy("CRVideo_SvrRecVideosChanged"),l.CRVideo_NotifySvrRecordFileState=new d.CbProxy("CRVideo_NotifySvrRecordFileState"),l.CRVideo_SvrMixerCfgChanged=new d.CbProxy("CRVideo_SvrMixerCfgChanged"),l.CRVideo_SvrMixerStateChanged=new d.CbProxy("CRVideo_SvrMixerStateChanged"),l.CRVideo_SvrMixerOutputInfo=new d.CbProxy("CRVideo_SvrMixerOutputInfo")}(window,CRVideo,Ice),function(i,r){var e=function(){function e(){_classCallCheck(this,e),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initIceCallback",value:function(){this.ICECallback={kickoutRslt:function(e,t){console.log(e,t)},changeNicknameRslt:function(e,t){console.log(e,t)}}}},{key:"initSDKInterface",value:function(){i.CRVideo_GetAllMembers=function(){var n=[];r.allMemberInfo.forEach(function(e){var t={};t.userID=e.userId,t.nickname=e.nickname,t.audioStatus=i.CRVideo_ASTATUS[e.audioStatus],t.videoStatus=i.CRVideo_VSTATUS[e.videoStatus],n.push(t)});try{console.crlog("[Member] CRVideo_GetAllMembers(), return: ".concat(JSON.stringify(n)))}catch(e){throw e}return n},i.CRVideo_GetMemberInfo=function(t){var n={};r.allMemberInfo.forEach(function(e){t==e.userId&&(n.userID=e.userId,n.nickname=e.nickname,n.audioStatus=i.CRVideo_ASTATUS[e.audioStatus],n.videoStatus=i.CRVideo_VSTATUS[e.videoStatus])});try{console.crlog("[Member] CRVideo_GetMemberInfo(".concat(t,"), return: ").concat(JSON.stringify(n)))}catch(e){throw e}return n},i.CRVideo_GetMemberNickName=function(t){var n="";return t==r.userInfo.userId?n=r.userInfo.nickname:r.allMemberInfo.forEach(function(e){t==e.userId&&(n=e.nickname)}),console.crlog("[Member] CRVideo_GetMemberNickName(".concat(t,"), return: ").concat(n)),n},i.CRVideo_IsUserInMeeting=function(e){var t=!1;return r.allMemberInfo.forEach(function(e){userId==e.userId&&(t=!0)}),console.crlog("[Member] CRVideo_IsUserInMeeting(".concat(e,"), return: ").concat(t)),t},i.CRVideo_SetNickName=function(e,t){console.crlog("[Member] CRVideo_SetNickName(".concat(e,",").concat(t,")"));var n=r.findMemberInfo({want:"termId",use:"userId",value:e});console.crlog("[Member] CR__ChangeNickname(".concat(n,",").concat(t,")")),CR__ChangeNickname(n,t)},i.CRVideo_Kickout=function(e){console.crlog("[Member] CRVideo_Kickout(".concat(e,")"));var t=r.findMemberInfo({want:"termId",use:"userId",value:e});console.crlog("[Member] CR__Kickout(".concat(t,")")),CR__Kickout(t)}}}]),e}();i._crMemberClass=e,i.CRRTCMember=new i._crMemberClass}(window,CRVideo,Ice),function(n,c,a){function t(e){_classCallCheck(this,t),this.msid=e,this.offer_cb=null,this.offer=null,this.answer_cb=null,this.answer=null,this.candidates=[],this.stream=null,this.connection=null,this.logstr=null}var e=function(){function e(){_classCallCheck(this,e),console.crlog("[Screen] Init ScreenShareMgr..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){this.getDisplayMediaAPI=!1,this.screenFPS=5,this.screenHeight=n.screen.height<=1080?n.screen.height:1080,this.screenCfg={audio:!1,video:{frameRate:{ideal:this.screenFPS},height:{ideal:this.screenHeight}}},this.isSharing=!1,this.isMySharing=!1,this.localScreenStream=null,this.remoteScreenStream=null,this.userInterfaceStop=!1,this.lastLocalMSID=13e4,this.lastRemoteMSID=23e4,this.localConnection=new t(this.lastLocalMSID++),this.remoteConnection=new t(this.lastRemoteMSID++),this.screenShareInfo={},navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia&&(this.getDisplayMediaAPI=!0)}},{key:"initIceCallback",value:function(){var n=this;this.ICECallback={notifyStartScreenShare:function(t){console.crlog("[Screen] ICE Notify --\x3e notifyStartScreenShare, params:".concat(JSON.stringify(t))),n.screenShareInfo=t;var e=a.allMemberInfo.find(function(e){return e.termId==t.sharer});console.crlog("[Screen] CRVideo_NotifyScreenShareStarted.callback(".concat(e.userId,")")),e&&CRVideo_NotifyScreenShareStarted.callback(e.userId),n.isSharing=!0,t.sharer==a.userInfo.termId&&(n.isMySharing=!0)},notifyStopScreenShare:function(t){console.crlog("[Screen] ICE Notify --\x3e notifyStopScreenShare, params:".concat(JSON.stringify({operator:t})));var e=a.allMemberInfo.find(function(e){return e.termId==t});e&&console.crlog("[Screen] CRVideo_NotifyScreenShareStopped.callback(".concat(e.userId,")")),e&&CRVideo_NotifyScreenShareStopped.callback(e.userId),n.isSharing=!1,t==a.userInfo.termId&&(n.isMySharing=!1)},getScreenShareInfoRslt:function(e,t){try{console.crlog("[Screen] ICE Callback --\x3e getScreenShareInfoRslt, params:".concat(JSON.stringify({errCode:e,data:t})))}catch(e){throw e}0==e&&1==t.state&&(console.crlog("[Screen] ScreenShare is strated in this meeting..."),n.ICECallback.notifyStartScreenShare(t))},startScreenShareRslt:function(e){console.crlog("[Screen] ICE Callback --\x3e startScreenShareRslt, params:".concat(JSON.stringify({errCode:e}))),console.crlog("[Screen] CRVideo_StartScreenShareRslt.callback(".concat(e,")")),CRVideo_StartScreenShareRslt.callback(e)},stopScreenShareRslt:function(e){console.crlog("[Screen] ICE Callback --\x3e stopScreenShareRslt, params:".concat(JSON.stringify({errCode:e}))),console.crlog("[Screen] CRVideo_StopScreenShareRslt.callback(".concat(e,")")),CRVideo_StopScreenShareRslt.callback(e)}}}},{key:"initSDKInterface",value:function(){var t=this;n.CRVideo_StartScreenShare=function(e){console.crlog("[Screen] CRVideo_StartScreenShare(".concat(e,")")),t.startScreenShare(e)},n.CRVideo_StopScreenShare=function(){console.crlog("[Screen] CRVideo_StopScreenShare()"),t.localScreenStream&&(console.crlog("[Screen] Stop local screen stream track"),t.localScreenStream.getTracks()[0].stop()),t.localScreenStream=null,CRICEAPI.StopScreenShare(),t.userInterfaceStop=!0}}},{key:"videoAllocRawExt2",value:function(e,t,n){n?this.setLocalScreenConnection(e):this.setRemoteScreenConnection(e)}},{key:"modifyPeerAddrExt",value:function(e,t,n,i){var r={type:"answer",sdp:i.get("sdp")};"localScreen"==e&&this.localScreenModifyPeerAddrExt(t,n,r),"remoteScreen"==e&&this.remoteScreenModifyPeerAddrExt(t,n,r)}},{key:"parseOfferSDP",value:function(e,t){return a.maxBps_screen&&(console.crlog("[Screen] c=IN IP4 0.0.0.0\r\nb=AS:".concat(a.maxBps_screen)),e=e.replace("c=IN IP4 0.0.0.0","c=IN IP4 0.0.0.0\r\nb=AS:".concat(a.maxBps_screen))),t&&(e=e.replace("a=sendrecv","a=".concat(t))),e}},{key:"parseAnswerSDP",value:function(e,t){var n=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",i=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&2<e.split(n).length&&(e=e.replace("".concat(n).concat(i),"")),e="local"==t?(e=e.replace("profile-level-id=42001f","x-google-min-bitrate=800;x-google-start-bitrate=800;")).replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",""):e.replace("a=sendrecv","a=sendonly")}},{key:"startScreenShare",value:function(e){var t=this;if(e&&e.fps&&(this.screenFPS=e.fps,this.screencfg.frameRate.ideal=e.fps),e&&e.height&&(this.screenHeight=e.height,this.screencfg.height.ideal=e.height),this.getDisplayMediaAPI){try{console.crlog("[Screen] navigator.mediaDevices.getDisplayMedia(".concat(JSON.stringify(this.screenCfg),")"))}catch(e){throw e}navigator.mediaDevices.getDisplayMedia(this.screenCfg).then(function(e){t.gotLocalScreenStream(e)}).catch(function(e){throw console.crlog("[Screen] getDisplayMedia fail: ".concat(e)),CRVideo_StartScreenShareRslt.callback(8002),e})}else console.crlog("[Screen] CRVideo_StartScreenShareRslt.callback(8004)"),CRVideo_StartScreenShareRslt.callback(8004)}},{key:"gotLocalScreenStream",value:function(e){var t=this;console.crlog("[Screen] GetDisplayMedia success! stream: ".concat(e.id)),this.localScreenStream=e,this.localScreenStream.getTracks()[0].onended=function(e){t.userInterfaceStop?console.crlog("[Screen] Screen share stoped by interface."):(console.crlog("[Screen] Screen share stoped by plug-in button."),t.userInterfaceStop=!1,n.CRICEAPI.StopScreenShare(),t.isSharing=!1,t.isMySharing=!1)},n.CRICEAPI.StartScreenShare()}},{key:"setLocalScreenConnection",value:function(e){var t=this,n=this.localConnection,i="[Screen] Local screenShare RTCPeerConnection,";n.logstr=i,n.offer_cb=e,n.offer_cb.isResponsed=!1,console.crlog("[Screen] Local screenShare, new RTCPeerConnection(".concat(JSON.stringify(a.rtcCfg),")"));var r=new RTCPeerConnection(a.rtcCfg);n.connection=r,n.stream=this.localScreenStream,console.crlog("".concat(i," addTrack(localScreenTrack, localScreenStream)")),r.addTrack(n.stream.getTracks()[0],n.stream),console.crlog("".concat(i," createOffer()")),r.createOffer().then(function(e){console.crlog("".concat(i," createOffer success!")),e.sdp=t.parseOfferSDP(e.sdp,"sendonly"),console.crlog("".concat(i," offer.sdp:\r\n").concat(e.sdp)),n.offer=e,console.crlog("".concat(i," offer setLocalDescription(offer)")),r.setLocalDescription(e).then(function(e){console.crlog("".concat(i," offer setLocalDescription success!"))}).catch(function(e){throw console.crlog("".concat(i," offer setLocalDescription fail! ").concat(e)),e})}).catch(function(e){throw console.crlog("".concat(i," createOffer fail! ").concat(e)),e});setTimeout(function(){n.offer_cb.isResponsed||(console.crlog("".concat(i," offer_cb ice_response()...(No candidate for more than 20 s)")),n.offer_cb.ice_response(),n.offer_cb.isResponsed=!0)},2e4);r.onicecandidate=function(e){if(e.candidate){n.candidates.push(e.candidate);var t=new c.HashMap;t.set("sdp",n.offer.sdp),t.set("icecandidate",JSON.stringify(n.candidates)),console.crlog("".concat(i," onicecandidate, response candidates(").concat(n.candidates.length,"): ").concat(JSON.stringify(n.candidates))),console.crlog("".concat(i," offer_cb ice_response(").concat(n.msid,", HashMap)...")),n.offer_cb.ice_response(n.msid,t),n.offer_cb.isResponsed=!0}else console.crlog("".concat(i," onicecandidate! e.candidate == ").concat(e.candidate,"!"))},r.oniceconnectionstatechange=function(e){console.crlog("".concat(i," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),n&&n.iceConnectionState&&"completed"==n.iceConnectionState&&setTimeout(function(){n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog("".concat(i," answer_cb ice_response()...")),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)},500)},r.onconnectionstatechange=function(e){console.crlog("".concat(i," onconnectionstatechange, connectionState: ").concat(e.currentTarget.connectionState))},r.onsignalingstatechange=function(e){console.crlog("".concat(i," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"localScreenModifyPeerAddrExt",value:function(e,t,n){var i=this;this.localConnection.answer_cb=e;var r=this.localConnection.logstr,o=this.localConnection.connection;n.sdp=this.parseAnswerSDP(n.sdp,"local"),console.crlog("".concat(r," ModifyPeerAddrExt, answerSDP:\r\n").concat(n.sdp)),this.localConnection.answer=n,console.crlog("".concat(r," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then(function(e){console.crlog("".concat(r," answer setRemoteDescription success!")),videoResolutionReport(i.localConnection.msid,"screen"),i.refreshContainerSrc()}).catch(function(e){throw console.crlog("".concat(r," answer setRemoteDescription fail! ").concat(e)),e}),setTimeout(function(){i.localConnection.answer_cb.isResponsed||(console.crlog("".concat(r," answer_cb ice_response()...")),i.localConnection.answer_cb.ice_response(),i.localConnection.answer_cb.isResponsed=!0)},500)}},{key:"setRemoteScreenConnection",value:function(e){var t=this,n=this.remoteConnection,i="[Screen] Remote screenShare RTCPeerConnection,";n.logstr=i,n.offer_cb=e,n.offer_cb.isResponsed=!1,console.crlog("[Screen] Remote screenShare, new RTCPeerConnection(".concat(JSON.stringify(a.rtcCfg),")"));var r=new RTCPeerConnection(a.rtcCfg);n.connection=r;var o={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog("".concat(i," createOffer(").concat(JSON.stringify(o),")")),r.createOffer(o).then(function(e){console.crlog("".concat(i," createOffer success!")),e.sdp=t.parseOfferSDP(e.sdp),console.crlog("".concat(i," offer.sdp:\r\n").concat(e.sdp)),n.offer=e,console.crlog("".concat(i," offer setLocalDescription(offer)")),r.setLocalDescription(e).then(function(e){console.crlog("".concat(i," offer setLocalDescription success!"))}).catch(function(e){throw console.crlog("".concat(i," offer setLocalDescription fail! ").concat(e)),e})}).catch(function(e){throw console.crlog("".concat(i," createOffer fail! ").concat(e)),e});setTimeout(function(){n.offer_cb.isResponsed||(console.crlog("".concat(i," offer_cb ice_response()...(No candidate for more than 20 s)")),n.offer_cb.ice_response(),n.offer_cb.isResponsed=!0)},2e4);r.onicecandidate=function(e){if(e.candidate){n.candidates.push(e.candidate);var t=new c.HashMap;t.set("sdp",n.offer.sdp),t.set("icecandidate",JSON.stringify(n.candidates)),console.crlog("".concat(i," onicecandidate, response candidates(").concat(n.candidates.length,"): ").concat(JSON.stringify(n.candidates))),console.crlog("".concat(i," offer_cb ice_response(").concat(n.msid,", HashMap)...")),n.offer_cb.ice_response(n.msid,t),n.offer_cb.isResponsed=!0}else console.crlog("".concat(i," onicecandidate! e.candidate == ").concat(e.candidate,"!"))},r.oniceconnectionstatechange=function(e){console.crlog("".concat(i," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),n&&n.iceConnectionState&&"completed"==n.iceConnectionState&&setTimeout(function(){n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog("".concat(i," answer_cb ice_response()...")),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)},500)},r.onconnectionstatechange=function(e){console.crlog("".concat(i," onconnectionstatechange, connectionState: ").concat(e.currentTarget.connectionState))},r.onsignalingstatechange=function(e){console.crlog("".concat(i," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))},r.ontrack=function(e){console.crlog("".concat(i," ontrack, get stream now...")),n.stream=e.streams[0],console.log(n.stream),t.refreshContainerSrc()}}},{key:"remoteScreenModifyPeerAddrExt",value:function(e,t,n){var i=this;this.remoteConnection.answer_cb=e;var r=this.remoteConnection.logstr,o=this.remoteConnection.connection;n.sdp=this.parseAnswerSDP(n.sdp,"remote"),console.crlog("".concat(r," ModifyPeerAddrExt, answerSDP:\r\n").concat(n.sdp)),this.remoteConnection.answer=n,console.crlog("".concat(r," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then(function(e){console.crlog("".concat(r," answer setRemoteDescription success!"))}).catch(function(e){throw console.crlog("".concat(r," answer setRemoteDescription fail! ").concat(e)),e}),setTimeout(function(){i.remoteConnection.answer_cb.isResponsed||(console.crlog("".concat(r," answer_cb ice_response()...")),i.remoteConnection.answer_cb.ice_response(),i.remoteConnection.answer_cb.isResponsed=!0)},500)}},{key:"refreshContainerSrc",value:function(){var t=this;console.crlog("[Screen] Refresh all screen container src..."),CRRTCUI.screenContainerList.forEach(function(e){if(e._userID==a.userInfo.userId){if(!t.localScreenStream)return;console.crlog("[Screen] Local screenShare, containerID:".concat(e._id," set srcObject, stream:").concat(t.localScreenStream.id,", active:").concat(t.localScreenStream.active)),e._videoEle.srcObject=t.localScreenStream,setTimeout(function(){e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.play()},2e3)}else{if(!t.remoteConnection.stream)return;console.crlog("[Screen] Remote screenShare, userID:".concat(e._userID,", containerID:").concat(e._id," set srcObject, stream:").concat(t.remoteConnection.stream.id,", active:").concat(t.remoteConnection.stream.active)),e._videoEle.srcObject=t.remoteConnection.stream,setTimeout(function(){e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.play()},2e3)}})}}]),e}();n.__crScreenClass=e,n.CRRTCScreen=new n.__crScreenClass,n.CRVideo_StartScreenShareRslt=new a.CbProxy("CRVideo_StartScreenShareRslt"),n.CRVideo_StopScreenShareRslt=new a.CbProxy("CRVideo_StopScreenShareRslt"),n.CRVideo_NotifyScreenShareStarted=new a.CbProxy("CRVideo_NotifyScreenShareStarted"),n.CRVideo_NotifyScreenShareStopped=new a.CbProxy("CRVideo_NotifyScreenShareStopped"),n.CRVideo_NotifyScreenShareData=new a.CbProxy("CRVideo_NotifyScreenShareData"),n.CRVideo_NotifyCatchScreen=new a.CbProxy("CRVideo_NotifyCatchScreen"),n.CRVideo_NotifyGiveCtrlRight=new a.CbProxy("CRVideo_NotifyGiveCtrlRight"),n.CRVideo_NotifyReleaseCtrlRight=new a.CbProxy("CRVideo_NotifyReleaseCtrlRight"),n.CRVideo_NotifyShareRectChanged=new a.CbProxy("CRVideo_NotifyShareRectChanged")}(window,Ice,CRVideo),function(c,s,l){function t(e){_classCallCheck(this,t),this.msid=e,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidates=[],this.stream=null,this.logstr=null,this.isResponsedCandidate=!1}var e=function(){function e(){_classCallCheck(this,e),console.crlog("[Media] Init MediaShareMgr..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initData",value:function(){this.mediaFileInfo={isAudioFile:!1,name:null,url:null,FileObj:null},this.mediaShareInfo={userID:null,mediaName:null,state:null},this.container=null,this.bPauseWhenFinished=!1,this.isLocalPlay=!1,this.localMediaAudioConnection=new t(this.mediaAudioMSID++),this.localMediaVideoConnection=new t(this.localMediaMSID++),this.remoteMediaConnection=new t(this.remoteMediaMSID++),this.localMediaMSID=14e4,this.mediaAudioMSID=15e4,this.remoteMediaMSID=24e4}},{key:"initIceCallback",value:function(){var o=this;this.ICECallback={notifyStartPlayMedia:function(t){console.crlog("[Media] ICE Notify --\x3e notifyStartPlayMedia, params:".concat(JSON.stringify({mediaShareInfo:t}))),t.state=t.state.value,console.log(t);var e=l.allMemberInfo.find(function(e){return e.termId==t.termid}),n=e?e.userId:"";t.termid!==CRVideo.userInfo.termId&&CRICEAPI.SubscribeMedia(!0),CRVideo_NotifyMediaStart.callback(n),o.mediaShareInfo.userID=n,o.mediaShareInfo.mediaName=t.mediaName,o.mediaShareInfo.state=t.state},notifyStopPlayMedia:function(t){console.crlog("[Media] ICE Notify --\x3e notifyStopPlayMedia, params:".concat(JSON.stringify({operator:t}))),l.isMeeting&&t!==l.userInfo.termId&&CRICEAPI.SubscribeMedia(!1);var e=l.allMemberInfo.find(function(e){return e.termId==t}),n=e?e.userId:"";CRVideo_NotifyMediaStop.callback(n),o.container&&(o.container._videoEle.srcObject=null),o.mediaShareInfo.userID=null,o.mediaShareInfo.mediaName=null,o.mediaShareInfo.state=2},notifyPausePlayMedia:function(t,e){console.crlog("[Media] ICE Notify --\x3e notifyPausePlayMedia, params:".concat(JSON.stringify({operator:t,bPause:e})));var n=l.allMemberInfo.find(function(e){return e.termId==t}),i=n?n.userId:"",r=e?1:0;o.mediaShareInfo.state=r,CRVideo_NotifyMediaPause.callback(i,status)},notifyMakeIFrame:function(e){try{console.crlog("[Media] ICE Notify --\x3e notifyMakeIFrame, params:".concat(JSON.stringify({args:e})))}catch(e){throw e}},notifySubscribeMedia:function(e){console.crlog("[Media] ICE Notify --\x3e notifySubscribeMedia, params:".concat(JSON.stringify({bSub:e})))},startPlayMediaRslt:function(e){console.crlog("[Media] ICE Callback --\x3e startPlayMediaRslt, params:".concat(JSON.stringify({errCode:e})))},stopPlayMediaRslt:function(e){console.crlog("[Media] ICE Callback --\x3e stopPlayMediaRslt, params:".concat(JSON.stringify({errCode:e})))},getMediaInfoRslt:function(e,t){if(console.crlog("[Media] ICE Callback --\x3e getMediaInfoRslt, params:".concat(JSON.stringify({errCode:e,data:t}))),0==e){if(2!==t.state.value)return void CRRTCMedia.ICECallback.notifyStartPlayMedia(t);t.state=t.state.value;var n=l.allMemberInfo.find(function(e){return e.termId==t.termid});o.mediaShareInfo.userID=n?n.userId:"",o.mediaShareInfo.state=t.state,o.mediaShareInfo.mediaName=t.mediaName}},pausePlayMediaRslt:function(e){console.crlog("[Media] ICE Callback --\x3e pausePlayMediaRslt, params:".concat(JSON.stringify({errCode:e})))},subscribeMediaRslt:function(e){console.crlog("[Media] ICE Callback --\x3e subscribeMediaRslt, params:".concat(JSON.stringify({errCode:e})))}}}},{key:"initSDKInterface",value:function(){var o=this;c.CRVideo_StartPlayMedia=function(e,t,n,i){if(console.crlog("[Media] CRVideo_StartPlayMedia(".concat(e,",").concat(t,",").concat(n,",").concat(i,")")),!e||!e._id)return console.crlog("[Media] Start play media fail, did not create mediaObj"),0;if(o.container=e,o.isLocalPlay=n||0,i=i||0,o.bPauseWhenFinished=i,!MediaSource&&!t)return console.crlog("[Media] Start play media fail, the File object is not audio or video"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;try{if(t instanceof File){if("Chrome"==CRBrowser.curBrowserCfg.name||"Edg"==CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mkv|.mp4|.webm)$/.test(t.name))return console.crlog("[Media] Start play media fail, Chrome does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Firefox"==CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mp4|.webm)$/.test(t.name))return console.crlog("[Media] Start play media fail, Firefox does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Safari"==CRBrowser.curBrowserCfg.name&&!/(.mp3|.mp4)$/.test(t.name))return console.crlog("[Media] Start play media fail, Safari does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;/(.mp3)$/.test(t.name)&&(o.mediaFileInfo.isAudioFile=!0),o.mediaFileInfo.FileObj=t,o.mediaFileInfo.name=t.name,o.mediaFileInfo.url=URL.createObjectURL(t)}else{if("string"!=typeof t)return console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;o.mediaFileInfo.name=t.match(/[^/]+(?!.*\/)/),o.mediaFileInfo.url=t}var r=o.container._videoEle;return r.loop=0==o.bPauseWhenFinished,r.srcObject=null,r.src=o.mediaFileInfo.url,r.play(),r.onplaying=function(){console.crlog("[Media] Video event: onplaying"),l.isMeeting&&(n||CRICEAPI.StartPlayMedia(o.mediaFileInfo.name),CRVideo_PausePlayMedia(!1))},r.onpause=function(){console.crlog("[Media] Video event: onpause"),CRVideo_PausePlayMedia(!0)},r.onended=function(){console.crlog("[Media] Video event: onended"),this.bPauseWhenFinished||CRVideo_StopPlayMedia()},r.onerror=function(e){console.crlog("[Media] Video event: error, ".concat(e))},1}catch(e){return console.crlog("[Media] Start play media fail, err: ".concat(e)),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}},c.CRVideo_PausePlayMedia=function(e){console.crlog("[Media] CRVideo_PausePlayMedia(".concat(e,")")),o.container&&(e?(o.container._videoEle.pause(),o.isLocalPlay||CRICEAPI.PausePlayMedia(!0)):(o.container._videoEle.play(),o.isLocalPlay||CRICEAPI.PausePlayMedia(!1)))},c.CRVideo_StopPlayMedia=function(){console.crlog("[Media] CRVideo_StopPlayMedia()"),o.endMediaPlay()},c.CRVideo_SetMediaplaypos=function(e){console.crlog("[Media] CRVideo_SetMediaplaypos(".concat(e)),o.container&&(o.container._videoEle.currentTime=e/1e3),CRVideo_NotifyPlayPosSetted.callback(e)},c.CRVideo_SetMediaVolume=function(e){console.crlog("[Media] CRVideo_SetMediaVolume(".concat(e,")"));var t=o.container._videoEle;t&&(t.volume=e/100,t.muted=!1)},c.CRVideo_Getmediainfo=c.CRVideo_GetMediaInfo=function(t){console.crlog("[Media] CRVideo_Getmediainfo(".concat(t,")"));var e={};return l.allMemberInfo.find(function(e){return e.userID==t})&&(e.userID=t,e.mediaName=o.mediaShareInfo.mediaName,e.state=o.mediaShareInfo.state),e},c.CRVideo_GetMediaImg=function(e,t){console.crlog("[Media] CRVideo_GetMediaImg(".concat(e,",").concat(t,")"));var n=document.createElement("canvas"),i=o.container._videoEle;return i?(n.width=i.videoWidth,n.height=i.videoHeight,n.getContext("2d").drawImage(i,0,0,n.width,n.height),{dat:n.toDataURL("image/"+t||"jpg"),width:n.width,height:n.height}):{dat:dat,width:width,height:height}}}},{key:"updateMediaShareInfo",value:function(){console.crlog("[Media] Update media share info"),CRICEAPI.GetMediaInfo()}},{key:"endMediaPlay",value:function(){var e=this.container?this.container._videoEle:null;e&&(e.pause(),e.src="",e.srcObject=null,this.container=null),this.isLocalPlay||CRICEAPI.StopPlayMedia()}},{key:"getBaseStream",value:function(e){var t=null;if(this.container){var n=this.container._videoEle,i=CRBrowser.curBrowserCfg;if("audio"==e){console.crlog("[Media] Capture media audio stream from video element...");try{"captureStream"in n?t=n.captureStream():"mozCaptureStream"in n?t=n.mozCaptureStream():"webkitCaptureStream"in n&&(t=n.webkitCaptureStream())}catch(e){throw console.crlog("[Media] Get media video stream fail: ".concat(e)),e}}else if("Safari"!==i.name&&"Chrome"==i.name&&i.ver<88||"Edg"==i.name&&i.ver<88){console.crlog("[Media] Capture media video stream from video element...");try{"captureStream"in n?t=n.captureStream():"mozCaptureStream"in n?t=n.mozCaptureStream():"webkitCaptureStream"in n&&(t=n.webkitCaptureStream())}catch(e){throw console.crlog("[Media] Get media video stream fail: ".concat(e)),e}}else{console.crlog("[Media] Capture media video stream from canvas element...");try{var r=this.container._videoEle,o=document.createElement("canvas");o.style.height="1px",o.style.width="1px",this.container._handler.appendChild(o),o.width=1920<r.videoWidth?1920:r.videoWidth,o.height=1080<r.videoHeight?1080:r.videoHeight,console.crlog("[Media] width:".concat(o.width,", height:").concat(o.height,", fps:",15)),setInterval(function(){o.getContext("2d").drawImage(r,0,0,o.width,o.height)},50),t=o.captureStream(15)}catch(e){throw e}}}return t||console.crlog("[Media] Your browser does NOT supports pre-recorded media streaming!"),t}},{key:"audioAllocRawExt2",value:function(e){console.crlog("[Media] Local media audio, audioAllocRawExt2...");var n=this.localMediaAudioConnection,i="[Media] MSID:".concat(n.msid,", Local media audio RTCPeerConnection,");n.logstr=i,n.offer_cb=e,n.offer_cb.isResponsed=!1;var r=setTimeout(function(){n.offer_cb.isResponsed||(console.crlog("".concat(i," offer_cb ice_response()...(No candidate for more than 20 s)")),n.offer_cb.ice_response(),n.offer_cb.isResponsed=!0)},2e4),t=this.getBaseStream("audio");if(t){console.crlog("[Media] MSID:".concat(n.msid,", Local media audio, new RTCPeerConnection(").concat(JSON.stringify(l.rtcCfg),")"));var o=new RTCPeerConnection(l.rtcCfg);n.connection=o;var c=new MediaStream;t.getTracks().forEach(function(e){"audio"==e.kind&&c.addTrack(e)}),n.stream=c,console.crlog("".concat(i," addStream(localMediaAudioStream)")),o.addStream(n.stream),console.crlog("".concat(i," createOffer()")),o.createOffer().then(function(e){console.crlog("".concat(i," createOffer success!")),console.crlog("".concat(i," offer.sdp:\r\n").concat(e.sdp)),n.offer=e,console.crlog("".concat(i," offer setLocalDescription(offer)")),o.setLocalDescription(e).then(function(e){console.crlog("".concat(i," offer setLocalDescription success!"))}).catch(function(e){throw console.crlog("".concat(i," offer setLocalDescription fail! ").concat(e)),e})}).catch(function(e){throw console.crlog("".concat(i," createOffer fail! ").concat(e)),e}),o.onicecandidate=function(e){if(e.candidate&&!n.offer_cb.isResponsed){n.candidates.push(e.candidate);var t=new s.HashMap;t.set("sdp",n.offer.sdp),t.set("icecandidate",JSON.stringify(n.candidates)),console.crlog("".concat(i," onicecandidate, response candidates(").concat(n.candidates.length,"): ").concat(JSON.stringify(n.candidates))),console.crlog("".concat(i," offer_cb ice_response(").concat(n.msid,", HashMap)...")),n.offer_cb.ice_response(n.msid,t),n.offer_cb.isResponsed=!0,clearTimeout(r)}else console.crlog("".concat(i," onicecandidate! e.candidate == ").concat(JSON.stringify(e.candidate),"!"))},o.oniceconnectionstatechange=function(e){console.crlog("".concat(i," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),n&&n.iceConnectionState&&"completed"==n.iceConnectionState&&setTimeout(function(){n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog("".concat(i," answer_cb ice_response()...")),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)},500)},o.onconnectionstatechange=function(e){console.crlog("".concat(i," onconnectionstatechange, connectionState: ").concat(e.currentTarget.connectionState))},o.onsignalingstatechange=function(e){console.crlog("".concat(i," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}}},{key:"videoAllocRawExt2",value:function(e,t,n){console.crlog("[Media] VideoAllocRawExt2, srcSelf:".concat(n)),n?this.setLocalMediaVideoConnection(e):this.setRemoteMediaConnection(e)}},{key:"modifyPeerAddrExt",value:function(e,t,n,i){var r={type:"answer",sdp:i.get("sdp")};"localMediaVideo"==e&&this.localMediaVideoModifyPeerAddrExt(t,n,r),"localMediaAudio"==e&&this.localMediaAudioModifyPeerAddrExt(t,n,r),"remoteMedia"==e&&this.remoteMediaModifyPeerAddrExt(t,n,r)}},{key:"parseOfferSDP",value:function(e,t){var n=e;return l.maxBps_media&&"sendonly"==t&&(console.crlog("[Media] c=IN IP4 0.0.0.0  b=AS:"+l.maxBps_media),n=n.replace("c=IN IP4 0.0.0.0","c=IN IP4 0.0.0.0\r\nb=AS:"+l.maxBps_media)),"sendonly"==t&&(n=n.replace("a=sendrecv","a=sendonly")),n}},{key:"parseVideoAnswerSDP",value:function(e,t){var n=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",i=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&2<e.split(n).length&&(e=e.replace("".concat(n).concat(i),"")),e="local"==t?(e=e.replace("profile-level-id=42001f","x-google-min-bitrate=800;x-google-start-bitrate=800;")).replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",""):e.replace("a=sendrecv","a=sendonly")}},{key:"setLocalMediaVideoConnection",value:function(e){var t=this,n=this.localMediaVideoConnection,i=this.getBaseStream();if(i){var r="[Media] MSID:".concat(n.msid,", Local media video RTCPeerConnection,");n.logstr=r,n.offer_cb=e,n.offer_cb.isResponsed=!1,console.crlog("[Media] MSID:".concat(n.msid,", Local media video, new RTCPeerConnection(").concat(JSON.stringify(l.rtcCfg),")"));var o=new RTCPeerConnection(l.rtcCfg);n.connection=o;var c=new MediaStream;i.getTracks().forEach(function(e){"video"==e.kind&&c.addTrack(e)}),n.stream=c,console.crlog("".concat(r," addStream(localMediaVideoStream)")),o.addStream(n.stream),console.crlog("".concat(r," createOffer()")),o.createOffer().then(function(e){console.crlog("".concat(r," createOffer success!")),e.sdp=t.parseOfferSDP(e.sdp,"sendonly"),console.crlog("".concat(r," offer.sdp:\r\n").concat(e.sdp)),n.offer=e,console.crlog("".concat(r," offer setLocalDescription(offer)")),o.setLocalDescription(e).then(function(e){console.crlog("".concat(r," offer setLocalDescription success!"))}).catch(function(e){throw console.crlog("".concat(r," offer setLocalDescription fail! ").concat(e)),e})}).catch(function(e){throw console.crlog("".concat(r," createOffer fail! ").concat(e)),e});var a=setTimeout(function(){n.offer_cb.isResponsed||(console.crlog("".concat(r," offer_cb ice_response()...(No candidate for more than 20 s)")),n.offer_cb.ice_response(),n.offer_cb.isResponsed=!0)},2e4);o.onicecandidate=function(e){if(e.candidate){n.candidates.push(e.candidate);var t=new s.HashMap;t.set("sdp",n.offer.sdp),t.set("icecandidate",JSON.stringify(n.candidates)),console.crlog("".concat(r," onicecandidate, response candidates(").concat(n.candidates.length,"): ").concat(JSON.stringify(n.candidates))),console.crlog("".concat(r," offer_cb ice_response(").concat(n.msid,", HashMap)...")),n.offer_cb.ice_response(n.msid,t),n.offer_cb.isResponsed=!0,clearTimeout(a)}else console.crlog("".concat(r," onicecandidate! e.candidate == ").concat(e.candidate,"!"))},o.oniceconnectionstatechange=function(e){console.crlog("".concat(r," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),n&&n.iceConnectionState&&"completed"==n.iceConnectionState&&setTimeout(function(){n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog("".concat(r," answer_cb ice_response()...")),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)},500)},o.onconnectionstatechange=function(e){console.crlog("".concat(r," onconnectionstatechange, connectionState: ").concat(e.currentTarget.connectionState))},o.onsignalingstatechange=function(e){console.crlog("".concat(r," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}}},{key:"setRemoteMediaConnection",value:function(e){var n=this;console.crlog("[Media] Remote Media, new RTCPeerConnection(".concat(JSON.stringify(l.rtcCfg),")"));var i=new RTCPeerConnection(l.rtcCfg),r="[Media] MSID:".concat(this.remoteMediaMSID,", remoteMediaConnection");this.remoteMediaConnection.logstr=r,this.remoteMediaConnection.connection=i,this.remoteMediaConnection.offer_cb=e,this.remoteMediaConnection.offer_cb.isResponsed=!1;var o=setTimeout(function(){connect.offer_cb.isResponsed||(console.crlog("".concat(logstr," offer_cb ice_response()...(No candidate for more than 20 s)")),connect.offer_cb.ice_response(),connect.offer_cb.isResponsed=!0)},2e4);i.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1}).then(function(e){e.sdp=n.parseOfferSDP(e.sdp),console.crlog("".concat(r," createOffer success! offerSDP is:\r\n").concat(e.sdp)),n.remoteMediaConnection.offer=e,console.crlog("".concat(r," setLocalDescription(offer)")),i.setLocalDescription(e).then(function(){console.crlog("".concat(r," offer setLocalDescription success!"))}).catch(function(e){throw console.error("".concat(r," offer setLocalDescription fail! ").concat(e)),e})}).catch(function(e){throw console.crlog("".concat(r," createOffer fail! ").concat(e)),e}),i.onicecandidate=function(e){if(e.candidate&&!i.isResponsedCandidate){n.remoteMediaConnection.candidates.push(e.candidate);var t=new s.HashMap;t.set("sdp",n.remoteMediaConnection.offer.sdp),t.set("icecandidate",JSON.stringify(n.remoteMediaConnection.candidates)),console.crlog("".concat(r," onicecandidate, response candidates(").concat(n.remoteMediaConnection.candidates.length,"): ").concat(JSON.stringify(n.remoteMediaConnection.candidates))),console.crlog("".concat(r," offer_cb ice_response(").concat(n.remoteMediaConnection.msid,", HashMap)...")),n.remoteMediaConnection.offer_cb.ice_response(n.remoteMediaConnection.msid,t),n.remoteMediaConnection.offer_cb.isResponsed=!0,clearTimeout(o),n.remoteMediaConnection.isResponsedCandidate=!0}else 0===n.remoteMediaConnection.candidates.length&&console.crlog("".concat(r," onicecandidate! null!"))},i.oniceconnectionstatechange=function(e){console.crlog("".concat(r," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),n.remoteMediaConnection.connection&&n.remoteMediaConnection.connection.iceConnectionState&&"completed"==n.remoteMediaConnection.connection.iceConnectionState&&setTimeout(function(){console.crlog("".concat(r," answer_cb ice_response()...")),this.remoteMediaConnection.answer_cb.ice_response(),this.remoteMediaConnection.answer_cb.isResponsed=!0},500)},i.ontrack=function(e){console.crlog("".concat(r," ontrack!")),console.crlog("".concat(r,", video stream:").concat(e.streams[0].id)),n.remoteMediaConnection.stream=e.streams[0],n.refreshContainerSrc()},i.onconnectionstatechange=function(e){console.crlog("".concat(r," onconnectionstatechange, connectionState: ").concat(e.currentTarget.connectionState))},i.onsignalingstatechange=function(e){console.crlog("".concat(r," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"localMediaVideoModifyPeerAddrExt",value:function(e,t,n){var i=this;this.localMediaVideoConnection.answer_cb=e;var r=this.localMediaVideoConnection.logstr,o=this.localMediaVideoConnection.connection;n.sdp=this.parseVideoAnswerSDP(n.sdp,"local"),console.crlog("".concat(r," ModifyPeerAddrExt, answerSDP:\r\n").concat(n.sdp)),this.localMediaVideoConnection.answer=n,console.crlog("".concat(r," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then(function(e){console.crlog("".concat(r," answer setRemoteDescription success!")),c.videoResolutionReport(i.localMediaVideoConnection.msid,"media")}).catch(function(e){throw console.crlog("".concat(r," answer setRemoteDescription fail! ").concat(e)),e}),setTimeout(function(){i.localMediaVideoConnection.answer_cb.isResponsed||(console.crlog("".concat(r," answer_cb ice_response()...")),i.localMediaVideoConnection.answer_cb.ice_response(),i.localMediaVideoConnection.answer_cb.isResponsed=!0)},500)}},{key:"localMediaAudioModifyPeerAddrExt",value:function(e,t,n){var i=this;this.localMediaAudioConnection.answer_cb=e;var r=this.localMediaAudioConnection.logstr,o=this.localMediaAudioConnection.connection;console.crlog("".concat(r," ModifyPeerAddrExt, answerSDP:\r\n").concat(n.sdp)),this.localMediaAudioConnection.answer=n,console.crlog("".concat(r," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then(function(e){console.crlog("".concat(r," answer setRemoteDescription success!"))}).catch(function(e){throw console.crlog("".concat(r," answer setRemoteDescription fail! ").concat(e)),e}),setTimeout(function(){i.localMediaAudioConnection.answer_cb.isResponsed||(console.crlog("".concat(r," answer_cb ice_response()...")),i.localMediaAudioConnection.answer_cb.ice_response(),i.localMediaAudioConnection.answer_cb.isResponsed=!0)},500)}},{key:"remoteMediaModifyPeerAddrExt",value:function(e,t,n){var i=this;this.remoteMediaConnection.answer_cb=e;var r=this.remoteMediaConnection.logstr,o=this.remoteMediaConnection.connection;n.sdp=this.parseVideoAnswerSDP(n.sdp,"remote"),console.crlog("".concat(r," ModifyPeerAddrExt, answerSDP:\r\n").concat(n.sdp)),this.remoteMediaConnection.answer=n,console.crlog("".concat(r," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then(function(e){console.crlog("".concat(r," answer setRemoteDescription success!"))}).catch(function(e){throw console.crlog("".concat(r," answer setRemoteDescription fail! ").concat(e)),e}),setTimeout(function(){i.remoteMediaConnection.answer_cb&&!i.remoteMediaConnection.answer_cb.isResponsed&&(console.crlog("".concat(r," answer_cb ice_response()...")),i.remoteMediaConnection.answer_cb.ice_response(),i.remoteMediaConnection.answer_cb.isResponsed=!0)},500)}},{key:"refreshContainerSrc",value:function(){try{if(this.container){var e=this.container._videoEle;this.mediaShareInfo.userID==l.userInfo.userId||(console.crlog("".concat(this.remoteMediaConnection.logstr," containerID:").concat(this.container._id,", videoEle set srcObject...")),e.srcObject=this.remoteMediaConnection.stream),setTimeout(function(){e.srcObject&&"true"==e.srcObject.active&&e.play()},2e3)}}catch(e){throw console.error(e),e}}}]),e}();c.__crMediaClass=e,c.CRRTCMedia=new c.__crMediaClass,c.CRVideo_NotifyMediaOpened=new l.CbProxy("CRVideo_NotifyMediaOpened"),c.CRVideo_NotifyMediaStart=new l.CbProxy("CRVideo_NotifyMediaStart"),c.CRVideo_NotifyMediaStop=new l.CbProxy("CRVideo_NotifyMediaStop"),c.CRVideo_NotifyMediaPause=new l.CbProxy("CRVideo_NotifyMediaPause"),c.CRVideo_NotifyPlayPosSetted=new l.CbProxy("CRVideo_NotifyPlayPosSetted"),c.CRVideo_NotifyMemberMediaData=new l.CbProxy("CRVideo_NotifyMemberMediaData")}(window,Ice,CRVideo),CRVideo.APPIDMode=1,CRVideo.changyiweb=!1,CRVideo.LOCAL_KEY="CRwebRTC",CRVideo.KEEPLIVE_COMMIT=!1,CRVideo.KEEPALIVE_TIMER=-1,CRVideo.REFRESH_SESSION=-1,CRVideo.COUNT_VIDEO_PLAY=1,CRVideo.DOMAIN_MAIN="",CRVideo.roominfo={},CRVideo.userInfo={},CRVideo.allMemberInfo=[],CRVideo.isBrowserType="",CRVideo.isExitmeet=!1,CRVideo.isMeeting=!1,CRVideo.isWebRTC=!0,CRVideo.lastTabValue=0,CRVideo.lastElemValue=0,CRVideo.wbDescs=[],CRVideo.curWbDesc={},CRVideo.mainVideoTermID=0,CRVideo.msType={localAudio:11,localVideo:12,localScreen:13,localMediaVideo:14,localMediaAudio:15,remoteVideo:22,remoteScreen:23,remoteMedia:24},CRVideo.firstEnterStatus=!1,CRVideo.meetingExiting=!1,CRVideo.callserverExiting=!1;var enmeet={config:{controlSharkTime:3e4,refreshSessionTime:1e4}};function userIdToTermId(t){var n=null;return CRVideo.allMemberInfo.forEach(function(e){e.userId==t&&(n=e.termId)}),null!=n?n:""}function termIdToUserId(t){var n=null;return CRVideo.allMemberInfo.forEach(function(e){t==e.termId&&(n=e.userId)}),null!==n?n:""}function findMemberInfo(t){var n=!1;return CRVideo.allMemberInfo.forEach(function(e){e[t.use]==t.value&&(n=e[t.want])}),n}!function(e){var t,n;n={findUserInfo:function(t,n){return e.allMemberInfo.find(function(e){return e[t]==n})}},(t=e).findUserInfo=n.findUserInfo,n.controlSharkHand=function(){CR__KeepAlive(e.COUNT_VIDEO_PLAY,(new Date).getTime()),clearTimeout(e.KEEPALIVE_TIMER),e.KEEPALIVE_TIMER=setTimeout(n.controlSharkHand,enmeet.config.controlSharkTime)},t.controlSharkHand=n.controlSharkHand,n.refreshSessionSharkHand=function(){CR__RefreshSession((new Date).getTime()),clearTimeout(e.REFRESH_SESSION),e.REFRESH_SESSION=setTimeout(n.refreshSessionSharkHand,enmeet.config.refreshSessionTime)},t.refreshSessionSharkHand=n.refreshSessionSharkHand,n.destroyMeetingConnect=function(){console.crlog("[MEETING] Websockt destroy meeting connect..."),e.communicatorIc&&e.communicatorIc.destroy(),e.communicatorIc=null},t.destroyMeetingConnect=n.destroyMeetingConnect}(CRVideo),CRVideo.findMemberInfo=findMemberInfo,CRVideo.initweb=function(){var e=window.sessionStorage.getItem("client_pcid")?window.sessionStorage.getItem("client_pcid"):Ice.generateUUID();CRVideo.userInfo={nickname:CRVideo.LoginParam.nick_name,userId:CRVideo.LoginParam.user_id,headerUrl:"",userCode:e,openId:""},CRVideo.urlHref=CRVideo.webServerAddr,window.sessionStorage.setItem("client_pcid",e),console.crlog("[MEETING] CRVideo.initweb"+JSON.stringify({"CRVideo.userInfo":CRVideo.userInfo,"CRVideo.urlHref":CRVideo.urlHref})),0==CRVideo.isHttp?(console.crlog("[MEETING] ----- CR__Init -----   (wss)"),CR__Init("js",{protocol:"wss",CheckFlash:!1})):(console.crlog("[MEETING] ----- CR__Init ----- (ws)"),CR__Init("js",{protocol:"ws",CheckFlash:!1}))},CR_InitRslt.callback=function(e,t){code=0==e?"success":"fail",desc=null==t?"":t,console.crlog("[MEETING] InitRslt Callback: "+code+" "+desc),0==e?(console.crlog("[MEETING] CR_InitRslt.callback success!"),CRVideo.loginWebMeeting()):console.crlog("[MEETING] CR_InitRslt.callback fail!")},CRVideo.loginWebMeeting=function(){var e=CRVideo.LIVE_INFO.dataStr,t=sessionStorage.getItem(CRVideo.LOCAL_KEY+"_TermId_")||"",n={};n.nickname=CRVideo.userInfo.nickname||"",n.userId=CRVideo.userInfo.userId||"";var i=CRVideo.userInfo.userCode,r=CRVideo.userInfo.openId?CRVideo.userInfo.openId:"";CRVideo.KEEPLIVE_COMMIT=!0,Cr.crmt=null,CRVideo.isExitmeet=!1;var o=JSON.parse(sessionStorage.getItem("CRWebRTCSDK_UserHistory")),c=o[CRVideo.meetingID];if(c){var a=c.find(function(e){return e.userId==n.userId});a?(e=a.dataStr||e,t=a.termId||t,n=a.detail||n,i=a.userCode||i,r=a.openId||r):(c.push({userId:n.userId,nickname:n.nickname,termId:t,detail:n,userCode:i,openId:r}),sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(o)))}else c=[];console.crlog("[MEETING] ----- CR__Login -----"),CR__Login(e,t,n,i,r)},CR__LoginRslt.callback=function(e,t,n){var i=null==t||""==t?"":" ----errDesc: \n"+t;if(console.crlog("[MEETING] Login Access CallBack, errCode: "+e+i),"807"==e)return console.crlog("[MEETING] The meeting is opening! login web meeting again..."),void setTimeout(function(){CRVideo.loginWebMeeting()},3e3);if("800"==e)console.crlog("[MEETING] 会议不存在或已结束!");else if("3"==e)console.crlog("[MEETING] 登录access未知错误: "+t);else if("4"==e)console.crlog("[MEETING] Webmeeting Init success, But UserName is repeat!");else if("806"==e||"802"==e)console.crlog("[MEETING] 超出并发数!");else if("805"==e)console.crlog("[MEETING] 超出并发数!");else if("0"==e){function r(r){CRVideo.rtcCfg.iceServers.forEach(function(e){var t=e.urls,i=[];e.urls=t.map(function(e){var t=String(CRVideo.stunList),n=String(r);i.push(e.replace(t,n))}),console.crlog("[WEBRTC] New stun server urls: ".concat(JSON.stringify(i))),e.urls=i});var e=_.cloneDeep(CRVideo.rtcCfg);e.iceServers[0].credential="******",e.iceServers[0].username="******",console.crlog("[WEBRTC] New webrtc RTCPeerConnection config: ".concat(JSON.stringify(e)))}CRVideo.firstEnterStatus=!0,setTimeout(function(){CRVideo.firstEnterStatus=!1},3e3),CRVideo.isMeeting=!0,CRVideo.mainVideoTermID=n.mainVideoTermID||0,n.activeMembers.length<=10&&console.crlog("[MEETING] CRVideo.allMemberInfo : "+JSON.stringify(n.activeMembers)),n.activeMembers.forEach(function(e){e.userId==n.userId&&CRVideo.allMemberInfo.push(e)}),n.activeMembers.forEach(function(e){e.userId!==n.userId&&CRVideo.allMemberInfo.push(e)}),CRVideo.lastElemValue=n.lastElemValue+1,CRVideo.lastTabValue=n.lastTabValue+1,CRVideo.userInfo.detail=n.myDetail,CRVideo.userInfo.termId=n.termId,CRVideo.userInfo.nickname=n.nickname,CRVideo.userInfo.userId=n.userId||CRVideo.userInfo.userId,n.confInfo&&n.confInfo.srv_record_state?(CRRTCRecord.svrRecordStatus=+n.confInfo.srv_record_state,CRRTCRecord.MixersList=JSON.parse(n.confInfo.srv_record_cfg)):CRRTCRecord.svrRecordStatus=0,Cr.crmt.STUNSVR?r(Cr.crmt.STUNSVR):CRVideo.accessSvr&&r(CRVideo.accessSvr+":"+CRVideo.stunList.split(":")[1]),console.crlog("[SDK] ".concat(CRVideo.sdkInfo)),console.crlog("[SDK] Browser Info: ".concat(navigator.userAgent)),1==CRVideo.isWebRTC&&(console.crlog("[SDK] RTC Codecs: ".concat(window.rtc_codecs)),setTimeout(function(){console.crlog("[Login] LoginOAuth: ".concat(CRVideo.callServerLoginOAuth.crPswd))},100),console.crlog("[Video] Video input devices: ".concat(JSON.stringify(CRRTCLocalVideo.videoInput))),CRRTCAudio.createAudioElement(),CRRTCAudio.uploadAudioDevicesStatus(),CRRTCLocalVideo.uploadVideoDeviceStatus(),CRRTCLocalVideo.uploadAllCamInfo()),CRVideo.meetingInfo=n;var o=[];0<n.wbDescibes.length&&(n.wbDescibes.forEach(function(e){var t={};t.boardID=e.wID,t.title=e.name,t.width=e.width,t.height=e.height,t.pageCount=e.pageCount,o.push(t),CRVideo.wbDescs.push(e),console.crlog("[MEETING] ----- CR__QueryElementByIDs -----"),CR__QueryElementByIDs(e.wID,[0])}),CRVideo.curWbDesc=CRVideo.wbDescs[0]),CRVideo.isWebRTC&&CRVideo.allMemberInfo.forEach(function(e){e.termId==n.termId?(e.isSelf=!0,e.userId=e.userId||CRVideo.userInfo.userId):e.isSelf=!1,e.audioStream=null,e.videoStream=null,e.screenStream=null,e.camId=null==e.openedCamIDs?null:e.openedCamIDs,e.userId=null==e.userId?e.nickname:e.userId,e.audioStatus=e.audioStatus.name,e.videoStatus=e.videoStatus.name,"family"==e.privRole?CRVideo.privRoleFamily=e.userId:"prisoner"==e.privRole&&(CRVideo.privRolePrison=e.userId)}),CRVideo.controlSharkHand(),CRVideo.refreshSessionSharkHand(),n.myDetail.userId=n.userId,sessionStorage.setItem(CRVideo.LOCAL_KEY+"_TermId_",n.termId),sessionStorage.setItem(CRVideo.LOCAL_KEY+"_USERDETAIL_",JSON.stringify(n.myDetail));var c=JSON.parse(sessionStorage.getItem("CRWebRTCSDK_UserHistory"));c[CRVideo.meetingID].forEach(function(e){e.userId==n.userId&&(e.termId=n.termId,e.detail=n.myDetail,e.userCode=CRVideo.userInfo.userCode)}),sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(c)),CRVideo_NotifyInitBoards.callback(o),console.crlog("[MEETING] --- Login meeting success! ---")}else console.crlog("[MEETING] --- Web meeting login fail! ---");try{console.crlog("[MeetingMgr] CRVideo_EnterMeetingRslt.callback(".concat(e,",").concat(CRVideo.enterMeetingCookie,")")),CRVideo_EnterMeetingRslt.callback(e,CRVideo.enterMeetingCookie)}catch(e){throw e}setTimeout(function(){CRVideo_UploadingLog()},1e3),CRICEAPI.GetScreenShareInfo(),CRICEAPI.GetMediaInfo()},CR__RefreshSessionRslt.callback=function(e,t,n){code="0"==e?"success":"fail",desc=null==t?"":t;var i=(new Date).getTime()-n;console.crlog("[MEETING] RefreshSessionRslt: ".concat(code," ").concat(desc," delay:").concat(i,"ms")),e==CR_NOERR&&-1!=CRVideo.REFRESH_SESSION||-1!=CRVideo.REFRESH_SESSION&&(clearTimeout(CRVideo.REFRESH_SESSION),(CRVideo.REFRESH_SESSION=-1)==CRVideo.KEEPALIVE_TIMER||CRVideo.isExitmeet||(console.crlog("[MEETING] RefreshSession fail, meeting dropped!!!"),console.crlog("[MeetingMgr] CRVideo_MeetingDropped.callback(".concat(CRVideo_ERR_DEF.SOCKETEXCEPTION,")")),CRVideo_MeetingDropped.callback(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},CR__KeepAliveRslt.callback=function(e,t,n){code="0"==e?"success":"fail",desc=null==t?"":t;var i=(new Date).getTime()-n;console.crlog("[MEETING] KeepAliveRslt: ".concat(code," ").concat(desc," delay:").concat(i,"ms")),e==CR_NOERR&&-1!=CRVideo.KEEPALIVE_TIMER||-1!=CRVideo.KEEPALIVE_TIMER&&(clearTimeout(CRVideo.KEEPALIVE_TIMER),(CRVideo.KEEPALIVE_TIMER=-1)==CRVideo.REFRESH_SESSION||CRVideo.isExitmeet||(console.crlog("[MEETING] KeepAlive fail, meeting dropped!!!"),console.crlog("[MeetingMgr] CRVideo_MeetingDropped.callback(".concat(CRVideo_ERR_DEF.SOCKETEXCEPTION,")")),CRVideo_MeetingDropped.callback(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},CR__MeetEnded.callback=function(e){console.crlog("[MEETING] Meet ended Callback!"),console.crlog("[MEETING] ----- CR__UnInit -----"),CRVideo.leftMeetingFun(),clearTimeout(CRVideo.KEEPALIVE_TIMER),clearTimeout(CRVideo.REFRESH_SESSION),console.crlog("[MeetMgr] CRVideo_NotifyMeetEnded.callback()"),console.crlog("[MeetMgr] CRVideo_MeetingStopped.callback()"),CRVideo_NotifyMeetEnded.callback(),CRVideo_MeetingStopped.callback()};var CRVideo_Uninit=function(){console.crlog("[SDK] CRVideo_Uninit()"),CRVideo.loginAuthFlag=0,CRVideo.webLoginOAuth={},console.crlog("[MEETING] ----- CR__UnInit -----"),CR__UnInit(),setTimeout(function(){CRVideo.destroyLogConnect(),clearTimeout(CRVideo.logReportTimer)},5e3)};function videoResolutionReport(e,t,n,i){if(console.crlog("[Ctrl] videoResolutionReport(".concat(e,", ").concat(t,", ").concat(n,", ").concat(i,")")),CRVideo.isMeeting){if("screen"==t){var r=CRRTCScreen.localScreenStream.getTracks()[0].getSettings();i=r.height?r.height:1080,n=r.widht?r.widht:1920,e=CRRTCScreen.localConnection.msid}if("media"==t){var o=CRRTCMedia.localMediaVideoConnection.stream.getTracks()[0].getSettings();i=o.height?o.height:1080,n=o.widht?o.widht:1920,e=CRRTCMedia.localMediaVideoConnection.msid}console.crlog("[Ctrl] CR__VideoResolutionReport(".concat(e,",").concat(n,",").concat(i,")")),CR__VideoResolutionReport(e,n,i)}}!function(){var e="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,t=e.replace(/hidden/i,"visibilitychange");document.addEventListener(t,function(){document[e]||(console.crlog("[MEETING] CRVideo.KEEPALIVE_TIMER-----"+CRVideo.KEEPALIVE_TIMER),console.crlog("[MEETING] CRVideo.REFRESH_SESSION-----"+CRVideo.REFRESH_SESSION),CRVideo.KEEPLIVE_COMMIT&&(-1!=CRVideo.KEEPALIVE_TIMER&&CRVideo.controlSharkHand(),-1!=CRVideo.REFRESH_SESSION&&CRVideo.refreshSessionSharkHand(),CRVideo_ShakeHand()))})}(),CRVideo.updateDevicesList=function(e){CRRTCAudio.audioInput=[],CRRTCAudio.audioOutput=[],CRRTCLocalVideo.videoInput=[];for(var t=1,n=1,i=1,r=0;r<e.length;r++){var o=e[r];if("audioinput"==o.kind){var c={};c.deviceId=o.deviceId,c.name=o.label||"麦克风 - 默认",c.kind=o.kind,c.id=t++,CRRTCAudio.audioInput.push(c)}else if("audiooutput"==o.kind){var a={};a.deviceId=o.deviceId,a.name=o.label||"扬声器 - 默认",a.kind=o.kind,a.id=n++,CRRTCAudio.audioOutput.push(a)}else if("videoinput"==o.kind){var s={};s.deviceId=o.deviceId||i,s.name=o.label||"摄像头 - 默认",s.kind=o.kind,s.id=i++,s.disabled=!1,s.locAttr=null,s.stream=null,s.connect=new _ConnectItemClass(s.id,CRRTCLocalVideo.lastLocalVideoMSID++),s.connect2=new _ConnectItemClass(s.id+1e4,CRRTCLocalVideo.lastLocalVideoMSID++),CRRTCLocalVideo.videoInput.push(s)}}CRBrowser.curBrowserCfg.isMobile&&0<CRRTCLocalVideo.videoInput.length&&(CRRTCLocalVideo.videoInput=[],CRRTCLocalVideo.videoInput.push({facingMode:"user",name:"前置镜头",kind:"video",id:1,disabled:!1,locAttr:null,stream:null,connect:new _ConnectItemClass(1,CRRTCLocalVideo.lastLocalVideoMSID++),connect2:new _ConnectItemClass(10001,CRRTCLocalVideo.lastLocalVideoMSID++)}),CRRTCLocalVideo.videoInput.push({facingMode:"environment",name:"后置镜头",kind:"video",id:2,disabled:!1,locAttr:null,stream:null,connect:new _ConnectItemClass(2,CRRTCLocalVideo.lastLocalVideoMSID++),connect2:new _ConnectItemClass(10002,CRRTCLocalVideo.lastLocalVideoMSID++)})),"Firefox"==CRBrowser.name?CRRTCAudio.audioOutput.push({name:"Firefox暂不支持切换扬声器",deviceId:""}):"Mac"==CRBrowser.curBrowserCfg.platform&&"Safari"==CRBrowser.curBrowserCfg.name&&CRRTCAudio.audioOutput.push({name:"Safari暂不支持切换扬声器",deviceId:""})},CR__SubscribeFocusWindow2Rslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[MEETING] SubscribeFocusWindow2Rslt Callback:"+e+" "+t)},CR__VideoAllocRawExt2.callback=function(e,t,n,i){var r={VCT_CAMERA:"video",VCT_SCREEN:"screen",VCT_FILM:"media"}[t.contentType.name];if("video"==r)CRRTCVideo.videoAllocRawExt2(e,t,n,i);else{if("screen"==r)return void CRRTCScreen.videoAllocRawExt2(e,t,n,i);"media"==r&&CRRTCMedia.videoAllocRawExt2(e,t,n,i)}},CR__ModifyPeerAddrExt.callback=function(e,t,n){console.crlog("[MEETING] CR__ModifyPeerAddrExt: MSID-----"+t),enmeet.videoAnswerBrowserParse=function(e,t){var n=baseOffer.sdp.match(/a=extmap:(.*?)http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/)?"".concat(baseOffer.sdp.match(/a=extmap:(.*?)http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/)[0],"\r\n"):"",i=baseOffer.sdp.match(/a=extmap:(.*?)urn:3gpp:video-orientation/)?"".concat(baseOffer.sdp.match(/a=extmap:(.*?)urn:3gpp:video-orientation/)[0],"\r\n"):"";t.sdp=t.sdp.replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n","".concat(n).concat(i));var r=t.sdp.match(/c=IN IP4(.*?)\r\n/)?t.sdp.match(/c=IN IP4(.*?)\r\n/)[0]:"",o=t.sdp.match(/b=AS:(.*?)\r\n/)?t.sdp.match(/b=AS:(.*?)\r\n/)[0]:"";r&&2<t.sdp.split(r).length&&(t.sdp=t.sdp.replace("".concat(r).concat(o),"")),t.sdp=t.sdp.replace(";profile-level-id=42001f",""),"local"==e||(t.sdp=t.sdp.replace("a=sendrecv","a=sendonly"))};var i={type:"answer",sdp:n.get("sdp")},r=t.toString().substr(0,2);if(r==CRVideo.msType.localAudio)CRRTCAudio.modifyPeerAddrExt(i,+t);else{if(r==CRVideo.msType.localVideo)return void CRRTCVideo.modifyPeerAddrExt("localVideo",e,t,n);if(r==CRVideo.msType.remoteVideo)return void CRRTCVideo.modifyPeerAddrExt("remoteVideo",e,t,n);if(r==CRVideo.msType.localScreen)return void CRRTCScreen.modifyPeerAddrExt("localScreen",e,t,n);if(r==CRVideo.msType.remoteScreen)return void CRRTCScreen.modifyPeerAddrExt("remoteScreen",e,t,n);if(r==CRVideo.msType.remoteMedia)return void CRRTCMedia.modifyPeerAddrExt("remoteMedia",e,t,n);if(r==CRVideo.msType.localMediaVideo)return void CRRTCMedia.modifyPeerAddrExt("localMediaVideo",e,t,n);if(r==CRVideo.msType.localMediaAudio)return void CRRTCMedia.modifyPeerAddrExt("localMediaAudio",e,t,n)}},CR__VideoResolutionReportRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[Ctrl] VideoResolutionReportRslt Callback: "+e+" "+t)},CR__UserEnter.callback=function(t){console.crlog("[MEETING] userEnter args: "+JSON.stringify(t)),console.crlog("[MEETING] user: "+t.nickname+" enter meeting; termId is: "+t.termId);var n=!0;if(CRVideo.allMemberInfo.forEach(function(e){e.termId!=t.termId||(n=!1)}),t.termId!==CRVideo.userInfo.termId&&n){var e=t;e.userId=t.userId||t.nickname,e.nickname=t.nickname,e.audioStatus="AUNKNOWN",e.videoStatus="VUNKNOWN","family"==t.privRole?CRVideo.privRoleFamily=t.userId:"prisoner"==t.privRole&&(CRVideo.privRolePrison=t.userId),CRVideo.allMemberInfo.push(e),console.crlog("[MeetingMgr]CRVideo_UserEnterMeeting.callback(".concat(e.userId,") ")),CRVideo_UserEnterMeeting.callback(e.userId)}},CR__UserLeftMeet.callback=function(n,e){if(console.crlog("[MEETING] UserLeftMeet Callback: id: "+n+",reson: "+e),n!==CRVideo.userInfo.termId){var i="",r=null;CRVideo.allMemberInfo.forEach(function(e,t){n==e.termId&&(i=e.userId,r=t)}),CRRTCRemoteVideo.userLeftHandler(n),i&&null!=r&&(CRVideo.allMemberInfo.splice(r,1),console.crlog("[MeetingMgr] CRVideo_UserLeftMeeting.callback(".concat(i,",").concat(e,")")),CRVideo_UserLeftMeeting.callback(i,e),console.crlog("[MEETING]"+i+" :left meeting,and the reason is:"+e))}else"kick"===e&&(CRVideo.leftMeetingFun(e),CRVideo.destroyMeetingConnect(),CRVideo_UserLeftMeeting.callback(CRVideo.userInfo.userId,e))},CRVideo.leftMeetingFun=function(e){CRVideo.isMeeting=!1,clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,clearTimeout(CRVideo.REFRESH_SESSION),CRVideo.REFRESH_SESSION=-1,window.CRRTCAudio&&CRRTCAudio.stopAllAudioTrack(),window.CRRTCAudio&&CRRTCAudio.closeAllPeerConnection(),window.CRRTCRemoteVideo&&CRRTCRemoteVideo.closeAllRTCConnection(),window.CRRTCLocalVideo&&CRRTCLocalVideo.stopAllLocalVideoAndConnect(),CRVideo.allMemberInfo=[],"token失效"==e&&(console.crlog("[MeetingMgr] CRVideo_MeetingDropped.callback(".concat(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT,")")),CRVideo_MeetingDropped.callback(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT))};var CRVideo_ExitMeeting=function(e){var t=void 0!==e?e:"主动离开";"token失效"==t&&console.crlog("[MEETING] Token Expire, do left meeting!"),CRVideo.isExitmeet||(CRVideo.isWebRTC&&window.CRICEAPI.StopVideo(),sessionStorage.setItem(CRVideo.LOCAL_KEY+"_TermId_",""),sessionStorage.setItem(CRVideo.LOCAL_KEY+"_USERDETAIL_",""),console.crlog("[MEETING] ----- CR__Exit ----- : ".concat(t)),CR__Exit(t),CRVideo.isExitmeet=!0,CRVideo.isMeeting=!1,setTimeout(function(){CRVideo_UploadingLog()},1e3),CRVideo.meetingExiting=!0,setTimeout(function(){CRVideo.meetingExiting=!1},3e3),setTimeout(function(){console.crlog("[MEETING] exit meeting---do left meeting function"),CRVideo.leftMeetingFun(t)},0))};function loginAgain(){console.crlog("[MEETING] loginAgain...."),setTimeout(function(){CRVideo_UploadingLog()},1e3),CRVideo.leftMeetingFun();var e=sessionStorage.getItem(CRVideo.LOCAL_KEY+"_USERDETAIL_"),t=null;e&&""!=e&&(t=JSON.parse(e));var n=CRVideo.userInfo.userCode,i=CRVideo.userInfo.openId?CRVideo.userInfo.openId:"";CRVideo.KEEPLIVE_COMMIT=!0,CRVideo.isExitmeet=!1,console.crlog("[MEETING] ----- CR__Login -----"),CR__Login(CRVideo.LIVE_INFO.dataStr,sessionStorage.getItem(CRVideo.LOCAL_KEY+"_TermId_"),t,n,i),-1==CRVideo.HandShark&&CRVideo_ShakeHand()}CR__ExitRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[MEETING] ExitRslt Callback："+e+" "+t),CRVideo.CallID="",console.crlog("[MEETING] ----- CR__UnInit -----"),CR__UnInit(),setTimeout(function(){CRVideo.destroyMeetingConnect()},1e3)},CR__Free.callback=function(e){console.crlog("[MEETING] Free Callback: msid is "+e);var t=e.toString().substr(0,2);t==CRVideo.msType.localAudio?CRRTCAudio.audioMSIDFree(+e):t==CRVideo.msType.remoteVideo&&CRRTCRemoteVideo.videoMSIDFree(e)};var CRVideo_GetMainVideo=function(){return console.crlog("[MEETING] CRVideo_GetMainVideo"),termIdToUserId(CRVideo.mainVideoTermID)||0},CRVideo_SetMainVideo=function(e){console.crlog("[MEETING] CRVideo_SetMainVideo,userId:".concat(e));var t=userIdToTermId(e);console.crlog("[MEETING] ----- CR__SetFocusWindow ----- mode:VMANAGER_LOCK,termId:"+t),CR__SetFocusWindow("VMANAGER_LOCK",t)},CRVideo_SetMainVideoMode=function(e,t){var n;console.crlog("[MEETING] CRVideo_SetMainVideoMode,mode:".concat(e,",userId:").concat(t)),1==e?n="VSPEAKER_TRACK":2==e?n="VPRESENTER_LOCK":3==e&&(n="VMANAGER_LOCK");var i=findMemberInfo({use:"userId",want:"termId",value:t});i&&(console.crlog("[MEETRELY] ---- CR__SetFocusWindow ---- mode: ".concat(e,",termid: ").concat(i,",userid:").concat(t)),CR__SetFocusWindow(n,i))};CRVideo.windowMode="Unknown",CR__UpdateFocusWindow.callback=function(e,t){var n;n="VSPEAKER_TRACK"==e?1:"VPRESENTER_LOCK"==e?2:"VMANAGER_LOCK"==e?3:0,CRVideo.windowMode!=e&&(console.crlog("[Video] Notify mainVideoModeChanged, oldMode:".concat(CRVideo.windowMode,",newMode:").concat(e)),CRVideo.windowMode=e,console.crlog("[MeetingMgr] CRVideo_NotifyMainVideoModeChanged.callback(".concat(n,")")),CRVideo_NotifyMainVideoModeChanged.callback(n));var i=findMemberInfo({use:"termId",want:"userId",value:t});console.crlog("[Video] Notify updateFocusWindow, mode:".concat(e,",termId:").concat(t,",userId:").concat(i)),CRVideo.mainVideoTermID=t,i&&console.crlog("[MeetingMgr] CRVideo_NotifyMainVideoChanged.callback(".concat(i,")")),i&&CRVideo_NotifyMainVideoChanged.callback(i)},function(e){function _(e){var t,n="[object Array]"==Object.prototype.toString.call(e);if(n){t=[];for(var i=0;i<e.length;i++)"object"==_typeof2(e[i])&&(t[i]=JSON.parse(JSON.stringify(e[i])));for(var r=0;r<t.length;r++)t[r].ownerID==CRVideo.userInfo.termId&&(t[r].ownerID=CRVideo.userInfo.userId)}else"number"==typeof e?(t=null,t=e==CRVideo.userInfo.termId?CRVideo.userInfo.userId:e):"object"!=_typeof2(e)||n||(t={},(t=JSON.parse(JSON.stringify(e))).ownerID==CRVideo.userInfo.termId&&(t.ownerID=CRVideo.userInfo.userId));return t}function c(e){var t=[],n={},i=new Uint8Array(e.data.buffer),r=(i[0],{}),o=(i[9],i[11]),c=i[12],a=i[13]<<8|i[14];r.alpha=i[1],r.red=i[3],r.green=i[5],r.blue=i[7];for(var s,l,d,u,f,h=[],p=15;p<i.length;p+=2)h[p]=i[p],h[p+1]=i[p+1],240<=i[p]&&(h[p]=i[p]-256,h[p+1]=i[p+1]+256*(i[p]-256));for(p=15;p<h.length;p+=4)t.push({w:h[p]<<8|h[p+1],h:h[p+2]<<8|h[p+3]});return n.color=(s="rgb("+r.red+","+r.green+","+r.blue+")",l=s.split(","),d=parseInt(l[0].split("(")[1]),u=parseInt(l[1]),f=parseInt(l[2].split(")")[0]),"#"+((1<<24)+(d<<16)+(u<<8)+f).toString(16).slice(1)),n.width=o,n.style=c,n.size=a,n.data=t,e.eID.ownerID==CRVideo.userInfo.termId?n.eID=_(e.eID):n.eID=e.eID,n.orderId=e.orderId,n.type=e.type,n.left=e.left,n.top=e.top,n}function o(e){var t,n,i,r={},o=e.data;hexColor=(t=e.color,n=1,i="rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+n+")",{red:parseInt("0x"+t.slice(1,3)),green:parseInt("0x"+t.slice(3,5)),blue:parseInt("0x"+t.slice(5,7)),rgba:i});var c=new ArrayBuffer(15+4*o.length);r.eID=e.eID,r.noused=0,r.left=e.left,r.top=e.top,r.type=e.type,r.data=new Uint8Array(c),r.data[0]=1,r.data[1]=r.data[2]=255,r.data[3]=r.data[4]=hexColor.red,r.data[5]=r.data[6]=hexColor.green,r.data[7]=r.data[8]=hexColor.blue,r.data[9]=r.data[10]=0,r.data[11]=e.width,r.data[12]=1,r.data[13]=parseInt(e.size/256),r.data[14]=e.size%256;for(var a=0,s=15;a<o.length;a++)r.data[s]=o[a].w>>8,r.data[s+1]=255&o[a].w,r.data[s+2]=o[a].h>>8,r.data[s+3]=255&o[a].h,s+=4;return r}e.CRVideo_Createboard=function(e,t,n,i){var r={};r.name=e,r.width=t,r.height=n,r.pageCount=i,r.bAll=!0,r.wID={termID:CRVideo.userInfo.termId,localID:CRVideo.lastTabValue},CRVideo.lastTabValue++,CRVideo.curWbDesc=r,console.crlog("[WHITEBOARD] ----- CR__Create whiteBoard -----"),CR__Create(r)},e.CRVideo_Closeboard=function(e){console.crlog("[WHITEBOARD] ----- CR__Close whiteBoard -----"),CR__Close(e)},e.CRVideo_CreateElementID=function(){return CRVideo.lastElemValue},e.CRVideo_Addboardelement=function(e,t,n){var i=JSON.parse(JSON.stringify(n));i.eID.ownerID=CRVideo.userInfo.termId,CRVideo.lastElemValue++;var r=o(i);console.crlog("[WHITEBOARD] ----- CR__AddElement -----"),console.crlog("[WHITEBOARD]"+JSON.stringify({boardID:e,boardPageNo:t,element:r})),CR__AddElement(e,t,r)},e.CR__CreateRslt.callback=function(e,t){0==e&&(console.crlog("[WHITEBOARD] ----- CR__ImportPage -----"),CR__ImportPage(CRVideo.curWbDesc.wID,[{pageNo:0,elementList:[]}])),e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[WHITEBOARD] CreateRslt Callback: "+e+" "+t)},e.CR__ImportPageRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[WHITEBOARD] ImportPageRslt Callback: "+e+" "+t)},e.CR__AddElementRslt.callback=function(e,t){"网络错误"==t&&alert("网络错误，请退出重登！"),e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[WHITEBOARD] AddElementRslt Callback: "+e+" "+t)},e.CRVideo_Delboardelement=function(e,t,n){for(var i=[],r=0;r<n.length;r++)i[r]=JSON.parse(JSON.stringify(n[r]));i.forEach(function(t){CRVideo.allMemberInfo.forEach(function(e){e.userId==t.ownerID&&(t.ownerID=e.termId)})}),console.crlog("[WHITEBOARD] ----- CR__DelElement -----"),CR__DelElement(e,t,i)},e.CR__DelElementRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[WHITEBOARD] DelElementRslt Callback: "+e+" "+t)},e.CR__NotifyCreate.callback=function(e){console.crlog("[WHITEBOARD] NotifyCreate wihite board Callback: wbDesc is "+e),CRVideo.wbDescs.push(e),CRVideo_NotifyCreateBoard.callback(e)},e.CR__QueryElementByIDsRslt.callback=function(e,t,n){if(e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[WHITEBOARD] QueryElementByIDsRslt Callback: "+e+" "+t),"undefined"!=n){var i=n.elementList;if(0!=i.length){for(var r=0,o=0;o<i.length;o++)i[o]=c(i[o]),CRVideo_NotifyAddBoardElement.callback(CRVideo.curWbDesc.wID,n.pageNo,i[o],""),i[o].eID.ownerID==CRVideo.userInfo.userId&&i[o].eID.ID>r&&(r=i[o].eID.ID);r>CRVideo.lastElemValue&&(CRVideo.lastElemValue=r)}}},e.CR__NotifyAddElement.callback=function(e,t,n,i){console.crlog("[WHITEBOARD] NotifyAddElement Callback: ");var r=c(n);CRVideo_NotifyAddBoardElement.callback(e,t,r,_(i))},e.CR__NotifyDelElement.callback=function(e,t,n,i){console.crlog("[WHITEBOARD] NotifyDelElement Callback: "),CRVideo_NotifyDelBoardElement.callback(e,t,_(n),_(i))},e.CR__NotifyImportPage.callback=function(e,t,n){console.crlog("[WHITEBOARD] NotifyImportPage Callback: ")},e.CR__NotifyClose.callback=function(n,e){console.crlog("[WHITEBOARD] NotifyClose Callback: ");var i=null;CRVideo.wbDescs.forEach(function(e,t){e.wID.termID==n.termID&&e.wID.localID==n.localID&&(i=t)}),null!=i&&CRVideo.wbDescs.splice(i,1),CRVideo_NotifyCloseBoard.callback(n)},e.CR__NotifyAddElementEx.callback=function(e,t,n,i){console.crlog("[WHITEBOARD] NotifyAddElementEx Callback: ");for(var r=0;r<n.length;r++)n[r]=c(n[r]),CRVideo_NotifyAddBoardElement(e,t,n[r],_(i))},e.CR__NotifySetContainerSize.callback=function(e,t,n){console.crlog("[WHITEBOARD] NotifySetContainerSize Callback: ")},e.CR__NotifyChangeName.callback=function(e,t,n){console.crlog("[WHITEBOARD] NotifyChangeName Callback: ")},e.CR__NotifyChangeScale.callback=function(e,t,n){console.crlog("[WHITEBOARD] NotifyChangeScale Callback: ")},e.CR__NotifyChangeRotate.callback=function(e,t,n){console.crlog("[WHITEBOARD] NotifyChangeRotate Callback: ")},e.CR__NotifySetCurrentPage.callback=function(e,t,n,i,r){console.crlog("[WHITEBOARD] NotifySetCurrentPage Callback: ")},e.CR__NotifyShowThumPage.callback=function(e,t,n){console.crlog("[WHITEBOARD] NotifyShowThumPage Callback: ")},e.CR__NotifyMoveElement.callback=function(e,t,n,i){console.crlog("[WHITEBOARD] NotifyMoveElement Callback")},e.CR__NotifyModifyElement.callback=function(e,t,n,i){console.crlog("[WHITEBOARD] NotifyModifyElement Callback")},e.CR__NotifySetElementZPos.callback=function(e,t,n,i){console.crlog("[WHITEBOARD] NotifySetElementZPos Callback")},e.CR__NotifySetIndicator.callback=function(e,t,n){console.crlog("[WHITEBOARD] NotifySetIndicator Callback")},e.CR__NotifySetHotspot.callback=function(e,t,n,i,r){},e.CR__NotifySetMarkTerms.callback=function(e,t,n){console.crlog("[WHITEBOARD] NotifySetMarkTerms Callback")}}(window),function(l,e,t){var n=function(){function e(){_classCallCheck(this,e),this.initIceCallback(),this.initSDKInterface()}return _createClass(e,[{key:"initIceCallback",value:function(){var c=this;this.ICECallback={notifyMeetingAttrsChanged:function(e,t,n){console.crlog("[Attr] notifyMeetingAttrsChanged");var i=c.ConferenceToData(e),r=c.ConferenceToData(t);CRVideo_NotifyMeetingAttrsChanged.callback(i,r,n)},notifyUserAttrsChanged:function(e,t,n,i){console.crlog("[Attr] notifyUserAttrsChanged: "+e);var r=c.ConferenceToData(t),o=c.ConferenceToData(n);CRVideo_NotifyUserAttrsChanged.callback(e,r,o,i)}}}},{key:"initSDKInterface",value:function(){var s=this;l.CRVideo_GetMeetingAttrs=function(e,n){if(console.crlog("[Attr] CRVideo_GetMeetingAttrs start..."),!(e instanceof Array))return console.crlog("[Attr] CRVideo_GetMeetingAttrsFail parameter error"),void l.CRVideo_GetMeetingAttrsFail.callback(l.CRVideo_ERR_DEF.MEETPARAM_ERR,n);Cr.conferenceRequest("getMeetingAttrs",e).then(function(e){var t=s.ConferenceToData(e[0]);console.crlog("[Attr] CRVideo_GetMeetingAttrsSuccess"),l.CRVideo_GetMeetingAttrsSuccess.callback(t,n)}).catch(function(e){console.crlog("[Attr] CRVideo_GetMeetingAttrsFail"),l.CRVideo_GetMeetingAttrsFail.callback(e,n)})},l.CRVideo_GetMeetingAllAttrs=function(n){console.crlog("[Attr] CRVideo_GetMeetingAllAttrs start..."),Cr.conferenceRequest("getMeetingAllAttrs").then(function(e){var t=s.ConferenceToData(e[0]);console.crlog("[Attr] CRVideo_GetMeetingAllAttrsSuccess"),l.CRVideo_GetMeetingAllAttrsSuccess.callback(t,n)}).catch(function(e){console.crlog("[Attr] CRVideo_GetMeetingAllAttrsFail"),l.CRVideo_GetMeetingAllAttrsFail.callback(e,n)})},l.CRVideo_SetMeetingAttrs=function(e,t,n){console.crlog("[Attr] CRVideo_SetMeetingAttrs start");try{var i=JSON.parse(e);if("object"!==_typeof2(i))throw"[Attr] attrs not is object";var r=s.checkLength(i);if(r)throw r;var o=s.createStringMap(i);Cr.conferenceRequest("setMeetingAttrs",o,t).then(function(){console.crlog("[Attr] CRVideo_SetMeetingAttrsSuccess"),l.CRVideo_SetMeetingAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,n)}).catch(function(e){console.crlog("[Attr] CRVideo_SetMeetingAttrsFail"),l.CRVideo_SetMeetingAttrsRslt.callback(e,n)})}catch(e){return console.crlog("[Attr] SetMeetingAttrs fail: ".concat(e)),void l.CRVideo_SetMeetingAttrsRslt.callback(l.CRVideo_ERR_DEF.UNKNOWERR,n)}},l.CRVideo_AddOrUpdateMeetingAttrs=function(e,t,n){console.crlog("[Attr] AddOrUpdateMeetingAttrs start");try{var i=JSON.parse(e);if("object"!==_typeof2(i))throw"[Attr] attrs not is object";var r=s.checkLength(i);if(r)throw r;var o=s.createStringMap(i);Cr.conferenceRequest("addOrUpdateMeetingAttrs",o,t).then(function(){console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Success"),l.CRVideo_AddOrUpdateMeetingAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,n)}).catch(function(e){console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Fail"),l.CRVideo_AddOrUpdateMeetingAttrsRslt.callback(e,n)})}catch(e){return console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs fail: ".concat(e)),void l.CRVideo_AddOrUpdateMeetingAttrsRslt.callback(l.CRVideo_ERR_DEF.UNKNOWERR,n)}},l.CRVideo_DelMeetingAttrs=function(e,t,n){console.crlog("[Attr] CRVideo_DelMeetingAttrs start"),e instanceof Array?Cr.conferenceRequest("delMeetingAttrs",e,t).then(function(){console.crlog("[Attr] CRVideo_DelMeetingAttrs Success"),l.CRVideo_DelMeetingAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,n)}).catch(function(e){console.crlog("[Attr] CRVideo_DelMeetingAttrs Fail"),l.CRVideo_DelMeetingAttrsRslt.callback(e,n)}):l.CRVideo_DelMeetingAttrsRslt.callback(l.CRVideo_ERR_DEF.MEETPARAM_ERR,n)},l.CRVideo_ClearMeetingAttrs=function(e,t){console.crlog("[Attr] CRVideo_ClearMeetingAttrs start..."),Cr.conferenceRequest("clearMeetingAttrs",e).then(function(){console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Success"),l.CRVideo_ClearMeetingAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,t)}).catch(function(e){console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Fail"),l.CRVideo_ClearMeetingAttrsRslt.callback(e,t)})},l.CRVideo_GetUserAttrs=function(e,t,n){if(console.crlog("[Attr] CRVideo_GetUserAttrs start..."),!(e instanceof Array&&e.length<=50&&(!t||t&&t instanceof Array)))return console.crlog("[Attr] CRVideo_GetUserAttrsFail parameter error"),void l.CRVideo_GetUserAttrsFail.callback(l.CRVideo_ERR_DEF.MEETPARAM_ERR,n);var i="getUserAttrs",r=void 0;t&&0<t.length&&(i="getUserAttrsWithKey",r=t),Cr.conferenceRequest(i,e,r).then(function(e){var t=s.getUserData(e[0]);console.crlog("[Attr] CRVideo_GetUserAttrsSuccess"),l.CRVideo_GetUserAttrsSuccess.callback(t,n)}).catch(function(e){console.crlog("[Attr] CRVideo_GetUserAttrsFail"),l.CRVideo_GetUserAttrsFail.callback(e,n)})},l.CRVideo_SetUserAttrs=function(e,t,n,i){console.crlog("[Attr] CRVideo_SetUserAttrs start");try{var r=JSON.parse(t);if("object"!==_typeof2(r))throw"attrs not is object";var o=s.checkLength(r);if(o)throw o;var c=new Conference.StringStringMap;for(var a in r)c.set(a,r[a]);Cr.conferenceRequest("setUserAttrs",e,c,n).then(function(){console.crlog("[Attr] CRVideo_SetMeetingAttrsSuccess"),l.CRVideo_SetMeetingAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,i)}).catch(function(e){console.crlog("[Attr] CRVideo_SetMeetingAttrsFail"),l.CRVideo_SetMeetingAttrsRslt.callback(e,i)})}catch(e){return console.crlog("[Attr] CRVideo_SetUserAttrsRslt fail: ".concat(e)),void l.CRVideo_SetUserAttrsRslt.callback(l.CRVideo_ERR_DEF.UNKNOWERR,i)}},l.CRVideo_AddOrUpdateUserAttrs=function(e,t,n,i){console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrs start");try{var r=JSON.parse(t);if("object"!==_typeof2(r))throw"attrs not is object";var o=s.checkLength(r);if(o)throw o;var c=new Conference.StringStringMap;for(var a in r)c.set(a,r[a]);Cr.conferenceRequest("addOrUpdateUserAttrs",e,c,n).then(function(){console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Success"),l.CRVideo_AddOrUpdateUserAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,i)}).catch(function(e){console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Fail"),l.CRVideo_AddOrUpdateUserAttrsRslt.callback(e,i)})}catch(e){return console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt fail: ".concat(e)),void l.CRVideo_AddOrUpdateUserAttrsRslt.callback(l.CRVideo_ERR_DEF.UNKNOWERR,i)}},l.CRVideo_DelUserAttrs=function(e,t,n,i){console.crlog("[Attr] CRVideo_DelUserAttrs start"),t instanceof Array?Cr.conferenceRequest("delUserAttrs",e,t,n).then(function(){console.crlog("[Attr] CRVideo_DelUserAttrs Success"),l.CRVideo_DelUserAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,i)}).catch(function(e){console.crlog("[Attr] CRVideo_DelUserAttrs Fail"),l.CRVideo_DelUserAttrsRslt.callback(e,i)}):l.CRVideo_DelUserAttrsRslt.callback(CONSTANT.CRVideo_MEETPARAM_ERR,i)},l.CRVideo_ClearUserAttrs=function(e,t,n){console.crlog("[Attr] CRVideo_ClearUserAttrs start..."),"string"==typeof e&&(e=[e]),e instanceof Array?Cr.conferenceRequest("clearUserAttrs",e,t).then(function(){console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Success"),l.CRVideo_ClearUserAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,n)}).catch(function(e){console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Fail"),l.CRVideo_ClearUserAttrsRslt.callback(e,n)}):l.CRVideo_ClearUserAttrsRslt.callback(CONSTANT.CRVideo_MEETPARAM_ERR,n)},l.CRVideo_ClearAllUserAttrs=function(e,t){console.crlog("[Attr] CRVideo_ClearAllUserAttrs start..."),Cr.conferenceRequest("clearAllUserAttrs",e).then(function(){console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Success"),l.CRVideo_ClearAllUserAttrsRslt.callback(l.CRVideo_ERR_DEF.NOERR,t)}).catch(function(e){console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Fail"),l.CRVideo_ClearAllUserAttrsRslt.callback(e,t)})}}},{key:"checkLength",value:function(e){for(var t in e){if(64<t.length)return"[MeetingAttr] key Exceed maximum length";if(8192<e[t].length)return"[MeetingAttr] value Exceed maximum length"}return!1}},{key:"ConferenceToData",value:function(e){var n={};return e.forEach(function(e,t){n[e]=t}),n}},{key:"getUserData",value:function(e){var i={};return e.forEach(function(n,e){i[n]={},e.forEach(function(e,t){i[n][e]=t})}),i}},{key:"createStringMap",value:function(e){var t=new Conference.StringStringMap;for(var n in e)t.set(n,e[n]);return t}}]),e}();l.__crAttrClass=n,l.CRRTCAttr=new l.__crAttrClass,l.CRVideo_GetMeetingAttrsSuccess=new t.CbProxy("CRVideo_GetMeetingAttrsSuccess"),l.CRVideo_GetMeetingAttrsFail=new t.CbProxy("CRVideo_GetMeetingAttrsFail"),l.CRVideo_GetMeetingAllAttrsSuccess=new t.CbProxy("CRVideo_GetMeetingAllAttrsSuccess"),l.CRVideo_GetMeetingAllAttrsFail=new t.CbProxy("CRVideo_GetMeetingAllAttrsFail"),l.CRVideo_SetMeetingAttrsRslt=new t.CbProxy("CRVideo_SetMeetingAttrsRslt"),l.CRVideo_AddOrUpdateMeetingAttrsRslt=new t.CbProxy("CRVideo_AddOrUpdateMeetingAttrsRslt"),l.CRVideo_DelMeetingAttrsRslt=new t.CbProxy("CRVideo_DelMeetingAttrsRslt"),l.CRVideo_ClearMeetingAttrsRslt=new t.CbProxy("CRVideo_ClearMeetingAttrsRslt"),l.CRVideo_GetUserAttrsSuccess=new t.CbProxy("CRVideo_GetUserAttrsSuccess"),l.CRVideo_GetUserAttrsFail=new t.CbProxy("CRVideo_GetUserAttrsFail"),l.CRVideo_SetUserAttrsRslt=new t.CbProxy("CRVideo_SetUserAttrsRslt"),l.CRVideo_AddOrUpdateUserAttrsRslt=new t.CbProxy("CRVideo_AddOrUpdateUserAttrsRslt"),l.CRVideo_DelUserAttrsRslt=new t.CbProxy("CRVideo_DelUserAttrsRslt"),l.CRVideo_ClearUserAttrsRslt=new t.CbProxy("CRVideo_ClearUserAttrsRslt"),l.CRVideo_ClearAllUserAttrsRslt=new t.CbProxy("CRVideo_ClearAllUserAttrsRslt"),l.CRVideo_NotifyMeetingAttrsChanged=new t.CbProxy("CRVideo_NotifyMeetingAttrsChanged"),l.CRVideo_NotifyUserAttrsChanged=new t.CbProxy("CRVideo_NotifyUserAttrsChanged")}(window,Ice,CRVideo),MSClientI=Ice.Class(MS.MSClient,{setProxy:function(e){this.proxy=e},VideoAllocRaw_async:function(e,t,n){Cr.Utils.log("[RTC] VideoAllocRaw"),this.proxy.callCallback("VideoAllocRaw",[e,t,n])},VideoAllocRawExt_async:function(e,t,n,i){Cr.Utils.log("[RTC] VideoAllocRawExt_async"),this.proxy.callCallback("VideoAllocRawExt",[e,t,n,i])},VideoAllocRawExt2_async:function(e,t,n,i){Cr.Utils.log("[RTC] VideoAllocRawExt2_async"),this.proxy.callCallback("VideoAllocRawExt2",[e,t,n,i])},AudioAllocRaw_async:function(e,t){Cr.Utils.log("[RTC] AudioAllocRaw"),this.proxy.callCallback("AudioAllocRaw",[e,t])},AudioAllocRawExt_async:function(e,t,n){Cr.Utils.log("[RTC] AudioAllocRawExt"),this.proxy.callCallback("AudioAllocRawExt",[e,t,n])},AudioAllocRawExt2_async:function(){var e;(e=CRRTCAudio.ICECallback).AudioAllocRawExt2_async.apply(e,arguments)},ModifyPeerAddr_async:function(e){Cr.Utils.log("[RTC] ModifyPeerAddr"),this.proxy.callCallback("ModifyPeerAddr",[e,asParam,strParams])},ModifyPeerAddrExt_async:function(e,t,n){e.ice_response(),Cr.Utils.log("[RTC] ModifyPeerAddrExt"),this.proxy.callCallback("ModifyPeerAddrExt",[e,t,n])},NotifyRTMPStreamPublishFinished_async:function(e,t,n){Cr.Utils.log("[RTC] NotifyRTMPStreamPublishFinished_async"),this.proxy.callCallback("NotifyRTMPStreamPublishFinished",[e,t,n])},EnableSendScreen2Internet_async:function(e){e.ice_response(),Cr.Utils.log("[RTC] EnableSendScreen2Internet"),this.proxy.callCallback("EnableSendScreen2Internet",[e])},DisableSendScreen2Internet_async:function(e){e.ice_response(),Cr.Utils.log("[RTC] DisableSendScreen2Internet"),this.proxy.callCallback("DisableSendScreen2Internet",[e])},EnableSendFilm2Internet_async:function(e){e.ice_response(),Cr.Utils.log("[RTC] EnableSendFilm2Internet"),this.proxy.callCallback("EnableSendFilm2Internet",[e])},DisableSendFilm2Internet_async:function(e){e.ice_response(),Cr.Utils.log("[RTC] DisableSendFilm2Internet"),this.proxy.callCallback("DisableSendFilm2Internet",[e])},EnableSendVideo2Internet_async:function(e,t){e.ice_response(),CRRTCVideo&&CRRTCVideo.ICECallback.enableSendVideo2Internet(t)},DisableSendVideo2Internet_async:function(e,t){e.ice_response(),CRRTCVideo&&CRRTCVideo.ICECallback.disableSendVideo2Internet(t)},Free_async:function(e,t){e.ice_response(),Cr.Utils.log("[RTC] Free"),this.proxy.callCallback("Free",[t])}}),ChatReceptor=Ice.Class(Conference.IMCallback,{setProxy:function(e){this.proxy=e},receiveIMMsg:function(){var e;(e=CRRTCIMMsg.ICECallback).receiveIMMsg.apply(e,arguments)},notifyIMForbidStatus:function(){var e;(e=CRRTCIMMsg.ICECallback).notifyIMForbidStatus.apply(e,arguments)},notifyClearIMMsg:function(){var e;(e=CRRTCIMMsg.ICECallback).notifyClearIMMsg.apply(e,arguments)},notifyDeleteIMMsg:function(){var e;(e=CRRTCIMMsg.ICECallback).notifyDeleteIMMsg.apply(e,arguments)}}),AudioReceptor=Ice.Class(Conference.AudioCallback,{setProxy:function(e){this.proxy=e},updateStatus:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.audioUpdateStatus).call.apply(e,[CRRTCAudio].concat(n))},updateVoiceEnergy:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.updateVoiceEnergy).call.apply(e,[CRRTCAudio].concat(n))},updateSpeaker:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.updateSpeaker).call.apply(e,[CRRTCAudio].concat(n))},closeAll:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.closeAll).call.apply(e,[CRRTCAudio].concat(n))},playBackgroundMusic:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.playBackgroundMusic).call.apply(e,[CRRTCAudio].concat(n))},notifyVoiceHowling:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.notifyVoiceHowling).call.apply(e,[CRRTCAudio].concat(n))},notifyVoiceNoise:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.notifyVoiceNoise).call.apply(e,[CRRTCAudio].concat(n))},getRemoteAudioInfNotify:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.getRemoteAudioInfNotify).call.apply(e,[CRRTCAudio].concat(n))},remoteAudioSetNotify:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.remoteAudioSetNotify).call.apply(e,[CRRTCAudio].concat(n))},notifyLanLessMicOpen:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCAudio&&(e=CRRTCAudio.ICECallback.notifyLanLessMicOpen).call.apply(e,[CRRTCAudio].concat(n))}}),VideoReceptor=Ice.Class(Conference.VideoCallback,{setProxy:function(e){this.proxy=e},notifyAllowVideoWall:function(e,t){Cr.Utils.log("[RTC] notifyAllowVideoWall"),this.proxy.callCallback("notifyAllowVideoWall",[e,t])},updateStatus:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCVideo&&(e=CRRTCVideo.ICECallback.updateStatus).call.apply(e,[CRRTCVideo].concat(n))},notifyOpenVideo:function(){var e;CRRTCVideo&&(e=CRRTCVideo.ICECallback.notifyOpenVideo).call.apply(e,[CRRTCVideo].concat(_toConsumableArray(args)))},startVideoByManager:function(){Cr.Utils.log("[RTC] startVideoByManager"),this.proxy.callCallback("startVideoByManager")},notifyEnableVideo:function(e,t,n){Cr.Utils.log("[RTC] notifyEnableVideo"),this.proxy.callCallback("notifyEnableVideo",[e,t,n])},updateFocusWindow:function(e,t){Cr.Utils.log("[RTC] updateFocusWindow"),this.proxy.callCallback("updateFocusWindow",[e,t])},updateVLayout:function(e,t){Cr.Utils.log("[RTC] updateVLayout"),this.proxy.callCallback("updateVLayout",[e,t])},updateVLayout2:function(e,t){Cr.Utils.log("[RTC] updateVLayout2"),this.proxy.callCallback("updateVLayout2",[e,t])},updateMainVideoShowMode:function(e,t){Cr.Utils.log("[RTC] updateMainVideoShowMode"),this.proxy.callCallback("updateMainVideoShowMode",[e,t])},updateVideoListMode:function(e,t){Cr.Utils.log("[RTC] updateVideoListMode"),this.proxy.callCallback("updateVideoListMode",[e,t])},enableUpload:function(e,t){Cr.Utils.log("[RTC] enableUpload"),this.proxy.callCallback("enableUpload",[e,t])},enableUpload2:function(e,t){Cr.Utils.log("[RTC] enableUpload2"),this.proxy.callCallback("enableUpload2",[e,t])},generateIFrame:function(e){Cr.Utils.log("[RTC] generateIFrame"),this.proxy.callCallback("generateIFrame",[e])},notifyRefuseOpenVideo:function(e){Cr.Utils.log("[RTC] notifyRefuseOpenVideo"),this.proxy.callCallback("notifyRefuseOpenVideo",[e])},getVideoSetting:function(){Cr.Utils.log("[RTC] getVideoSetting"),this.proxy.callCallback("getVideoSetting")},setCamera:function(e,t){Cr.Utils.log("[RTC] setCamera"),this.proxy.callCallback("setCamera",[e,t])},setCameraById:function(){Cr.Utils.log("[RTC] setCameraById"),this.proxy.callCallback("setCameraById")},notifyVideoPolling:function(e,t,n){Cr.Utils.log("[RTC] notifyVideoPolling"),this.proxy.callCallback("notifyVideoPolling",[e,t,n])},notifyPollingVideo:function(e,t){Cr.Utils.log("[RTC] notifyPollingVideo"),this.proxy.callCallback("notifyPollingVideo",[e,t])},notifyVideoList:function(e,t){Cr.Utils.log("[RTC] notifyVideoList"),this.proxy.callCallback("notifyVideoList",[e,t])},notifyUpdateAllCameraInfos:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCVideo&&(e=CRRTCVideo.ICECallback.notifyUpdateAllCameraInfos).call.apply(e,[CRRTCVideo].concat(n))},notifySetOpenedCameraNumber:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCVideo&&(e=CRRTCVideo.ICECallback.notifySetOpenedCameraNumber).call.apply(e,[CRRTCVideo].concat(n))},notifyStartAdjustDirection:function(e,t){Cr.Utils.log("[RTC] notifyStartAdjustDirection"),this.proxy.callCallback("notifyStartAdjustDirection",[e,t])},notifyStartAdjustZoom:function(e,t){Cr.Utils.log("[RTC] notifyStartAdjustZoom"),this.proxy.callCallback("notifyStartAdjustZoom",[e,t])},notifyStopAdjustDirection:function(e){Cr.Utils.log("[RTC] notifyStopAdjustDirection"),this.proxy.callCallback("notifyStopAdjustDirection",[e])},notifyStopAdjustZoom:function(e){Cr.Utils.log("[RTC] notifyStopAdjustZoom"),this.proxy.callCallback("notifyStopAdjustZoom",[e])},isSupportNewStream:function(e,t,n,i){console.log(e,t,n,i)}}),ScreenShareReceptor=Ice.Class(Conference.ScreenShareClient,{setProxy:function(e){this.proxy=e},notifyStartScreenShare:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCScreen&&(e=CRRTCScreen.ICECallback.notifyStartScreenShare).call.apply(e,[CRRTCScreen].concat(n))},notifyStopScreenShare:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCScreen&&(e=CRRTCScreen.ICECallback.notifyStopScreenShare).call.apply(e,[CRRTCScreen].concat(n))},notifyCtrlReqState:function(e,t){Cr.Utils.log("[RTC] notifyCtrlReqState",e,t),this.proxy.callCallback("notifyCtrlReqState",[e,t])},notifyRequestCtrlRight:function(e){Cr.Utils.log("[RTC] notifyRequestCtrlRight",e),this.proxy.callCallback("notifyRequestCtrlRight",[e])},notifyCancelCtrlReq:function(e){Cr.Utils.log("[RTC] notifyCancelCtrlReq",e),this.proxy.callCallback("notifyCancelCtrlReq",[e])},notifyRejectCtrlReq:function(e,t,n){Cr.Utils.log("[RTC] notifyRejectCtrlReq",e,t,n),this.proxy.callCallback("notifyRejectCtrlReq",[e,t,n])},notifyGiveCtrlRight:function(e,t){Cr.Utils.log("[RTC] notifyGiveCtrlRight",e,t),this.proxy.callCallback("notifyGiveCtrlRight",[e,t])},notifyReleaseCtrlRight:function(e){Cr.Utils.log("[RTC] notifyReleaseCtrlRight",e),this.proxy.callCallback("notifyReleaseCtrlRight",[e])},notifyCtrlMsg:function(e,t){Cr.Utils.log("[RTC] notifyCtrlMsg",e,t),this.proxy.callCallback("notifyCtrlMsg",[e,t])},notifyTmpSetRemoteCtrlState:function(e,t){Cr.Utils.log("[RTC] notifyTmpSetRemoteCtrlState",e,t),this.proxy.callCallback("notifyTmpSetRemoteCtrlState",[e,t])},notifyRequestMarked:function(e){Cr.Utils.log("[RTC] notifyRequestMarked",e),this.proxy.callCallback("notifyRequestMarked",[e])},notifyCancelMarkedReq:function(e){Cr.Utils.log("[RTC] notifyCancelMarkedReq",e),this.proxy.callCallback("notifyCancelMarkedReq",[e])},notifyStartMarked:function(e){Cr.Utils.log("[RTC] notifyStartMarked",e),this.proxy.callCallback("notifyStartMarked",[e])},notifyStopMarked:function(e){Cr.Utils.log("[RTC] notifyStopMarked",e),this.proxy.callCallback("notifyStopMarked",[e])},notifyEnableOtherMarked:function(e,t){Cr.Utils.log("[RTC] notifyEnableOtherMarked",e,t),this.proxy.callCallback("notifyEnableOtherMarked",[e,t])},notifyMakeIFrame:function(e){Cr.Utils.log("[RTC] notifyScMakeIFrame"),this.proxy.callCallback("notifyScMakeIFrame",[e])},notifyMarkData:function(e){Cr.Utils.log("[RTC] notifyMarkData",e),this.proxy.callCallback("notifyMarkData",[e])},notifyClearAllMarks:function(){Cr.Utils.log("[RTC] notifyClearAllMarks"),this.proxy.callCallback("notifyClearAllMarks")},notifyIndicator:function(e,t){Cr.Utils.log("[RTC] notifyIndicator",e,t),this.proxy.callCallback("notifyIndicator",[e,t])}}),MediaReceptor=Ice.Class(Conference.MediaCallback,{setProxy:function(e){this.proxy=e},notifyStartPlayMedia:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCMedia&&(e=CRRTCMedia.ICECallback.notifyStartPlayMedia).call.apply(e,[CRRTCMedia].concat(n))},notifyStopPlayMedia:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCMedia&&(e=CRRTCMedia.ICECallback.notifyStopPlayMedia).call.apply(e,[CRRTCMedia].concat(n))},notifyPausePlayMedia:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCMedia&&(e=CRRTCMedia.ICECallback.notifyPausePlayMedia).call.apply(e,[CRRTCMedia].concat(n))},notifyMakeIFrame:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCMedia&&(e=CRRTCMedia.ICECallback.notifyMakeIFrame).call.apply(e,[CRRTCMedia].concat(n))},notifySubscribeMedia:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];CRRTCMedia&&(e=CRRTCMedia.ICECallback.notifySubscribeMedia).call.apply(e,[CRRTCMedia].concat(n))}}),ConferenceReceptor=Ice.Class(Conference.ConferenceCallback,(_defineProperty2(_Ice$Class={setProxy:function(e){this.proxy=e},entered:function(e){Cr.parseMemberInfo(e),Cr.Utils.log("[RTC] New member entered..."),this.proxy.callCallback("entered",[e])},left:function(e,t,n,i){Cr.Utils.log("[RTC] User left meeting...  reason: "+i),this.proxy.callCallback("left",[t,i])},actorChanged:function(){Cr.Utils.log("[RTC] actorChanged")},nicknameChanged:function(e,t,n){Cr.Utils.log("[RTC] nicknameChanged"),this.proxy.callCallback("notifyNicknameChanged",arguments)},optionChanged:function(){Cr.Utils.log("[RTC] optionChanged")},agendaUpdated:function(){Cr.Utils.log("[RTC] agendaUpdated")},autoEndCancelled:function(){Cr.Utils.log("[RTC] autoEndCancelled")},conferenceBegan:function(){Cr.Utils.log("[RTC] conferenceBegan")},conferenceEnded:function(e){Cr.Utils.log("[RTC] conferenceEnded"),this.proxy.callCallback("conferenceEnded",e)},confirmAutoEnd:function(){Cr.Utils.log("[RTC] confirmAutoEnd")},inviteStateChanged:function(){Cr.Utils.log("[RTC] inviteStateChanged:")},memberCount:function(){Cr.Utils.log("[RTC] memberCount")},notifyApplyDemo:function(){Cr.Utils.log("[RTC] notifyApplyDemo")},notifyApplyRejected:function(){Cr.Utils.log("[RTC] notifyApplyRejected")},notifyAssistantChanged:function(){Cr.Utils.log("[RTC] notifyAssistantChanged")},notifyNetDetectResults:function(){Cr.Utils.log("[RTC] notifyNetDetectResults")},notifyReportStatus:function(){Cr.Utils.log("[RTC] notifyReportStatus")},exeCmd:function(){Cr.Utils.log("[RTC] exeCmd")},notifyStart1v1SubMeeting:function(){Cr.Utils.log("[RTC] notifyStart1v1SubMeeting")},notifyStop1v1SubMeeting:function(){Cr.Utils.log("[RTC] notifyStop1v1SubMeeting")},notifyStart1v1SubMeetingRslt:function(){Cr.Utils.log("[RTC] notifyStart1v1SubMeetingRslt")},setWDT1v1SubMeetingMode:function(){Cr.Utils.log("[RTC] setWDT1v1SubMeetingMode")},notifyIVRStatus:function(){Cr.Utils.log("[RTC] notifyIVRStatus")},notifyStartSvrBroadcast:function(){Cr.Utils.log("[RTC] notifyStartSvrBroadcast")},notifyLuckyDrawCfg:function(){Cr.Utils.log("[RTC] notifyLuckyDrawCfg")},notifyLuckyDrawResult:function(){Cr.Utils.log("[RTC] notifyLuckyDrawResult")},roomKnocked:function(){Cr.Utils.log("[RTC] roomKnocked")},roomStateChanged:function(){Cr.Utils.log("[RTC] roomStateChanged")},serverNotify:function(e){Cr.Utils.log("[RTC] serverNotify, id:"+e)},serverNotifyMsg:function(e){Cr.Utils.log("[RTC] serverNotifyMsg, msg:"+e)},subjectUpdated:function(){Cr.Utils.log("[RTC] subjectUpdated")},updateAppStatus:function(){Cr.Utils.log("[RTC] updateAppStatus")},notifyStartBroadCast:function(){Cr.Utils.log("[RTC] notifyStartBroadCast"),this.proxy.callCallback("notifyStartBroadCast")},notifyStopBroadCast:function(){Cr.Utils.log("[RTC] notifyStopBroadCast"),this.proxy.callCallback("notifyStopBroadCast")},notifyWebViewerNum:function(){Cr.Utils.log("[RTC] notifyWebViewerNum")},notifyBroadCastStartPush:function(){Cr.Utils.log("[RTC] notifyBroadCastStartPush"),this.proxy.callCallback("notifyBroadCastStartPush")},notifyBroadCastStopPush:function(){Cr.Utils.log("[RTC] CR__NotifyBroadCastStopPush"),this.proxy.callCallback("notifyBroadCastStopPush")},rightChanged:function(e){var t=Array.from(e.addedRights),n=Array.from(e.reducedRights);CR__RightChanged.call([e.termId,t,n]),Cr.Utils.log("[RTC] rightChanged"),this.proxy.callCallback("rightChanged",[e.termId,t,n])},notifyBroadCastPlayback:function(e){this.proxy.callCallback("notifyPlayBackStartPush",[e])},notifypayback:function(){this.proxy.callCallback("notifypayback")},notifyBroadCastPlaybackStop:function(e){this.proxy.callCallback("notifyBroadCastPlaybackStop",[e])},notifySwtichLiveAppElements:function(e,t){this.proxy.callCallback("notifySwtichLiveAppElements",[e,t])},notifyThumbUp:function(e,t,n){this.proxy.callCallback("notifyThumbUp",[e,t,n])}},"notifyLuckyDrawCfg",function(e){this.proxy.callCallback("notifyLuckyDrawCfg",[e.cdTime,e.isAutoDraw,e.memberType,e.prizes])}),_defineProperty2(_Ice$Class,"notifyLDMembersStatus",function(e){this.proxy.callCallback("notifyLDMembersStatus",e)}),_defineProperty2(_Ice$Class,"notifyLuckyDrawResult",function(e){this.proxy.callCallback("notifyLuckyDrawResult",[e.prize,e.annouceTime,e.res])}),_defineProperty2(_Ice$Class,"notifySvrRecordStateChanged",function(){var e;(e=CRRTCRecord.ICECallback).notifySvrRecordStateChanged.apply(e,arguments)}),_defineProperty2(_Ice$Class,"notifySvrRecordCfgChanged",function(){var e;(e=CRRTCRecord.ICECallback).notifySvrRecordCfgChanged.apply(e,arguments)}),_defineProperty2(_Ice$Class,"notifySvrRecordFileState",function(){var e;(e=CRRTCRecord.ICECallback).notifySvrRecordFileState.apply(e,arguments)}),_defineProperty2(_Ice$Class,"notifySvrBroadcastCfgChanged",function(e,t){this.proxy.callCallback("notifySvrBroadcastCfgChanged",[e,t])}),_defineProperty2(_Ice$Class,"notifyTerminalMsg",function(){var e;(e=CRRTCTermMsg.ICECallback).notifyTerminalMsg.apply(e,arguments)}),_defineProperty2(_Ice$Class,"notifyAppUILocked",function(){Cr.Utils.log("[RTC] notifyAppUILocked")}),_defineProperty2(_Ice$Class,"notifyBeginVote",function(){Cr.Utils.log("[RTC] notifyBeginVote")}),_defineProperty2(_Ice$Class,"notifyEndVote",function(){Cr.Utils.log("[RTC] notifyEndVote")}),_defineProperty2(_Ice$Class,"notifyPublishVoteResult",function(){Cr.Utils.log("[RTC] notifyPublishVoteResult")}),_defineProperty2(_Ice$Class,"notifyCommitVote",function(){Cr.Utils.log("[RTC] notifyCommitVote")}),_defineProperty2(_Ice$Class,"notifyMeetingAttrsChanged",function(){var e;(e=CRRTCAttr.ICECallback).notifyMeetingAttrsChanged.apply(e,arguments)}),_defineProperty2(_Ice$Class,"notifyUserAttrsChanged",function(){var e;(e=CRRTCAttr.ICECallback).notifyUserAttrsChanged.apply(e,arguments)}),_Ice$Class)),AnsQueReceptor=Ice.Class(Conference.AnsQueCallback,{setProxy:function(e){this.proxy=e},askQuesNotify:function(e,t){Cr.Utils.log("[RTC] askQuesNotify(id:%s)",e),this.proxy.callCallback("askQuesNotify",[e,t])},lockQuesNotify:function(e,t){Cr.Utils.log("[RTC] lockQuesNotify(id:%s)",e),this.proxy.callCallback("lockQuesNotify",[e,t])},replyQuesNotify:function(e,t){Cr.Utils.log("[RTC] replyQuesNotify(id:%s)",e),this.proxy.callCallback("replyQuesNotify",[e,t])},modifyQuesNotify:function(e,t){Cr.Utils.log("[RTC] modifyQuesNotify(id:%s)",e),this.proxy.callCallback("modifyQuesNotify",[e,t])},delQuesNotify:function(e,t){Cr.Utils.log("[RTC] delQuesNotify(id:%s)",e),this.proxy.callCallback("delQuesNotify",[e,t])},delAllQuesNotify:function(e){Cr.Utils.log("[RTC] delAllQuesNotify(termId:%s)",e),this.proxy.callCallback("delAllQuesNotify",[e])},publicQuesNotify:function(e,t,n){Cr.Utils.log("[RTC] publicQuesNotify(id:%s)",e),this.proxy.callCallback("publicQuesNotify",[e,t,n])},quesTypeChangeNotify:function(e,t){Cr.Utils.log("[RTC] quesTypeChangeNotify(id:%s)",e),this.proxy.callCallback("quesTypeChangeNotify",[e,t])},modifyQuesTypeNotify:function(e,t){Cr.Utils.log("[RTC] modifyQuesTypeNotify(termId:%s)",e),this.proxy.callCallback("modifyQuesTypeNotify",[e,t])},setBroadCastQuesNotify:function(e){Cr.Utils.log("[RTC] setBroadCastQuesNotify(bEnable:%s)",e),this.proxy.callCallback("setBroadCastQuesNotify",[e])}}),WhiteBoardReceptor=Ice.Class(Conference.WhiteBoardCallback,{setProxy:function(e){this.proxy=e},notifySetContainerSize:function(e,t,n){Cr.Utils.log("[RTC] notifySetContainerSize(id:%s)",e,t,n),this.proxy.callCallback("notifySetContainerSize",[e,t,n])},notifyCreate:function(e){Cr.Utils.log("[RTC] notifyCreate",e),this.proxy.callCallback("notifyCreate",[e])},notifyImportPage:function(e,t,n){Cr.Utils.log("[RTC] notifyImportPage",e,t,n),this.proxy.callCallback("notifyImportPage",[e,t,n])},notifyClose:function(e,t){Cr.Utils.log("[RTC] notifyClose",e,t),this.proxy.callCallback("notifyClose",[e,t])},notifyChangeName:function(e,t,n){Cr.Utils.log("[RTC] notifyChangeName",e,t,n),this.proxy.callCallback("notifyChangeName",[e,t,n])},notifyChangeScale:function(e,t,n){Cr.Utils.log("[RTC] notifyChangeScale",e,t,n),this.proxy.callCallback("notifyChangeScale",[e,t,n])},notifyChangeRotate:function(e,t,n){Cr.Utils.log("[RTC] notifyChangeRotate",e,t,n),this.proxy.callCallback("notifyChangeRotate",[e,t,n])},notifySetCurrentPage:function(e,t,n,i,r){Cr.Utils.log("[RTC] notifySetCurrentPage",e,t,n,i,r),this.proxy.callCallback("notifySetCurrentPage",[e,t,n,i,r])},notifyShowThumPage:function(e,t,n){Cr.Utils.log("[RTC] notifyShowThumPage",e,t,n),this.proxy.callCallback("notifyShowThumPage",[e,t,n])},notifyAddElement:function(e,t,n,i){Cr.Utils.log("[RTC] notifyAddElement",e,t,n,i),this.proxy.callCallback("notifyAddElement",[e,t,n,i])},notifyAddElementEx:function(e,t,n,i){Cr.Utils.log("[RTC] notifyAddElementEx",e,t,n,i),this.proxy.callCallback("notifyAddElementEx",[e,t,n,i])},notifyMoveElement:function(e,t,n,i){Cr.Utils.log("[RTC] notifyMoveElement",e,t,n,i),this.proxy.callCallback("notifyMoveElement",[e,t,n,i])},notifyModifyElement:function(e,t,n,i){Cr.Utils.log("[RTC] notifyModifyElement",e,t,n,i),this.proxy.callCallback("notifyModifyElement",[e,t,n,i])},notifyDelElement:function(e,t,n,i){Cr.Utils.log("[RTC] notifyDelElement",e,t,n,i),this.proxy.callCallback("notifyDelElement",[e,t,n,i])},notifySetElementZPos:function(e,t,n,i){Cr.Utils.log("[RTC] notifySetElementZPos",e,t,n,i),this.proxy.callCallback("notifySetElementZPos",[e,t,n,i])},notifySetIndicator:function(e,t,n){Cr.Utils.log("[RTC] notifySetIndicator",e,t,n),this.proxy.callCallback("notifySetIndicator",[e,t,n])},notifySetHotspot:function(e,t,n,i,r){this.proxy.callCallback("notifySetHotspot",[e,t,n,i,r])},notifySetMarkTerms:function(e,t,n){Cr.Utils.log("[RTC] notifySetMarkTerms",e,t,n),this.proxy.callCallback("notifySetMarkTerms",[e,t,n])}});